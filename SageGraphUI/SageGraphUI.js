/**
 * @version 1.0.0.0
 * @author Hewlett-Packard
 * @copyright Copyright Â© Hewlett-Packard 2017
 * @compiler Bridge.NET 16.0.1
 */
Bridge.assembly("SageGraphUI", function ($asm, globals) {
    "use strict";

    Bridge.define("Algorithms.AssignmentEnumerator", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int64))],
        fields: {
            _vertexCount: 0,
            _f: null,
            _potSize: 0,
            _start: 0,
            _step: 0
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Collections$Generic$List$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (vertexCount, f, potSize, start, step) {
                if (start === void 0) { start = 0; }
                if (step === void 0) { step = 1; }

                this.$initialize();
                this._vertexCount = vertexCount;
                this._f = f;
                this._potSize = potSize;
                this._start = start;
                this._step = step;
            }
        },
        methods: {
            getEnumerator: function () {
                return new Algorithms.AssignmentEnumerator.Enumerator(this._vertexCount, this._f, this._potSize, this._start, this._step);
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            }
        }
    });

    Bridge.define("Algorithms.AssignmentEnumerator.Enumerator", {
        inherits: [System.Collections.Generic.IEnumerator$1(System.Collections.Generic.List$1(System.Int64))],
        fields: {
            _enumerators: null,
            _current: null,
            _step: 0
        },
        props: {
            Current: {
                get: function () {
                    return this._current;
                }
            },
            System$Collections$IEnumerator$Current: {
                get: function () {
                    return this.Current;
                }
            }
        },
        alias: [
            "Current", ["System$Collections$Generic$IEnumerator$1$System$Collections$Generic$List$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1"],
            "dispose", "System$IDisposable$dispose",
            "moveNext", "System$Collections$IEnumerator$moveNext"
        ],
        ctors: {
            ctor: function (vertexCount, f, potSize, start, step) {
                if (start === void 0) { start = 0; }
                if (step === void 0) { step = 1; }

                this.$initialize();
                this._enumerators = new (System.Collections.Generic.List$1(System.Collections.Generic.IEnumerator$1(System.Int64)))(vertexCount);
                var first = Algorithms.Int64Usage.ToInt64(System.Linq.Enumerable.range(0, f(0)));
                this._enumerators.add(function (_o1) {
                        _o1.add(first);
                        return _o1;
                    }(new (System.Collections.Generic.List$1(System.Int64))()).getEnumerator());
                for (var i = 1; i < vertexCount; i = (i + 1) | 0) {
                    this._enumerators.add(new Algorithms.SubsetEnumerator.Enumerator(potSize, f(i)));
                }

                this._step = step;

                for (var i1 = 0; i1 < start; i1 = (i1 + 1) | 0) {
                    if (!this.MoveNextInternal()) {
                        break;
                    }
                }
            }
        },
        methods: {
            dispose: function () { },
            moveNext: function () {
                for (var j = 0; j < this._step; j = (j + 1) | 0) {
                    if (!this.MoveNextInternal()) {
                        return false;
                    }
                }

                return true;
            },
            MoveNextInternal: function () {
                var $t, $t1, $t2;
                if (this._current == null) {
                    this._current = new (System.Collections.Generic.List$1(System.Int64))(this._enumerators.Count);

                    $t = Bridge.getEnumerator(this._enumerators);
                    try {
                        while ($t.moveNext()) {
                            var enumerator = $t.Current;
                            enumerator.System$Collections$IEnumerator$moveNext();
                            this._current.add(enumerator[Bridge.geti(enumerator, "System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1")]);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return true;
                }

                var i = (this._enumerators.Count - 1) | 0;
                while (i >= 1) {
                    if (this._enumerators.getItem(i).System$Collections$IEnumerator$moveNext()) {
                        this._current.setItem(i, ($t1 = this._enumerators.getItem(i))[Bridge.geti($t1, "System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1")]);
                        break;
                    }

                    this._enumerators.getItem(i).System$Collections$IEnumerator$reset();
                    this._enumerators.getItem(i).System$Collections$IEnumerator$moveNext();

                    this._current.setItem(i, ($t2 = this._enumerators.getItem(i))[Bridge.geti($t2, "System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1")]);

                    i = (i - 1) | 0;
                }

                return i >= 1;
            },
            System$Collections$IEnumerator$reset: function () {
                throw new System.NotImplementedException();
            }
        }
    });

    Bridge.define("Algorithms.ChoosabilityResult", {
        props: {
            BadAssignment: null,
            Canceled: false,
            IsChoosable: {
                get: function () {
                    return this.BadAssignment == null;
                }
            }
        },
        ctors: {
            ctor: function (badAssignment, canceled) {
                if (canceled === void 0) { canceled = false; }

                this.$initialize();
                this.BadAssignment = badAssignment;
                this.Canceled = canceled;
            }
        }
    });

    Bridge.define("Algorithms.Counting", {
        statics: {
            methods: {
                BinomialCoefficient: function (n, k) {
                    if (k.lt(System.Int64(0))) {
                        return System.Int64(1);
                    }

                    var max = System.Int64.max(k, n.sub(k));
                    var min = System.Int64.min(k, n.sub(k));

                    var result = System.Int64(1);
                    while (n.gt(max)) {
                        result = result.mul(n);
                        n = n.dec();
                    }

                    while (min.gt(System.Int64(0))) {
                        result = result.div(min);

                        min = min.dec();
                    }

                    return result;
                },
                Factorial: function (n) {
                    var total = System.Int64(1);
                    for (var i = 1; i <= n; i = (i + 1) | 0) {
                        total = total.mul(System.Int64(i));
                    }

                    return total;
                }
            }
        }
    });

    Bridge.define("Algorithms.DataStructures.Bijection$2", function (D, C) { return {
        fields: {
            _f: null,
            _finverse: null
        },
        ctors: {
            init: function () {
                this._f = new (System.Collections.Generic.Dictionary$2(D,C))();
                this._finverse = new (System.Collections.Generic.Dictionary$2(C,D))();
            }
        },
        methods: {
            getItem: function (d) {
                return this._f.get(d);
            },
            setItem: function (d, value) {
                this._f.set(d, value);
                this._finverse.set(value, d);
            },
            getItem$1: function (c) {
                return this._finverse.get(c);
            },
            setItem$1: function (c, value) {
                this._f.set(value, c);
                this._finverse.set(c, value);
            },
            Apply$1: function (e) {
                return System.Linq.Enumerable.from(e).select(Bridge.fn.bind(this, $asm.$.Algorithms.DataStructures.Bijection$2.f1));
            },
            Apply: function (e) {
                return System.Linq.Enumerable.from(e).select(Bridge.fn.bind(this, $asm.$.Algorithms.DataStructures.Bijection$2.f2));
            }
        }
    }; });

    Bridge.ns("Algorithms.DataStructures.Bijection$2", $asm.$);

    Bridge.apply($asm.$.Algorithms.DataStructures.Bijection$2, {
        f1: function (d) {
            return this.getItem(d);
        },
        f2: function (c) {
            return this.getItem$1(c);
        }
    });

    Bridge.define("Algorithms.DataStructures.BijectionExtensions", {
        statics: {
            methods: {
                NumberObjects: function (T, objects) {
                    var $t;
                    var numbering = new (Algorithms.DataStructures.Bijection$2(System.Int32,T))();

                    var i = 0;
                    $t = Bridge.getEnumerator(objects, T);
                    try {
                        while ($t.moveNext()) {
                            var o = $t.Current;
                            numbering.setItem(i, o);
                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return numbering;
                }
            }
        }
    });

    Bridge.define("Algorithms.DataStructures.UnionFind$1", function (T) { return {
        methods: {
            MakeSet: function (t) {
                var node = new (Algorithms.DataStructures.UnionFind$1.Node(T))();
                node.Parent = node;
                node.Rank = 0;
                node.T = t;

                this.RootAdded(node);
                return node;
            },
            Union: function (nx, ny) {
                var xRoot = this.Find(nx);
                var yRoot = this.Find(ny);

                if (Bridge.referenceEquals(xRoot, yRoot)) {
                    return;
                }

                if (xRoot.Rank < yRoot.Rank) {
                    xRoot.Parent = yRoot;
                    this.RootRemoved(xRoot);
                } else if (xRoot.Rank > yRoot.Rank) {
                    yRoot.Parent = xRoot;
                    this.RootRemoved(yRoot);
                } else {
                    yRoot.Parent = xRoot;
                    xRoot.Rank = (xRoot.Rank + 1) | 0;
                    this.RootRemoved(yRoot);
                }
            },
            Find: function (n) {
                if (!Bridge.referenceEquals(n.Parent, n)) {
                    n.Parent = this.Find(n.Parent);
                }

                return n.Parent;
            },
            RootAdded: function (n) { },
            RootRemoved: function (n) { }
        }
    }; });

    Bridge.define("Algorithms.DataStructures.UnionFind$1.Node", function (T) { return {
        props: {
            Parent: null,
            Rank: 0,
            T: Bridge.getDefaultValue(T)
        }
    }; });

    Bridge.define("Algorithms.FixerBreaker.Board", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Int64)],
        statics: {
            fields: {
                StorePermutationInfo: false
            },
            methods: {
                UpdateHash: function (hash, value) {
                    hash.v = System.Int64.clip32(System.Int64(Bridge.Int.mul(37, hash.v)).add(value));
                },
                ApplyMapping$1: function (mapping, stack) {
                    return Algorithms.Int64Usage.ToInt64(Algorithms.FixerBreaker.Board.ApplyMapping(mapping, Algorithms.Int64Usage.ToSet(stack)));
                },
                ApplyMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item2.getItem(mapping.item1.indexOf(c));
                        });
                },
                ApplyInverseMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item1.getItem(mapping.item2.indexOf(c));
                        });
                },
                OtherTurn: function (turn) {
                    return ((1 - turn) | 0);
                }
            }
        },
        fields: {
            Stacks: null,
            _hashCode: 0,
            PotSet: null,
            Traces: null,
            TracesForPermutationInfo: null,
            TraceChangeIndices: null,
            Template: null,
            Pot: System.Int64(0),
            ColorCount: 0,
            Turn: 0,
            N: 0,
            LastMove: null
        },
        props: {
            StackStrings: {
                get: function () {
                    return System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.Board.f1).toList(System.String);
                }
            },
            PotString: {
                get: function () {
                    return Algorithms.Int64Usage.ToSetString$2(this.Pot);
                }
            }
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            init: function () {
                this.LastMove = new Algorithms.FixerBreaker.Move();
            },
            ctor: function (stacks, pot, computeHash) {
                if (computeHash === void 0) { computeHash = true; }

                this.$initialize();
                this.Stacks = stacks;
                this.Pot = pot;
                this.Turn = Algorithms.FixerBreaker.Turn.Fixer;
                this.N = this.Stacks.Count;
                this.Template = new (Algorithms.Lazy$1(Algorithms.FixerBreaker.KnowledgeEngine.Template)).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.Board.f3));
                this.PotSet = Algorithms.Int64Usage.ToSet(this.Pot);
                this.ColorCount = this.PotSet.Count;
                this.Traces = new (System.Collections.Generic.List$1(System.Int64))(this.ColorCount);

                if (Algorithms.FixerBreaker.Board.StorePermutationInfo) {
                    this.TracesForPermutationInfo = new (System.Collections.Generic.List$1(System.Object))(this.ColorCount);
                    this.TraceChangeIndices = new (System.Collections.Generic.List$1(System.Int32))();
                }

                if (computeHash) {
                    this.ComputeHashCode();
                }
            }
        },
        methods: {
            getItem: function (x) {
                return this.Stacks.getItem(x);
            },
            ComputeHashCode: function () {
                var $t, $t1, $t2;
                this._hashCode = this.N;
                Algorithms.FixerBreaker.Board.UpdateHash(Bridge.ref(this, "_hashCode"), this.Turn);

                this.Traces.clear();
                $t = Bridge.getEnumerator(this.PotSet);
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        var t = this.GetTrace(c);
                        if (t.gt(System.Int64(0))) {
                            this.Traces.add(t);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Traces.sort();

                $t1 = Bridge.getEnumerator(this.Traces);
                try {
                    while ($t1.moveNext()) {
                        var t1 = $t1.Current;
                        Algorithms.FixerBreaker.Board.UpdateHash(Bridge.ref(this, "_hashCode"), t1);
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                if (Algorithms.FixerBreaker.Board.StorePermutationInfo) {
                    this.TracesForPermutationInfo.clear();
                    this.TraceChangeIndices.clear();

                    $t2 = Bridge.getEnumerator(this.PotSet);
                    try {
                        while ($t2.moveNext()) {
                            var c1 = $t2.Current;
                            var t2 = this.GetTrace(c1);
                            if (t2.gt(System.Int64(0))) {
                                this.TracesForPermutationInfo.add({ item1: c1, item2: t2 });
                            }
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$dispose();
                        }
                    }
                    this.TracesForPermutationInfo.sort($asm.$.Algorithms.FixerBreaker.Board.f4);

                    var previousTrace = System.Int64(-1);
                    for (var i = 0; i < this.TracesForPermutationInfo.Count; i = (i + 1) | 0) {
                        var t3 = this.TracesForPermutationInfo.getItem(i);

                        if (t3.item2.ne(previousTrace)) {
                            this.TraceChangeIndices.add(i);
                            previousTrace = t3.item2;
                        }
                    }

                    this.TraceChangeIndices.add(this.TracesForPermutationInfo.Count);
                }
            },
            GetTrace: function (c) {
                var k = System.Int64(1).shl(c);
                var trace = System.Int64(0);
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    if ((this.Stacks.getItem(i).and(k)).ne(System.Int64(0))) {
                        trace = trace.or((System.Int64(1).shl(i)));
                    }
                }

                return trace;
            },
            MakeMove: function (move) {
                this.LastMove = move.$clone();

                if (move.Stack >= 0) {
                    this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                }

                this.Turn = Algorithms.FixerBreaker.Board.OtherTurn(this.Turn);

                this.ComputeHashCode();
            },
            DoMoveCombination: function (moves) {
                var $t;
                $t = Bridge.getEnumerator(moves, Algorithms.FixerBreaker.Move);
                try {
                    while ($t.moveNext()) {
                        var move = $t.Current.$clone();
                        this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.ComputeHashCode();
            },
            Clone: function () {
                var clone = new Algorithms.FixerBreaker.Board(System.Linq.Enumerable.from(this.Stacks).toList(System.Int64), this.Pot);
                clone.Turn = this.Turn;
                clone.LastMove = this.LastMove.$clone();
                clone._hashCode = this._hashCode;

                clone.ComputeHashCode();

                return clone;
            },
            DoMoveCombinationOnClone: function (swap) {
                var clone = new Algorithms.FixerBreaker.Board(System.Linq.Enumerable.from(this.Stacks).toList(System.Int64), this.Pot, false);
                clone.Turn = this.Turn;
                clone.LastMove = this.LastMove.$clone();

                clone.DoMoveCombination(swap);

                return clone;
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.FixerBreaker.Board));
            },
            Equals: function (other) {
                if (other == null) {
                    return false;
                }
                if (this.Turn !== other.Turn) {
                    return false;
                }
                if (this.N !== other.N) {
                    return false;
                }

                return System.Linq.Enumerable.from(this.Traces).sequenceEqual(other.Traces);
            },
            FindPermutation: function (other) {
                if (!Algorithms.FixerBreaker.Board.StorePermutationInfo) {
                    throw new System.Exception("not storing permutation info");
                }

                if (!System.Linq.Enumerable.from(this.TracesForPermutationInfo).select($asm.$.Algorithms.FixerBreaker.Board.f5).sequenceEqual(System.Linq.Enumerable.from(other.TracesForPermutationInfo).select($asm.$.Algorithms.FixerBreaker.Board.f5))) {
                    return null;
                }

                var mappingPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < ((this.TraceChangeIndices.Count - 1) | 0); i = (i + 1) | 0) {
                    var domain = new (System.Collections.Generic.List$1(System.Int32))();
                    var codomain = new (System.Collections.Generic.List$1(System.Int32))();

                    for (var j = this.TraceChangeIndices.getItem(i); j < this.TraceChangeIndices.getItem(((i + 1) | 0)); j = (j + 1) | 0) {
                        domain.add(this.TracesForPermutationInfo.getItem(j).item1);
                        codomain.add(other.TracesForPermutationInfo.getItem(j).item1);
                    }

                    mappingPairs.add({ item1: domain, item2: codomain });
                }

                return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Object, System.Linq.Enumerable.from(mappingPairs).select($asm.$.Algorithms.FixerBreaker.Board.f6))).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.Board.f7)).firstOrDefault(Bridge.fn.bind(this, function (mapping) {
                        return this.SequenceEqualPermuted(mapping, other);
                    }), null);
            },
            FlattenMapping: function (mapping) {
                return { item1: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.Board.f8).toList(System.Int32), item2: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.Board.f9).toList(System.Int32) };
            },
            SequenceEqualPermuted: function (mapping, other) {
                for (var i = 0; i < this.Stacks.Count; i = (i + 1) | 0) {
                    var permutedStack = Algorithms.FixerBreaker.Board.ApplyMapping$1(mapping, this.Stacks.getItem(i));
                    if (permutedStack.ne(other.Stacks.getItem(i))) {
                        return false;
                    }
                }

                if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                    return true;
                }

                if (this.LastMove.Stack !== other.LastMove.Stack) {
                    return false;
                }

                var ours = System.Array.init([this.LastMove.Added, this.LastMove.Removed], System.Int32);
                var theirs = function (_o2) {
                        _o2.add(other.LastMove.Added);
                        _o2.add(other.LastMove.Removed);
                        return _o2;
                    }(new (System.Collections.Generic.List$1(System.Int32))());

                return Algorithms.Utility.ListUtility.Equal(System.Int32, System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(mapping, ours)).toList(System.Int32), theirs);
            },
            getHashCode: function () {
                return this._hashCode;
            },
            getEnumerator: function () {
                return this.Stacks.getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.Board.f10)).join("|");
            },
            ToTex: function () {
                return Algorithms.GenericExtensions.JoinPretty(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.Board.f11), ", ");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.Board", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.Board, {
        f1: function (s) {
            return Algorithms.Int64Usage.ToSetString$2(s);
        },
        f2: function (s) {
            return Algorithms.Int64Usage.PopulationCount(s);
        },
        f3: function () {
            return new Algorithms.FixerBreaker.KnowledgeEngine.Template.ctor(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.Board.f2).toList(System.Int32));
        },
        f4: function (x, y) {
            return x.item2.compareTo(y.item2);
        },
        f5: function (t) {
            return t.item2;
        },
        f6: function (mp) {
            return System.Linq.Enumerable.from(Algorithms.Utility.Permutation.EnumerateAll(mp.item2.Count)).select(function (p) {
                    return { item1: mp.item1, item2: p.Apply(System.Int32, mp.item2) };
                });
        },
        f7: function (mapping) {
            return this.FlattenMapping(mapping);
        },
        f8: function (x) {
            return x.item1;
        },
        f9: function (x) {
            return x.item2;
        },
        f10: function (x) {
            return Algorithms.Int64Usage.ToSetStringSmall(x);
        },
        f11: function (stack, i) {
            return System.String.concat("$L(v_" + (((i + 1) | 0)) + ") = ", System.String.replaceAll(System.String.replaceAll(Algorithms.Int64Usage.ToSetString$2(stack), "{", "\\{"), "}", "\\}"), "$");
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Chronicle.BranchGenerator", {
        statics: {
            fields: {
                PartitionsCache: null
            },
            ctors: {
                init: function () {
                    this.PartitionsCache = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))))();
                }
            },
            methods: {
                GetPartitions: function (count) {
                    var partitions = { };
                    if (!Algorithms.FixerBreaker.Chronicle.BranchGenerator.PartitionsCache.tryGetValue(count, partitions)) {
                        partitions.v = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions$1(count)).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                        Algorithms.FixerBreaker.Chronicle.BranchGenerator.PartitionsCache.set(count, partitions.v);
                    }

                    return partitions.v;
                },
                EnumerateBranches: function (board, colorPair) {
                    var S = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, colorPair)).toList(System.Int32);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(S.Count);

                    return System.Linq.Enumerable.from(partitions).select(function (partition) {
                            return new Algorithms.FixerBreaker.Chronicle.ChronicledBranch(S, colorPair.item1, colorPair.item2, partition);
                        });
                },
                EnumeratePartitions$1: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            $t,
                            partition,
                            i,
                            $t1,
                            partition1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (n % 2 === 0) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            $t = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions(System.Linq.Enumerable.range(0, n).toList(System.Int32)), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 2;
                                                continue;
                                        }
                                        case 2: {
                                            if ($t.moveNext()) {
                                                    partition = $t.Current;
                                                    $step = 3;
                                                    continue;
                                                }
                                            $step = 5;
                                            continue;
                                        }
                                        case 3: {
                                            $enumerator.current = partition;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 2;
                                            continue;
                                        }
                                        case 5: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 6: {
                                            i = 0;
                                                $step = 7;
                                                continue;
                                        }
                                        case 7: {
                                            if ( i < n ) {
                                                    $step = 8;
                                                    continue;
                                                }
                                            $step = 14;
                                            continue;
                                        }
                                        case 8: {
                                            $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions(System.Linq.Enumerable.range(0, n).where(function (j) {
                                                    return j !== i;
                                                }).toList(System.Int32)), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 9;
                                                continue;
                                        }
                                        case 9: {
                                            if ($t1.moveNext()) {
                                                    partition1 = $t1.Current;
                                                    $step = 10;
                                                    continue;
                                                }
                                            $step = 12;
                                            continue;
                                        }
                                        case 10: {
                                            partition1.insert(0, function (_o3) {
                                                        _o3.add(i);
                                                        return _o3;
                                                    }(new (System.Collections.Generic.List$1(System.Int32))()));
                                                $enumerator.current = partition1;
                                                $step = 11;
                                                return true;
                                        }
                                        case 11: {
                                            $step = 9;
                                            continue;
                                        }
                                        case 12: {
                                            $step = 13;
                                            continue;
                                        }
                                        case 13: {
                                            i = (i + 1) | 0;
                                            $step = 7;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumeratePartitions: function (indices) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (indices) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            first,
                            i,
                            part,
                            $t,
                            partition,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (indices.Count <= 0) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 3;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            $enumerator.current = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 12;
                                            continue;
                                        }
                                        case 3: {
                                            first = indices.getItem(0);
                                                indices.removeAt(0);
                                                i = 0;
                                                $step = 4;
                                                continue;
                                        }
                                        case 4: {
                                            if ( i < indices.Count ) {
                                                    $step = 5;
                                                    continue;
                                                }
                                            $step = 11;
                                            continue;
                                        }
                                        case 5: {
                                            part = function (_o4) {
                                                        _o4.add(first);
                                                        _o4.add(indices.getItem(i));
                                                        return _o4;
                                                    }(new (System.Collections.Generic.List$1(System.Int32))());
                                                indices.removeAt(i);

                                                $t = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumeratePartitions(indices), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 6;
                                                continue;
                                        }
                                        case 6: {
                                            if ($t.moveNext()) {
                                                    partition = $t.Current;
                                                    $step = 7;
                                                    continue;
                                                }
                                            $step = 9;
                                            continue;
                                        }
                                        case 7: {
                                            partition.add(part);
                                                $enumerator.current = partition;
                                                $step = 8;
                                                return true;
                                        }
                                        case 8: {
                                            $step = 6;
                                            continue;
                                        }
                                        case 9: {
                                            indices.insert(i, part.getItem(1));
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            i = (i + 1) | 0;
                                            $step = 4;
                                            continue;
                                        }
                                        case 11: {
                                            indices.insert(0, first);
                                            $step = 12;
                                            continue;
                                        }
                                        case 12: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateExactlyOneIntersecters: function (board, colorPair) {
                    return System.Linq.Enumerable.range(0, board.Stacks.Count).where(function (i) {
                        return Algorithms.Int64Usage.IsBitSet(board.Stacks.getItem(i), System.Int64(colorPair.item1)) ^ Algorithms.Int64Usage.IsBitSet(board.Stacks.getItem(i), System.Int64(colorPair.item2));
                    });
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Move", {
        $kind: "struct",
        statics: {
            methods: {
                getDefaultValue: function () { return new Algorithms.FixerBreaker.Move(); }
            }
        },
        fields: {
            Stack: 0,
            Added: 0,
            Removed: 0
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            getHashCode: function () {
                var h = Bridge.addHash([1702260557, this.Stack, this.Added, this.Removed]);
                return h;
            },
            equals: function (o) {
                if (!Bridge.is(o, Algorithms.FixerBreaker.Move)) {
                    return false;
                }
                return Bridge.equals(this.Stack, o.Stack) && Bridge.equals(this.Added, o.Added) && Bridge.equals(this.Removed, o.Removed);
            },
            $clone: function (to) {
                var s = to || new Algorithms.FixerBreaker.Move();
                s.Stack = this.Stack;
                s.Added = this.Added;
                s.Removed = this.Removed;
                return s;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge", {
        props: {
            Board: null,
            Reason: null,
            Depth: 0,
            ColorPair: null,
            Swaps: null
        },
        ctors: {
            ctor: function (board, reason) {
                this.$initialize();
                this.Board = board;
                this.Reason = reason;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer", {
        $kind: "interface"
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge", {
        props: {
            Graph: null,
            LineGraph: null,
            Edges: null,
            EdgeIndices: null,
            Leaves: null,
            ConnectedOrderings: null
        },
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this.Graph = g;
                this.Leaves = System.Linq.Enumerable.from(this.Graph.Vertices).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge.f1)).toList(System.Int32);
                this.BuildLineGraph();

                this.ConnectedOrderings = new (Algorithms.Lazy$1(System.Collections.Generic.Dictionary$2(System.Object,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var co = new (System.Collections.Generic.Dictionary$2(System.Object,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))();
                    $t = Bridge.getEnumerator(this.Edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            co.set(e, System.Linq.Enumerable.from(this.Graph.EnumerateConnectedOrderings((function ($me, e) {
                                        return function (_o5) {
                                            _o5.add(e.item1);
                                            _o5.add(e.item2);
                                            return _o5;
                                        };
                                    })(this, e)(new (System.Collections.Generic.List$1(System.Int32))()))).toList(System.Collections.Generic.List$1(System.Int32)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return co;
                }));
            }
        },
        methods: {
            BuildLineGraph: function () {
                var adjacent = this.Graph.Adjacent;
                var n = ((System.Array.getLength(adjacent, 0) - 1) + 1) | 0;

                this.Edges = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        if (adjacent.get([i, j])) {
                            this.Edges.add({ item1: i, item2: j });
                        }
                    }
                }

                this.EdgeIndices = System.Linq.Enumerable.range(0, this.Edges.Count).toList(System.Int32);

                var meets = System.Array.create(false, null, System.Boolean, this.Edges.Count, this.Edges.Count);
                for (var i1 = 0; i1 < this.Edges.Count; i1 = (i1 + 1) | 0) {
                    for (var j1 = (i1 + 1) | 0; j1 < this.Edges.Count; j1 = (j1 + 1) | 0) {
                        if (this.Edges.getItem(i1).item1 === this.Edges.getItem(j1).item1 || this.Edges.getItem(i1).item1 === this.Edges.getItem(j1).item2 || this.Edges.getItem(i1).item2 === this.Edges.getItem(j1).item1 || this.Edges.getItem(i1).item2 === this.Edges.getItem(j1).item2) {
                            meets.set([i1, j1], (meets.set([j1, i1], true), true));
                        }
                    }
                }

                this.LineGraph = new Algorithms.Graph.ctor(meets);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge, {
        f1: function (v) {
            return this.Graph.Degree(v) === 1;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.IMind", {
        $kind: "interface"
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Knowledge", {
        fields: {
            _templateLookup: null
        },
        props: {
            GraphKnowledge: null
        },
        ctors: {
            init: function () {
                this._templateLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Template,Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge))();
            },
            ctor: function (g) {
                this.$initialize();
                this.GraphKnowledge = new Algorithms.FixerBreaker.KnowledgeEngine.GraphKnowledge(g);
            }
        },
        methods: {
            getItem: function (template) {
                var p = { };
                if (!this._templateLookup.tryGetValue(template, p)) {
                    p.v = new Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge(template);
                    this._templateLookup.set(template, p.v);
                }

                return p.v;
            },
            GetEdgeColorList: function (board, edgeIndex) {
                return board.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item1).and(board.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item2));
            },
            GetEdgeColorList$1: function (stacks, edgeIndex) {
                return stacks.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item1).and(stacks.getItem(this.GraphKnowledge.Edges.getItem(edgeIndex).item2));
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Tree$1", function (T) { return {
        props: {
            Parent: Bridge.getDefaultValue(T),
            This: Bridge.getDefaultValue(T),
            Children: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
                this.This = Bridge.cast(this, T);
                this.Children = new (System.Collections.Generic.List$1(T))();
            }
        },
        methods: {
            RemoveChild: function (child) {
                this.Children.remove(child);
            },
            AddChild: function (child) {
                child.Parent = this.This;
                this.Children.add(child);
            },
            GetDepth: function () {
                var $t;
                var depth = 0;
                $t = Bridge.getEnumerator(this.Children);
                try {
                    while ($t.moveNext()) {
                        var child = $t.Current;
                        depth = Math.max(depth, ((child.GetDepth() + 1) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return depth;
            },
            Traverse: function (onDescent, maxDepth) {
                if (maxDepth === void 0) { maxDepth = 2147483647; }
                this.TraverseInternal(onDescent, maxDepth, 0);
            },
            TraverseInternal: function (onDescent, maxDepth, depth) {
                var $t;
                if (depth >= ((maxDepth - 1) | 0)) {
                    return;
                }

                $t = Bridge.getEnumerator(this.Children);
                try {
                    while ($t.moveNext()) {
                        var child = $t.Current;
                        onDescent(this.This, child);
                        child.TraverseInternal(onDescent, maxDepth, ((depth + 1) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            BuildGraph: function (maxDepth) {
                if (maxDepth === void 0) { maxDepth = 2147483647; }
                var vertices = 0;
                var vertexLookup = new (System.Collections.Generic.Dictionary$2(T,System.Int32))();
                var treeLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,T))();
                var edges = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();

                this.Traverse(function (parent, child) {
                    var p = { };
                    if (!vertexLookup.tryGetValue(parent, p)) {
                        p.v = Bridge.identity(vertices, (vertices = (vertices + 1) | 0));
                        vertexLookup.set(parent, p.v);
                        treeLookup.set(p.v, parent);

                        edges.set(p.v, new (System.Collections.Generic.List$1(System.Int32))());
                    }

                    var c = { };
                    if (!vertexLookup.tryGetValue(child, c)) {
                        c.v = Bridge.identity(vertices, (vertices = (vertices + 1) | 0));
                        vertexLookup.set(child, c.v);
                        treeLookup.set(c.v, child);

                        edges.set(c.v, new (System.Collections.Generic.List$1(System.Int32))());
                    }

                    edges.get(p.v).add(c.v);
                }, maxDepth);

                if (vertices === 0) {
                    treeLookup.set(0, Bridge.cast(this, T));
                    edges.set(0, new (System.Collections.Generic.List$1(System.Int32))());
                }

                var edgeWeights = new (System.Collections.Generic.List$1(System.Int32))();
                for (var i = 0; i < vertices; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < vertices; j = (j + 1) | 0) {
                        if (edges.get(i).contains(j)) {
                            edgeWeights.add(1);
                        } else {
                            if (edges.get(j).contains(i)) {
                                edgeWeights.add(-1);
                            } else {
                                edgeWeights.add(0);
                            }
                        }
                    }
                }

                return { item1: new Algorithms.Graph.$ctor1(edgeWeights), item2: treeLookup };
            }
        }
    }; });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge", {
        statics: {
            fields: {
                Infinity: 0
            },
            ctors: {
                init: function () {
                    this.Infinity = 2147483647;
                }
            },
            methods: {
                Exists: function (o) {
                    return o != null;
                },
                Naturals: function () {
                    return System.Linq.Enumerable.range(0, Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity);
                },
                Interval: function (first, last) {
                    return System.Linq.Enumerable.range(first, ((((last - first) | 0) + 1) | 0));
                },
                TryParseInt: function (s) {
                    var x = { };
                    if (System.Int32.tryParse(s, x)) {
                        return x.v;
                    }

                    return null;
                },
                TryParseDouble: function (s) {
                    var x = { };
                    if (System.Double.tryParse(s, null, x)) {
                        return x.v;
                    }

                    return null;
                },
                DegreeCondition: function (g, b, missingEdges) {
                    if (missingEdges === void 0) { missingEdges = null; }
                    return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(g, b.Stacks, b.Pot);
                },
                DegreeCondition$1: function (g, stacks, pot, missingEdges) {
                    var $t;
                    if (missingEdges === void 0) { missingEdges = null; }
                    if (Bridge.staticEquals(missingEdges, null)) {
                        missingEdges = $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.f1;
                    }

                    var colorGraphs = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(stacks, pot);

                    $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, g.Vertices), System.Collections.Generic.List$1(System.Int32));
                    try {
                        while ($t.moveNext()) {
                            var X = $t.Current;
                            var e = (g.EdgesOn(X) - missingEdges(X)) | 0;

                            if (e <= 0) {
                                continue;
                            }

                            var value = System.Linq.Enumerable.from(colorGraphs).sum((function ($me, X) {
                                    return function (cg) {
                                        return ((Bridge.Int.div(Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, cg, X), 2)) | 0);
                                    };
                                })(this, X));

                            if (value < e) {
                                return false;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return true;
                },
                GetColorGraphs: function (stacks, pot) {
                    return System.Linq.Enumerable.from(Algorithms.Int64Usage.EnumerateBits(pot)).select(function (alpha) {
                            return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.G_alpha(alpha, stacks)).toList(System.Int32);
                        }).toList(System.Collections.Generic.List$1(System.Int32));
                },
                G_alpha: function (alpha, stacks) {
                    return Algorithms.GenericExtensions.IndicesWhere(System.Int64, stacks, function (stack) {
                        return Algorithms.Int64Usage.IsBitSet(stack, System.Int64(alpha));
                    });
                },
                d_H: function (alpha, stacksInH) {
                    return System.Linq.Enumerable.from(stacksInH).count(function (stack) {
                            return Algorithms.Int64Usage.IsBitSet(stack, System.Int64(alpha));
                        });
                },
                Surplus: function (board, g) {
                    return ((System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(board.Stacks, board.Pot)).sum($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.f2) - g.E) | 0);
                },
                Surplus$1: function (board, g, vertices) {
                    return ((System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(board.Stacks, board.Pot)).sum(function (cg) {
                            return ((Bridge.Int.div(Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, cg, vertices), 2)) | 0);
                        }) - g.EdgesOn(vertices)) | 0);
                },
                ToConsole: function (s) { },
                MapMove: function (f, move) {
                    var $t;
                    var mappedMove = ($t = new Algorithms.FixerBreaker.Move(), $t.Stack = move.Stack, $t);
                    var m = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(f, System.Array.init([move.Added, move.Removed], System.Int32))).toList(System.Int32);

                    mappedMove.Added = m.getItem(0);
                    mappedMove.Removed = m.getItem(1);

                    return mappedMove.$clone();
                }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge, {
        f1: function (Y) {
            return 0;
        },
        f2: function (cg) {
            return ((Bridge.Int.div(cg.Count, 2)) | 0);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Mind", {
        statics: {
            fields: {
                TreeNodeNumber: 0
            },
            ctors: {
                init: function () {
                    this.TreeNodeNumber = 1;
                }
            }
        },
        props: {
            StopAnalysisOnBreakerWin: false,
            FindCleanestWin: false,
            NearlyColorableOnly: false,
            SuperabundantOnly: false,
            MinPot: 0,
            MaxPot: 0,
            BreakerWonBoard: null,
            FixerWonAllNearlyColorableBoards: false,
            TotalPositions: 0,
            BoardAnalysisPipeline: null,
            Knowledge: null
        },
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this.FindCleanestWin = true;
                this.SuperabundantOnly = true;
                this.NearlyColorableOnly = false;
                this.MaxPot = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;
                this.Knowledge = new Algorithms.FixerBreaker.KnowledgeEngine.Knowledge(g);

                this.BoardAnalysisPipeline = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer))();
                this.BoardAnalysisPipeline.add(new Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer());
            }
        },
        methods: {
            AddBoardAnalyzer: function (analyzer) {
                this.BoardAnalysisPipeline.add(analyzer);
            },
            Analyze: function (template, progress) {
                var $t, $t1;
                if (progress === void 0) { progress = null; }
                this.TotalPositions = 0;
                this.FixerWonAllNearlyColorableBoards = true;

                this.EnsureSwapAnalyzerExistence();

                var minimumColorCount = Math.max(this.MinPot, System.Linq.Enumerable.from(template.Sizes).max());
                var maximumColorCount = Math.min(this.MaxPot, System.Linq.Enumerable.from(template.Sizes).sum());

                var foundAtLeastOneBoard = false;
                $t = Bridge.getEnumerator(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Interval(minimumColorCount, maximumColorCount), System.Int32);
                try {
                    while ($t.moveNext()) {
                        var colorCount = $t.Current;
                        if (!Bridge.staticEquals(progress, null)) {
                            progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.IsInitialThought = true, $t1));
                        }

                        var boards = System.Linq.Enumerable.from(this.GenerateAllBoards(template, colorCount, progress)).toList(Algorithms.FixerBreaker.Board);
                        if (foundAtLeastOneBoard && boards.Count <= 0) {
                            break;
                        }

                        this.TotalPositions = (this.TotalPositions + boards.Count) | 0;
                        foundAtLeastOneBoard = true;

                        var breakerWin = !this.Analyze$1(boards, progress);
                        if (breakerWin && this.StopAnalysisOnBreakerWin) {
                            return false;
                        }

                        this.Knowledge.getItem(template).Promote(colorCount);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return System.Linq.Enumerable.from(this.Knowledge.getItem(template).LostBoards).count() <= 0;
            },
            Analyze$1: function (boards, progress) {
                var $t, $t1, $t2;
                if (progress === void 0) { progress = null; }
                var winLength = 0;

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(this.BoardAnalysisPipeline).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f1));
                try {
                    while ($t.moveNext()) {
                        var analyzer = $t.Current;
                        var chunk = { v : new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.Board))() };
                        Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.Board, boards, (function ($me, analyzer) {
                            return Bridge.fn.bind($me, function (b) {
                                return analyzer.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze(this.Knowledge, b);
                            });
                        })(this, analyzer), (function ($me, chunk) {
                            return function (removed) {
                                var $t1;
                                chunk.v.add(removed);

                                if (chunk.v.Count > 100) {
                                    if (!Bridge.staticEquals(progress, null)) {
                                        progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsRemoved = System.Linq.Enumerable.from(chunk.v).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = winLength, $t1));
                                    }

                                    chunk.v.clear();
                                }
                            };
                        })(this, chunk));

                        if (chunk.v.Count > 0) {
                            if (!Bridge.staticEquals(progress, null)) {
                                progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsRemoved = System.Linq.Enumerable.from(chunk.v).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = winLength, $t1));
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var knowledgeDependentAnalyzers = System.Linq.Enumerable.from(this.BoardAnalysisPipeline).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f2).toList(Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer);

                while (boards.Count > 0) {
                    winLength = (winLength + 1) | 0;

                    var count = boards.Count;

                    $t1 = Bridge.getEnumerator(knowledgeDependentAnalyzers);
                    try {
                        while ($t1.moveNext()) {
                            var analyzer1 = $t1.Current;
                            Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.Board, boards, Bridge.fn.bind(this, function (b) {
                                return analyzer1.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze(this.Knowledge, b);
                            }), function (removed) {
                                var $t2;
                                if (!Bridge.staticEquals(progress, null)) {
                                    progress(($t2 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t2.BoardsRemoved = Algorithms.GenericExtensions.EnList(Algorithms.FixerBreaker.Board, removed), $t2.WinLength = winLength, $t2));
                                }
                            });
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    if (boards.Count === count) {
                        $t2 = Bridge.getEnumerator(boards);
                        try {
                            while ($t2.moveNext()) {
                                var b = $t2.Current;
                                this.Knowledge.getItem(b.Template.Value).getItem(b.ColorCount).AddLoss(b);
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }
                        var g = { v : this.Knowledge.GraphKnowledge.Graph };

                        var nearlyColorable = System.Linq.Enumerable.range(0, this.Knowledge.GraphKnowledge.LineGraph.N).all(Bridge.fn.bind(this, function (e) {
                            return System.Linq.Enumerable.from(boards).any(Bridge.fn.bind(this, function (b1) {
                                    return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b1, e);
                                }));
                        }));
                        if (nearlyColorable) {
                            this.FixerWonAllNearlyColorableBoards = false;
                            this.BreakerWonBoard = System.Linq.Enumerable.from(boards).firstOrDefault((function ($me, g) {
                                    return Bridge.fn.bind($me, function (b1) {
                                        return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition(g.v, b1) && Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b1, 0);
                                    });
                                })(this, g), null);
                            if (this.BreakerWonBoard == null) {
                                this.BreakerWonBoard = System.Linq.Enumerable.from(boards).first(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f3));
                            }
                        }

                        return false;
                    }
                }

                return true;
            },
            EnsureSwapAnalyzerExistence: function () {
                if (!System.Linq.Enumerable.from(this.BoardAnalysisPipeline).any($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f4)) {
                    this.BoardAnalysisPipeline.add(new Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer(this.FindCleanestWin, false));
                }
            },
            GenerateAllBoards: function (template, colorCount, progress) {
                var $t, $t1;
                if (progress === void 0) { progress = null; }
                var boards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.Board)).ctor();

                var vertices = System.Linq.Enumerable.range(0, template.Sizes.Count).toList(System.Int32);
                var potSet = System.Linq.Enumerable.range(0, colorCount).toList(System.Int32);
                var pot = Algorithms.Int64Usage.ToInt64(potSet);

                var fix = System.Linq.Enumerable.from(vertices).orderBy(function (v) {
                        return Math.abs(((template.Sizes.getItem(v) - ((Bridge.Int.div(colorCount, 2)) | 0)) | 0));
                    }).first();

                var boardsChunk = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.Board))();
                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(vertices).select(function (v) {
                        if (v === fix) {
                            return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(potSet).take(template.Sizes.getItem(v)).toList(System.Int32));
                        }

                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, potSet, template.Sizes.getItem(v));
                    })), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var assignmentSets = $t.Current;
                        var sets = System.Linq.Enumerable.from(assignmentSets).toList(System.Collections.Generic.List$1(System.Int32));
                        var totalColors = System.Linq.Enumerable.from(sets).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f5).distinct().count();
                        if (totalColors < colorCount) {
                            continue;
                        }

                        var stacks = System.Linq.Enumerable.from(sets).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f6).toList(System.Int64);

                        var superAbundant = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(this.Knowledge.GraphKnowledge.Graph, stacks, pot);
                        var board = new Algorithms.FixerBreaker.Board(stacks, pot);

                        if (this.SuperabundantOnly && !superAbundant) {
                            continue;
                        }

                        boards.add(board);
                        boardsChunk.add(board);

                        if (boardsChunk.Count > 100) {
                            if (!Bridge.staticEquals(progress, null)) {
                                progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsAdded = System.Linq.Enumerable.from(boardsChunk).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = -1, $t1));
                            }

                            boardsChunk.clear();
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                if (boardsChunk.Count > 0 && !Bridge.staticEquals(progress, null)) {
                    progress(($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress(), $t1.BoardsAdded = System.Linq.Enumerable.from(boardsChunk).toList(Algorithms.FixerBreaker.Board), $t1.WinLength = -1, $t1));
                }

                return boards;
            },
            EnumerateKnowledgeTrees: function (template) {
                var templateKnowledge = this.Knowledge.getItem(template);
                var colorCount = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Naturals()).first(function (n) {
                        return templateKnowledge.KnowledgeExists(n) && !templateKnowledge.KnowledgeExists(((n + 1) | 0));
                    });

                return System.Linq.Enumerable.from(templateKnowledge.getItem(colorCount).EnumerateBoardKnowledge()).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind.f7));
            },
            GenerateKnowledgeTree: function (board) {
                Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber = 1;
                var seenCache = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,System.Object))();
                var knowledgeTree = new Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree();
                this.FillKnowledgeTree(knowledgeTree, board, seenCache);

                return knowledgeTree;
            },
            FillKnowledgeTree: function (knowledgeTree, board, seenCache) {
                var $t, $t1;
                knowledgeTree.Board = board.toString();
                knowledgeTree.Number = Bridge.identity(Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber, ($t = (Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber + 1) | 0, Algorithms.FixerBreaker.KnowledgeEngine.Mind.TreeNodeNumber = $t, $t));

                var knowledge = this.Knowledge.getItem(board.Template.Value).getItem(board.ColorCount).getItem(board);
                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(knowledge)) {
                    if (!Bridge.referenceEquals(knowledge.Reason, "good swap")) {
                        knowledgeTree.Note = knowledge.Reason;
                    } else {
                        var seenBoard = { };
                        if (seenCache.tryGetValue(board, seenBoard)) {
                            knowledgeTree.Note = "same as #" + seenBoard.v.item1;
                            return;
                        }

                        var f = knowledge.Board.FindPermutation(board);
                        var colors = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(f, System.Array.init([knowledge.ColorPair.item1, knowledge.ColorPair.item2], System.Int32))).toList(System.Int32);
                        var colorPair = { item1: colors.getItem(0), item2: colors.getItem(1) };

                        $t1 = Bridge.getEnumerator(knowledge.Swaps);
                        try {
                            while ($t1.moveNext()) {
                                var swap = $t1.Current;
                                var tempBoard = board.Clone();
                                var moves = System.Linq.Enumerable.from(swap.item2).select(function (m) {
                                        return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.MapMove(f, m.$clone());
                                    }).toList(Algorithms.FixerBreaker.Move);
                                tempBoard.DoMoveCombination(moves);

                                var childKnowledgeTree = knowledgeTree.AddChild$1(swap);
                                childKnowledgeTree.ColorPair = colorPair;
                                this.FillKnowledgeTree(childKnowledgeTree, tempBoard, seenCache);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }}
                } else {
                    throw new System.Exception("something went wrong in building search tree");
                }

                seenCache.set(board, { item1: knowledgeTree.Number, item2: board });
            },
            GenerateTemplateKnowledgeGraph: function (template) {
                var $t, $t1, $t2, $t3;
                var templateKnowledge = this.Knowledge.getItem(template);
                var colorCount = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Naturals()).first(function (n) {
                        return templateKnowledge.KnowledgeExists(n) && !templateKnowledge.KnowledgeExists(((n + 1) | 0));
                    });

                var nextVertexID = 0;
                var vertexLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,System.Int32))();
                var swapLookup = new (System.Collections.Generic.Dictionary$2(System.Object,System.Object))();
                var boardLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge)))();
                var outEdges = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();

                $t = Bridge.getEnumerator(templateKnowledge.getItem(colorCount).EnumerateBoardKnowledge(), System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge));
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        vertexLookup.set(kvp.key, nextVertexID);
                        boardLookup.set(nextVertexID, kvp);
                        outEdges.set(nextVertexID, new (System.Collections.Generic.List$1(System.Int32))());
                        nextVertexID = (nextVertexID + 1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(templateKnowledge.LostBoards, Algorithms.FixerBreaker.Board);
                try {
                    while ($t1.moveNext()) {
                        var b = $t1.Current;
                        vertexLookup.set(b, nextVertexID);
                        boardLookup.set(nextVertexID, new (System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge))(b, new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(b, "breaker wins")));
                        outEdges.set(nextVertexID, new (System.Collections.Generic.List$1(System.Int32))());
                        nextVertexID = (nextVertexID + 1) | 0;
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                $t2 = Bridge.getEnumerator(templateKnowledge.getItem(colorCount).EnumerateBoardKnowledge(), System.Collections.Generic.KeyValuePair$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge));
                try {
                    while ($t2.moveNext()) {
                        var kvp1 = $t2.Current;
                        if (Bridge.referenceEquals(kvp1.value.Reason, "good swap")) {
                            var v = vertexLookup.get(kvp1.key);

                            var f = { v : kvp1.value.Board.FindPermutation(kvp1.key) };
                            var colors = System.Linq.Enumerable.from(Algorithms.FixerBreaker.Board.ApplyMapping(f.v, System.Array.init([kvp1.value.ColorPair.item1, kvp1.value.ColorPair.item2], System.Int32))).toList(System.Int32);
                            var colorPair = { item1: colors.getItem(0), item2: colors.getItem(1) };

                            $t3 = Bridge.getEnumerator(kvp1.value.Swaps);
                            try {
                                while ($t3.moveNext()) {
                                    var swap = $t3.Current;
                                    var tempBoard = kvp1.key.Clone();
                                    var moves = System.Linq.Enumerable.from(swap.item2).select((function ($me, f) {
                                            return function (m) {
                                                return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.MapMove(f.v, m.$clone());
                                            };
                                        })(this, f)).toList(Algorithms.FixerBreaker.Move);
                                    tempBoard.DoMoveCombination(moves);

                                    var w = vertexLookup.get(tempBoard);
                                    outEdges.get(v).add(w);

                                    swapLookup.set({ item1: v, item2: w }, swap);
                                }
                            } finally {
                                if (Bridge.is($t3, System.IDisposable)) {
                                    $t3.System$IDisposable$dispose();
                                }
                            }}
                    }
                } finally {
                    if (Bridge.is($t2, System.IDisposable)) {
                        $t2.System$IDisposable$dispose();
                    }
                }
                var edgeWeights = new (System.Collections.Generic.List$1(System.Int32))();
                for (var i = 0; i < nextVertexID; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < nextVertexID; j = (j + 1) | 0) {
                        if (outEdges.get(i).contains(j)) {
                            edgeWeights.add(1);
                        } else {
                            if (outEdges.get(j).contains(i)) {
                                edgeWeights.add(-1);
                            } else {
                                edgeWeights.add(0);
                            }
                        }
                    }
                }

                return { item1: new Algorithms.Graph.$ctor1(edgeWeights), item2: boardLookup, item3: swapLookup };
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Mind", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Mind, {
        f1: function (a) {
            return !a.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent;
        },
        f2: function (a) {
            return a.Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent;
        },
        f3: function (b1) {
            return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b1, 0);
        },
        f4: function (a) {
            return Bridge.is(a, Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer);
        },
        f5: function (set) {
            return set;
        },
        f6: function (list) {
            return Algorithms.Int64Usage.ToInt64(list);
        },
        f7: function (kvp) {
            return this.GenerateKnowledgeTree(kvp.key);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge", {
        fields: {
            _boardLookup: null,
            _improvementLookup: null,
            _lostBoards: null
        },
        props: {
            ColorCount: 0,
            ColorPairs: null,
            LostBoards: {
                get: function () {
                    return this._lostBoards;
                }
            }
        },
        ctors: {
            init: function () {
                this._boardLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge))();
                this._improvementLookup = new (System.Collections.Generic.Dictionary$2(System.String,System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge)))();
                this._lostBoards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.Board)).ctor();
            },
            ctor: function (colorCount) {
                this.$initialize();
                this.ColorCount = colorCount;
                this.SetupColorPairs();
            }
        },
        methods: {
            getItem: function (board) {
                var b = { };
                this._boardLookup.tryGetValue(board, b);
                return b.v;
            },
            getItem$1: function (reason, board) {
                var b = { };
                this.ImprovementLookup(reason).tryGetValue(board, b);
                return b.v;
            },
            setItem$1: function (reason, board, value) {
                this.ImprovementLookup(reason).set(board, value);
            },
            ImprovementLookup: function (reason) {
                var lookup = { };
                if (!this._improvementLookup.tryGetValue(reason, lookup)) {
                    lookup.v = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge))();
                    this._improvementLookup.set(reason, lookup.v);
                }

                return lookup.v;
            },
            AddWin: function (board, reason) {
                var knowledge = new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(board, reason);
                this._boardLookup.set(board, knowledge);

                return knowledge;
            },
            AddWin$1: function (board, reason, winDepth, colorPair, goodSwaps) {
                var $t;
                var knowledge = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(board, reason), $t.Depth = winDepth, $t.ColorPair = colorPair, $t.Swaps = goodSwaps, $t);
                this._boardLookup.set(board, knowledge);

                return knowledge;
            },
            AddImprovement: function (board, reason, winDepth, colorPair, goodSwaps) {
                var $t;
                var knowledge = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.BoardKnowledge(board, reason), $t.Depth = winDepth, $t.ColorPair = colorPair, $t.Swaps = goodSwaps, $t);
                this.setItem$1(reason, board, knowledge);

                return knowledge;
            },
            AddLoss: function (b) {
                this._lostBoards.add(b);
            },
            SetupColorPairs: function () {
                this.ColorPairs = new (System.Collections.Generic.List$1(System.Object))();
                var colors = System.Linq.Enumerable.range(0, this.ColorCount).toList(System.Int32);

                for (var i = 0; i < colors.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < colors.Count; j = (j + 1) | 0) {
                        this.ColorPairs.add({ item1: colors.getItem(i), item2: colors.getItem(j) });
                    }
                }
            },
            CopyInto: function (potKnowledge) {
                var $t;
                $t = Bridge.getEnumerator(this._boardLookup);
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        potKnowledge.AddWin$1(kvp.key, kvp.value.Reason, kvp.value.Depth, kvp.value.ColorPair, kvp.value.Swaps);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            EnumerateBoardKnowledge: function () {
                return System.Linq.Enumerable.from(this._boardLookup).orderByDescending($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge.f1);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge, {
        f1: function (x) {
            return x.value.Depth;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer", {
        fields: {
            _knowledge: null,
            _boardLookup: null,
            _boardIDLookup: null,
            _shrubs: null,
            _useShrubs: false
        },
        ctors: {
            init: function () {
                this._shrubs = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList))))();
            },
            ctor: function (knowledge, boardLookup, boardIDLookup, useShrubs) {
                if (useShrubs === void 0) { useShrubs = false; }

                this.$initialize();
                this._knowledge = knowledge;
                this._boardLookup = boardLookup;
                this._boardIDLookup = boardIDLookup;
                this._useShrubs = useShrubs;
            }
        },
        methods: {
            Analyze: function (boardID, wonBoardIDs) {
                var $t;
                if (!this._useShrubs) {
                    return this.AnalyzeShrubFree(boardID, wonBoardIDs);
                }

                var shrub = { };
                if (!this._shrubs.tryGetValue(boardID, shrub)) {
                    return this.InitializeShrubs(boardID, wonBoardIDs);
                }

                $t = Bridge.getEnumerator(shrub.v);
                try {
                    while ($t.moveNext()) {
                        var colorPairList = $t.Current;
                        Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList, colorPairList, function (branchList) {
                            return branchList.Intersects(wonBoardIDs);
                        }, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer.f1);
                        if (colorPairList.Count <= 0) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            AnalyzeShrubFree: function (boardID, wonBoardIDs) {
                var $t, $t1, $t2;
                var board = this._boardLookup.get(boardID);
                var potKnowledge = this._knowledge.getItem(board.Template.Value).getItem(board.ColorCount);

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(potKnowledge.ColorPairs).orderByDescending(function (pair) {
                        return System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, pair)).count() % 2;
                    }));
                try {
                    while ($t.moveNext()) {
                        var colorPair = $t.Current;
                        var winningSwapAlwaysExists = true;
                        $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateBranches(board, colorPair), Algorithms.FixerBreaker.Chronicle.ChronicledBranch);
                        try {
                            while ($t1.moveNext()) {
                                var branch = $t1.Current;
                                var winningSwapExists = false;

                                $t2 = Bridge.getEnumerator(branch);
                                try {
                                    while ($t2.moveNext()) {
                                        var swap = $t2.Current;
                                        board.DoMoveCombination(swap);
                                        var childID = this._boardIDLookup.get(board);
                                        board.DoMoveCombination(swap);

                                        if (wonBoardIDs.Contains(childID)) {
                                            winningSwapExists = true;
                                            break;
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!winningSwapExists) {
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            InitializeShrubs: function (boardID, wonBoardIDs) {
                var $t, $t1, $t2;
                var shrub = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList)))();
                this._shrubs.set(boardID, shrub);

                var board = this._boardLookup.get(boardID);
                var potKnowledge = this._knowledge.getItem(board.Template.Value).getItem(board.ColorCount);

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(potKnowledge.ColorPairs).orderByDescending(function (pair) {
                        return System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, pair)).count() % 2;
                    }));
                try {
                    while ($t.moveNext()) {
                        var colorPair = $t.Current;
                        var colorPairList = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList))();
                        shrub.add(colorPairList);

                        var winningSwapAlwaysExists = true;
                        $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateBranches(board, colorPair), Algorithms.FixerBreaker.Chronicle.ChronicledBranch);
                        try {
                            while ($t1.moveNext()) {
                                var branch = $t1.Current;
                                var branchList = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList();
                                var winningSwapExists = false;

                                $t2 = Bridge.getEnumerator(branch);
                                try {
                                    while ($t2.moveNext()) {
                                        var swap = $t2.Current;
                                        board.DoMoveCombination(swap);
                                        var childID = this._boardIDLookup.get(board);
                                        board.DoMoveCombination(swap);

                                        if (wonBoardIDs.Contains(childID)) {
                                            winningSwapExists = true;
                                            break;
                                        }

                                        branchList.Add(childID);
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!winningSwapExists) {
                                    colorPairList.add(branchList);
                                    winningSwapAlwaysExists = false;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer, {
        f1: function (x) { }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList", {
        fields: {
            _data: null,
            _length: 0
        },
        ctors: {
            ctor: function (initialCapacity) {
                if (initialCapacity === void 0) { initialCapacity = 16; }

                this.$initialize();
                this._data = System.Array.init(initialCapacity, 0, System.Int32);
            }
        },
        methods: {
            Add: function (x) {
                var i = System.Array.binarySearch(this._data, 0, this._length, x);
                if (i >= 0) {
                    return;
                }

                this.EnsureCapacity();

                i = ~i;
                if (i < this._length) {
                    System.Array.copy(this._data, i, this._data, ((i + 1) | 0), ((this._length - i) | 0));
                }

                this._data[System.Array.index(i, this._data)] = x;
                this._length = (this._length + 1) | 0;
            },
            Contains: function (x) {
                return System.Array.binarySearch(this._data, 0, this._length, x) >= 0;
            },
            Intersects: function (other) {
                var j = 0;
                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    var k = System.Array.binarySearch(other._data, j, ((other._length - j) | 0), this._data[System.Array.index(i, this._data)]);
                    if (k >= 0) {
                        return true;
                    }
                    j = ~k;
                }

                return false;
            },
            EnsureCapacity: function () {
                if (this._length >= this._data.length) {
                    var data = System.Array.init(Bridge.Int.mul(2, this._data.length), 0, System.Int32);
                    System.Array.copy(this._data, 0, data, 0, this._data.length);
                    this._data = data;
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier", {
        statics: {
            fields: {
                _lookup: null
            },
            ctors: {
                init: function () {
                    this._lookup = new (System.Collections.Generic.Dictionary$2(System.String,System.Object))();
                }
            },
            methods: {
                ToListStringInLexOrder: function (ss, pp, maxPot) {
                    if (maxPot === void 0) { maxPot = -1; }
                    var lists = System.Linq.Enumerable.from(ss).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f1).toList(System.Collections.Generic.List$1(System.Int32));
                    var pot = maxPot;
                    if (pot <= 0) {
                        pot = System.Linq.Enumerable.from(lists).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f2).distinct().count();
                    }

                    var stacks = System.Linq.Enumerable.from(lists).where(function (s) {
                            return s.Count <= pot;
                        }).toList(System.Collections.Generic.List$1(System.Int32));
                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.ToLexOrder(Bridge.toArray(System.Linq.Enumerable.from(stacks).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f4)).join("|"), pp, maxPot);
                },
                ToLexOrder: function (stacksString, pp, maxPot) {
                    var $t;
                    var key = System.String.concat(stacksString, ";", maxPot);
                    var tup = { };
                    if (Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier._lookup.tryGetValue(key, tup)) {
                        pp.v = tup.v.item2;
                        return tup.v.item1;
                    }

                    pp.v = null;
                    var lexSmallest;
                    var stacks = System.Linq.Enumerable.from(System.String.split(stacksString, [124].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f6).toList(System.Collections.Generic.List$1(System.Int32));
                    lexSmallest = stacksString;

                    var pot = System.Linq.Enumerable.from(stacks).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f2).distinct().count();
                    if (maxPot > 0) {
                        pot = maxPot;
                    }

                    $t = Bridge.getEnumerator(Algorithms.Utility.Permutation.EnumerateAll(pot), Algorithms.Utility.Permutation);
                    try {
                        while ($t.moveNext()) {
                            var p = $t.Current;
                            var permutedString = Bridge.toArray(System.Linq.Enumerable.from(stacks).select((function ($me, p) {
                                        return function (s) {
                                            return Bridge.toArray(System.Linq.Enumerable.from(s).select(function (a) {
                                                        return p.getItem(a);
                                                    }).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f3)).join("");
                                        };
                                    })(this, p))).join("|");
                            if (System.String.compare(permutedString, lexSmallest) <= 0) {
                                lexSmallest = permutedString;
                                pp.v = p;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier._lookup.set(key, { item1: lexSmallest, item2: pp.v });
                    return lexSmallest;
                }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier, {
        f1: function (l) {
            return Algorithms.Int64Usage.ToSet(l);
        },
        f2: function (l) {
            return l;
        },
        f3: function (x) {
            return x;
        },
        f4: function (s) {
            return Bridge.toArray(System.Linq.Enumerable.from(s).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f3)).join("");
        },
        f5: function (c) {
            return System.Int32.parse(String.fromCharCode(c));
        },
        f6: function (s) {
            return System.Linq.Enumerable.from(System.String.toCharArray(s, 0, s.length)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.f5).toList(System.Int32);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo", {
        props: {
            Alpha: 0,
            Beta: 0,
            Partition: null,
            Response: System.UInt64(0),
            SwapVertices: null
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.ColorPairOutcome", {
        fields: {
            Colors: null,
            FixerOutcomes: null
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome", {
        fields: {
            BreakerChoice: null,
            Exits: null
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter");

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing", {
        statics: {
            fields: {
                MaxLength: 0,
                _m: null
            },
            ctors: {
                init: function () {
                    this.MaxLength = 32;
                },
                ctor: function () {
                    Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing._m = new (System.Collections.Generic.List$1(System.UInt64))(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.MaxLength);

                    var RNG = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    var b = System.Array.init(8, 0, System.Byte);

                    for (var i = 0; i < Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.MaxLength; i = (i + 1) | 0) {
                        RNG.nextBytes(b);
                        Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing._m.add(System.BitConverter.toUInt64(b, 0));
                    }
                }
            },
            methods: {
                Hash: function (list, length) {
                    var hash = list[System.Array.index(0, list)];

                    for (var i = 1; i < length; i = (i + 1) | 0) {
                        hash = hash.add((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing._m.getItem(((i - 1) | 0)).mul(list[System.Array.index(i, list)])));
                    }

                    return System.Int64.clip32(hash.shru(32));
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofBuilder", {
        props: {
            Mind: null,
            Cases: null,
            UsePermutations: false
        },
        ctors: {
            ctor: function (mind, usePermutations) {
                if (usePermutations === void 0) { usePermutations = false; }

                this.$initialize();
                this.Mind = mind;
                this.UsePermutations = usePermutations;
                this.ExtractCases();
            }
        },
        methods: {
            ExtractCases: function () {
                var $t, $t1;
                this.Cases = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase))();

                var caseNumber = 0;

                var colorableCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, 0, this.Mind.ColorableBoards);
                this.Cases.add(colorableCase);
                caseNumber = (caseNumber + 1) | 0;

                var remainingBoards = System.Linq.Enumerable.from(this.Mind.NonColorableBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                var wonBoards = System.Linq.Enumerable.from(this.Mind.ColorableBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                while (remainingBoards.Count > 0) {
                    var proofCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, caseNumber);
                    this.Cases.add(proofCase);

                    var addedBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                    $t = Bridge.getEnumerator(remainingBoards);
                    try {
                        while ($t.moveNext()) {
                            var board = $t.Current;
                            var treeInfo = this.Mind.GetWinTreeInfo(board);

                            if (System.Linq.Enumerable.from(treeInfo).all(function (bc) {
                                    return wonBoards.contains(new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, bc.Alpha, bc.Beta, bc.Response, board._stackCount));
                                })) {
                                addedBoards.add(board);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    $t1 = Bridge.getEnumerator(addedBoards);
                    try {
                        while ($t1.moveNext()) {
                            var board1 = $t1.Current;
                            proofCase.AddBoard(board1);
                            wonBoards.add(board1);
                            remainingBoards.remove(board1);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    caseNumber = (caseNumber + 1) | 0;
                }
            },
            GetHandledCaseNumber: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                return ((System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase, this.Cases, function (cc) {
                        return cc.Boards.contains(childBoard);
                    })).first() + 1) | 0);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions", {
        statics: {
            methods: {
                ToTex: function (matcher, lists, listSize) {
                    if (Bridge.referenceEquals(matcher.Name, "*")) {
                        return System.String.concat(Bridge.toArray(System.Linq.Enumerable.repeat("\\wild", listSize)).join(""), " ");
                    }

                    var i = { };
                    if (!System.Int32.tryParse(matcher.Name, i)) {
                        return "?";
                    }

                    return Bridge.toArray(lists.getItem(i.v)).join("");
                },
                GetActiveListIndex: function (i, b, maxPot) {
                    return ((System.Linq.Enumerable.from(b.Stacks.Value).take(((i + 1) | 0)).count(function (ss) {
                        return Algorithms.Int64Usage.PopulationCount(ss) < maxPot;
                    }) - 1) | 0);
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions", {
        statics: {
            methods: {
                GetArticle: function (letter) {
                    switch (letter) {
                        case "X": 
                            return "an";
                        case "Y": 
                            return "a";
                        case "Z": 
                            return "a";
                    }

                    return "";
                },
                Listify: function (T, strings, connector) {
                    if (connector === void 0) { connector = "and"; }
                    var ll = System.Linq.Enumerable.from(strings).toList(T);
                    if (ll.Count <= 0) {
                        return "";
                    }
                    if (ll.Count === 1) {
                        return ll.getItem(0).toString();
                    }

                    if (connector != null) {
                        return System.String.concat(Bridge.toArray(System.Linq.Enumerable.from(ll).take(((ll.Count - 1) | 0))).join(", "), " ", connector, " ", System.Linq.Enumerable.from(ll).last());
                    }

                    return Bridge.toArray(ll).join(", ");
                },
                Wordify: function (n) {
                    switch (n) {
                        case 0: 
                            return "first";
                        case 1: 
                            return "second";
                        case 2: 
                            return "third";
                        case 3: 
                            return "fourth";
                        case 4: 
                            return "fifth";
                        case 5: 
                            return "sixth";
                        case 6: 
                            return "seventh";
                        case 7: 
                            return "eighth";
                        case 8: 
                            return "ninth";
                        case 9: 
                            return "tenth";
                        case 10: 
                            return "eleventh";
                    }

                    return (((n + 1) | 0)) + "-th";
                },
                Except: function (T, list, t) {
                    return System.Linq.Enumerable.from(list).except(System.Array.init([t], T));
                },
                MaxIndex: function (T, list, value) {
                    var $t;
                    var maxIndex = -1;
                    var max = -2147483648;
                    var i = 0;
                    $t = Bridge.getEnumerator(list, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            var v = value(t);
                            if (v > max) {
                                max = v;
                                maxIndex = i;
                            }

                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return maxIndex;
                },
                Distinct: function (T, S, list, value) {
                    var $t;
                    var distinct = new (System.Collections.Generic.List$1(T))();
                    $t = Bridge.getEnumerator(list, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            if (!System.Linq.Enumerable.from(distinct).any((function ($me, t) {
                                    return function (tt) {
                                        return Bridge.equals(value(tt), value(t));
                                    };
                                })(this, t))) {
                                distinct.add(t);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return distinct;
                }
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions", {
        statics: {
            fields: {
                Alphabet: null
            },
            ctors: {
                init: function () {
                    this.Alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                }
            },
            methods: {
                ToXYZ: function (board) {
                    return Bridge.toArray(System.Linq.Enumerable.from(board.Stacks.Value).select(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1)).join("");
                },
                ToXYZ$1: function (stack) {
                    switch (stack.toString()) {
                        case "3": 
                            return "X";
                        case "5": 
                            return "Y";
                        case "6": 
                            return "Z";
                    }

                    return "";
                },
                To012: function (board) {
                    return System.Linq.Enumerable.from(board.Stacks.Value).select(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.To012$1).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f1).toList(System.Int32);
                },
                To012$1: function (stack) {
                    if (stack.gt(System.Int64(6))) {
                        return -1;
                    }
                    return (((((Bridge.Int.div(System.Int64.clip32(stack), 2)) | 0)) - 1) | 0);
                },
                ToCompactedPartitionId: function (board, partition) {
                    var xyz = System.Linq.Enumerable.from(board.Stacks.Value).select(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1).toList(System.String);
                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToPartitionId$1(xyz, partition);
                },
                ToPartitionId: function (board, partition) {
                    var xyz = System.Linq.Enumerable.from(board.Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f2).toList(System.String);

                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToPartitionId$1(xyz, partition);
                },
                ToPartitionId$1: function (xyz, partition) {
                    var $t;
                    var pp = System.Linq.Enumerable.from(partition).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f3).toList(System.Collections.Generic.List$1(System.Int32));
                    for (var i = 0; i < pp.Count; i = (i + 1) | 0) {
                        var l = String.fromCharCode(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.Alphabet.charCodeAt(i));
                        $t = Bridge.getEnumerator(pp.getItem(i));
                        try {
                            while ($t.moveNext()) {
                                var j = $t.Current;
                                xyz.setItem(j, l);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}

                    return Bridge.toArray(xyz).join("");
                },
                GetXYZIndex: function (i, b) {
                    return ((System.Linq.Enumerable.from(b.Stacks.Value).take(((i + 1) | 0)).count($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.f4) - 1) | 0);
                },
                ToTex: function (matcher) {
                    switch (matcher.Name) {
                        case "*": 
                            return "\\wild ";
                        case "0": 
                            return "X";
                        case "1": 
                            return "Y";
                        case "2": 
                            return "Z";
                        case "!0": 
                            return "\\bar{{X}}";
                        case "!1": 
                            return "\\bar{{Y}}";
                        case "!2": 
                            return "\\bar{{Z}}";
                    }

                    return "?";
                }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions, {
        f1: function (x) {
            return x >= 0;
        },
        f2: function (stack) {
            var s = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1(stack);
            if (s.length <= 0) {
                return "*";
            }
            return s;
        },
        f3: function (part) {
            return System.Linq.Enumerable.from(part).min();
        },
        f4: function (ss) {
            return Algorithms.Int64Usage.PopulationCount(ss) === 2;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase", {
        props: {
            Mind: null,
            Boards: null,
            BreakerWin: false,
            CaseNumber: 0,
            Superabundant: false
        },
        ctors: {
            ctor: function (mind, caseNumber, boards) {
                if (boards === void 0) { boards = null; }

                this.$initialize();
                this.Mind = mind;
                this.CaseNumber = caseNumber;
                this.Boards = boards;
                if (this.Boards == null) {
                    this.Boards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                }
            }
        },
        methods: {
            AddBoard: function (board) {
                this.Boards.add(board);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard", {
        statics: {
            methods: {
                Create: function (T, lists) {
                    var pot = System.Linq.Enumerable.from(lists).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f1).distinct().toList(T);
                    var numbering = Algorithms.DataStructures.BijectionExtensions.NumberObjects(T, pot);

                    var intLists = System.Linq.Enumerable.from(lists).select(function (l) {
                            return System.Linq.Enumerable.from(numbering.Apply(l)).toList(System.Int32);
                        }).toList(System.Collections.Generic.List$1(System.Int32));
                    var trace = System.Array.init(pot.Count, System.UInt64(0), System.UInt64);

                    for (var i = 0; i < pot.Count; i = (i + 1) | 0) {
                        trace[System.Array.index(i, trace)] = Algorithms.Int64Usage.ToUInt64(Algorithms.GenericExtensions.IndicesWhere(System.Collections.Generic.List$1(System.Int32), intLists, function (ll) {
                            return ll.contains(i);
                        }));
                    }

                    pot = System.Linq.Enumerable.from(pot).orderBy(function (c) {
                            return trace[System.Array.index(pot.indexOf(c), trace)];
                        }).toList(T);
                    numbering = Algorithms.DataStructures.BijectionExtensions.NumberObjects(T, pot);

                    System.Array.sort(trace);
                    return { item1: new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(trace, lists.Count), item2: numbering };
                },
                FromLists: function (lists) {
                    var pot = System.Linq.Enumerable.from(lists).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f1).distinct().toList(System.Int32);
                    var trace = System.Array.init(pot.Count, System.UInt64(0), System.UInt64);

                    for (var i = 0; i < pot.Count; i = (i + 1) | 0) {
                        trace[System.Array.index(i, trace)] = Algorithms.Int64Usage.ToUInt64(Algorithms.GenericExtensions.IndicesWhere(System.Collections.Generic.List$1(System.Int32), lists, function (ll) {
                            return ll.contains(i);
                        }));
                    }

                    System.Array.sort(trace);
                    return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(trace, lists.Count);
                }
            }
        },
        fields: {
            _trace: null,
            _length: 0,
            _stackCount: 0,
            _hashCode: 0
        },
        props: {
            Stacks: null
        },
        ctors: {
            ctor: function (trace, stackCount) {
                this.$initialize();
                this._trace = trace;
                this._length = this._trace.length;
                this._stackCount = stackCount;
                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);

                this.MakeLazyStacks();
            },
            $ctor1: function (trace, i, j, swap, stackCount) {
                this.$initialize();
                this._trace = System.Array.init(trace.length, System.UInt64(0), System.UInt64);
                this._length = 0;
                for (var k = 0; k < trace.length; k = (k + 1) | 0) {
                    var v = System.UInt64(0);
                    if (k === i || k === j) {
                        v = trace[System.Array.index(k, trace)].xor(swap);
                    } else {
                        v = trace[System.Array.index(k, trace)];
                    }

                    if (v.gt(System.UInt64(0))) {
                        var q = this._length;
                        while (q > 0 && this._trace[System.Array.index(((q - 1) | 0), this._trace)].gt(v)) {
                            q = (q - 1) | 0;
                        }

                        if (q < this._length) {
                            System.Array.copy(this._trace, q << 3, this._trace, (((q + 1) | 0)) << 3, (((this._length - q) | 0)) << 3);
                        }
                        this._trace[System.Array.index(q, this._trace)] = v;

                        this._length = (this._length + 1) | 0;
                    }
                }

                this._stackCount = stackCount;
                this.MakeLazyStacks();

                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);
            }
        },
        methods: {
            ToListStringInLexOrder$1: function (maxPot) {
                if (maxPot === void 0) { maxPot = -1; }
                var pp = { };
                return this.ToListStringInLexOrder(pp, maxPot);
            },
            ToListStringInLexOrder: function (pp, maxPot) {
                if (maxPot === void 0) { maxPot = -1; }
                return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BoardLexifier.ToListStringInLexOrder(this.Stacks.Value, pp, maxPot);
            },
            GetPermutation: function (i, j, swap) {
                var t = System.Linq.Enumerable.from(this._trace).toList(System.UInt64);

                t.setItem(i, t.getItem(i).xor(swap));
                t.setItem(j, t.getItem(j).xor(swap));

                if (t.getItem(i).equals(System.UInt64(0))) {
                    t.setItem(i, System.UInt64(2147483647));
                }
                if (t.getItem(j).equals(System.UInt64(0))) {
                    t.setItem(j, System.UInt64(2147483647));
                }

                var sequence = System.Linq.Enumerable.from(t).zip(System.Linq.Enumerable.range(0, t.Count), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f2).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f3).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f4).toList(System.Int32);

                return new Algorithms.Utility.Permutation.$ctor1(sequence);
            },
            Permute: function (p, indices) {
                var trace = System.Array.init(this._trace.length, System.UInt64(0), System.UInt64);

                var permutedIndices = p.Apply(System.Int32, indices);
                for (var i = 0; i < this._trace.length; i = (i + 1) | 0) {
                    var n = this._trace[System.Array.index(i, this._trace)];
                    var m = this._trace[System.Array.index(i, this._trace)];

                    for (var j = 0; j < indices.Count; j = (j + 1) | 0) {
                        m = m.and(((System.UInt64(1).shl(indices.getItem(j))).not()));
                    }

                    for (var j1 = 0; j1 < indices.Count; j1 = (j1 + 1) | 0) {
                        if ((n.and((System.UInt64(1).shl(indices.getItem(j1))))).ne(System.UInt64(0))) {
                            m = m.or((System.UInt64(1).shl(permutedIndices.getItem(j1))));
                        }
                    }

                    trace[System.Array.index(i, trace)] = m;
                }

                System.Array.sort(trace);

                return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(trace, this._stackCount);
            },
            MakeLazyStacks: function () {
                this.Stacks = new (Algorithms.Lazy$1(System.Array.type(System.Int64))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this._stackCount, System.Int64(0), System.Int64);
                    var traceBits = System.Linq.Enumerable.from(this._trace).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f5).toList(System.Collections.Generic.List$1(System.Int32));
                    for (var c = 0; c < traceBits.Count; c = (c + 1) | 0) {
                        $t = Bridge.getEnumerator(traceBits.getItem(c));
                        try {
                            while ($t.moveNext()) {
                                var i = $t.Current;
                                s[System.Array.index(i, s)] = s[System.Array.index(i, s)].or((System.Int64(1).shl(c)));
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                    return s;
                }));
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._trace[System.Array.index(i, this._trace)].ne(other._trace[System.Array.index(i, other._trace)])) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.f6)).join("|");
            }
        }
    });

    Bridge.define("$AnonymousType$1", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (t, i) {
                this.T = t;
                this.I = i;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$1)) {
                    return false;
                }
                return Bridge.equals(this.T, o.T) && Bridge.equals(this.I, o.I);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196186, this.T, this.I]);
                return h;
            },
            toJSON: function () {
                return {
                    T : this.T,
                    I : this.I
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"I","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_I","t":8,"rt":System.Int32,"fg":"I"},"fn":"I"},{"a":2,"n":"T","t":16,"rt":System.UInt64,"g":{"a":2,"n":"get_T","t":8,"rt":System.UInt64,"fg":"T"},"fn":"T"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, {
        f1: function (l) {
            return l;
        },
        f2: function (tr, ii) {
            return new $asm.$AnonymousType$1(tr, ii);
        },
        f3: function (v) {
            return v.T;
        },
        f4: function (v) {
            return v.I;
        },
        f5: function (t) {
            return Algorithms.Int64Usage.ToSet$1(t);
        },
        f6: function (l) {
            return Bridge.toArray(Algorithms.Int64Usage.ToSet(l)).join("");
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimColoringAnalyzer", {
        fields: {
            _lineGraph: null,
            _getEdgeColorList: null
        },
        ctors: {
            ctor: function (lineGraph, getEdgeColorList) {
                this.$initialize();
                this._lineGraph = lineGraph;
                this._getEdgeColorList = getEdgeColorList;
            }
        },
        methods: {
            Analyze: function (b) {
                return this._lineGraph.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64));
            },
            Analyze$1: function (b, coloring) {
                return this.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64), coloring);
            },
            ColorableWithoutEdge: function (b, edgeIndex) {
                return this._lineGraph.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    if (e === edgeIndex) {
                        return System.Int64(-1);
                    }

                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64));
            },
            AnalyzeWithoutEdge: function (b, coloring, edgeIndex) {
                return this.IsChoosable(System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, function (e) {
                    if (e === edgeIndex) {
                        return System.Int64(-1);
                    }

                    return this._getEdgeColorList(b, e);
                })).toList(System.Int64), coloring);
            },
            IsChoosable: function (assignment, coloring) {
                coloring.v = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Int64))();
                return this.IsChoosable$1(assignment, 0, coloring.v);
            },
            IsChoosable$1: function (assignment, v, coloring) {
                var $t;
                if (v >= this._lineGraph.N) {
                    return true;
                }

                var colors = assignment.getItem(v);
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._lineGraph._laterNeighbors.Value.getItem(v));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (this.IsChoosable$1(assignmentCopy, ((v + 1) | 0), coloring)) {
                        coloring.set(v, color);
                        return true;
                    }

                    colors = colors.xor(color);
                }

                return false;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer", {
        fields: {
            _fixerResponses: null,
            _fixerResponseCount: 0,
            _breakerChoicesCache: null
        },
        props: {
            LastWinChildCount: 0,
            ProofFindingMode: false,
            WeaklyFixable: false,
            WinTreeInfo: null,
            LossTreeInfo: null
        },
        ctors: {
            init: function () {
                this._breakerChoicesCache = new (System.Collections.Generic.Dictionary$2(System.UInt64,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64))))();
            },
            ctor: function (n, proofFindingMode, weaklyFixable) {
                if (proofFindingMode === void 0) { proofFindingMode = false; }
                if (weaklyFixable === void 0) { weaklyFixable = false; }

                this.$initialize();
                this._fixerResponses = System.Array.init(8192, System.UInt64(0), System.UInt64);
                this.ProofFindingMode = proofFindingMode;
                this.WeaklyFixable = weaklyFixable;
                if (this.ProofFindingMode) {
                    this.WinTreeInfo = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo))();
                    this.LossTreeInfo = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo))();
                }
            }
        },
        methods: {
            Analyze: function (board, wonBoards) {
                if (this.ProofFindingMode) {
                    return this.AnalyzeForProofInternal(board, wonBoards);
                }

                return this.AnalyzeInternal(board, wonBoards);
            },
            AnalyzeInternal: function (board, wonBoards) {
                var $t;
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        var x = board._trace[System.Array.index(i, board._trace)];
                        var y = board._trace[System.Array.index(j, board._trace)];
                        var swappable = x.xor(y);

                        var winningSwapAlwaysExists = true;
                        $t = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                        try {
                            while ($t.moveNext()) {
                                var breakerChoice = $t.Current;
                                var winningSwapExists = false;

                                this.GetFixerResponses(breakerChoice);
                                for (var k = 1; k < this._fixerResponseCount; k = (k + 1) | 0) {
                                    if (this.WeaklyFixable && Algorithms.Int64Usage.PopulationCount$1(this._fixerResponses[System.Array.index(k, this._fixerResponses)]) > 2) {
                                        continue;
                                    }

                                    var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, i, j, this._fixerResponses[System.Array.index(k, this._fixerResponses)], board._stackCount);
                                    if (wonBoards.contains(childBoard)) {
                                        winningSwapExists = true;
                                        break;
                                    }
                                }

                                if (!winningSwapExists) {
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                }

                return false;
            },
            AnalyzeForProofInternal: function (board, wonBoards) {
                var $t, $t1, $t2;
                var winInfo = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo();
                this.WinTreeInfo.set(board, winInfo);

                var lossInfo = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo();
                this.LossTreeInfo.set(board, lossInfo);

                var colorPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        colorPairs.add({ item1: i, item2: j });
                    }
                }

                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(colorPairs).orderBy(function (cp) {
                        return Algorithms.Int64Usage.PopulationCount$1((board._trace[System.Array.index(cp.item1, board._trace)].xor(board._trace[System.Array.index(cp.item2, board._trace)])));
                    }));
                try {
                    while ($t.moveNext()) {
                        var cp = $t.Current;
                        var i1 = cp.item1;
                        var j1 = cp.item2;

                        var x = board._trace[System.Array.index(i1, board._trace)];
                        var y = board._trace[System.Array.index(j1, board._trace)];
                        var swappable = x.xor(y);

                        var winningSwapAlwaysExists = true;
                        $t1 = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                        try {
                            while ($t1.moveNext()) {
                                var breakerChoice = $t1.Current;
                                var winningSwapExists = false;

                                this.GetFixerResponses(breakerChoice);
                                var responses = System.Linq.Enumerable.range(1, ((this._fixerResponseCount - 1) | 0)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer.f1)).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer.f2);
                                $t2 = Bridge.getEnumerator(responses);
                                try {
                                    while ($t2.moveNext()) {
                                        var response = $t2.Current;
                                        if (this.WeaklyFixable && Algorithms.Int64Usage.PopulationCount$1(response) > 2) {
                                            break;
                                        }

                                        var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, i1, j1, response, board._stackCount);
                                        if (wonBoards.contains(childBoard)) {
                                            winningSwapExists = true;
                                            winInfo.Add(breakerChoice, i1, j1, response);
                                            break;
                                        } else {
                                            lossInfo.Add(breakerChoice, i1, j1, response);
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!winningSwapExists) {
                                    winInfo.clear();
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            this.LastWinChildCount = Algorithms.Int64Usage.PopulationCount$1(swappable);
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            GetFixerResponses: function (possibleMoves) {
                this._fixerResponseCount = 1 << possibleMoves.Count;
                var tableLength = this._fixerResponses.length;
                while (tableLength <= this._fixerResponseCount) {
                    tableLength = Bridge.Int.mul(tableLength, 2);
                }
                if (tableLength > this._fixerResponses.length) {
                    this._fixerResponses = System.Array.init(tableLength, System.UInt64(0), System.UInt64);
                }

                var subset = 1;
                while (subset < this._fixerResponseCount) {
                    var response = System.UInt64(0);
                    var x = { v : subset };

                    while (x.v !== 0) {
                        response = response.or(possibleMoves.getItem(Algorithms.Int32Usage.GetAndClearLeastSignificantBit(x)));
                    }

                    this._fixerResponses[System.Array.index(subset, this._fixerResponses)] = response;
                    subset = (subset + 1) | 0;
                }
            },
            GetBreakerChoices: function (swappable) {
                var $t, $t1, $t2;
                var choices = { };
                if (!this._breakerChoicesCache.tryGetValue(swappable, choices)) {
                    var bits = Algorithms.Int64Usage.GetBits$1(swappable);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(bits.Count);
                    choices.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64)))(partitions.Count);

                    $t = Bridge.getEnumerator(partitions);
                    try {
                        while ($t.moveNext()) {
                            var partition = $t.Current;
                            var choice = new (System.Collections.Generic.List$1(System.UInt64))(partition.Count);
                            choices.v.add(choice);

                            $t1 = Bridge.getEnumerator(partition);
                            try {
                                while ($t1.moveNext()) {
                                    var part = $t1.Current;
                                    var x = System.UInt64(0);
                                    $t2 = Bridge.getEnumerator(part);
                                    try {
                                        while ($t2.moveNext()) {
                                            var i = $t2.Current;
                                            x = x.or(bits.getItem(i));
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    choice.add(x);
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    this._breakerChoicesCache.set(swappable, choices.v);
                }

                return choices.v;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer, {
        f1: function (k) {
            return this._fixerResponses[System.Array.index(k, this._fixerResponses)];
        },
        f2: function (fr) {
            return Algorithms.Int64Usage.PopulationCount$1(fr);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Template", {
        statics: {
            methods: {
                op_Implicit: function (s) {
                    return new Algorithms.FixerBreaker.KnowledgeEngine.Template.$ctor1(s, null);
                    //return new Template(Regex.Split(s ?? "", @"\D+").Select(MetaKnowledge.TryParseInt).Where(x => x.HasValue).Select(x => x.Value).ToList());
                }
            }
        },
        props: {
            Sizes: null
        },
        ctors: {
            ctor: function (sizes) {
                this.$initialize();
                this.Sizes = sizes;
            },
            $ctor1: function (s, g) {
                this.$initialize();
            }
        },
        methods: {
            equals: function (o) {
                return this.Equals(Bridge.as(o, Algorithms.FixerBreaker.KnowledgeEngine.Template));
            },
            Equals: function (t) {
                if (!Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(t)) {
                    return false;
                }

                return System.Linq.Enumerable.from(this.Sizes).sequenceEqual(t.Sizes);
            },
            getHashCode: function () {
                return System.Linq.Enumerable.from(this.Sizes).aggregate(this.Sizes.Count, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Template.f1);
            },
            toString: function () {
                return Bridge.toArray(this.Sizes).join(",");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Template", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Template, {
        f1: function (t, s) {
            return ((Bridge.Int.mul(31, t) + s) | 0);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge", {
        fields: {
            _potLookup: null
        },
        props: {
            Template: null,
            LostBoards: {
                get: function () {
                    return System.Linq.Enumerable.from(this._potLookup.getValues()).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge.f1).distinct();
                }
            }
        },
        ctors: {
            init: function () {
                this._potLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge))();
            },
            ctor: function (template) {
                this.$initialize();
                this.Template = template;
            }
        },
        methods: {
            getItem: function (colorCount) {
                var p = { };
                if (!this._potLookup.tryGetValue(colorCount, p)) {
                    p.v = new Algorithms.FixerBreaker.KnowledgeEngine.PotKnowledge(colorCount);
                    this._potLookup.set(colorCount, p.v);
                }

                return p.v;
            },
            Promote: function (colorCount) {
                this.getItem(colorCount).CopyInto(this.getItem(((colorCount + 1) | 0)));
            },
            KnowledgeExists: function (colorCount) {
                return this._potLookup.containsKey(colorCount);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.TemplateKnowledge, {
        f1: function (pk) {
            return pk.LostBoards;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.ThoughtProgress", {
        props: {
            IsInitialThought: false,
            BoardsAdded: null,
            BoardsRemoved: null,
            WinLength: 0
        }
    });

    Bridge.define("Algorithms.FixerBreaker.SlowBoard", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Int64)],
        statics: {
            methods: {
                UpdateHash: function (hash, value) {
                    hash.v = System.Int64.clip32(System.Int64(Bridge.Int.mul(100, hash.v)).add(value));
                },
                ApplyMapping$1: function (mapping, stack) {
                    return Algorithms.Int64Usage.ToInt64(Algorithms.FixerBreaker.SlowBoard.ApplyMapping(mapping, Algorithms.Int64Usage.ToSet(stack)));
                },
                ApplyMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item2.getItem(mapping.item1.indexOf(c));
                        });
                },
                ApplyInverseMapping: function (mapping, set) {
                    return System.Linq.Enumerable.from(set).select(function (c) {
                            return mapping.item1.getItem(mapping.item2.indexOf(c));
                        });
                },
                OtherTurn: function (turn) {
                    return ((1 - turn) | 0);
                }
            }
        },
        fields: {
            _hashCode: 0
        },
        props: {
            StackStrings: {
                get: function () {
                    return System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f1).toList(System.String);
                }
            },
            PotString: {
                get: function () {
                    return Algorithms.Int64Usage.ToSetString$2(this.Pot);
                }
            },
            Stacks: null,
            PotSet: null,
            Degrees: null,
            DegreeChangeIndices: null,
            Template: null,
            Pot: System.Int64(0),
            ColorCount: 0,
            Turn: 0,
            N: 0,
            LastMove: null
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            init: function () {
                this.LastMove = new Algorithms.FixerBreaker.Move();
            },
            ctor: function (stacks, pot) {
                this.$initialize();
                this.Stacks = stacks;
                this.Pot = pot;
                this.Turn = Algorithms.FixerBreaker.Turn.Fixer;
                this.N = this.Stacks.Count;
                this.Template = new Algorithms.FixerBreaker.KnowledgeEngine.Template.ctor(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f2).toList(System.Int32));

                this.PotSet = Algorithms.Int64Usage.ToSet(this.Pot);
                this.ColorCount = System.Linq.Enumerable.from(this.PotSet).count();
                this.Degrees = new (System.Collections.Generic.List$1(System.Object))();
                this.DegreeChangeIndices = new (System.Collections.Generic.List$1(System.Int32))();
                this.ComputeHashCode();
            }
        },
        methods: {
            getItem: function (x) {
                return this.Stacks.getItem(x);
            },
            ComputeHashCode: function () {
                this._hashCode = this.N;
                Algorithms.FixerBreaker.SlowBoard.UpdateHash(Bridge.ref(this, "_hashCode"), this.Turn);

                this.Degrees.clear();
                this.DegreeChangeIndices.clear();

                this.Degrees.addRange(System.Linq.Enumerable.from(this.PotSet).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.SlowBoard.f3)).where($asm.$.Algorithms.FixerBreaker.SlowBoard.f4).orderBy($asm.$.Algorithms.FixerBreaker.SlowBoard.f5));

                var previousDegree = -1;
                for (var i = 0; i < this.Degrees.Count; i = (i + 1) | 0) {
                    var degree = this.Degrees.getItem(i);

                    Algorithms.FixerBreaker.SlowBoard.UpdateHash(Bridge.ref(this, "_hashCode"), System.Int64(degree.item2));

                    if (degree.item2 !== previousDegree) {
                        this.DegreeChangeIndices.add(i);
                        previousDegree = degree.item2;
                    }
                }

                this.DegreeChangeIndices.add(this.Degrees.Count);
            },
            MakeMove: function (move) {
                this.LastMove = move.$clone();

                if (move.Stack >= 0) {
                    this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                }

                this.Turn = Algorithms.FixerBreaker.SlowBoard.OtherTurn(this.Turn);

                this.ComputeHashCode();
            },
            DoMoveCombination: function (moves) {
                var $t;
                $t = Bridge.getEnumerator(moves, Algorithms.FixerBreaker.Move);
                try {
                    while ($t.moveNext()) {
                        var move = $t.Current.$clone();
                        this.Stacks.setItem(move.Stack, Algorithms.Int64Usage.FlipBits$1(this.Stacks.getItem(move.Stack), System.Int64(move.Added), move.Removed));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.ComputeHashCode();
            },
            Clone: function () {
                var clone = new Algorithms.FixerBreaker.SlowBoard(System.Linq.Enumerable.from(this.Stacks).toList(System.Int64), this.Pot);
                clone.Turn = this.Turn;
                clone.LastMove = this.LastMove.$clone();
                clone._hashCode = this._hashCode;

                clone.ComputeHashCode();

                return clone;
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.FixerBreaker.SlowBoard));
            },
            Equals: function (other) {
                if (other == null) {
                    return false;
                }
                if (this.Turn !== other.Turn) {
                    return false;
                }
                if (this.N !== other.N) {
                    return false;
                }

                if (System.Linq.Enumerable.from(this.Stacks).sequenceEqual(other.Stacks)) {
                    if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                        return true;
                    }

                    if (this.LastMove.Stack === other.LastMove.Stack && (this.LastMove.Added === other.LastMove.Added && this.LastMove.Removed === other.LastMove.Removed || this.LastMove.Added === other.LastMove.Removed && this.LastMove.Removed === other.LastMove.Added)) {
                        return true;
                    }

                    return false;
                }

                return this.FindPermutation(other) != null;
            },
            FindPermutation: function (other) {
                if (!System.Linq.Enumerable.from(this.Degrees).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f5).sequenceEqual(System.Linq.Enumerable.from(other.Degrees).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f5))) {
                    return null;
                }

                var mappingPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < ((this.DegreeChangeIndices.Count - 1) | 0); i = (i + 1) | 0) {
                    var domain = new (System.Collections.Generic.List$1(System.Int32))();
                    var codomain = new (System.Collections.Generic.List$1(System.Int32))();

                    for (var j = this.DegreeChangeIndices.getItem(i); j < this.DegreeChangeIndices.getItem(((i + 1) | 0)); j = (j + 1) | 0) {
                        domain.add(this.Degrees.getItem(j).item1);
                        codomain.add(other.Degrees.getItem(j).item1);
                    }

                    mappingPairs.add({ item1: domain, item2: codomain });
                }

                return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Object, System.Linq.Enumerable.from(mappingPairs).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f6))).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.SlowBoard.f7)).firstOrDefault(Bridge.fn.bind(this, function (mapping) {
                        return this.SequenceEqualPermuted(mapping, other);
                    }), null);
            },
            FlattenMapping: function (mapping) {
                return { item1: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.SlowBoard.f8).toList(System.Int32), item2: System.Linq.Enumerable.from(mapping).selectMany($asm.$.Algorithms.FixerBreaker.SlowBoard.f5).toList(System.Int32) };
            },
            SequenceEqualPermuted: function (mapping, other) {
                for (var i = 0; i < this.Stacks.Count; i = (i + 1) | 0) {
                    var permutedStack = Algorithms.FixerBreaker.SlowBoard.ApplyMapping$1(mapping, this.Stacks.getItem(i));
                    if (permutedStack.ne(other.Stacks.getItem(i))) {
                        return false;
                    }
                }

                if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                    return true;
                }

                if (this.LastMove.Stack !== other.LastMove.Stack) {
                    return false;
                }

                var ours = System.Array.init([this.LastMove.Added, this.LastMove.Removed], System.Int32);
                var theirs = function (_o9) {
                        _o9.add(other.LastMove.Added);
                        _o9.add(other.LastMove.Removed);
                        return _o9;
                    }(new (System.Collections.Generic.List$1(System.Int32))());

                return Algorithms.Utility.ListUtility.Equal(System.Int32, System.Linq.Enumerable.from(Algorithms.FixerBreaker.SlowBoard.ApplyMapping(mapping, ours)).toList(System.Int32), theirs);
            },
            ExactlyEqual: function (other) {
                if (other == null) {
                    return false;
                }
                if (this.Turn !== other.Turn) {
                    return false;
                }
                if (this.N !== other.N) {
                    return false;
                }
                if (this.Pot.ne(other.Pot)) {
                    return false;
                }

                if (System.Linq.Enumerable.from(this.Stacks).sequenceEqual(other.Stacks)) {
                    if (this.Turn === Algorithms.FixerBreaker.Turn.Fixer) {
                        return true;
                    }

                    if (this.LastMove.Stack === other.LastMove.Stack && (this.LastMove.Added === other.LastMove.Added && this.LastMove.Removed === other.LastMove.Removed || this.LastMove.Added === other.LastMove.Removed && this.LastMove.Removed === other.LastMove.Added)) {
                        return true;
                    }
                }

                return false;
            },
            getHashCode: function () {
                return this._hashCode;
            },
            getEnumerator: function () {
                return this.Stacks.getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f9)).join("|");
            },
            ToTex: function () {
                return Algorithms.GenericExtensions.JoinPretty(System.Linq.Enumerable.from(this.Stacks).select($asm.$.Algorithms.FixerBreaker.SlowBoard.f10), ", ");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.SlowBoard", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.SlowBoard, {
        f1: function (s) {
            return Algorithms.Int64Usage.ToSetString$2(s);
        },
        f2: function (s) {
            return Algorithms.Int64Usage.PopulationCount(s);
        },
        f3: function (c) {
            return { item1: c, item2: System.Linq.Enumerable.from(this.Stacks).count(function (s) {
                        return Algorithms.Int64Usage.IsBitSet(s, System.Int64(c));
                    }) };
        },
        f4: function (x) {
            return x.item2 > 0;
        },
        f5: function (x) {
            return x.item2;
        },
        f6: function (mp) {
            return System.Linq.Enumerable.from(Algorithms.Utility.Permutation.EnumerateAll(mp.item2.Count)).select(function (p) {
                    return { item1: mp.item1, item2: p.Apply(System.Int32, mp.item2) };
                });
        },
        f7: function (mapping) {
            return this.FlattenMapping(mapping);
        },
        f8: function (x) {
            return x.item1;
        },
        f9: function (x) {
            return Algorithms.Int64Usage.ToSetStringSmall(x);
        },
        f10: function (stack, i) {
            return System.String.concat("$L(v_" + (((i + 1) | 0)) + ") = ", System.String.replaceAll(System.String.replaceAll(Algorithms.Int64Usage.ToSetString$2(stack), "{", "\\{"), "}", "\\}"), "$");
        }
    });

    Bridge.define("Algorithms.FixerBreaker.Turn", {
        $kind: "enum",
        statics: {
            fields: {
                Fixer: 0,
                Breaker: 1
            }
        }
    });

    Bridge.define("Algorithms.GenericExtensions", {
        statics: {
            methods: {
                Shuffle: function (T, list) {
                    var rng = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    var n = System.Array.getCount(list, T);
                    while (n > 1) {
                        n = (n - 1) | 0;
                        var k = rng.next$1(((n + 1) | 0));
                        var value = System.Array.getItem(list, k, T);
                        System.Array.setItem(list, k, System.Array.getItem(list, n, T), T);
                        System.Array.setItem(list, n, value, T);
                    }
                },
                ShuffleAll: function (lists) {
                    var $t;
                    var rng = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    var n = System.Array.getCount(System.Array.getItem(lists, 0, System.Collections.IList));
                    while (n > 1) {
                        n = (n - 1) | 0;
                        var k = rng.next$1(((n + 1) | 0));

                        $t = Bridge.getEnumerator(lists, System.Collections.IList);
                        try {
                            while ($t.moveNext()) {
                                var list = $t.Current;
                                var value = System.Array.getItem(list, k);
                                System.Array.setItem(list, k, System.Array.getItem(list, n));
                                System.Array.setItem(list, n, value);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                },
                EnList: function (T, t) {
                    return function (_o10) {
                            _o10.add(t);
                            return _o10;
                        }(new (System.Collections.Generic.List$1(T))());
                },
                IndicesWhere: function (T, source, condition) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (T, source, condition) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            i,
                            $t,
                            t,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            i = 0;
                                                $t = Bridge.getEnumerator(source, T);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    t = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 2: {
                                            if (condition(t)) {
                                                    $step = 3;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 3: {
                                            $enumerator.current = i;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 5: {
                                            i = (i + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                FirstIndex: function (T, source, condition) {
                    var $t;
                    var i = 0;
                    $t = Bridge.getEnumerator(source, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            if (condition(t)) {
                                return i;
                            }

                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return -1;
                },
                JoinPretty: function (source, separator) {
                    var count = System.Linq.Enumerable.from(source).count();
                    if (count <= 0) {
                        return "";
                    }
                    if (count === 1) {
                        return System.Linq.Enumerable.from(source).first();
                    }
                    if (count === 2) {
                        return System.String.concat(System.Linq.Enumerable.from(source).elementAt(0), " and ", System.Linq.Enumerable.from(source).elementAt(1));
                    }

                    return System.String.concat(Bridge.toArray(System.Linq.Enumerable.from(source).take(((count - 1) | 0))).join(separator), " and ", System.Linq.Enumerable.from(source).elementAt(((count - 1) | 0)));
                },
                RemoveAll: function (T, list, predicate, onRemoved) {
                    var removed = 0;
                    for (var i = (list.Count - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (predicate(list.getItem(i))) {
                            onRemoved(list.getItem(i));

                            list.removeAt(i);
                            removed = (removed + 1) | 0;
                        }
                    }

                    return removed;
                }
            }
        }
    });

    Bridge.define("Algorithms.Graph", {
        statics: {
            fields: {
                RNG: null,
                CacheHits: System.Int64(0),
                NodesVisited: System.Int64(0),
                DotColors: null,
                TikzColors: null
            },
            props: {
                MemoizeEulerianSubgraphCounting: false
            },
            ctors: {
                init: function () {
                    this.RNG = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                    this.DotColors = $asm.$.Algorithms.Graph.f1(new (System.Collections.Generic.List$1(System.String))());
                    this.TikzColors = $asm.$.Algorithms.Graph.f2(new (System.Collections.Generic.List$1(System.String))());
                }
            },
            methods: {
                MaybeIsomorphic: function (A, B) {
                    if (A.N !== B.N) {
                        return false;
                    }
                    if (A.E !== B.E) {
                        return false;
                    }

                    A.TransitivePartition.Refine(A.DegreeSequence.Value, 1);
                    B.TransitivePartition.Refine(B.DegreeSequence.Value, 1);

                    A.TransitivePartition.Refine(A.NodeInvariantOne.Value, 2);
                    B.TransitivePartition.Refine(B.NodeInvariantOne.Value, 2);

                    A.TransitivePartition.Refine(A.NodeInvariantTwo.Value, 3);
                    B.TransitivePartition.Refine(B.NodeInvariantTwo.Value, 3);

                    if (!A.TransitivePartition.equals(B.TransitivePartition)) {
                        return false;
                    }

                    return true;
                },
                Isomorphic: function (A, B) {
                    if (!Algorithms.Graph.MaybeIsomorphic(A, B)) {
                        return false;
                    }

                    return A.Contains(B, true);
                },
                op_Equality: function (A, B) {
                    return A == null && B == null || A != null && B != null && A.equals(B);
                },
                op_Inequality: function (A, B) {
                    return !(Algorithms.Graph.op_Equality(A, B));
                },
                op_Addition: function (A, B) {
                    return A.DisjointUnion(B);
                },
                op_Multiply: function (A, B) {
                    return A.Join(B);
                },
                op_Multiply$1: function (k, A) {
                    var G = A.Clone();
                    for (var i = 1; i < k; i = (i + 1) | 0) {
                        G = Algorithms.Graph.op_Addition(G, A);
                    }

                    G.Initialize();
                    return G;
                }
            }
        },
        fields: {
            _adjacent: null,
            _neighbors: null,
            _complementNeighbors: null,
            _outNeighbors: null,
            _inNeighbors: null,
            _laterNeighbors: null,
            _vertices: null,
            _independentSets: null,
            _maximalIndependentSets: null,
            _independentTwoSets: null,
            _independentThreeSets: null,
            _vertexSubsets: null,
            _e: null
        },
        props: {
            N: 0,
            E: {
                get: function () {
                    return this._e.Value;
                }
            },
            Adjacent: {
                get: function () {
                    return this._adjacent;
                }
            },
            Directed: null,
            VertexWeight: null,
            Neighbors: {
                get: function () {
                    return this._neighbors.Value;
                }
            },
            ComplementNeighbors: {
                get: function () {
                    return this._complementNeighbors.Value;
                }
            },
            OutNeighbors: {
                get: function () {
                    return this._outNeighbors.Value;
                }
            },
            InNeighbors: {
                get: function () {
                    return this._inNeighbors.Value;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            },
            DegreeSequence: null,
            InDegreeSequence: null,
            OutDegreeSequence: null,
            NodeInvariantOne: null,
            NodeInvariantTwo: null,
            TransitivePartition: null,
            EdgeWeightsWithMultiplicity: null,
            IndependentSets: {
                get: function () {
                    return this._independentSets.Value;
                }
            },
            MaximalIndependentSets: {
                get: function () {
                    return this._maximalIndependentSets.Value;
                }
            },
            Size: {
                get: function () {
                    var t = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        t = (t + (this.OutDegree(i))) | 0;
                    }

                    return t;
                }
            },
            MaxDegree: {
                get: function () {
                    var max = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        max = Math.max(max, this.Degree(i));
                    }

                    return max;
                }
            },
            MinDegree: {
                get: function () {
                    var min = 2147483647;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        min = Math.min(min, this.Degree(i));
                    }

                    return min;
                }
            },
            MaxOutDegree: {
                get: function () {
                    var max = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        max = Math.max(max, this.OutDegree(i));
                    }

                    return max;
                }
            },
            MaxInDegree: {
                get: function () {
                    var max = 0;
                    for (var i = 0; i < this.N; i = (i + 1) | 0) {
                        max = Math.max(max, this.InDegree(i));
                    }

                    return max;
                }
            }
        },
        ctors: {
            $ctor1: function (edgeWeights, vertexWeight) {
                if (vertexWeight === void 0) { vertexWeight = null; }

                this.$initialize();
                this.N = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                this.VertexWeight = vertexWeight;

                this._vertices = System.Linq.Enumerable.range(0, this.N).toList(System.Int32);
                this._adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);
                this.Directed = System.Array.create(false, null, System.Boolean, this.N, this.N);

                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (edgeWeights.getItem(k) !== 0) {
                            this._adjacent.set([i, j], true);
                            this._adjacent.set([j, i], true);

                            if (edgeWeights.getItem(k) > 0) {
                                this.Directed.set([i, j], true);
                            }
                            if (edgeWeights.getItem(k) < 0) {
                                this.Directed.set([j, i], true);
                            }
                        }

                        k = (k + 1) | 0;
                    }
                }

                this.Initialize();
            },
            ctor: function (adjacent, vertexWeight) {
                if (vertexWeight === void 0) { vertexWeight = null; }

                this.$initialize();
                this._adjacent = adjacent;
                this.N = ((System.Array.getLength(this._adjacent, 0) - 1) + 1) | 0;
                this.VertexWeight = vertexWeight;

                this._vertices = System.Linq.Enumerable.range(0, this.N).toList(System.Int32);
                this.Directed = System.Array.create(false, null, System.Boolean, this.N, this.N);

                this.Initialize();
            }
        },
        methods: {
            getItem: function (x, y) {
                return this._adjacent.get([x, y]);
            },
            FromOutNeighborLists: function (outNeighbors) {
                var N = outNeighbors.count;

                var edgeWeights = new (System.Collections.Generic.List$1(System.Int32))();
                for (var i = 0; i < N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < N; j = (j + 1) | 0) {
                        if (outNeighbors.get(i).contains(j)) {
                            edgeWeights.add(1);
                        } else {
                            if (outNeighbors.get(j).contains(i)) {
                                edgeWeights.add(-1);
                            } else {
                                edgeWeights.add(0);
                            }
                        }
                    }
                }

                return new Algorithms.Graph.$ctor1(edgeWeights);
            },
            Initialize: function () {
                this._e = new (Algorithms.Lazy$1(System.Int32)).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f3));

                this.SetupNeighbors();
                this.InitializeLazyLoaders();
            },
            SetupNeighbors: function () {
                this._neighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f4));

                this._complementNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f5));

                this._outNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f6));

                this._inNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f7));

                this._laterNeighbors = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f8));

                this.TransitivePartition = new Algorithms.TransitivePartition(this._vertices);

                this.DegreeSequence = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = this.Degree(v);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));

                this.InDegreeSequence = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = this.InDegree(v);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));

                this.OutDegreeSequence = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = this.OutDegree(v);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));

                this.NodeInvariantOne = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t, $t1, $t2, $t3, $t4;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    var sp = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = ($t1 = this.DegreeSequence.Value)[System.Array.index(v, $t1)];
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var k = 3;
                    for (var i = 0; i < k; i = (i + 1) | 0) {
                        $t2 = Bridge.getEnumerator(this._vertices);
                        try {
                            while ($t2.moveNext()) {
                                var v1 = $t2.Current;
                                sp[System.Array.index(v1, sp)] = System.Int64.clip32(System.Int64((s[System.Array.index(v1, s)] << 13 | s[System.Array.index(v1, s)] >> 19)).xor(System.Int64(4278255360)));
                                $t3 = Bridge.getEnumerator(this.Neighbors.getItem(v1));
                                try {
                                    while ($t3.moveNext()) {
                                        var w = $t3.Current;
                                        sp[System.Array.index(v1, sp)] = (sp[System.Array.index(v1, sp)] + s[System.Array.index(w, s)]) | 0;
                                    }
                                } finally {
                                    if (Bridge.is($t3, System.IDisposable)) {
                                        $t3.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }
                        $t4 = Bridge.getEnumerator(this._vertices);
                        try {
                            while ($t4.moveNext()) {
                                var v2 = $t4.Current;
                                s[System.Array.index(v2, s)] = sp[System.Array.index(v2, sp)];
                            }
                        } finally {
                            if (Bridge.is($t4, System.IDisposable)) {
                                $t4.System$IDisposable$dispose();
                            }
                        }}

                    return s;
                }));

                this.NodeInvariantTwo = new (Algorithms.Lazy$1(System.Array.type(System.Int32))).ctor(Bridge.fn.bind(this, function () {
                    var $t, $t1, $t2, $t3, $t4, $t5;
                    var s = System.Array.init(this.N, 0, System.Int32);
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            s[System.Array.index(v, s)] = ($t1 = this.DegreeSequence.Value)[System.Array.index(v, $t1)];

                            $t2 = Bridge.getEnumerator(this.Neighbors.getItem(v));
                            try {
                                while ($t2.moveNext()) {
                                    var w = $t2.Current;
                                    s[System.Array.index(v, s)] = (s[System.Array.index(v, s)] + (Bridge.Int.mul(3, ($t3 = this.DegreeSequence.Value)[System.Array.index(w, $t3)]))) | 0;

                                    $t4 = Bridge.getEnumerator(this.Neighbors.getItem(w));
                                    try {
                                        while ($t4.moveNext()) {
                                            var z = $t4.Current;
                                            if (z !== v) {
                                                s[System.Array.index(v, s)] = (s[System.Array.index(v, s)] + (Bridge.Int.mul(7, ($t5 = this.DegreeSequence.Value)[System.Array.index(z, $t5)]))) | 0;
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t4, System.IDisposable)) {
                                            $t4.System$IDisposable$dispose();
                                        }
                                    }
                                }
                            } finally {
                                if (Bridge.is($t2, System.IDisposable)) {
                                    $t2.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return s;
                }));
            },
            InitializeLazyLoaders: function () {
                this._independentSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f9), true);
                this._independentTwoSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f11), true);
                this._independentThreeSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f13), true);
                this._vertexSubsets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).ctor(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f14));
                this._maximalIndependentSets = new (Algorithms.Lazy$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))).$ctor1(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f15), true);
            },
            toString: function () {
                return Bridge.toArray(System.Linq.Enumerable.from(this.GetEdgeWeights()).select($asm.$.Algorithms.Graph.f16)).join(" ");
            },
            getHashCode: function () {
                return Bridge.getHashCode(this.toString());
            },
            equals: function (obj) {
                var H = Bridge.as(obj, Algorithms.Graph);
                if (Algorithms.Graph.op_Equality(H, null)) {
                    return false;
                }

                if (this.N !== H.N) {
                    return false;
                }
                if (this.E !== H.E) {
                    return false;
                }

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j]) !== H.getItem(i, j)) {
                            return false;
                        }
                    }
                }

                return true;
            },
            PermuteVertices: function (p) {
                var $t;
                var adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        adjacent.set([p.getItem(i), p.getItem(j)], this._adjacent.get([i, j]));
                    }
                }

                var vertexWeight = null;
                if (this.VertexWeight != null) {
                    vertexWeight = new (System.Collections.Generic.List$1(System.Int32))();
                    var pp = p.Inverse();

                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            vertexWeight.add(this.VertexWeight.getItem(pp.getItem(v)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return new Algorithms.Graph.ctor(adjacent, vertexWeight);
            },
            Contains: function (A, induced) {
                return this.Contains$1(A, induced, $asm.$.Algorithms.Graph.f17);
            },
            Contains$1: function (A, induced, condition) {
                if (this.N < A.N) {
                    return false;
                }

                var tau = new (System.Collections.Generic.List$1(System.Int32))();
                return this.Contains$2(A, induced, condition, System.Array.init(A.N, 0, System.Int32), tau, 0);
            },
            Contains$2: function (A, induced, condition, tau, placed, v) {
                var $t;
                if (v === A.N) {
                    return true;
                }

                var images = System.Linq.Enumerable.from(placed).select(function (u) {
                        return tau[System.Array.index(u, tau)];
                    }).orderBy($asm.$.Algorithms.Graph.f18).toList(System.Int32);
                var requiredNeighbors = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.IntersectionSorted$1(A.Neighbors.getItem(v), placed)).select(function (u) {
                        return tau[System.Array.index(u, tau)];
                    }).orderBy($asm.$.Algorithms.Graph.f18).toList(System.Int32);
                var candidates = System.Linq.Enumerable.from(this.Vertices).except(images).where(Bridge.fn.bind(this, function (w) {
                    return A.Degree(v) <= this.Degree(w);
                })).where(Bridge.fn.bind(this, function (w) {
                    return induced ? System.Linq.Enumerable.from(requiredNeighbors).sequenceEqual(Algorithms.Utility.ListUtility.Intersection(System.Int32, this.Neighbors.getItem(w), images)) : Algorithms.Utility.ListUtility.SubsetEqualSorted(requiredNeighbors, this.Neighbors.getItem(w));
                })).where(Bridge.fn.bind(this, function (w) {
                    return condition(this, A, w, v);
                }));

                $t = Bridge.getEnumerator(candidates);
                try {
                    while ($t.moveNext()) {
                        var candidate = $t.Current;
                        tau[System.Array.index(v, tau)] = candidate;
                        placed.add(v);

                        if (this.Contains$2(A, induced, condition, tau, placed, ((v + 1) | 0))) {
                            return true;
                        }

                        placed.removeAt(((placed.Count - 1) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            ContainsInduced: function (A) {
                return this.Contains(A, true);
            },
            ContainsInducedOld: function (A) {
                var $t;
                if (this.N < A.N) {
                    return false;
                }

                var vertexSets = this._vertexSubsets.Value;

                $t = Bridge.getEnumerator(vertexSets);
                try {
                    while ($t.moveNext()) {
                        var vertices = $t.Current;
                        if (Algorithms.Graph.Isomorphic(this.InducedSubgraph(vertices), A)) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            EnumerateConnectedOrderings: function (initialVertices) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function (initialVertices) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        done,
                        $t,
                        v,
                        $t1,
                        ordering,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        done = true;
                                            $t = Bridge.getEnumerator(System.Linq.Enumerable.from(this.Vertices).except(initialVertices));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                v = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 9;
                                        continue;
                                    }
                                    case 2: {
                                        done = false;
                                            if (this.DegreeInSubgraph(v, initialVertices) > 0) {
                                                $step = 3;
                                                continue;
                                            } 
                                            $step = 8;
                                            continue;
                                    }
                                    case 3: {
                                        initialVertices.add(v);
                                            $t1 = Bridge.getEnumerator(this.EnumerateConnectedOrderings(initialVertices), System.Collections.Generic.List$1(System.Int32));
                                            $step = 4;
                                            continue;
                                    }
                                    case 4: {
                                        if ($t1.moveNext()) {
                                                ordering = $t1.Current;
                                                $step = 5;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 5: {
                                        $enumerator.current = System.Linq.Enumerable.from(ordering).toList(System.Int32);
                                            $step = 6;
                                            return true;
                                    }
                                    case 6: {
                                        $step = 4;
                                        continue;
                                    }
                                    case 7: {
                                        initialVertices.removeAt(((initialVertices.Count - 1) | 0));
                                        $step = 8;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 9: {
                                        if (done) {
                                                $step = 10;
                                                continue;
                                            } 
                                            $step = 12;
                                            continue;
                                    }
                                    case 10: {
                                        $enumerator.current = initialVertices;
                                            $step = 11;
                                            return true;
                                    }
                                    case 11: {
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            IsSpanningSubgraphOf: function (A) {
                if (this.N !== A.N) {
                    return false;
                }

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j]) && !A.getItem(i, j)) {
                            return false;
                        }
                    }
                }

                return true;
            },
            GetEdgeWeights: function () {
                return this.GetEdgeWeights$4(System.Array.init([], System.Int32), System.Array.init([], System.Object));
            },
            GetEdgeWeights$2: function (subgraph) {
                var n = subgraph.Count;
                var w = new (System.Collections.Generic.List$1(System.Int32))(n);

                var k = 0;
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        w.add(0);

                        if (this._adjacent.get([subgraph.getItem(i), subgraph.getItem(j)]) || this._adjacent.get([subgraph.getItem(j), subgraph.getItem(i)])) {
                            w.setItem(k, 1);
                        }

                        k = (k + 1) | 0;
                    }
                }

                return w;
            },
            GetEdgeWeights$1: function (adjacent, directed) {
                return this.GetEdgeWeights$3(adjacent, directed, System.Array.init([], System.Int32), System.Array.init([], System.Object));
            },
            GetEdgeWeights$4: function (removedVertices, removedEdges) {
                return this.GetEdgeWeights$3(this._adjacent, this.Directed, removedVertices, removedEdges);
            },
            GetEdgeWeights$3: function (adjacent, directed, removedVertices, removedEdges) {
                var w = new (System.Collections.Generic.List$1(System.Int32))();

                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = { v : (i + 1) | 0 }; j.v < this.N; j.v = (j.v + 1) | 0) {
                        w.add(0);

                        if (!System.Linq.Enumerable.from(removedVertices).any((function ($me, j) {
                                return function (v) {
                                    return v === i || v === j.v;
                                };
                            })(this, j)) && !System.Linq.Enumerable.from(removedEdges).any((function ($me, j) {
                                return function (e) {
                                    return e.item1 === i && e.item2 === j.v || e.item1 === j.v && e.item2 === i;
                                };
                            })(this, j))) {
                            if (adjacent.get([i, j.v]) || adjacent.get([j.v, i])) {
                                w.setItem(k, 1);
                                if (directed.get([j.v, i])) {
                                    w.setItem(k, -1);
                                }
                            }
                        }

                        k = (k + 1) | 0;
                    }
                }

                return w;
            },
            InducedSubgraph: function (subgraph) {
                var $t;
                var vertexWeight = null;
                if (this.VertexWeight != null) {
                    vertexWeight = new (System.Collections.Generic.List$1(System.Int32))(subgraph.Count);
                    $t = Bridge.getEnumerator(subgraph);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            vertexWeight.add(this.VertexWeight.getItem(v));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return new Algorithms.Graph.$ctor1(this.GetEdgeWeights$2(subgraph), vertexWeight);
            },
            ToDotWithFactors: function (labelEdges) {
                var $t, $t1;
                if (labelEdges === void 0) { labelEdges = false; }
                var sb = new System.Text.StringBuilder();

                var factors = this.Factor();
                var colorRanges = new (System.Collections.Generic.List$1(System.Collections.Generic.IEnumerable$1(System.Int32)))();
                var last = 0;
                var G = Algorithms.Graphs.Empty;
                $t = Bridge.getEnumerator(factors, Algorithms.Graph);
                try {
                    while ($t.moveNext()) {
                        var factor = $t.Current;
                        colorRanges.add(System.Linq.Enumerable.range(last, factor.N));
                        last = (last + factor.N) | 0;

                        G = Algorithms.Graph.op_Multiply(G, factor);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                sb.appendLine("graph G {");
                sb.appendLine("overlap = false;");
                sb.appendLine("splines=true;");
                sb.appendLine("sep=0.3;");
                sb.appendLine("node[fontsize=20, style=bold, color=black; shape=circle, penwidth=1];");
                sb.appendLine("edge[style=bold, color=black, penwidth=2];");
                $t1 = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t1.moveNext()) {
                        var v = $t1.Current;
                        var colorIndex = System.Linq.Enumerable.from(colorRanges).select($asm.$.Algorithms.Graph.f19).first((function ($me, v) {
                            return function (p) {
                                return System.Linq.Enumerable.from(p.range).contains(v);
                            };
                        })(this, v)).index % Algorithms.Graph.DotColors.Count;
                        var label = v.toString();
                        sb.appendLine(System.String.format("{0} [label = \"{2}\", style = filled, fillcolor = \"{1}\"];", Bridge.box(v, System.Int32), Algorithms.Graph.DotColors.getItem(colorIndex), label));
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (G._adjacent.get([i, j])) {
                            if (labelEdges) {
                                sb.appendLine(System.String.format("{0} -- {1} [label = \"{2}\"]", Bridge.box(i, System.Int32), Bridge.box(j, System.Int32), Bridge.box(k, System.Int32)));
                            } else {
                                sb.appendLine(System.String.format("{0} -- {1}", Bridge.box(i, System.Int32), Bridge.box(j, System.Int32)));
                            }

                            k = (k + 1) | 0;
                        }
                    }
                }
                sb.appendLine("}");

                return sb.toString();
            },
            ToDotForTikz: function () {
                var $t, $t1;
                var sb = new System.Text.StringBuilder();

                var factors = this.Factor();
                var colorRanges = new (System.Collections.Generic.List$1(System.Collections.Generic.IEnumerable$1(System.Int32)))();
                var last = 0;
                var G = Algorithms.Graphs.Empty;
                $t = Bridge.getEnumerator(factors, Algorithms.Graph);
                try {
                    while ($t.moveNext()) {
                        var factor = $t.Current;
                        colorRanges.add(System.Linq.Enumerable.range(last, factor.N));
                        last = (last + factor.N) | 0;

                        G = Algorithms.Graph.op_Multiply(G, factor);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                sb.appendLine("graph G {");
                $t1 = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t1.moveNext()) {
                        var v = $t1.Current;
                        var colorIndex = System.Linq.Enumerable.from(colorRanges).select($asm.$.Algorithms.Graph.f19).first((function ($me, v) {
                            return function (p) {
                                return System.Linq.Enumerable.from(p.range).contains(v);
                            };
                        })(this, v)).index % Algorithms.Graph.TikzColors.Count;
                        sb.appendLine(System.String.format("{0} [label = \"\", style = \"draw, circle, fill={1}\"];", Bridge.box(v, System.Int32), Algorithms.Graph.TikzColors.getItem(colorIndex)));
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (G._adjacent.get([i, j])) {
                            sb.appendLine(System.String.format("{0} -- {1}", Bridge.box(i, System.Int32), Bridge.box(j, System.Int32)));
                        }
                    }
                }
                sb.appendLine("}");

                return sb.toString();
            },
            IsProperFactor: function (subset) {
                var $t;
                if (subset.Count <= 0) {
                    return true;
                }
                if (subset.Count >= this.N) {
                    return false;
                }

                var rest = Algorithms.Utility.ListUtility.Difference(System.Int32, this._vertices, subset);

                var pairs = System.Linq.Enumerable.from(subset).selectMany(function (i) {
                        return rest;
                    }, $asm.$.Algorithms.Graph.f20);

                $t = Bridge.getEnumerator(pairs);
                try {
                    while ($t.moveNext()) {
                        var pair = $t.Current;
                        if (!this._adjacent.get([pair.item1, pair.item2])) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            Factor: function () {
                var properFactors = System.Linq.Enumerable.from(this._vertexSubsets.Value).where(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f21)).toList(System.Collections.Generic.List$1(System.Int32));
                var maximalFactor = Algorithms.Utility.ListUtility.MaximalElements(System.Int32, properFactors).getItem(0);
                if (maximalFactor.Count <= 0) {
                    return Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f22)(new (System.Collections.Generic.List$1(Algorithms.Graph))());
                }

                var rest = Algorithms.Utility.ListUtility.Difference(System.Int32, this._vertices, maximalFactor);
                var maxFactor = this.InducedSubgraph(maximalFactor);
                var restGraph = this.InducedSubgraph(rest);
                return System.Linq.Enumerable.from(maxFactor.Factor()).concat(restGraph.Factor());
            },
            Clone: function () {
                return new Algorithms.Graph.$ctor1(this.GetEdgeWeights());
            },
            Complement: function () {
                var adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        if (i === j) {
                            continue;
                        }
                        adjacent.set([i, j], !this._adjacent.get([i, j]));
                    }
                }

                return new Algorithms.Graph.ctor(adjacent);
            },
            RemoveVertex: function (v) {
                var subgraph = System.Linq.Enumerable.from(this.Vertices).toList(System.Int32);
                subgraph.remove(v);
                return this.InducedSubgraph(subgraph);
            },
            RemoveEdge$1: function (e) {
                return new Algorithms.Graph.$ctor1(this.GetEdgeWeights$4(System.Array.init([], System.Int32), System.Array.init([e], System.Object)));
            },
            RemoveEdge: function (v1, v2) {
                return this.RemoveEdge$1({ item1: v1, item2: v2 });
            },
            AddEdge$1: function (v1, v2, directed) {
                var g = this.Clone();
                g._adjacent.set([v1, v2], (g._adjacent.set([v2, v1], true), true));
                if (directed) {
                    g.Directed.set([v1, v2], true);
                }

                return new Algorithms.Graph.$ctor1(g.GetEdgeWeights());
            },
            AddEdge: function (x, y) {
                var G = this.Clone();
                G._adjacent.set([x, y], true);
                G._adjacent.set([y, x], true);

                G.Initialize();
                return G;
            },
            GetArbitraryEdge: function () {
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            return { item1: i, item2: j };
                        }
                    }
                }

                return null;
            },
            GetEdgeTuples: function () {
                var tuples = new (System.Collections.Generic.List$1(System.Object))();

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            if (this.Directed.get([i, j])) {
                                tuples.add({ item1: i, item2: j });
                            } else {
                                tuples.add({ item1: j, item2: i });
                            }
                        }
                    }
                }

                return tuples;
            },
            DisjointUnion: function (H) {
                var n = (this.N + H.N) | 0;

                var adjacent = System.Array.create(false, null, System.Boolean, n, n);
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        adjacent.set([i, j], this._adjacent.get([i, j]));
                    }
                }

                for (var i1 = 0; i1 < H.N; i1 = (i1 + 1) | 0) {
                    for (var j1 = 0; j1 < H.N; j1 = (j1 + 1) | 0) {
                        adjacent.set([((this.N + i1) | 0), ((this.N + j1) | 0)], H.getItem(i1, j1));
                    }
                }

                return new Algorithms.Graph.ctor(adjacent);
            },
            Join: function (H) {
                var G = this.DisjointUnion(H);

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < H.N; j = (j + 1) | 0) {
                        G._adjacent.set([i, ((this.N + j) | 0)], true);
                        G._adjacent.set([((this.N + j) | 0), i], true);
                    }
                }

                G.Initialize();
                return G;
            },
            AttachNewVertex$1: function (neighbors) {
                if (neighbors === void 0) { neighbors = []; }
                return this.AttachNewVertex(Bridge.cast(neighbors, System.Collections.Generic.IList$1(System.Int32)));
            },
            AttachNewVertex: function (neighbors) {
                var $t;
                var adjacent = System.Array.create(false, null, System.Boolean, ((this.N + 1) | 0), ((this.N + 1) | 0));

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        adjacent.set([i, j], this._adjacent.get([i, j]));
                    }
                }

                $t = Bridge.getEnumerator(neighbors, System.Int32);
                try {
                    while ($t.moveNext()) {
                        var neighbor = $t.Current;
                        adjacent.set([this.N, neighbor], true);
                        adjacent.set([neighbor, this.N], true);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return new Algorithms.Graph.ctor(adjacent);
            },
            Square: function () {
                var $t, $t1;
                var g = this.Clone();
                $t = Bridge.getEnumerator(this.Vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        $t1 = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Int32, this.Neighbors.getItem(v), this.Neighbors.getItem(v)), System.Object);
                        try {
                            while ($t1.moveNext()) {
                                var pair = $t1.Current;
                                if (pair.item1 !== pair.item2) {
                                    g._adjacent.set([pair.item1, pair.item2], (g._adjacent.set([pair.item2, pair.item1], true), true));
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return g.Clone();
            },
            IsRegular: function () {
                if (this.N <= 0) {
                    return true;
                }

                return System.Linq.Enumerable.from(this.Neighbors).all(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f23));
            },
            Degree: function (v) {
                return this.Neighbors.getItem(v).Count;
            },
            OutDegree: function (v) {
                return this.OutNeighbors.getItem(v).Count;
            },
            InDegree: function (v) {
                return this.InNeighbors.getItem(v).Count;
            },
            DegreeInSubgraph: function (v, subgraph) {
                return Algorithms.Utility.ListUtility.IntersectionCountSorted(this.Neighbors.getItem(v), subgraph);
            },
            NeighborsInSubgraph: function (v, subgraph) {
                return Algorithms.Utility.ListUtility.IntersectionSorted$1(this.Neighbors.getItem(v), subgraph);
            },
            SumOverSubgraphNeighbors: function (v, subgraph, g) {
                return System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.IntersectionSorted$1(this.Neighbors.getItem(v), subgraph)).sum(function (w) {
                        return g[System.Array.index(w, g)];
                    });
            },
            GetDegreeMinusKFunc: function (k) {
                return Bridge.fn.bind(this, function (v) {
                    return ((this.Degree(v) - k) | 0);
                });
            },
            EdgesOn: function (A) {
                var edges = 0;
                for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < A.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([A.getItem(i), A.getItem(j)])) {
                            edges = (edges + 1) | 0;
                        }
                    }
                }

                return edges;
            },
            EdgeIndicesOn: function (A) {
                var edgeIndices = new (System.Collections.Generic.List$1(System.Int32))();

                var k = 0;
                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            if (A.contains(i) && A.contains(j)) {
                                edgeIndices.add(k);
                            }

                            k = (k + 1) | 0;
                        }
                    }
                }

                return edgeIndices;
            },
            EdgesBetween: function (A, B) {
                var intersection = Algorithms.Utility.ListUtility.Intersection(System.Int32, A, B);
                A = Algorithms.Utility.ListUtility.Difference(System.Int32, A, B);

                var edges = 0;
                for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                    for (var j = 0; j < B.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([A.getItem(i), B.getItem(j)])) {
                            edges = (edges + 1) | 0;
                        }
                    }
                }

                return ((edges + this.EdgesOn(intersection)) | 0);
            },
            IndependentSetsInSubgraph: function (firstVertex) {
                if (firstVertex >= this.N) {
                    return $asm.$.Algorithms.Graph.f24(new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))());
                }

                var subgraphSets = this.IndependentSetsInSubgraph(((firstVertex + 1) | 0));

                return System.Linq.Enumerable.from(subgraphSets).union(System.Linq.Enumerable.from(subgraphSets).where(Bridge.fn.bind(this, function (set) {
                            return this.IsIndependentOf(firstVertex, set);
                        })).select(function (set) {
                        var bigger = function (_o15) {
                                _o15.add(firstVertex);
                                return _o15;
                            }(new (System.Collections.Generic.List$1(System.Int32))());
                        bigger.addRange(set);
                        return bigger;
                    }));
            },
            IsIndependentOf: function (v, set) {
                var $t;
                $t = Bridge.getEnumerator(set);
                try {
                    while ($t.moveNext()) {
                        var w = $t.Current;
                        if (w === v || this._adjacent.get([w, v])) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            IsClique: function (subset) {
                for (var i = 0; i < subset.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < subset.Count; j = (j + 1) | 0) {
                        if (!this._adjacent.get([subset.getItem(i), subset.getItem(j)])) {
                            return false;
                        }
                    }
                }

                return true;
            },
            IsIndependent: function (subset) {
                for (var i = 0; i < subset.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < subset.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([subset.getItem(i), subset.getItem(j)])) {
                            return false;
                        }
                    }
                }

                return true;
            },
            IsComplete: function () {
                return this.IsClique(this._vertices);
            },
            IsCliqueNumberAtLeast: function (k) {
                var $t;
                if (k > this._vertices.Count) {
                    return false;
                }
                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, this._vertices, k), System.Collections.Generic.List$1(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var set = $t.Current;
                        if (this.IsClique(set)) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            IndependenceNumber: function () {
                return this.IndependenceNumber$1(this.Vertices);
            },
            IndependenceNumber$1: function (subgraph) {
                return System.Linq.Enumerable.from(this._independentSets.Value).max(function (I) {
                        return Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, I, subgraph);
                    });
            },
            MaximumIndependentSubset: function (subgraph) {
                var i = this.IndependenceNumber$1(subgraph);
                return System.Linq.Enumerable.from(this._independentSets.Value).first(function (I) {
                        return Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, I, subgraph) === i;
                    });
            },
            EnumerateMaximalIndependentSets$1: function (set) {
                return this.EnumerateBronKerbosch(set, new (System.Collections.Generic.List$1(System.Int32))(), new (System.Collections.Generic.List$1(System.Int32))());
            },
            EnumerateMaximalIndependentSets: function () {
                return this.EnumerateBronKerbosch(this.Vertices, new (System.Collections.Generic.List$1(System.Int32))(), new (System.Collections.Generic.List$1(System.Int32))());
            },
            EnumerateBronKerbosch: function (P, R, X) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function (P, R, X) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        PC,
                        XC,
                        u,
                        $t,
                        v,
                        $t1,
                        set,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Int32)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (P.Count === 0 && X.Count === 0) {
                                                $step = 1;
                                                continue;
                                            } else  {
                                                $step = 3;
                                                continue;
                                            }
                                    }
                                    case 1: {
                                        $enumerator.current = System.Linq.Enumerable.from(R).toList(System.Int32);
                                            $step = 2;
                                            return true;
                                    }
                                    case 2: {
                                        $step = 11;
                                        continue;
                                    }
                                    case 3: {
                                        PC = System.Linq.Enumerable.from(P).toList(System.Int32);
                                            XC = System.Linq.Enumerable.from(X).toList(System.Int32);

                                            u = this.TomitaPivot(P, X);
                                            $t = Bridge.getEnumerator(System.Linq.Enumerable.from(P).except(this.ComplementNeighbors.getItem(u)));
                                            $step = 4;
                                            continue;
                                    }
                                    case 4: {
                                        if ($t.moveNext()) {
                                                v = $t.Current;
                                                $step = 5;
                                                continue;
                                            }
                                        $step = 10;
                                        continue;
                                    }
                                    case 5: {
                                        R.add(v);
                                            $t1 = Bridge.getEnumerator(this.EnumerateBronKerbosch(Algorithms.Utility.ListUtility.Intersection(System.Int32, PC, this.ComplementNeighbors.getItem(v)), R, Algorithms.Utility.ListUtility.Intersection(System.Int32, XC, this.ComplementNeighbors.getItem(v))), System.Collections.Generic.List$1(System.Int32));
                                            $step = 6;
                                            continue;
                                    }
                                    case 6: {
                                        if ($t1.moveNext()) {
                                                set = $t1.Current;
                                                $step = 7;
                                                continue;
                                            }
                                        $step = 9;
                                        continue;
                                    }
                                    case 7: {
                                        $enumerator.current = set;
                                            $step = 8;
                                            return true;
                                    }
                                    case 8: {
                                        $step = 6;
                                        continue;
                                    }
                                    case 9: {
                                        R.remove(v);
                                            PC.remove(v);
                                            XC.add(v);
                                        $step = 4;
                                        continue;
                                    }
                                    case 10: {
                                        $step = 11;
                                        continue;
                                    }
                                    case 11: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            TomitaPivot: function (P, X) {
                var $t;
                var max = -1;
                var best = -1;
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(P).concat(X));
                try {
                    while ($t.moveNext()) {
                        var u = $t.Current;
                        var n = Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, this.ComplementNeighbors.getItem(u), P);
                        if (n > max) {
                            max = n;
                            best = u;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return best;
            },
            FindChiColoring: function () {
                for (var K = 0; K < 2147483647; K = (K + 1) | 0) {
                    var c = this.FindKColoring(this.Vertices, K);
                    if (c != null) {
                        return c;
                    }
                }

                return null;
            },
            FindKColoring: function (subgraph, K) {
                var $t;
                if (subgraph.Count <= 0) {
                    return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                }
                if (K <= 0) {
                    return null;
                }

                $t = Bridge.getEnumerator(this.EnumerateMaximalIndependentSets$1(subgraph), System.Collections.Generic.List$1(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var I = $t.Current;
                        var c = this.FindKColoring(Algorithms.Utility.ListUtility.Difference(System.Int32, subgraph, I), ((K - 1) | 0));
                        if (c != null) {
                            c.insert(0, I);
                            return c;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return null;
            },
            MaxColorableSubset: function (assignment, subset) {
                return this.MaxColorableSubset$1(assignment, 0, subset);
            },
            MaxColorableSubset$1: function (assignment, v, subset) {
                var $t;
                if (v >= subset.Count) {
                    return 0;
                }

                var max = this.MaxColorableSubset$1(assignment, ((v + 1) | 0), subset);

                var colors = assignment.getItem(subset.getItem(v));
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._laterNeighbors.Value.getItem(subset.getItem(v)));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    max = Math.max(max, ((1 + this.MaxColorableSubset$1(assignmentCopy, ((v + 1) | 0), subset)) | 0));
                    if (max >= subset.Count) {
                        break;
                    }

                    colors = colors.xor(color);
                }

                return max;
            },
            GreedyColor: function (assignment, subset) {
                var $t;
                var coloring = System.Array.init(this.N, System.Int64(0), System.Int64);
                $t = Bridge.getEnumerator(subset);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        var lost = System.Linq.Enumerable.from(this.Neighbors.getItem(v)).aggregate(System.Int64(0), function (l, x) {
                                return l.or(coloring[System.Array.index(x, coloring)]);
                            });
                        var colors = assignment.getItem(v).and(lost.not());
                        coloring[System.Array.index(v, coloring)] = colors.and(colors.neg());
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return System.Linq.Enumerable.from(coloring).count($asm.$.Algorithms.Graph.f25);
            },
            IsChoosable$1: function (assignment, subset) {
                return this.IsChoosable$3(assignment, 0, subset);
            },
            IsChoosable$3: function (assignment, v, subset) {
                var $t;
                if (v >= subset.Count) {
                    return true;
                }

                var colors = assignment.getItem(subset.getItem(v));
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._laterNeighbors.Value.getItem(subset.getItem(v)));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (this.IsChoosable$3(assignmentCopy, ((v + 1) | 0), subset)) {
                        return true;
                    }

                    colors = colors.xor(color);
                }

                return false;
            },
            IsChoosable: function (assignment) {
                return this.IsChoosable$2(assignment, 0);
            },
            IsChoosable$2: function (assignment, v) {
                var $t;
                if (v >= this.N) {
                    return true;
                }

                var colors = assignment.getItem(v);
                while (colors.ne(System.Int64(0))) {
                    var color = colors.and(colors.neg());

                    var assignmentCopy = new (System.Collections.Generic.List$1(System.Int64))(assignment);
                    $t = Bridge.getEnumerator(this._laterNeighbors.Value.getItem(v));
                    try {
                        while ($t.moveNext()) {
                            var neighbor = $t.Current;
                            assignmentCopy.setItem(neighbor, assignmentCopy.getItem(neighbor).and((color.not())));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (this.IsChoosable$2(assignmentCopy, ((v + 1) | 0))) {
                        return true;
                    }

                    colors = colors.xor(color);
                }

                return false;
            },
            IsCliqueCovering: function (assignment) {
                var $t;
                $t = Bridge.getEnumerator(this._independentTwoSets.Value);
                try {
                    while ($t.moveNext()) {
                        var set = $t.Current;
                        if ((assignment.getItem(set.getItem(0)).and(assignment.getItem(set.getItem(1)))).ne(System.Int64(0))) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            CheckFGChoosable: function (f, g) {
                var $t;
                var pot = System.Linq.Enumerable.range(0, ((System.Linq.Enumerable.from(this.Vertices).sum(function (v) {
                        return g(v);
                    }) - 1) | 0)).toList(System.Int32);
                var first = System.Linq.Enumerable.range(0, f(0)).toList(System.Int32);
                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(Bridge.cast((System.Array.init([(System.Array.init([first], System.Collections.Generic.List$1(System.Int32)))], System.Array.type(System.Collections.Generic.List$1(System.Int32)))), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32))))).concat(System.Linq.Enumerable.from(this.Vertices).skip(1).select(function (v) {
                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, pot, f(v));
                    }))), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var L = $t.Current;
                        var LL = System.Linq.Enumerable.from(L).toList(System.Collections.Generic.List$1(System.Int32));
                        if (!this.IsGColorable(LL, g)) {
                            return LL;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return null;
            },
            IsGColorable: function (L, g) {
                var $t;
                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(this.Vertices).select(function (v) {
                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, L.getItem(v), g(v));
                    })), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var coloring = $t.Current;
                        if (this.IsProperColoring(System.Linq.Enumerable.from(coloring).toList(System.Collections.Generic.List$1(System.Int32)))) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            IsProperColoring: function (coloring) {
                for (var v = 0; v < this.N; v = (v + 1) | 0) {
                    for (var w = (v + 1) | 0; w < this.N; w = (w + 1) | 0) {
                        if (!this._adjacent.get([v, w])) {
                            continue;
                        }

                        if (Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, coloring.getItem(v), coloring.getItem(w)) > 0) {
                            return false;
                        }
                    }
                }

                return true;
            },
            Mic: function () {
                var $t;
                var mic = 0;
                $t = Bridge.getEnumerator(this.EnumerateMaximalIndependentSets(), System.Collections.Generic.List$1(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var set = $t.Current;
                        var t = System.Linq.Enumerable.from(set).sum(Bridge.fn.bind(this, $asm.$.Algorithms.Graph.f26));
                        mic = Math.max(mic, t);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return mic;
            },
            IsOnlineFChoosable: function (f) {
                var $t;
                Algorithms.Graph.NodesVisited = System.Int64(0);
                Algorithms.Graph.CacheHits = System.Int64(0);

                var fTrace = System.Array.init(this.N, 0, System.Int32);
                $t = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        fTrace[System.Array.index(v, fTrace)] = f(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var cache = new (System.Collections.Generic.Dictionary$2(Algorithms.OnlineChoiceHashGraph,System.Boolean))();

                return this.IsOnlineFChoosable$1(fTrace, System.Linq.Enumerable.repeat(1, this.N).toArray(System.Int32), cache);
            },
            IsOnlineFChoosable$1: function (f, g, cache) {
                var $step = 0,
                    $jumpFromFinally, 
                    key, 
                    result, 
                    gClone, 
                    liveVertices, 
                    freebies, 
                    $t, 
                    v, 
                    cachedResult, 
                    independentSets, 
                    $t1, 
                    V, 
                    $t2, 
                    v1, 
                    maximalIndependentSets, 
                    choosable, 
                    $t3, 
                    C, 
                    $t4, 
                    v2, 
                    $t5, 
                    v3, 
                    $t6, 
                    v4, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.NodesVisited = Algorithms.Graph.NodesVisited.inc();

                                    key = null;

                                    result = true;
                                    gClone = null;

                                    liveVertices = System.Linq.Enumerable.from(g).select($asm.$.Algorithms.Graph.f27).where($asm.$.Algorithms.Graph.f28).toList(System.Int32);
                                    freebies = System.Linq.Enumerable.from(liveVertices).where(Bridge.fn.bind(this, function (v) {
                                        return this.DegreeInSubgraph(v, liveVertices) < f[System.Array.index(v, f)];
                                    })).toList(System.Int32);

                                    while (freebies.Count > 0) {
                                        if (gClone == null) {
                                            gClone = System.Array.init(g.length, 0, System.Int32);
                                            System.Array.copy(g, 0, gClone, 0, g.length);
                                        }

                                        $t = Bridge.getEnumerator(freebies);
                                        try {
                                            while ($t.moveNext()) {
                                                v = $t.Current;
                                                g[System.Array.index(v, g)] = 0;
                                            }
                                        } finally {
                                            if (Bridge.is($t, System.IDisposable)) {
                                                $t.System$IDisposable$dispose();
                                            }
                                        }
                                        liveVertices = System.Linq.Enumerable.from(g).select($asm.$.Algorithms.Graph.f29).where($asm.$.Algorithms.Graph.f28).toList(System.Int32);
                                        freebies = System.Linq.Enumerable.from(liveVertices).where(Bridge.fn.bind(this, function (v1) {
                                            return this.DegreeInSubgraph(v1, liveVertices) < f[System.Array.index(v1, f)];
                                        })).toList(System.Int32);
                                    }

                                    if (liveVertices.Count <= 0) {
                                        $step = 1;
                                        continue;
                                    } 
                                    $step = 2;
                                    continue;
                                }
                                case 1: {
                                    result = true;
                                    $step = 12;
                                    continue;
                                }
                                case 2: {
                                    if (System.Linq.Enumerable.from(liveVertices).any(function (v1) {
                                        return f[System.Array.index(v1, f)] <= 0;
                                    })) {
                                        $step = 3;
                                        continue;
                                    } 
                                    $step = 4;
                                    continue;
                                }
                                case 3: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 4: {
                                    key = new Algorithms.OnlineChoiceHashGraph(f, g);
                                    cachedResult = { };
                                    if (cache.tryGetValue(key, cachedResult)) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    Algorithms.Graph.CacheHits = Algorithms.Graph.CacheHits.inc();

                                    key = null;
                                    result = cachedResult.v;
                                    $step = 12;
                                    continue;
                                }
                                case 6: {
                                    independentSets = System.Linq.Enumerable.from(this._independentSets.Value).where(function (set) {
                                        return set.Count >= 1 && Algorithms.Utility.ListUtility.SubsetEqualSorted(set, liveVertices);
                                    }).toList(System.Collections.Generic.List$1(System.Int32));

                                    $t1 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, liveVertices), System.Collections.Generic.List$1(System.Int32));
                                    $step = 7;
                                    continue;
                                }
                                case 7: {
                                    if ($t1.moveNext()) {
                                        V = $t1.Current;
                                        $step = 8;
                                        continue;
                                    }
                                    $step = 11;
                                    continue;
                                }
                                case 8: {
                                    if (V.Count <= 1) {
                                        $step = 7;
                                        continue;
                                    }

                                    if (System.Linq.Enumerable.from(independentSets).any((function ($me, V) {
                                        return function (ss) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(V, ss);
                                        };
                                    })(this, V))) {
                                        $step = 7;
                                        continue;
                                    }

                                    $t2 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t2.moveNext()) {
                                            v1 = $t2.Current;
                                            f[System.Array.index(v1, f)] = (f[System.Array.index(v1, f)] - 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    maximalIndependentSets = Algorithms.Utility.ListUtility.MaximalElementsSorted$1(System.Linq.Enumerable.from(independentSets).where((function ($me, V) {
                                        return function (set) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(set, V);
                                        };
                                    })(this, V)).toList(System.Collections.Generic.List$1(System.Int32)));

                                    choosable = false;
                                    $t3 = Bridge.getEnumerator(maximalIndependentSets);
                                    try {
                                        while ($t3.moveNext()) {
                                            C = $t3.Current;
                                            $t4 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t4.moveNext()) {
                                                    v2 = $t4.Current;
                                                    g[System.Array.index(v2, g)] = (g[System.Array.index(v2, g)] - 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t4, System.IDisposable)) {
                                                    $t4.System$IDisposable$dispose();
                                                }
                                            }
                                            choosable = this.IsOnlineFChoosable$1(f, g, cache);

                                            $t5 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t5.moveNext()) {
                                                    v3 = $t5.Current;
                                                    g[System.Array.index(v3, g)] = (g[System.Array.index(v3, g)] + 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t5, System.IDisposable)) {
                                                    $t5.System$IDisposable$dispose();
                                                }
                                            }
                                            if (choosable) {
                                                break;
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t3, System.IDisposable)) {
                                            $t3.System$IDisposable$dispose();
                                        }
                                    }
                                    $t6 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t6.moveNext()) {
                                            v4 = $t6.Current;
                                            f[System.Array.index(v4, f)] = (f[System.Array.index(v4, f)] + 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t6, System.IDisposable)) {
                                            $t6.System$IDisposable$dispose();
                                        }
                                    }
                                    if (!choosable) {
                                        $step = 9;
                                        continue;
                                    } 
                                    $step = 10;
                                    continue;
                                }
                                case 9: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 10: {
                                    $step = 7;
                                    continue;
                                }
                                case 11: {

                                }
                                case 12: {
                                    if (gClone != null) {
                                        System.Array.copy(gClone, 0, g, 0, g.length);
                                    }

                                    if (key != null) {
                                        cache.set(key, result);
                                    }

                                    return result;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            IsOnlineFGChoosable: function (f, g) {
                Algorithms.Graph.NodesVisited = System.Int64(0);
                Algorithms.Graph.CacheHits = System.Int64(0);

                var cache = new (System.Collections.Generic.Dictionary$2(Algorithms.OnlineChoiceHashGraph,System.Boolean))();
                return this.IsOnlineFGChoosable$1(System.Linq.Enumerable.from(this._vertices).select(function (v) {
                        return f(v);
                    }).toArray(System.Int32), System.Linq.Enumerable.from(this._vertices).select(function (v) {
                        return g(v);
                    }).toArray(System.Int32), cache);
            },
            IsOnlineFGChoosable$1: function (f, g, cache) {
                var $step = 0,
                    $jumpFromFinally, 
                    key, 
                    result, 
                    gClone, 
                    changed, 
                    $t, 
                    v, 
                    need, 
                    liveVertices, 
                    cachedResult, 
                    independentSets, 
                    $t1, 
                    V, 
                    $t2, 
                    v1, 
                    maximalIndependentSets, 
                    choosable, 
                    $t3, 
                    C, 
                    $t4, 
                    v2, 
                    $t5, 
                    v3, 
                    $t6, 
                    v4, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.NodesVisited = Algorithms.Graph.NodesVisited.inc();
                                    key = null;

                                    result = true;
                                    gClone = System.Array.init(g.length, 0, System.Int32);
                                    System.Array.copy(g, 0, gClone, 0, g.length);

                                    while (true) {
                                        changed = false;
                                        $t = Bridge.getEnumerator(this._vertices);
                                        try {
                                            while ($t.moveNext()) {
                                                v = $t.Current;
                                                if (g[System.Array.index(v, g)] <= 0) {
                                                    continue;
                                                }

                                                need = (g[System.Array.index(v, g)] + System.Linq.Enumerable.from(this.Neighbors.getItem(v)).sum(function (w) {
                                                    return g[System.Array.index(w, g)];
                                                })) | 0;
                                                if (f[System.Array.index(v, f)] >= need) {
                                                    g[System.Array.index(v, g)] = 0;
                                                    changed = true;
                                                }
                                            }
                                        } finally {
                                            if (Bridge.is($t, System.IDisposable)) {
                                                $t.System$IDisposable$dispose();
                                            }
                                        }
                                        if (!changed) {
                                            break;
                                        }
                                    }

                                    liveVertices = System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(System.Int32, g, $asm.$.Algorithms.Graph.f30)).toList(System.Int32);
                                    if (liveVertices.Count <= 0) {
                                        $step = 1;
                                        continue;
                                    } 
                                    $step = 2;
                                    continue;
                                }
                                case 1: {
                                    result = true;
                                    $step = 12;
                                    continue;
                                }
                                case 2: {
                                    if (System.Linq.Enumerable.from(liveVertices).any(function (v1) {
                                        return f[System.Array.index(v1, f)] < g[System.Array.index(v1, g)];
                                    })) {
                                        $step = 3;
                                        continue;
                                    } 
                                    $step = 4;
                                    continue;
                                }
                                case 3: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 4: {
                                    key = new Algorithms.OnlineChoiceHashGraph(f, g);
                                    cachedResult = { };
                                    if (cache.tryGetValue(key, cachedResult)) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    Algorithms.Graph.CacheHits = Algorithms.Graph.CacheHits.inc();

                                    key = null;
                                    result = cachedResult.v;
                                    $step = 12;
                                    continue;
                                }
                                case 6: {
                                    independentSets = System.Linq.Enumerable.from(this._independentSets.Value).where(function (set) {
                                        return set.Count >= 1 && Algorithms.Utility.ListUtility.SubsetEqualSorted(set, liveVertices);
                                    }).toList(System.Collections.Generic.List$1(System.Int32));

                                    $t1 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, liveVertices), System.Collections.Generic.List$1(System.Int32));
                                    $step = 7;
                                    continue;
                                }
                                case 7: {
                                    if ($t1.moveNext()) {
                                        V = $t1.Current;
                                        $step = 8;
                                        continue;
                                    }
                                    $step = 11;
                                    continue;
                                }
                                case 8: {
                                    if (V.Count <= 1) {
                                        $step = 7;
                                        continue;
                                    }

                                    if (System.Linq.Enumerable.from(independentSets).any((function ($me, V) {
                                        return function (ss) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(V, ss);
                                        };
                                    })(this, V))) {
                                        $step = 7;
                                        continue;
                                    }

                                    $t2 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t2.moveNext()) {
                                            v1 = $t2.Current;
                                            f[System.Array.index(v1, f)] = (f[System.Array.index(v1, f)] - 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    maximalIndependentSets = Algorithms.Utility.ListUtility.MaximalElementsSorted$1(System.Linq.Enumerable.from(independentSets).where((function ($me, V) {
                                        return function (set) {
                                            return Algorithms.Utility.ListUtility.SubsetEqualSorted(set, V);
                                        };
                                    })(this, V)).toList(System.Collections.Generic.List$1(System.Int32)));

                                    choosable = false;
                                    $t3 = Bridge.getEnumerator(maximalIndependentSets);
                                    try {
                                        while ($t3.moveNext()) {
                                            C = $t3.Current;
                                            $t4 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t4.moveNext()) {
                                                    v2 = $t4.Current;
                                                    g[System.Array.index(v2, g)] = (g[System.Array.index(v2, g)] - 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t4, System.IDisposable)) {
                                                    $t4.System$IDisposable$dispose();
                                                }
                                            }
                                            choosable = this.IsOnlineFGChoosable$1(f, g, cache);

                                            $t5 = Bridge.getEnumerator(C);
                                            try {
                                                while ($t5.moveNext()) {
                                                    v3 = $t5.Current;
                                                    g[System.Array.index(v3, g)] = (g[System.Array.index(v3, g)] + 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t5, System.IDisposable)) {
                                                    $t5.System$IDisposable$dispose();
                                                }
                                            }
                                            if (choosable) {
                                                break;
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t3, System.IDisposable)) {
                                            $t3.System$IDisposable$dispose();
                                        }
                                    }
                                    $t6 = Bridge.getEnumerator(V);
                                    try {
                                        while ($t6.moveNext()) {
                                            v4 = $t6.Current;
                                            f[System.Array.index(v4, f)] = (f[System.Array.index(v4, f)] + 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t6, System.IDisposable)) {
                                            $t6.System$IDisposable$dispose();
                                        }
                                    }
                                    if (!choosable) {
                                        $step = 9;
                                        continue;
                                    } 
                                    $step = 10;
                                    continue;
                                }
                                case 9: {
                                    result = false;
                                    $step = 12;
                                    continue;
                                }
                                case 10: {
                                    $step = 7;
                                    continue;
                                }
                                case 11: {

                                }
                                case 12: {
                                    if (gClone != null) {
                                        System.Array.copy(gClone, 0, g, 0, g.length);
                                    }

                                    if (key != null) {
                                        cache.set(key, result);
                                    }

                                    return result;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            Direction: function (e) {
                if (!this._adjacent.get([e.item1, e.item2])) {
                    return 0;
                }

                return this.Directed.get([e.item2, e.item1]) ? -1 : 1;
            },
            MatchesOutMinusIn: function (outMinusIn) {
                return System.Linq.Enumerable.from(this._vertices).all(Bridge.fn.bind(this, function (v) {
                        return ((this.OutDegree(v) - this.InDegree(v)) | 0) === outMinusIn.getItem(v);
                    }));
            },
            SpanningOutMinusInSubgraphs: function (outMinusIn, edges, spanningEulerianOrientationsCache) {
                Algorithms.Graph.NodesVisited = Algorithms.Graph.NodesVisited.inc();

                var graphs = new (System.Collections.Generic.List$1(Algorithms.Graph))();

                if (System.Linq.Enumerable.from(this._vertices).any(Bridge.fn.bind(this, function (v) {
                        return outMinusIn.getItem(v) > this.OutDegree(v) || ((-outMinusIn.getItem(v)) | 0) > this.InDegree(v);
                    }))) {
                    return graphs;
                }

                var key = new Algorithms.OrientationHashGraph(this, outMinusIn);

                if (Algorithms.Graph.MemoizeEulerianSubgraphCounting) {
                    var spanners = { };
                    if (spanningEulerianOrientationsCache.tryGetValue(key, spanners)) {
                        Algorithms.Graph.CacheHits = Algorithms.Graph.CacheHits.inc();
                        return spanners.v;
                    }
                }

                if (edges.Count <= 0) {
                    if (this.MatchesOutMinusIn(outMinusIn)) {
                        graphs.add(this);
                    }

                    return graphs;
                }

                var e = System.Linq.Enumerable.from(edges).last();

                edges.remove(e);
                var g = this.RemoveEdge$1(e);

                graphs.addRange(g.SpanningOutMinusInSubgraphs(outMinusIn, edges, spanningEulerianOrientationsCache));

                var outMinusInPrime = System.Linq.Enumerable.from(outMinusIn).toList(System.Int32);
                var v1 = e.item1;
                var v2 = e.item2;

                if (this.Direction(e) === 1) {
                    outMinusInPrime.setItem(e.item1, (outMinusInPrime.getItem(e.item1) - 1) | 0);
                    outMinusInPrime.setItem(e.item2, (outMinusInPrime.getItem(e.item2) + 1) | 0);
                } else {
                    outMinusInPrime.setItem(e.item1, (outMinusInPrime.getItem(e.item1) + 1) | 0);
                    outMinusInPrime.setItem(e.item2, (outMinusInPrime.getItem(e.item2) - 1) | 0);

                    v1 = e.item2;
                    v2 = e.item1;
                }

                graphs.addRange(System.Linq.Enumerable.from(g.SpanningOutMinusInSubgraphs(outMinusInPrime, edges, spanningEulerianOrientationsCache)).select(function (graph) {
                        return graph.AddEdge$1(v1, v2, true);
                    }));

                if (Algorithms.Graph.MemoizeEulerianSubgraphCounting) {
                    spanningEulerianOrientationsCache.set(key, graphs);
                }

                edges.add(e);
                return graphs;
            },
            SpanningEulerianSubgraphs: function (edges, spanningEulerianOrientationsCache) {
                return this.SpanningOutMinusInSubgraphs(System.Linq.Enumerable.from(System.Array.init(this.N, 0, System.Int32)).toList(System.Int32), edges, spanningEulerianOrientationsCache);
            },
            CountSpanningEulerianSubgraphs: function (even, odd) {
                var $t;
                Algorithms.Graph.CacheHits = System.Int64(0);
                Algorithms.Graph.NodesVisited = System.Int64(0);
                var spanningEulerianOrientationsCache = new (System.Collections.Generic.Dictionary$2(Algorithms.OrientationHashGraph,System.Collections.Generic.List$1(Algorithms.Graph)))();
                var edges = this.GetEdgeTuples();

                even.v = 0;
                odd.v = 0;
                $t = Bridge.getEnumerator(this.SpanningEulerianSubgraphs(edges, spanningEulerianOrientationsCache));
                try {
                    while ($t.moveNext()) {
                        var g = $t.Current;
                        if (g.Size % 2 === 0) {
                            even.v = (even.v + 1) | 0;
                        } else {
                            odd.v = (odd.v + 1) | 0;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            CountSpanningEulerianSubgraphsUsingVertices: function (vertices, even, odd) {
                var $step = 0,
                    $jumpFromFinally, 
                    spanningEulerianOrientationsCache, 
                    edges, 
                    $t, 
                    g, 
                    $t1, 
                    v, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.CacheHits = System.Int64(0);
                                    Algorithms.Graph.NodesVisited = System.Int64(0);

                                    if (vertices == null) {
                                        vertices = new (System.Collections.Generic.List$1(System.Int32))();
                                    }

                                    spanningEulerianOrientationsCache = new (System.Collections.Generic.Dictionary$2(Algorithms.OrientationHashGraph,System.Collections.Generic.List$1(Algorithms.Graph)))();
                                    edges = this.GetEdgeTuples();

                                    even.v = 0;
                                    odd.v = 0;
                                    $t = Bridge.getEnumerator(this.SpanningEulerianSubgraphs(edges, spanningEulerianOrientationsCache));
                                    $step = 1;
                                    continue;
                                }
                                case 1: {
                                    if ($t.moveNext()) {
                                        g = $t.Current;
                                        $step = 2;
                                        continue;
                                    }
                                    $step = 9;
                                    continue;
                                }
                                case 2: {
                                    $t1 = Bridge.getEnumerator(vertices);
                                    $step = 3;
                                    continue;
                                }
                                case 3: {
                                    if ($t1.moveNext()) {
                                        v = $t1.Current;
                                        $step = 4;
                                        continue;
                                    }
                                    $step = 7;
                                    continue;
                                }
                                case 4: {
                                    if (g.Degree(v) <= 0) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    $step = 8;
                                    continue;
                                }
                                case 6: {
                                    $step = 3;
                                    continue;
                                }
                                case 7: {
                                    if (g.Size % 2 === 0) {
                                        even.v = (even.v + 1) | 0;
                                    } else {
                                        odd.v = (odd.v + 1) | 0;
                                    }
                                }
                                case 8: {
                                    ;
                                    $step = 1;
                                    continue;
                                }
                                case 9: {
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            CountSpanningEulerianSubgraphsUsingEdges: function (edges, even, odd) {
                var $step = 0,
                    $jumpFromFinally, 
                    spanningEulerianOrientationsCache, 
                    edgeTuples, 
                    $t, 
                    g, 
                    $t1, 
                    e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2,3,4,5,6,7,8,9], $step);
                            switch ($step) {
                                case 0: {
                                    Algorithms.Graph.CacheHits = System.Int64(0);
                                    Algorithms.Graph.NodesVisited = System.Int64(0);

                                    if (edges == null) {
                                        edges = new (System.Collections.Generic.List$1(System.Object))();
                                    }

                                    spanningEulerianOrientationsCache = new (System.Collections.Generic.Dictionary$2(Algorithms.OrientationHashGraph,System.Collections.Generic.List$1(Algorithms.Graph)))();
                                    edgeTuples = this.GetEdgeTuples();

                                    even.v = 0;
                                    odd.v = 0;
                                    $t = Bridge.getEnumerator(this.SpanningEulerianSubgraphs(edgeTuples, spanningEulerianOrientationsCache));
                                    $step = 1;
                                    continue;
                                }
                                case 1: {
                                    if ($t.moveNext()) {
                                        g = $t.Current;
                                        $step = 2;
                                        continue;
                                    }
                                    $step = 9;
                                    continue;
                                }
                                case 2: {
                                    $t1 = Bridge.getEnumerator(edges);
                                    $step = 3;
                                    continue;
                                }
                                case 3: {
                                    if ($t1.moveNext()) {
                                        e = $t1.Current;
                                        $step = 4;
                                        continue;
                                    }
                                    $step = 7;
                                    continue;
                                }
                                case 4: {
                                    if (!g._adjacent.get([e.item1, e.item2])) {
                                        $step = 5;
                                        continue;
                                    } 
                                    $step = 6;
                                    continue;
                                }
                                case 5: {
                                    $step = 8;
                                    continue;
                                }
                                case 6: {
                                    $step = 3;
                                    continue;
                                }
                                case 7: {
                                    if (g.Size % 2 === 0) {
                                        even.v = (even.v + 1) | 0;
                                    } else {
                                        odd.v = (odd.v + 1) | 0;
                                    }
                                }
                                case 8: {
                                    ;
                                    $step = 1;
                                    continue;
                                }
                                case 9: {
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                return $asyncBody();
            },
            EnumerateOrientations$1: function (requiredIndegree) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (requiredIndegree) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        gain,
                        $t,
                        inNeighborList,
                        adjacent,
                        directed,
                        i,
                        v,
                        $t1,
                        w,
                        outNeighbors,
                        $t2,
                        w1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        gain = System.Array.init(this.N, 0, System.Int32);

                                            $t = Bridge.getEnumerator(this.EnumerateOrientationsFor(0, requiredIndegree, gain), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                inNeighborList = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        adjacent = System.Array.create(false, null, System.Boolean, this.N, this.N);
                                            directed = System.Array.create(false, null, System.Boolean, this.N, this.N);

                                            for (i = 0; i < inNeighborList.Count; i = (i + 1) | 0) {
                                                v = (((inNeighborList.Count - 1) | 0) - i) | 0;

                                                $t1 = Bridge.getEnumerator(inNeighborList.getItem(i));
                                                try {
                                                    while ($t1.moveNext()) {
                                                        w = $t1.Current;
                                                        adjacent.set([v, w], true);
                                                        adjacent.set([w, v], true);

                                                        directed.set([w, v], true);
                                                    }
                                                } finally {
                                                    if (Bridge.is($t1, System.IDisposable)) {
                                                        $t1.System$IDisposable$dispose();
                                                    }
                                                }
                                                outNeighbors = Algorithms.Utility.ListUtility.Difference(System.Int32, this._laterNeighbors.Value.getItem(v), inNeighborList.getItem(i));

                                                $t2 = Bridge.getEnumerator(outNeighbors);
                                                try {
                                                    while ($t2.moveNext()) {
                                                        w1 = $t2.Current;
                                                        adjacent.set([v, w1], true);
                                                        adjacent.set([w1, v], true);

                                                        directed.set([v, w1], true);
                                                    }
                                                } finally {
                                                    if (Bridge.is($t2, System.IDisposable)) {
                                                        $t2.System$IDisposable$dispose();
                                                    }
                                                }}

                                            $enumerator.current = new Algorithms.Graph.$ctor1(this.GetEdgeWeights$1(adjacent, directed));
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            EnumerateOrientations: function (fast) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (fast) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        undirectedWeights,
                        edgeIndices,
                        undirected,
                        $t,
                        list,
                        weights,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (fast === void 0) { fast = false; }
                                            undirectedWeights = System.Linq.Enumerable.from(this.GetEdgeWeights()).select($asm.$.Algorithms.Graph.f31).toList(System.Int32);
                                            edgeIndices = System.Linq.Enumerable.from(undirectedWeights).select($asm.$.Algorithms.Graph.f32).where($asm.$.Algorithms.Graph.f33).toList(System.Int32);

                                            undirected = new Algorithms.Graph.$ctor1(undirectedWeights);

                                            $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, edgeIndices), System.Collections.Generic.List$1(System.Int32));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                list = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        weights = System.Linq.Enumerable.from(undirectedWeights).select((function ($me, list) {
                                                    return function (w, i) {
                                                        return list.contains(i) ? ((-w) | 0) : w;
                                                    };
                                                })(this, list)).toList(System.Int32);

                                            $enumerator.current = new Algorithms.Graph.$ctor1(weights);
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            EnumerateOrientationsFor: function (v, requiredIndegree, gain) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (v, requiredIndegree, gain) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        $t,
                        ins,
                        outs,
                        $t1,
                        x,
                        $t2,
                        o,
                        $t3,
                        x1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (v >= ((this.N - 1) | 0)) {
                                                $step = 1;
                                                continue;
                                            } else  {
                                                $step = 6;
                                                continue;
                                            }
                                    }
                                    case 1: {
                                        if (gain[System.Array.index(v, gain)] < requiredIndegree(v)) {
                                                $step = 2;
                                                continue;
                                            } else  {
                                                $step = 3;
                                                continue;
                                            }
                                    }
                                    case 2: {
                                        return false;
                                    }
                                    case 3: {
                                        $enumerator.current = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                            $step = 4;
                                            return true;
                                    }
                                    case 4: {
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        $step = 14;
                                        continue;
                                    }
                                    case 6: {
                                        $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, this._laterNeighbors.Value.getItem(v)), System.Collections.Generic.List$1(System.Int32));
                                            $step = 7;
                                            continue;
                                    }
                                    case 7: {
                                        if ($t.moveNext()) {
                                                ins = $t.Current;
                                                $step = 8;
                                                continue;
                                            }
                                        $step = 13;
                                        continue;
                                    }
                                    case 8: {
                                        if (ins.Count < ((requiredIndegree(v) - gain[System.Array.index(v, gain)]) | 0)) {
                                                $step = 7;
                                                continue;
                                            }

                                            outs = Algorithms.Utility.ListUtility.Difference(System.Int32, this._laterNeighbors.Value.getItem(v), ins);

                                            $t1 = Bridge.getEnumerator(outs);
                                            try {
                                                while ($t1.moveNext()) {
                                                    x = $t1.Current;
                                                    gain[System.Array.index(x, gain)] = (gain[System.Array.index(x, gain)] + 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t1, System.IDisposable)) {
                                                    $t1.System$IDisposable$dispose();
                                                }
                                            }
                                            $t2 = Bridge.getEnumerator(this.EnumerateOrientationsFor(((v + 1) | 0), requiredIndegree, gain), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                            $step = 9;
                                            continue;
                                    }
                                    case 9: {
                                        if ($t2.moveNext()) {
                                                o = $t2.Current;
                                                $step = 10;
                                                continue;
                                            }
                                        $step = 12;
                                        continue;
                                    }
                                    case 10: {
                                        o.add(ins);

                                            $enumerator.current = o;
                                            $step = 11;
                                            return true;
                                    }
                                    case 11: {
                                        $step = 9;
                                        continue;
                                    }
                                    case 12: {
                                        $t3 = Bridge.getEnumerator(outs);
                                            try {
                                                while ($t3.moveNext()) {
                                                    x1 = $t3.Current;
                                                    gain[System.Array.index(x1, gain)] = (gain[System.Array.index(x1, gain)] - 1) | 0;
                                                }
                                            } finally {
                                                if (Bridge.is($t3, System.IDisposable)) {
                                                    $t3.System$IDisposable$dispose();
                                                }
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 13: {
                                        $step = 14;
                                        continue;
                                    }
                                    case 14: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            GenerateRandomOrientation: function () {
                var $t;
                var undirectedWeights = System.Linq.Enumerable.from(this.GetEdgeWeights()).select($asm.$.Algorithms.Graph.f31).toList(System.Int32);
                var edgeIndices = System.Linq.Enumerable.from(undirectedWeights).select($asm.$.Algorithms.Graph.f32).where($asm.$.Algorithms.Graph.f33).toList(System.Int32);

                var list = new (System.Collections.Generic.List$1(System.Int32))(((Bridge.Int.div(this.E, 2)) | 0));
                $t = Bridge.getEnumerator(edgeIndices);
                try {
                    while ($t.moveNext()) {
                        var i = $t.Current;
                        if (Algorithms.Graph.RNG.next$1(2) === 0) {
                            list.add(i);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var weights = System.Linq.Enumerable.from(undirectedWeights).select(function (w, i1) {
                        return list.contains(i1) ? ((-w) | 0) : w;
                    }).toList(System.Int32);

                return new Algorithms.Graph.$ctor1(weights);
            },
            EnumerateAcyclicOrientations: function () {
                return this.EnumerateAcyclicOrientations$1(0, new (System.Collections.Generic.Dictionary$2(System.Int32, System.Collections.Generic.List$1(System.Int32)))());
            },
            EnumerateAcyclicOrientations$1: function (i, outNeighbors) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (i, outNeighbors) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        neighbors,
                        clone,
                        $t,
                        g,
                        sortedNeighbors,
                        $t1,
                        d,
                        clone1,
                        $t2,
                        v,
                        $t3,
                        g1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        if (i >= this.N) {
                                                $step = 1;
                                                continue;
                                            } else  {
                                                $step = 3;
                                                continue;
                                            }
                                    }
                                    case 1: {
                                        $enumerator.current = this.FromOutNeighborLists(outNeighbors);
                                            $step = 2;
                                            return true;
                                    }
                                    case 2: {
                                        $step = 18;
                                        continue;
                                    }
                                    case 3: {
                                        neighbors = this.NeighborsInSubgraph(i, System.Linq.Enumerable.range(0, i).toList(System.Int32));
                                            if (neighbors.Count <= 0) {
                                                $step = 4;
                                                continue;
                                            } else  {
                                                $step = 9;
                                                continue;
                                            }
                                    }
                                    case 4: {
                                        clone = this.CloneOutNeighbors(outNeighbors);

                                            clone.set(i, new (System.Collections.Generic.List$1(System.Int32))());
                                            $t = Bridge.getEnumerator(this.EnumerateAcyclicOrientations$1(((i + 1) | 0), clone), Algorithms.Graph);
                                            $step = 5;
                                            continue;
                                    }
                                    case 5: {
                                        if ($t.moveNext()) {
                                                g = $t.Current;
                                                $step = 6;
                                                continue;
                                            }
                                        $step = 8;
                                        continue;
                                    }
                                    case 6: {
                                        $enumerator.current = g;
                                            $step = 7;
                                            return true;
                                    }
                                    case 7: {
                                        $step = 5;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 17;
                                        continue;
                                    }
                                    case 9: {
                                        sortedNeighbors = this.TopologicalSort(i, neighbors, outNeighbors);
                                            $t1 = Bridge.getEnumerator(this.EnumerateLegalDirectionAssignments(i, sortedNeighbors, outNeighbors), System.Int64);
                                            $step = 10;
                                            continue;
                                    }
                                    case 10: {
                                        if ($t1.moveNext()) {
                                                d = $t1.Current;
                                                $step = 11;
                                                continue;
                                            }
                                        $step = 16;
                                        continue;
                                    }
                                    case 11: {
                                        clone1 = this.CloneOutNeighbors(outNeighbors);

                                            clone1.set(i, System.Linq.Enumerable.from(Algorithms.Int64Usage.EnumerateBits(d)).select(function (b) {
                                                    return sortedNeighbors.getItem(((((sortedNeighbors.Count - 1) | 0) - b) | 0));
                                                }).toList(System.Int32));
                                            $t2 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.Difference(System.Int32, neighbors, clone1.get(i)));
                                            try {
                                                while ($t2.moveNext()) {
                                                    v = $t2.Current;
                                                    clone1.get(v).add(i);
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            $t3 = Bridge.getEnumerator(this.EnumerateAcyclicOrientations$1(((i + 1) | 0), clone1), Algorithms.Graph);
                                            $step = 12;
                                            continue;
                                    }
                                    case 12: {
                                        if ($t3.moveNext()) {
                                                g1 = $t3.Current;
                                                $step = 13;
                                                continue;
                                            }
                                        $step = 15;
                                        continue;
                                    }
                                    case 13: {
                                        $enumerator.current = g1;
                                            $step = 14;
                                            return true;
                                    }
                                    case 14: {
                                        $step = 12;
                                        continue;
                                    }
                                    case 15: {
                                        $step = 10;
                                        continue;
                                    }
                                    case 16: {
                                        $step = 17;
                                        continue;
                                    }
                                    case 17: {
                                        $step = 18;
                                        continue;
                                    }
                                    case 18: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            CloneOutNeighbors: function (outNeighbors) {
                var $t;
                var clone = new (System.Collections.Generic.Dictionary$2(System.Int32, System.Collections.Generic.List$1(System.Int32)))();

                $t = Bridge.getEnumerator(outNeighbors);
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        clone.set(kvp.key, System.Linq.Enumerable.from(kvp.value).toList(System.Int32));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return clone;
            },
            TopologicalSort: function (i, vertices, outNeighbors) {
                var $t, $t1, $t2;
                var inNeighborCount = System.Array.init(i, 0, System.Int32);
                $t = Bridge.getEnumerator(outNeighbors);
                try {
                    while ($t.moveNext()) {
                        var kvp = $t.Current;
                        if (!vertices.contains(kvp.key)) {
                            continue;
                        }

                        $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(kvp.value).intersect(vertices));
                        try {
                            while ($t1.moveNext()) {
                                var v = $t1.Current;
                                inNeighborCount[System.Array.index(v, inNeighborCount)] = (inNeighborCount[System.Array.index(v, inNeighborCount)] + 1) | 0;
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                var sorted = new (System.Collections.Generic.List$1(System.Int32))(i);
                var sources = System.Linq.Enumerable.from(vertices).where(function (v1) {
                        return inNeighborCount[System.Array.index(v1, inNeighborCount)] === 0;
                    }).toList(System.Int32);

                while (sources.Count > 0) {
                    var source = sources.getItem(((sources.Count - 1) | 0));
                    sources.removeAt(((sources.Count - 1) | 0));

                    sorted.add(source);
                    $t2 = Bridge.getEnumerator(System.Linq.Enumerable.from(outNeighbors.get(source)).intersect(vertices));
                    try {
                        while ($t2.moveNext()) {
                            var v1 = $t2.Current;
                            inNeighborCount[System.Array.index(v1, inNeighborCount)] = (inNeighborCount[System.Array.index(v1, inNeighborCount)] - 1) | 0;
                            if (inNeighborCount[System.Array.index(v1, inNeighborCount)] === 0) {
                                sources.add(v1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$dispose();
                        }
                    }}

                return sorted;
            },
            EnumerateLegalDirectionAssignments: function (i, sortedNeighbors, outNeighbors) {
                return new (Bridge.GeneratorEnumerable$1(System.Int64))(Bridge.fn.bind(this, function (i, sortedNeighbors, outNeighbors) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        d,
                        ancestorLists,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int64))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        d = System.Int64(0);

                                            ancestorLists = this.GetAncestorLists(i, outNeighbors);
                                            
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( true ) {
                                                $step = 2;
                                                continue;
                                            } 
                                            $step = 4;
                                            continue;
                                    }
                                    case 2: {
                                        $enumerator.current = d;
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        if (Algorithms.Int64Usage.AllSet(d, System.Int64(sortedNeighbors.Count))) {
                                                $step = 4;
                                                continue;
                                            }

                                            d = this.Closure(d.add(System.Int64(1)), sortedNeighbors, ancestorLists);

                                            $step = 1;
                                            continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            Closure: function (d, sortedNeighbors, ancestorLists) {
                var $t, $t1;
                var done = false;

                while (!done) {
                    done = true;

                    $t = Bridge.getEnumerator(sortedNeighbors);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            var vBit = (((sortedNeighbors.Count - 1) | 0) - sortedNeighbors.indexOf(v)) | 0;
                            $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(ancestorLists.get(v)).intersect(sortedNeighbors));
                            try {
                                while ($t1.moveNext()) {
                                    var w = $t1.Current;
                                    var wBit = (((sortedNeighbors.Count - 1) | 0) - sortedNeighbors.indexOf(w)) | 0;
                                    if (Algorithms.Int64Usage.IsBitSet(d, System.Int64(wBit)) && !Algorithms.Int64Usage.IsBitSet(d, System.Int64(vBit))) {
                                        d = Algorithms.Int64Usage.SetBit(d, System.Int64(vBit));
                                        done = false;
                                    }
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return d;
            },
            GetAncestorLists: function (i, outNeighbors) {
                var $t;
                var ancestorLists = new (System.Collections.Generic.Dictionary$2(System.Int32, System.Collections.Generic.List$1(System.Int32)))();

                for (var v = 0; v < i; v = (v + 1) | 0) {
                    ancestorLists.set(v, function (_o16) {
                            _o16.add(v);
                            return _o16;
                        }(new (System.Collections.Generic.List$1(System.Int32))()));
                }

                var done = false;
                while (!done) {
                    done = true;

                    for (var v1 = 0; v1 < i; v1 = (v1 + 1) | 0) {
                        $t = Bridge.getEnumerator(outNeighbors.get(v1));
                        try {
                            while ($t.moveNext()) {
                                var w = $t.Current;
                                if (w >= i) {
                                    continue;
                                }

                                var c = ancestorLists.get(w).Count;
                                ancestorLists.set(w, Algorithms.Utility.ListUtility.Union$1(System.Int32, ancestorLists.get(w), ancestorLists.get(v1)));

                                if (ancestorLists.get(w).Count > c) {
                                    done = false;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                }

                return ancestorLists;
            },
            FindFactors: function () {
                var equivalenceRelation = new (Algorithms.Utility.EquivalenceRelation$1(System.Int32))();

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    equivalenceRelation.AddElement(i);

                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (!this._adjacent.get([i, j])) {
                            equivalenceRelation.Relate(i, j);
                        }
                    }
                }

                return equivalenceRelation;
            },
            FindComponents: function () {
                var equivalenceRelation = new (Algorithms.Utility.EquivalenceRelation$1(System.Int32))();

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    equivalenceRelation.AddElement(i);

                    for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                        if (this._adjacent.get([i, j])) {
                            equivalenceRelation.Relate(i, j);
                        }
                    }
                }

                return equivalenceRelation;
            },
            FindComponents$1: function (v) {
                var equivalenceRelation = new (Algorithms.Utility.EquivalenceRelation$1(System.Int32))();

                for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                    equivalenceRelation.AddElement(v.getItem(i));

                    for (var j = (i + 1) | 0; j < v.Count; j = (j + 1) | 0) {
                        if (this._adjacent.get([v.getItem(i), v.getItem(j)])) {
                            equivalenceRelation.Relate(v.getItem(i), v.getItem(j));
                        }
                    }
                }

                return equivalenceRelation;
            },
            ComputeDiameter: function () {
                var $t, $t1;
                var distance = { };
                var next = { };
                this.FloydWarshall(distance, next);
                var diameter = 0;
                $t = Bridge.getEnumerator(this.Vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        $t1 = Bridge.getEnumerator(this.Vertices);
                        try {
                            while ($t1.moveNext()) {
                                var w = $t1.Current;
                                if (distance.v.get([v, w]) > diameter) {
                                    diameter = distance.v.get([v, w]);
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return diameter;
            },
            FloydWarshall: function (distance, next) {
                distance.v = System.Array.create(0, null, System.Int32, this.N, this.N);
                next.v = System.Array.create(0, null, System.Int32, this.N, this.N);

                for (var i = 0; i < this.N; i = (i + 1) | 0) {
                    for (var j = 0; j < this.N; j = (j + 1) | 0) {
                        distance.v.set([i, j], 715827882);
                    }
                }

                for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                    for (var j1 = 0; j1 < this.N; j1 = (j1 + 1) | 0) {
                        if (i1 === j1) {
                            distance.v.set([i1, j1], 0);
                        } else {
                            if (this._adjacent.get([i1, j1])) {
                                /* if (Directed[i, j])
                                   distance[i, j] = 1;

                                if (Directed[j, i])
                                   distance[j, i] = 1;*/

                                distance.v.set([i1, j1], 1);
                                distance.v.set([j1, i1], 1);
                            }
                        }
                    }
                }

                for (var i2 = 0; i2 < this.N; i2 = (i2 + 1) | 0) {
                    for (var j2 = 0; j2 < this.N; j2 = (j2 + 1) | 0) {
                        next.v.set([i2, j2], -1);
                    }
                }

                for (var k = 0; k < this.N; k = (k + 1) | 0) {
                    for (var i3 = 0; i3 < this.N; i3 = (i3 + 1) | 0) {
                        for (var j3 = 0; j3 < this.N; j3 = (j3 + 1) | 0) {
                            if (((distance.v.get([i3, k]) + distance.v.get([k, j3])) | 0) < distance.v.get([i3, j3])) {
                                distance.v.set([i3, j3], (distance.v.get([i3, k]) + distance.v.get([k, j3])) | 0);
                                next.v.set([i3, j3], k);
                            }
                        }
                    }
                }
            },
            FloydWarshallShortestPath: function (v, w, distance, next) {
                if (distance.get([v, w]) === 2147483647) {
                    return null;
                }

                if (next.get([v, w]) === -1) {
                    return System.Array.init([v, w], System.Int32);
                }

                return System.Linq.Enumerable.from(this.FloydWarshallShortestPath(v, next.get([v, w]), distance, next)).union(System.Linq.Enumerable.from(this.FloydWarshallShortestPath(next.get([v, w]), w, distance, next)).skip(1));
            }
        }
    });

    Bridge.define("$AnonymousType$2", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (range, index) {
                this.range = range;
                this.index = index;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$2)) {
                    return false;
                }
                return Bridge.equals(this.range, o.range) && Bridge.equals(this.index, o.index);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196187, this.range, this.index]);
                return h;
            },
            toJSON: function () {
                return {
                    range : this.range,
                    index : this.index
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"index","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_index","t":8,"rt":System.Int32,"fg":"index"},"fn":"index"},{"a":2,"n":"range","t":16,"rt":System.Collections.Generic.IEnumerable$1(System.Int32),"g":{"a":2,"n":"get_range","t":8,"rt":System.Collections.Generic.IEnumerable$1(System.Int32),"fg":"range"},"fn":"range"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.Graph", $asm.$);

    Bridge.apply($asm.$.Algorithms.Graph, {
        f1: function (_o11) {
            _o11.add("cadetblue");
            _o11.add("brown");
            _o11.add("dodgerblue");
            _o11.add("turquoise");
            _o11.add("orchid");
            _o11.add("blue");
            _o11.add("red");
            _o11.add("green");
            _o11.add("yellow");
            _o11.add("cyan");
            _o11.add("limegreen");
            _o11.add("pink");
            _o11.add("orange");
            _o11.add("goldenrod");
            _o11.add("aquamarine");
            _o11.add("black");
            return _o11;
        },
        f2: function (_o12) {
            _o12.add("blue");
            _o12.add("red");
            _o12.add("green");
            _o12.add("Orchid");
            _o12.add("yellow");
            _o12.add("cyan");
            _o12.add("Turquoise");
            _o12.add("CadetBlue");
            _o12.add("LimeGreen");
            _o12.add("brown");
            _o12.add("pink");
            _o12.add("orange");
            _o12.add("Cerulean");
            _o12.add("Goldenrod");
            _o12.add("Aquamarine");
            _o12.add("black");
            return _o12;
        },
        f3: function () {
            var e = 0;

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                for (var j = (i + 1) | 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i, j])) {
                        e = (e + 1) | 0;
                    }
                }
            }

            return e;
        },
        f4: function () {
            var neighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                neighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i1, j])) {
                        neighbors.getItem(i1).add(j);
                    }
                }
            }

            return neighbors;
        },
        f5: function () {
            var nn = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                nn.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (i1 !== j && !this._adjacent.get([i1, j])) {
                        nn.getItem(i1).add(j);
                    }
                }
            }

            return nn;
        },
        f6: function () {
            var neighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                neighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i1, j]) && this.Directed.get([i1, j])) {
                        neighbors.getItem(i1).add(j);
                    }
                }
            }

            return neighbors;
        },
        f7: function () {
            var neighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                neighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
            }

            for (var i1 = 0; i1 < this.N; i1 = (i1 + 1) | 0) {
                for (var j = 0; j < this.N; j = (j + 1) | 0) {
                    if (this._adjacent.get([i1, j]) && this.Directed.get([i1, j])) {
                        neighbors.getItem(j).add(i1);
                    }
                }
            }

            return neighbors;
        },
        f8: function () {
            var later = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))(this.Neighbors.Count);

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                later.add(System.Linq.Enumerable.from(this.Neighbors.getItem(i)).where(function (n) {
                        return n > i;
                    }).toList(System.Int32));
            }

            return later;
        },
        f9: function () {
            return System.Linq.Enumerable.from(this.IndependentSetsInSubgraph(0)).toList(System.Collections.Generic.List$1(System.Int32));
        },
        f10: function (set) {
            return set.Count === 2;
        },
        f11: function () {
            return System.Linq.Enumerable.from(this._independentSets.Value).where($asm.$.Algorithms.Graph.f10).toList(System.Collections.Generic.List$1(System.Int32));
        },
        f12: function (set) {
            return set.Count === 3;
        },
        f13: function () {
            return System.Linq.Enumerable.from(this._independentSets.Value).where($asm.$.Algorithms.Graph.f12).toList(System.Collections.Generic.List$1(System.Int32));
        },
        f14: function () {
            return Algorithms.Utility.ListUtility.GenerateSublists(System.Int32, this._vertices);
        },
        f15: function () {
            return Algorithms.Utility.ListUtility.MaximalElements(System.Int32, this._independentSets.Value);
        },
        f16: function (x) {
            return x.toString();
        },
        f17: function (_, __, ___, ____) {
            return true;
        },
        f18: function (t) {
            return t;
        },
        f19: function (r, i) {
            return new $asm.$AnonymousType$2(r, i);
        },
        f20: function (i, j) {
            return { item1: i, item2: j };
        },
        f21: function (vertices) {
            return this.IsProperFactor(vertices);
        },
        f22: function (_o13) {
            _o13.add(this.Clone());
            return _o13;
        },
        f23: function (n) {
            return n.Count === this.Neighbors.getItem(0).Count;
        },
        f24: function (_o14) {
            _o14.add(new (System.Collections.Generic.List$1(System.Int32))());
            return _o14;
        },
        f25: function (c) {
            return c.ne(System.Int64(0));
        },
        f26: function (v) {
            return this.Degree(v);
        },
        f27: function (v, i) {
        return v > 0 ? i : -1;
    },
        f28: function (i) {
        return i >= 0;
    },
        f29: function (v1, i) {
        return v1 > 0 ? i : -1;
    },
        f30: function (v1) {
        return v1 > 0;
    },
        f31: function (w) {
            return Math.abs(w);
        },
        f32: function (w, i) {
            return w !== 0 ? i : -1;
        },
        f33: function (x) {
            return x > 0;
        }
    });

    Bridge.define("Algorithms.Graphs", {
        statics: {
            props: {
                Diamond: {
                    get: function () {
                        return Algorithms.Graph.op_Multiply(Algorithms.Graphs.E(2), Algorithms.Graphs.K(2));
                    }
                },
                Bull: {
                    get: function () {
                        return Algorithms.Graphs.K(3).AttachNewVertex$1([1]).AttachNewVertex$1([2]);
                    }
                },
                Kite: {
                    get: function () {
                        return Algorithms.Graphs.Diamond.AttachNewVertex$1([1]);
                    }
                },
                Dart: {
                    get: function () {
                        return Algorithms.Graphs.Diamond.AttachNewVertex$1([2]);
                    }
                },
                Chair: {
                    get: function () {
                        return Algorithms.Graphs.P(4).AttachNewVertex$1([2]);
                    }
                },
                Empty: {
                    get: function () {
                        return new Algorithms.Graph.ctor(System.Array.create(false, null, System.Boolean, 0, 0));
                    }
                },
                Paw: {
                    get: function () {
                        return Algorithms.Graphs.P(4).AddEdge(0, 2);
                    }
                },
                H: {
                    get: function () {
                        return Algorithms.Graphs.P(4).AttachNewVertex$1([1]).AttachNewVertex$1([2]);
                    }
                }
            },
            methods: {
                E: function (n) {
                    return new Algorithms.Graph.ctor(System.Array.create(false, null, System.Boolean, n, n));
                },
                K: function (n) {
                    return Algorithms.Graphs.E(n).Complement();
                },
                P: function (n) {
                    var G = Algorithms.Graphs.E(n);
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        G = G.AddEdge(i, ((i + 1) | 0));
                    }

                    return G;
                },
                Star: function (n) {
                    var G = Algorithms.Graphs.E(n);
                    for (var i = 1; i < n; i = (i + 1) | 0) {
                        G = G.AddEdge(0, i);
                    }

                    return G;
                },
                C: function (n) {
                    return Algorithms.Graphs.P(n).AddEdge(((n - 1) | 0), 0);
                }
            }
        }
    });

    Bridge.define("Algorithms.HashGraph", {
        fields: {
            _values: null,
            _outMinusIn: null,
            _hashCode: 0
        },
        ctors: {
            ctor: function (g, outMinusIn) {
                this.$initialize();                var $t;

                this._values = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(g.N, (((g.N - 1) | 0))), 2)) | 0), 0, System.Byte);
                this._outMinusIn = outMinusIn;

                var k = 0;
                for (var i = 0; i < g.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < g.N; j = (j + 1) | 0) {
                        var value = (g.getItem(i, j) ? 1 : 0) & 255;
                        this._values[System.Array.index(k, this._values)] = value;

                        if (g.getItem(i, j)) {
                            this._hashCode = (this._hashCode + (1 << (k % 32))) | 0;
                        }

                        k = (k + 1) | 0;
                    }
                }

                $t = Bridge.getEnumerator(outMinusIn);
                try {
                    while ($t.moveNext()) {
                        var i1 = $t.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        equals: function (obj) {
            var other = Bridge.as(obj, Algorithms.HashGraph);
            if (other == null) {
                return false;
            }

            return System.Linq.Enumerable.from(this._outMinusIn).sequenceEqual(other._outMinusIn) && System.Linq.Enumerable.from(this._values).sequenceEqual(other._values);
        },
        getHashCode: function () {
            return this._hashCode;
        }
    }
    });

    Bridge.define("Algorithms.HereditaryClassEnumeration", {
        statics: {
            fields: {
                _sizeComparer: null
            },
            ctors: {
                init: function () {
                    this._sizeComparer = new Algorithms.HereditaryClassEnumeration.SizeComparer();
                }
            },
            methods: {
                EnumerateClass: function (excluded) {
                    if (excluded === void 0) { excluded = []; }
                    return Algorithms.HereditaryClassEnumeration.EnumerateClass$1(System.Linq.Enumerable.from(excluded).toList(Algorithms.Graph));
                },
                EnumerateClass$1: function (excluded, maxVertices) {
                    return new (Bridge.GeneratorEnumerable$1(Algorithms.Graph))(Bridge.fn.bind(this, function (excluded, maxVertices) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            lastLevel,
                            currentLevel,
                            $t,
                            G,
                            neighborSets,
                            $t1,
                            neighborSet,
                            H,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Graph))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (maxVertices === void 0) { maxVertices = 2147483647; }
                                                excluded.sort($asm.$.Algorithms.HereditaryClassEnumeration.f1);

                                                if (excluded.Count > 0 && excluded.getItem(0).N <= 1) {
                                                    $step = 1;
                                                    continue;
                                                } 
                                                $step = 2;
                                                continue;
                                        }
                                        case 1: {
                                            return false;
                                        }
                                        case 2: {
                                            $enumerator.current = new Algorithms.Graph.$ctor1(new (System.Collections.Generic.List$1(System.Int32))());
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            lastLevel = $asm.$.Algorithms.HereditaryClassEnumeration.f2(new (System.Collections.Generic.List$1(Algorithms.Graph))());

                                                
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {
                                            if ( lastLevel.Count > 0 ) {
                                                    $step = 5;
                                                    continue;
                                                } 
                                                $step = 15;
                                                continue;
                                        }
                                        case 5: {
                                            currentLevel = new (System.Collections.Generic.List$1(Algorithms.Graph))();

                                                $t = Bridge.getEnumerator(lastLevel);
                                                $step = 6;
                                                continue;
                                        }
                                        case 6: {
                                            if ($t.moveNext()) {
                                                    G = $t.Current;
                                                    $step = 7;
                                                    continue;
                                                }
                                            $step = 12;
                                            continue;
                                        }
                                        case 7: {
                                            if (G.IsComplete()) {
                                                    neighborSets = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, System.Linq.Enumerable.range(0, G.N).toList(System.Int32))).distinct(Algorithms.HereditaryClassEnumeration._sizeComparer).toList(System.Collections.Generic.List$1(System.Int32));
                                                } else {
                                                    neighborSets = Algorithms.Utility.ListUtility.GenerateSublists(System.Int32, System.Linq.Enumerable.range(0, G.N).toList(System.Int32));
                                                }

                                                $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(neighborSets).where($asm.$.Algorithms.HereditaryClassEnumeration.f3));
                                                $step = 8;
                                                continue;
                                        }
                                        case 8: {
                                            if ($t1.moveNext()) {
                                                    neighborSet = $t1.Current;
                                                    $step = 9;
                                                    continue;
                                                }
                                            $step = 11;
                                            continue;
                                        }
                                        case 9: {
                                            H = { v : G.AttachNewVertex(neighborSet) };

                                                if (System.Linq.Enumerable.from(currentLevel).any((function ($me, H) {
                                                        return function (W) {
                                                            return Algorithms.Graph.Isomorphic(H.v, W);
                                                        };
                                                    })(this, H))) {
                                                    $step = 8;
                                                    continue;
                                                }
                                                if (System.Linq.Enumerable.from(excluded).any((function ($me, H) {
                                                        return function (W) {
                                                            return H.v.ContainsInduced(W);
                                                        };
                                                    })(this, H))) {
                                                    $step = 8;
                                                    continue;
                                                }

                                                currentLevel.add(H.v);
                                                $enumerator.current = H.v;
                                                $step = 10;
                                                return true;
                                        }
                                        case 10: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 11: {
                                            $step = 6;
                                            continue;
                                        }
                                        case 12: {
                                            if (currentLevel.Count > 0 && currentLevel.getItem(0).N >= maxVertices) {
                                                    $step = 13;
                                                    continue;
                                                } 
                                                $step = 14;
                                                continue;
                                        }
                                        case 13: {
                                            return false;
                                        }
                                        case 14: {
                                            lastLevel = currentLevel;

                                                $step = 4;
                                                continue;
                                        }
                                        case 15: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.ns("Algorithms.HereditaryClassEnumeration", $asm.$);

    Bridge.apply($asm.$.Algorithms.HereditaryClassEnumeration, {
        f1: function (g1, g2) {
            return Bridge.compare(g1.N, g2.N);
        },
        f2: function (_o17) {
            _o17.add(new Algorithms.Graph.$ctor1(new (System.Collections.Generic.List$1(System.Int32))()));
            return _o17;
        },
        f3: function (l) {
            return l.Count > 0;
        }
    });

    Bridge.define("Algorithms.HereditaryClassEnumeration.SizeComparer", {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(System.Int32))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return x.Count === y.Count;
            },
            getHashCode2: function (obj) {
                return Bridge.getHashCode(obj.Count);
            }
        }
    });

    Bridge.define("Algorithms.Hypergraph$1", function (T) { return {
        fields: {
            _listComparer: null
        },
        props: {
            E: null
        },
        ctors: {
            init: function () {
                this._listComparer = new (Algorithms.Hypergraph$1.SortedListComparer(T))();
            },
            ctor: function (edges) {
                if (edges === void 0) { edges = null; }

                this.$initialize();                var $t;

                if (edges != null) {
                    $t = Bridge.getEnumerator(edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            e.sort();
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }this.E = new (System.Collections.Generic.HashSet$1(System.Collections.Generic.List$1(T))).$ctor2(edges, this._listComparer);
                } else {
                    this.E = new (System.Collections.Generic.HashSet$1(System.Collections.Generic.List$1(T))).$ctor3(this._listComparer);
                }
        }
    },
    methods: {
        Min: function () {
            var $t;
            var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

            $t = Bridge.getEnumerator(this.E);
            try {
                while ($t.moveNext()) {
                    var set = $t.Current;
                    var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), chainHeads, (function ($me, set) {
                        return function (head) {
                            return Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, set, head);
                        };
                    })(this, set), $asm.$.Algorithms.Hypergraph$1.f1);
                    if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                            return function (head) {
                                return !Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, head, set);
                            };
                        })(this, set))) {
                        chainHeads.add(set);
                    }
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            return new (Algorithms.Hypergraph$1(T))(chainHeads);
        },
        Tr: function () {
            var $t;
            var H = new (Algorithms.Hypergraph$1(T))(function (_o18) {
                    _o18.add(new (System.Collections.Generic.List$1(T))());
                    return _o18;
                }(new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))()));

            $t = Bridge.getEnumerator(this.E);
            try {
                while ($t.moveNext()) {
                    var e = $t.Current;
                    H = H.Product(this.EdgeHypergraph(e)).Min();
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            return H;
        },
        EdgeHypergraph: function (e) {
            return new (Algorithms.Hypergraph$1(T))(System.Linq.Enumerable.from(e).select(function (v) {
                    return Algorithms.GenericExtensions.EnList(T, v);
                }).toList(System.Collections.Generic.List$1(T)));
        },
        Union: function (other) {
            return new (Algorithms.Hypergraph$1(T))(System.Linq.Enumerable.from(this.E).union(other.E).toList(System.Collections.Generic.List$1(T)));
        },
        Product: function (other) {
            return new (Algorithms.Hypergraph$1(T))(System.Linq.Enumerable.from(this.E).selectMany(function (e_i) {
                    return System.Linq.Enumerable.from(other.E).select(function (e_j) {
                            return Algorithms.Utility.ListUtility.Union$1(T, e_i, e_j);
                        }).toList(System.Collections.Generic.List$1(T));
                }).toList(System.Collections.Generic.List$1(T)));
        }
    }
    }; });

    Bridge.ns("Algorithms.Hypergraph$1", $asm.$);

    Bridge.apply($asm.$.Algorithms.Hypergraph$1, {
        f1: function (x) { }
    });

    Bridge.define("Algorithms.Hypergraph$1.SortedListComparer", function (T) { return {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(T))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$" + Bridge.getTypeAlias(T) + "$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$" + Bridge.getTypeAlias(T) + "$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return System.Linq.Enumerable.from(x).sequenceEqual(y);
            },
            getHashCode2: function (list) {
                var $t;
                var hash = 19;
                $t = Bridge.getEnumerator(list);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        hash = (((hash * 31) | 0) + Bridge.getHashCode(x)) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return hash;
            }
        }
    }; });

    Bridge.define("Algorithms.IndependenceRatio.MinorFinder", {
        statics: {
            methods: {
                FindWithJ: function (g, J) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Object)))(Bridge.fn.bind(this, function (g, J) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            $t,
                            triple,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Object)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (J.Count !== 3) {
                                                    $step = 1;
                                                    continue;
                                                } 
                                                $step = 2;
                                                continue;
                                        }
                                        case 1: {
                                            return false;
                                        }
                                        case 2: {
                                            $t = Bridge.getEnumerator(Algorithms.IndependenceRatio.MinorFinder.EnumerateConnectedThreePartPartitions(g, J), System.Object);
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t.moveNext()) {
                                                    triple = $t.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            if (g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, J)) < 4) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item2, J)) < 4) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item3, J)) < 4) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.EdgesBetween(triple.item1, triple.item2) <= 0 && g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, triple.item2), J)) < 5) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.EdgesBetween(triple.item1, triple.item3) <= 0 && g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, triple.item3), J)) < 5) {
                                                    $step = 3;
                                                    continue;
                                                }
                                                if (g.EdgesBetween(triple.item2, triple.item3) <= 0 && g.IndependenceNumber$1(Algorithms.Utility.ListUtility.Union$1(System.Int32, Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item2, triple.item2), J)) < 5) {
                                                    $step = 3;
                                                    continue;
                                                }

                                                $enumerator.current = (function ($me, triple) {
                                                        return function (_o19) {
                                                            _o19.add({ item1: System.Linq.Enumerable.from(triple.item1).toList(System.Int32), item2: g.MaximumIndependentSubset(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item1, J)) });
                                                            _o19.add({ item1: System.Linq.Enumerable.from(triple.item2).toList(System.Int32), item2: g.MaximumIndependentSubset(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item2, J)) });
                                                            _o19.add({ item1: System.Linq.Enumerable.from(triple.item3).toList(System.Int32), item2: g.MaximumIndependentSubset(Algorithms.Utility.ListUtility.Union$1(System.Int32, triple.item3, J)) });
                                                            return _o19;
                                                        };
                                                    })(this, triple)(new (System.Collections.Generic.List$1(System.Object))());
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateConnectedThreePartPartitions: function (g, J) {
                    return new (Bridge.GeneratorEnumerable$1(System.Object))(Bridge.fn.bind(this, function (g, J) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            rest,
                            $t,
                            first,
                            rest2,
                            $t1,
                            second,
                            third,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Object))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            rest = System.Linq.Enumerable.from(g.Vertices).except(J).toList(System.Int32);
                                                Algorithms.GenericExtensions.Shuffle(System.Int32, rest);
                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, rest), System.Collections.Generic.List$1(System.Int32));
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    first = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 7;
                                            continue;
                                        }
                                        case 2: {
                                            first.add(J.getItem(0));
                                                if (System.Linq.Enumerable.from(g.FindComponents$1(first).GetEquivalenceClasses()).count() !== 1) {
                                                    $step = 1;
                                                    continue;
                                                }

                                                rest2 = System.Linq.Enumerable.from(rest).except(first).toList(System.Int32);
                                                $t1 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, rest2), System.Collections.Generic.List$1(System.Int32));
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t1.moveNext()) {
                                                    second = $t1.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            second.add(J.getItem(1));
                                                if (System.Linq.Enumerable.from(g.FindComponents$1(second).GetEquivalenceClasses()).count() !== 1) {
                                                    $step = 3;
                                                    continue;
                                                }

                                                third = System.Linq.Enumerable.from(rest2).except(second).toList(System.Int32);
                                                third.add(J.getItem(2));
                                                if (System.Linq.Enumerable.from(g.FindComponents$1(third).GetEquivalenceClasses()).count() !== 1) {
                                                    $step = 3;
                                                    continue;
                                                }

                                                $enumerator.current = { item1: first, item2: second, item3: third };
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 7: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.Int32Usage", {
        statics: {
            fields: {
                DeBruijnMultiplier: 0,
                DeBruijnLookup: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = 125613361;
                    this.DeBruijnLookup = System.Array.init([0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8, 31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9], System.Int32);
                }
            },
            methods: {
                LeastSignificantBit: function (x) {
                    return Algorithms.Int32Usage.DeBruijnLookup[System.Array.index((((((x & ((-x) | 0))) >>> 0) * Algorithms.Int32Usage.DeBruijnMultiplier) >>> 0) >>> 27, Algorithms.Int32Usage.DeBruijnLookup)];
                },
                GetAndClearLeastSignificantBit: function (x) {
                    var m = x.v & ((-x.v) | 0);
                    x.v = x.v ^ m;
                    return Algorithms.Int32Usage.DeBruijnLookup[System.Array.index((((m >>> 0) * Algorithms.Int32Usage.DeBruijnMultiplier) >>> 0) >>> 27, Algorithms.Int32Usage.DeBruijnLookup)];
                },
                PopulationCount: function (b) {
                    var q = 0;
                    while (b > 0) {
                        q = (q + 1) | 0;
                        b = (b & (((b - 1) >>> 0))) >>> 0;
                    }
                    return q;
                },
                ToSet: function (x) {
                    var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                    while (x !== 0) {
                        var lsb = (x & (((0 - x) >>> 0))) >>> 0;
                        onBits.add(Algorithms.Int32Usage.DeBruijnLookup[System.Array.index(((lsb * Algorithms.Int32Usage.DeBruijnMultiplier) >>> 0) >>> 27, Algorithms.Int32Usage.DeBruijnLookup)]);

                        x = (x ^ lsb) >>> 0;
                    }

                    return onBits;
                }
            }
        }
    });

    Bridge.define("Algorithms.Int64Usage", {
        statics: {
            fields: {
                DeBruijnMultiplier: System.UInt64(0),
                DeBruijnLookup: null,
                BitMask: null,
                NotBitMask: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = System.UInt64(System.Int64([-1706153790,133027301]));
                    this.DeBruijnLookup = System.Array.init([
                        63, 
                        0, 
                        58, 
                        1, 
                        59, 
                        47, 
                        53, 
                        2, 
                        60, 
                        39, 
                        48, 
                        27, 
                        54, 
                        33, 
                        42, 
                        3, 
                        61, 
                        51, 
                        37, 
                        40, 
                        49, 
                        18, 
                        28, 
                        20, 
                        55, 
                        30, 
                        34, 
                        11, 
                        43, 
                        14, 
                        22, 
                        4, 
                        62, 
                        57, 
                        46, 
                        52, 
                        38, 
                        26, 
                        32, 
                        41, 
                        50, 
                        36, 
                        17, 
                        19, 
                        29, 
                        10, 
                        13, 
                        21, 
                        56, 
                        45, 
                        25, 
                        31, 
                        35, 
                        16, 
                        9, 
                        12, 
                        44, 
                        24, 
                        15, 
                        8, 
                        23, 
                        7, 
                        6, 
                        5
                    ], System.Int32);
                    this.BitMask = System.Array.init(64, System.Int64(0), System.Int64);
                    this.NotBitMask = System.Array.init(64, System.Int64(0), System.Int64);
                },
                ctor: function () {
                    var $t;
                    $t = Bridge.getEnumerator(System.Linq.Enumerable.range(0, 64));
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)] = (System.Int64(1)).shl(bit);
                            Algorithms.Int64Usage.NotBitMask[System.Array.index(bit, Algorithms.Int64Usage.NotBitMask)] = ((System.Int64(1)).shl(bit)).not();
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}
        },
        methods: {
            GeneratePairMasks: function (n) {
                var maskMap = new (System.Collections.Generic.Dictionary$2(System.Int64,System.Int64))();

                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        maskMap.set(Algorithms.Int64Usage.BitMask[System.Array.index(i, Algorithms.Int64Usage.BitMask)].or(Algorithms.Int64Usage.BitMask[System.Array.index(j, Algorithms.Int64Usage.BitMask)]), Algorithms.Int64Usage.BitMask[System.Array.index(j, Algorithms.Int64Usage.BitMask)]);
                    }
                }

                return maskMap;
            },
            ClearBit: function (x, bit) {
                return x.and(Algorithms.Int64Usage.NotBitMask[System.Array.index(bit, Algorithms.Int64Usage.NotBitMask)]);
            },
            SetBit: function (x, bit) {
                return x.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
            },
            IsBitSet: function (x, bit) {
                return (x.and(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)])).ne(System.Int64(0));
            },
            FlipBits: function (x, bit) {
                return x.xor(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
            },
            FlipBits$1: function (x, bit1, bit2) {
                return x.xor((Algorithms.Int64Usage.BitMask[System.Array.index(bit1, Algorithms.Int64Usage.BitMask)].or(Algorithms.Int64Usage.BitMask[System.Array.index(bit2, Algorithms.Int64Usage.BitMask)])));
            },
            FlipBits$2: function (x, bits) {
                var $t;
                if (bits === void 0) { bits = []; }
                if (bits == null) {
                    return x;
                }

                var mask = System.Int64(0);
                $t = Bridge.getEnumerator(bits);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        mask = mask.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return x.xor(mask);
            },
            LeastSignificantBit: function (b) {
                return Algorithms.Int64Usage.DeBruijnLookup[System.Array.index(System.Int64.clipu64((b.and(b.neg()))).mul(Algorithms.Int64Usage.DeBruijnMultiplier).shru(58), Algorithms.Int64Usage.DeBruijnLookup)];
            },
            GetAndClearLeastSignificantBit: function (x) {
                var m = x.v.and(x.v.neg());
                x.v = x.v.xor(m);
                return Algorithms.Int64Usage.DeBruijnLookup[System.Array.index(System.Int64.toNumber((System.Int64.clipu64(m).mul(Algorithms.Int64Usage.DeBruijnMultiplier)).shru(58)), Algorithms.Int64Usage.DeBruijnLookup)];
            },
            PopulationCount: function (b) {
                var q = 0;
                while (b.gt(System.Int64(0))) {
                    q = (q + 1) | 0;
                    b = b.and((b.sub(System.Int64(1))));
                }
                return q;
            },
            PopulationCount$1: function (x) {
                var k1 = System.UInt64([1431655765,1431655765]);
                var k2 = System.UInt64([858993459,858993459]);
                var k4 = System.UInt64([252645135,252645135]);
                x = x.sub(((x.shru(1)).and(k1)));
                x = (x.and(k2)).add(((x.shru(2)).and(k2)));
                x = (x.add((x.shru(4)))).and(k4);
                x = (x.mul(System.UInt64([16843009,16843009]))).shru(56);
                return System.Int64.clip32(x);
            },
            RightFillToMSB: function (x) {
                x = x.or((x.shru(1)));
                x = x.or((x.shru(2)));
                x = x.or((x.shru(4)));
                x = x.or((x.shru(8)));
                x = x.or((x.shru(16)));
                x = x.or((x.shru(32)));

                return x;
            },
            ToBitString: function (x, length) {
                if (length === void 0) { length = 64; }
                return Bridge.toArray(System.Linq.Enumerable.range(0, length).select(function (bit) {
                        return Algorithms.Int64Usage.IsBitSet(x, System.Int64(bit)) ? "1" : "0";
                    })).join("");
            },
            ToSet: function (x) {
                x = {v:x};
                var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                while (x.v.ne(System.Int64(0))) {
                    onBits.add(Algorithms.Int64Usage.GetAndClearLeastSignificantBit(x));
                }

                return onBits;
            },
            ToSet$1: function (x) {
                var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                while (x.ne(System.UInt64(0))) {
                    var lsb = x.and((System.UInt64(0).sub(x)));
                    onBits.add(Algorithms.Int64Usage.DeBruijnLookup[System.Array.index(lsb.mul(Algorithms.Int64Usage.DeBruijnMultiplier).shru(58), Algorithms.Int64Usage.DeBruijnLookup)]);

                    x = x.xor(lsb);
                }

                return onBits;
            },
            EnumerateBits: function (x) {
                return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (x) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        lsb,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        x = {v:x};
                                            
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( x.v.ne(System.Int64(0)) ) {
                                                $step = 2;
                                                continue;
                                            } 
                                            $step = 4;
                                            continue;
                                    }
                                    case 2: {
                                        lsb = Algorithms.Int64Usage.GetAndClearLeastSignificantBit(x);
                                            $enumerator.current = lsb;
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        
                                            $step = 1;
                                            continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            ToInt64$1: function (bits) {
                var $t;
                if (bits === void 0) { bits = []; }
                var total = System.Int64(0);
                $t = Bridge.getEnumerator(bits);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        total = total.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return total;
            },
            ToInt64: function (set) {
                var $t;
                var total = System.Int64(0);
                $t = Bridge.getEnumerator(set, System.Int32);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        total = total.or(Algorithms.Int64Usage.BitMask[System.Array.index(bit, Algorithms.Int64Usage.BitMask)]);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return total;
            },
            ToUInt64: function (set) {
                var $t;
                var total = System.UInt64(0);
                $t = Bridge.getEnumerator(set, System.Int32);
                try {
                    while ($t.moveNext()) {
                        var bit = $t.Current;
                        total = total.or((System.UInt64(1).shl(bit)));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return total;
            },
            ExpandIntoLists: function (xs) {
                return System.Linq.Enumerable.from(xs).select($asm.$.Algorithms.Int64Usage.f1).toList(System.Collections.Generic.List$1(System.Int32));
            },
            ToSetString$2: function (x) {
                return Algorithms.Int64Usage.ToSetString(Algorithms.Int64Usage.ToSet(x));
            },
            ToSetString$1: function (list) {
                return System.String.concat("{", Bridge.toArray(System.Linq.Enumerable.from(list).select($asm.$.Algorithms.Int64Usage.f2)).join(", "), "}");
            },
            ToSetString: function (list) {
                return System.String.concat("{", Bridge.toArray(list).join(", "), "}");
            },
            ToSetStringSmall: function (x) {
                return [Bridge.toArray(Algorithms.Int64Usage.ToSet(x)).join("")].join("|");
            },
            AllSet: function (x, i) {
                return Algorithms.Int64Usage.IsBitSet((x.xor((x.add(System.Int64(1))))), System.Int64(i));
            },
            GetBits: function (x) {
                var setBits = new (System.Collections.Generic.List$1(System.Int64))();

                while (x.ne(System.Int64(0))) {
                    var lsb = x.and(x.neg());

                    setBits.add(lsb);

                    x = x.xor(lsb);
                }

                return setBits;
            },
            GetBits$1: function (x) {
                var setBits = new (System.Collections.Generic.List$1(System.UInt64))(16);

                while (x.ne(System.UInt64(0))) {
                    var lsb = x.and((System.UInt64(0).sub(x)));
                    setBits.add(lsb);
                    x = x.xor(lsb);
                }

                return setBits;
            }
        }
    }
    });

    Bridge.ns("Algorithms.Int64Usage", $asm.$);

    Bridge.apply($asm.$.Algorithms.Int64Usage, {
        f1: function (x) {
            return System.Linq.Enumerable.from(Algorithms.Int64Usage.ToSet(x)).toList(System.Int32);
        },
        f2: function (l) {
            return Algorithms.Int64Usage.ToSetString$2(l);
        }
    });

    Bridge.define("Algorithms.Lazy$1", function (T) { return {
        statics: {
            methods: {
                op_Implicit: function (da) {
                    return da.Value;
                }
            }
        },
        fields: {
            _creator: null,
            _value: null,
            _token: null
        },
        props: {
            Value: {
                get: function () {
                    if (this._value == null) {
                        this._token;
                        {
                            if (this._value == null) {
                                this._value = this._creator();
                            }
                        }
                    }

                    return this._value;
                }
            }
        },
        ctors: {
            init: function () {
                this._value = Bridge.getDefaultValue(T);
                this._token = {  };
            },
            ctor: function (creator) {
                this.$initialize();
                this._creator = creator;
            },
            $ctor1: function (creator, threadSafe) {
                Algorithms.Lazy$1(T).ctor.call(this, creator);
            }
        },
        methods: {
            Forget: function () {
                this._token;
                this._value = Bridge.getDefaultValue(T);
            }
        }
    }; });

    Bridge.define("Algorithms.OneFactorizationsOfCompleteGraph", {
        statics: {
            methods: {
                EnumerateOneFactorizations: function (n) {
                    var list = System.Int64(0);
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        list = list.or((System.Int64(1).shl(i)));
                    }

                    var coloring = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(n, (((n - 1) | 0))), 2)) | 0), 0, System.Int32);
                    for (var i1 = 0; i1 < ((n - 1) | 0); i1 = (i1 + 1) | 0) {
                        coloring[System.Array.index(i1, coloring)] = i1;
                    }

                    var lists = System.Array.init(n, System.Int64(0), System.Int64);
                    for (var i2 = 1; i2 < n; i2 = (i2 + 1) | 0) {
                        lists[System.Array.index(i2, lists)] = list.xor(System.Int64((1 << (((i2 - 1) | 0)))));
                    }

                    var priorNeighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();


                    return Algorithms.OneFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(1, 2, n, lists, coloring);
                },
                EnumerateOneFactorizations$1: function (i, j, n, lists, coloring) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function (i, j, n, lists, coloring) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            copy,
                            $t,
                            of,
                            $t1,
                            c,
                            $t2,
                            of1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (i >= n) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 3;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            copy = System.Array.init(coloring.length, 0, System.Int32);
                                                System.Array.copy(coloring, 0, copy, 0, coloring.length);
                                                $enumerator.current = copy;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 3: {
                                            if (j >= n) {
                                                    $step = 4;
                                                    continue;
                                                } else  {
                                                    $step = 9;
                                                    continue;
                                                }
                                        }
                                        case 4: {
                                            $t = Bridge.getEnumerator(Algorithms.OneFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(((i + 1) | 0), ((i + 2) | 0), n, lists, coloring), System.Array.type(System.Int32));
                                                $step = 5;
                                                continue;
                                        }
                                        case 5: {
                                            if ($t.moveNext()) {
                                                    of = $t.Current;
                                                    $step = 6;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 6: {
                                            $enumerator.current = of;
                                                $step = 7;
                                                return true;
                                        }
                                        case 7: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 8: {
                                            $step = 17;
                                            continue;
                                        }
                                        case 9: {
                                            $t1 = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits((lists[System.Array.index(i, lists)].and(lists[System.Array.index(j, lists)]))), System.Int32);
                                                $step = 10;
                                                continue;
                                        }
                                        case 10: {
                                            if ($t1.moveNext()) {
                                                    c = $t1.Current;
                                                    $step = 11;
                                                    continue;
                                                }
                                            $step = 16;
                                            continue;
                                        }
                                        case 11: {
                                            lists[System.Array.index(i, lists)] = Algorithms.Int64Usage.ClearBit(lists[System.Array.index(i, lists)], System.Int64(c));
                                                lists[System.Array.index(j, lists)] = Algorithms.Int64Usage.ClearBit(lists[System.Array.index(j, lists)], System.Int64(c));

                                                coloring[System.Array.index(((((((((Bridge.Int.mul(i, n) - ((Bridge.Int.div(Bridge.Int.mul(i, (((i + 1) | 0))), 2)) | 0)) | 0) + j) | 0) - i) | 0) - 1) | 0), coloring)] = c;
                                                $t2 = Bridge.getEnumerator(Algorithms.OneFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(i, ((j + 1) | 0), n, lists, coloring), System.Array.type(System.Int32));
                                                $step = 12;
                                                continue;
                                        }
                                        case 12: {
                                            if ($t2.moveNext()) {
                                                    of1 = $t2.Current;
                                                    $step = 13;
                                                    continue;
                                                }
                                            $step = 15;
                                            continue;
                                        }
                                        case 13: {
                                            $enumerator.current = of1;
                                                $step = 14;
                                                return true;
                                        }
                                        case 14: {
                                            $step = 12;
                                            continue;
                                        }
                                        case 15: {
                                            lists[System.Array.index(i, lists)] = Algorithms.Int64Usage.SetBit(lists[System.Array.index(i, lists)], System.Int64(c));
                                                lists[System.Array.index(j, lists)] = Algorithms.Int64Usage.SetBit(lists[System.Array.index(j, lists)], System.Int64(c));
                                            $step = 10;
                                            continue;
                                        }
                                        case 16: {
                                            $step = 17;
                                            continue;
                                        }
                                        case 17: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 18: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                GetSignSum: function (n, plus, minus, progress) {
                    var $t;
                    plus.v = 0;
                    minus.v = 0;

                    var list = 0;
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        list = list | (1 << i);
                    }

                    var of = System.Array.create(0, null, System.Int32, n, n);
                    for (var i1 = 1; i1 < n; i1 = (i1 + 1) | 0) {
                        of.set([0, i1], ($t = (i1 - 1) | 0, of.set([i1, 0], $t), $t));
                    }

                    var lists = System.Array.init(n, 0, System.Int32);
                    for (var i2 = 1; i2 < n; i2 = (i2 + 1) | 0) {
                        lists[System.Array.index(i2, lists)] = list ^ (1 << (((i2 - 1) | 0)));
                    }

                    var term = { v : Bridge.Int.mul(n, (((n - 1) | 0))) % 4 === 0 ? 1 : -1 };

                    Algorithms.OneFactorizationsOfCompleteGraph.DoSignSum(1, 2, n, lists, of, term, plus, minus, progress);

                    return ((plus.v - minus.v) | 0);
                },
                DoTerm: function (term, plus, minus, progress) {
                    if (term > 0) {
                        plus.v = (plus.v + 1) | 0;
                    } else {
                        minus.v = (minus.v + 1) | 0;
                    }

                    if ((((plus.v + minus.v) | 0)) % 1000000 === 0) {
                        if (!Bridge.staticEquals(progress, null)) {
                            progress(plus.v, minus.v);
                        }
                    }
                },
                DoSignSum: function (i, j, n, lists, of, term, plus, minus, progress) {
                    if (i >= ((n - 1) | 0)) {
                        Algorithms.OneFactorizationsOfCompleteGraph.DoTerm(term.v, plus, minus, progress);
                    } else {
                        var x = lists[System.Array.index(i, lists)] & lists[System.Array.index(j, lists)];
                        while (x !== 0) {
                            var c = x & ((-x) | 0);
                            x = x ^ c;
                            lists[System.Array.index(i, lists)] = lists[System.Array.index(i, lists)] ^ c;
                            lists[System.Array.index(j, lists)] = lists[System.Array.index(j, lists)] ^ c;

                            of.set([i, j], (of.set([j, i], c), c));

                            var factor = 1;
                            for (var k = 0; k < i; k = (k + 1) | 0) {
                                factor = Bridge.Int.mul(factor, (1 | ((((c - of.get([k, j])) | 0)) >> 31)));
                            }
                            for (var k1 = 0; k1 < j; k1 = (k1 + 1) | 0) {
                                factor = Bridge.Int.mul(factor, (1 | ((((c - of.get([i, k1])) | 0)) >> 31)));
                            }

                            term.v = Bridge.Int.mul(term.v, factor);
                            if (j >= ((n - 1) | 0)) {
                                Algorithms.OneFactorizationsOfCompleteGraph.DoSignSum(((i + 1) | 0), ((i + 2) | 0), n, lists, of, term, plus, minus, progress);
                            } else {
                                Algorithms.OneFactorizationsOfCompleteGraph.DoSignSum(i, ((j + 1) | 0), n, lists, of, term, plus, minus, progress);
                            }
                            term.v = Bridge.Int.mul(term.v, factor);

                            lists[System.Array.index(i, lists)] = lists[System.Array.index(i, lists)] ^ c;
                            lists[System.Array.index(j, lists)] = lists[System.Array.index(j, lists)] ^ c;
                        }
                    }
                }
            }
        }
    });

    Bridge.define("Algorithms.OnFactorizationsOfCompleteGraph", {
        statics: {
            methods: {
                EnumerateOneFactorizations: function (n) {
                    var list = System.Int64(0);
                    for (var i = 0; i < ((n - 1) | 0); i = (i + 1) | 0) {
                        list = list.or((System.Int64(1).shl(i)));
                    }

                    var coloring = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(n, (((n - 1) | 0))), 2)) | 0), 0, System.Int32);
                    for (var i1 = 0; i1 < ((n - 1) | 0); i1 = (i1 + 1) | 0) {
                        coloring[System.Array.index(i1, coloring)] = i1;
                    }

                    var lists = System.Array.init(n, System.Int64(0), System.Int64);
                    for (var i2 = 1; i2 < n; i2 = (i2 + 1) | 0) {
                        lists[System.Array.index(i2, lists)] = list.xor(System.Int64((1 << (((i2 - 1) | 0)))));

                        coloring[System.Array.index(((Bridge.Int.mul(i2, n) - ((Bridge.Int.div(Bridge.Int.mul(i2, (((i2 + 1) | 0))), 2)) | 0)) | 0), coloring)] = (i2 - 1) | 0;
                    }

                    return Algorithms.OnFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(1, 2, n, lists, coloring);
                },
                EnumerateOneFactorizations$1: function (i, j, n, lists, coloring) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function (i, j, n, lists, coloring) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            copy,
                            $t,
                            of,
                            $t1,
                            c,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Int32)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (i >= n) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 3;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            copy = System.Array.init(coloring.length, 0, System.Int32);
                                                System.Array.copy(coloring, 0, copy, 0, coloring.length);
                                                $enumerator.current = copy;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 11;
                                            continue;
                                        }
                                        case 3: {
                                            if (j >= n) {
                                                    $step = 4;
                                                    continue;
                                                } else  {
                                                    $step = 9;
                                                    continue;
                                                }
                                        }
                                        case 4: {
                                            $t = Bridge.getEnumerator(Algorithms.OnFactorizationsOfCompleteGraph.EnumerateOneFactorizations$1(((i + 1) | 0), ((i + 2) | 0), n, lists, coloring), System.Array.type(System.Int32));
                                                $step = 5;
                                                continue;
                                        }
                                        case 5: {
                                            if ($t.moveNext()) {
                                                    of = $t.Current;
                                                    $step = 6;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 6: {
                                            $enumerator.current = of;
                                                $step = 7;
                                                return true;
                                        }
                                        case 7: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 8: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 9: {
                                            $t1 = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits((lists[System.Array.index(i, lists)].and(lists[System.Array.index(j, lists)]))), System.Int32);
                                                try {
                                                    while ($t1.moveNext()) {
                                                        c = $t1.Current;

                                                    }
                                                } finally {
                                                    if (Bridge.is($t1, System.IDisposable)) {
                                                        $t1.System$IDisposable$dispose();
                                                    }
                                                }
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            $step = 11;
                                            continue;
                                        }
                                        case 11: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.OnlineChoiceHashGraph", {
        fields: {
            _f: null,
            _g: null,
            _hashCode: 0
        },
        ctors: {
            ctor: function (f, g) {
                this.$initialize();                var $t, $t1;

                this._f = Bridge.cast(System.Array.clone(f), System.Array.type(System.Int32));
                this._g = Bridge.cast(System.Array.clone(g), System.Array.type(System.Int32));

                for (var i = 0; i < this._g.length; i = (i + 1) | 0) {
                    if (this._g[System.Array.index(i, this._g)] === 0) {
                        this._f[System.Array.index(i, this._f)] = 0;
                    }
                }

                $t = Bridge.getEnumerator(this._f);
                try {
                    while ($t.moveNext()) {
                        var i1 = $t.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(this._g);
                try {
                    while ($t1.moveNext()) {
                        var i2 = $t1.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i2) | 0;
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        equals: function (obj) {
            var other = Bridge.as(obj, Algorithms.OnlineChoiceHashGraph);
            if (other == null) {
                return false;
            }

            return System.Linq.Enumerable.from(this._g).sequenceEqual(other._g) && System.Linq.Enumerable.from(this._f).sequenceEqual(other._f);
        },
        getHashCode: function () {
            return this._hashCode;
        }
    }
    });

    Bridge.define("Algorithms.OrientationHashGraph", {
        fields: {
            _values: null,
            _outMinusIn: null,
            _hashCode: 0
        },
        ctors: {
            ctor: function (g, outMinusIn) {
                this.$initialize();                var $t;

                this._values = System.Array.init(((Bridge.Int.div(Bridge.Int.mul(g.N, (((g.N - 1) | 0))), 2)) | 0), 0, System.Byte);
                this._outMinusIn = outMinusIn;

                var k = 0;
                for (var i = 0; i < g.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < g.N; j = (j + 1) | 0) {
                        var value = (g.getItem(i, j) ? 1 : 0) & 255;
                        this._values[System.Array.index(k, this._values)] = value;

                        if (g.getItem(i, j)) {
                            this._hashCode = (this._hashCode + (1 << (k % 32))) | 0;
                        }

                        k = (k + 1) | 0;
                    }
                }

                $t = Bridge.getEnumerator(outMinusIn);
                try {
                    while ($t.moveNext()) {
                        var i1 = $t.Current;
                        this._hashCode = (Bridge.Int.mul(this._hashCode, 33) + i1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        equals: function (obj) {
            var other = Bridge.as(obj, Algorithms.OrientationHashGraph);
            if (other == null) {
                return false;
            }

            return System.Linq.Enumerable.from(this._outMinusIn).sequenceEqual(other._outMinusIn) && System.Linq.Enumerable.from(this._values).sequenceEqual(other._values);
        },
        getHashCode: function () {
            return this._hashCode;
        }
    }
    });

    Bridge.define("Algorithms.OrientationResult", {
        props: {
            Graph: null,
            Even: 0,
            Odd: 0
        }
    });

    Bridge.define("Algorithms.Polynomials.FactoredRational", {
        statics: {
            fields: {
                Zero: null
            },
            ctors: {
                init: function () {
                    var $t;
                    this.Zero = ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.Sign = 0, $t);
                }
            },
            methods: {
                op_Multiply: function (fi, fi2) {
                    var $t;
                    var sign = Bridge.Int.mul(fi.Sign, fi2.Sign);
                    var k = new (System.Collections.Generic.List$1(System.Int32))(Math.max(fi.K.Count, fi2.K.Count));

                    if (sign !== 0) {
                        for (var i = 0; i < Math.max(fi.K.Count, fi2.K.Count); i = (i + 1) | 0) {
                            k.add(0);
                            if (i < fi.K.Count) {
                                k.setItem(i, (k.getItem(i) + fi.K.getItem(i)) | 0);
                            }
                            if (i < fi2.K.Count) {
                                k.setItem(i, (k.getItem(i) + fi2.K.getItem(i)) | 0);
                            }
                        }
                    }

                    return ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = k, $t.Sign = sign, $t);
                },
                op_Division: function (fi, fi2) {
                    var $t;
                    var sign = Bridge.Int.mul(fi.Sign, fi2.Sign);
                    var k = new (System.Collections.Generic.List$1(System.Int32))(Math.max(fi.K.Count, fi2.K.Count));

                    if (sign !== 0) {
                        for (var i = 0; i < Math.max(fi.K.Count, fi2.K.Count); i = (i + 1) | 0) {
                            k.add(0);
                            if (i < fi.K.Count) {
                                k.setItem(i, (k.getItem(i) + fi.K.getItem(i)) | 0);
                            }
                            if (i < fi2.K.Count) {
                                k.setItem(i, (k.getItem(i) - fi2.K.getItem(i)) | 0);
                            }
                        }
                    }

                    return ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = k, $t.Sign = sign, $t);
                }
            }
        },
        fields: {
            Sign: 0,
            K: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (n) {
                this.$initialize();
                var vv = System.Array.init(11, 0, System.Int32);
                for (var jj = 0; jj <= 10; jj = (jj + 1) | 0) {
                    vv[System.Array.index(jj, vv)] = this.Power(2, jj);
                }

                this.Sign = System.Decimal(n).sign();
                n = Bridge.Int.mul(n, this.Sign);

                this.K = new (System.Collections.Generic.List$1(System.Int32))();
                var i = 0;

                while (n > 1) {
                    this.K.add(0);
                    var p = Algorithms.Polynomials.PrimeNumbers.Get(i);
                    while (n % p === 0) {
                        this.K.setItem(i, (this.K.getItem(i) + 1) | 0);
                        n = (Bridge.Int.div(n, p)) | 0;
                    }

                    i = (i + 1) | 0;
                }
            }
        },
        methods: {
            ToRational: function (top, bottom) {
                if (this.K == null || this.Sign === 0) {
                    top.v = 0;
                    bottom.v = 1;
                    return;
                }

                top.v = this.Sign;
                bottom.v = 1;
                for (var i = 0; i < this.K.Count; i = (i + 1) | 0) {
                    if (this.K.getItem(i) > 0) {
                        top.v = Bridge.Int.mul(top.v, (this.Power(Algorithms.Polynomials.PrimeNumbers.Get(i), this.K.getItem(i))));
                    } else {
                        bottom.v = Bridge.Int.mul(bottom.v, (this.Power(Algorithms.Polynomials.PrimeNumbers.Get(i), ((-this.K.getItem(i)) | 0))));
                    }
                }
            },
            Power: function (p, k) {
                var m = 1;
                while (k > 0) {
                    var e = 1;
                    var n = p;
                    while (e <= k >> 1) {
                        n = Bridge.Int.mul(n, n);
                        e = e << 1;
                    }

                    k = (k - e) | 0;
                    m = Bridge.Int.mul(m, n);
                }

                return m;
            }
        }
    });

    Bridge.define("Algorithms.Polynomials.GraphPolynomial", {
        fields: {
            _g: null,
            _priorNeighbors: null,
            _normalizer: null,
            _signLookup: null
        },
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this._g = g;

                this._priorNeighbors = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                for (var w = 0; w < this._g.N; w = (w + 1) | 0) {
                    this._priorNeighbors.add(new (System.Collections.Generic.List$1(System.Int32))());
                    for (var v = 0; v < w; v = (v + 1) | 0) {
                        if (g.getItem(v, w)) {
                            this._priorNeighbors.getItem(w).add(v);
                        }
                    }
                }
            }
        },
        methods: {
            GetCoefficient: function (power) {
                var $t;
                this._normalizer = new Algorithms.Polynomials.Normalizer(power);

                var a = System.Array.init(power.length, 0, System.Int32);
                var top = { v : System.Int64(0) };
                var bottom = { v : System.Int64(1) };
                var partialProduct = { v : ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t) };
                this.SumTerms(0, a, power, partialProduct, top, bottom);

                return System.Int64.clip32(top.v.div(bottom.v));
            },
            GetSignSum: function (power) {
                this._signLookup = new Algorithms.Polynomials.SignLookup(power);

                var a = System.Array.init(power.length, 0, System.Int32);
                var sum = { v : 0 };
                var partialProduct = { v : 1 };
                this.SumSigns(0, a, power, partialProduct, sum);

                return sum.v;
            },
            SumSigns: function (w, a, power, partialProduct, sum) {
                var $t;
                if (w === power.length) {
                    sum.v = (sum.v + partialProduct.v) | 0;
                } else {
                    for (var j = 0; j <= power[System.Array.index(w, power)]; j = (j + 1) | 0) {
                        a[System.Array.index(w, a)] = j;

                        var current = 1;
                        $t = Bridge.getEnumerator(this._priorNeighbors.getItem(w));
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                current = Bridge.Int.mul(current, this._signLookup.Sign.get([a[System.Array.index(v, a)], a[System.Array.index(w, a)]]));
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (current === 0) {
                            continue;
                        }

                        partialProduct.v = Bridge.Int.mul(partialProduct.v, current);
                        this.SumSigns(((w + 1) | 0), a, power, partialProduct, sum);
                        partialProduct.v = (Bridge.Int.div(partialProduct.v, current)) | 0;
                    }
                }
            },
            SumTerms: function (w, a, power, partialProduct, top, bottom) {
                var $t;
                if (w === power.length) {
                    var r = Algorithms.Polynomials.FactoredRational.op_Division(partialProduct.v, this._normalizer.Get(a));
                    var top2 = { };
                    var bottom2 = { };
                    r.ToRational(top2, bottom2);

                    top.v = top.v.mul(System.Int64(bottom2.v)).add(bottom.v.mul(System.Int64(top2.v)));
                    bottom.v = bottom.v.mul(System.Int64(bottom2.v));

                    var gcd = this.GCD(top.v, bottom.v);
                    top.v = top.v.div(gcd);
                    bottom.v = bottom.v.div(gcd);
                } else {
                    for (var j = 0; j <= power[System.Array.index(w, power)]; j = (j + 1) | 0) {
                        a[System.Array.index(w, a)] = j;

                        var current = ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t);
                        $t = Bridge.getEnumerator(this._priorNeighbors.getItem(w));
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                current = Algorithms.Polynomials.FactoredRational.op_Multiply(current, this._normalizer.FactoredDifference.get([a[System.Array.index(v, a)], a[System.Array.index(w, a)]]));
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (current.Sign === 0) {
                            continue;
                        }

                        partialProduct.v = Algorithms.Polynomials.FactoredRational.op_Multiply(partialProduct.v, current);
                        this.SumTerms(((w + 1) | 0), a, power, partialProduct, top, bottom);
                        partialProduct.v = Algorithms.Polynomials.FactoredRational.op_Division(partialProduct.v, current);
                    }
                }
            },
            GCD: function (x, y) {
                var tmp;
                x = x.abs();
                y = y.abs();
                while (x.gt(System.Int64(0))) {
                    tmp = x;
                    x = y.mod(x);
                    y = tmp;
                }
                return y;
            }
        }
    });

    Bridge.define("Algorithms.Polynomials.GraphPolynomialExtensions", {
        statics: {
            methods: {
                GetCoefficient: function (g, power) {
                    var gp = new Algorithms.Polynomials.GraphPolynomial(g);
                    return gp.GetCoefficient(power);
                },
                GetSignSum: function (g, power) {
                    var gp = new Algorithms.Polynomials.GraphPolynomial(g);
                    return gp.GetSignSum(power);
                }
            }
        }
    });

    Bridge.define("Algorithms.Polynomials.Normalizer", {
        fields: {
            FactoredDifference: null,
            InsideProduct: null
        },
        ctors: {
            ctor: function (height) {
                this.$initialize();                var $t;

                var m = System.Linq.Enumerable.from(height).max();

                this.FactoredDifference = System.Array.create(null, null, Algorithms.Polynomials.FactoredRational, ((m + 1) | 0), ((m + 1) | 0));
                for (var i = 0; i <= m; i = (i + 1) | 0) {
                    for (var j = 0; j <= m; j = (j + 1) | 0) {
                        this.FactoredDifference.set([i, j], new Algorithms.Polynomials.FactoredRational.$ctor1(((i - j) | 0)));
                    }
                }

                this.InsideProduct = System.Array.create(null, null, Algorithms.Polynomials.FactoredRational, height.length, ((m + 1) | 0));
                for (var i1 = 0; i1 < height.length; i1 = (i1 + 1) | 0) {
                    for (var j1 = 0; j1 <= height[System.Array.index(i1, height)]; j1 = (j1 + 1) | 0) {
                        this.InsideProduct.set([i1, j1], ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t));
                        for (var k = 0; k <= height[System.Array.index(i1, height)]; k = (k + 1) | 0) {
                            if (k === j1) {
                                continue;
                            }

                            this.InsideProduct.set([i1, j1], Algorithms.Polynomials.FactoredRational.op_Multiply(this.InsideProduct.get([i1, j1]), this.FactoredDifference.get([j1, k])));
                        }
                    }
                }
        }
    },
    methods: {
        Get: function (a) {
            var $t;
            var normalizer = ($t = new Algorithms.Polynomials.FactoredRational.ctor(), $t.K = new (System.Collections.Generic.List$1(System.Int32))(), $t.Sign = 1, $t);
            for (var i = 0; i < a.length; i = (i + 1) | 0) {
                normalizer = Algorithms.Polynomials.FactoredRational.op_Multiply(normalizer, this.InsideProduct.get([i, a[System.Array.index(i, a)]]));
            }

            return normalizer;
        }
    }
    });

    Bridge.define("Algorithms.Polynomials.PrimeNumbers", {
        statics: {
            fields: {
                _primes: null
            },
            ctors: {
                init: function () {
                    this._primes = $asm.$.Algorithms.Polynomials.PrimeNumbers.f1(new (System.Collections.Generic.List$1(System.Int32))());
                }
            },
            methods: {
                Get: function (i) {
                    if (i >= Algorithms.Polynomials.PrimeNumbers._primes.Count) {
                        Algorithms.Polynomials.PrimeNumbers.ComputeMorePrimes(i);
                    }

                    return Algorithms.Polynomials.PrimeNumbers._primes.getItem(i);
                },
                ComputeMorePrimes: function (i) {
                    var m = Math.max(i, Bridge.Int.mul(2, Algorithms.Polynomials.PrimeNumbers._primes.Count));
                    var p = (Algorithms.Polynomials.PrimeNumbers._primes.getItem(((Algorithms.Polynomials.PrimeNumbers._primes.Count - 1) | 0)) + 2) | 0;

                    while (Algorithms.Polynomials.PrimeNumbers._primes.Count <= m) {
                        if (Algorithms.Polynomials.PrimeNumbers.IsPrime(p)) {
                            Algorithms.Polynomials.PrimeNumbers._primes.add(p);
                        }

                        p = (p + 2) | 0;
                    }
                },
                IsPrime: function (p) {
                    for (var k = 0; Bridge.Int.mul(Algorithms.Polynomials.PrimeNumbers._primes.getItem(k), Algorithms.Polynomials.PrimeNumbers._primes.getItem(k)) <= p; k = (k + 1) | 0) {
                        if (p % Algorithms.Polynomials.PrimeNumbers._primes.getItem(k) === 0) {
                            return false;
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.ns("Algorithms.Polynomials.PrimeNumbers", $asm.$);

    Bridge.apply($asm.$.Algorithms.Polynomials.PrimeNumbers, {
        f1: function (_o20) {
            _o20.add(2);
            _o20.add(3);
            _o20.add(5);
            _o20.add(7);
            _o20.add(11);
            _o20.add(13);
            _o20.add(17);
            _o20.add(19);
            return _o20;
        }
    });

    Bridge.define("Algorithms.Polynomials.SignLookup", {
        fields: {
            Sign: null
        },
        ctors: {
            ctor: function (height) {
                this.$initialize();
                var m = System.Linq.Enumerable.from(height).max();

                this.Sign = System.Array.create(0, null, System.Int32, ((m + 1) | 0), ((m + 1) | 0));
                for (var i = 0; i <= m; i = (i + 1) | 0) {
                    for (var j = 0; j <= m; j = (j + 1) | 0) {
                        this.Sign.set([i, j], System.Decimal(((i - j) | 0)).sign());
                    }
                }
            }
        }
    });

    Bridge.define("Algorithms.SubsetEnumerator", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Int64)],
        fields: {
            _setSize: 0,
            _subsetSize: 0
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (setSize, subsetSize) {
                this.$initialize();
                this._setSize = setSize;
                this._subsetSize = subsetSize;
            }
        },
        methods: {
            getEnumerator: function () {
                return new Algorithms.SubsetEnumerator.Enumerator(this._setSize, this._subsetSize);
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            }
        }
    });

    Bridge.define("Algorithms.SubsetEnumerator.Enumerator", {
        inherits: [System.Collections.Generic.IEnumerator$1(System.Int64)],
        fields: {
            _isFirst: false,
            _setSize: 0,
            _subsetSize: 0,
            _current: System.Int64(0)
        },
        props: {
            Current: {
                get: function () {
                    return this._current;
                }
            },
            System$Collections$IEnumerator$Current: {
                get: function () {
                    return this.Current;
                }
            }
        },
        alias: [
            "Current", ["System$Collections$Generic$IEnumerator$1$System$Int64$Current$1", "System$Collections$Generic$IEnumerator$1$Current$1"],
            "dispose", "System$IDisposable$dispose",
            "moveNext", "System$Collections$IEnumerator$moveNext",
            "reset", "System$Collections$IEnumerator$reset"
        ],
        ctors: {
            init: function () {
                this._isFirst = true;
            },
            ctor: function (setSize, subsetSize) {
                this.$initialize();
                this._setSize = setSize;
                this._subsetSize = subsetSize;
            }
        },
        methods: {
            dispose: function () { },
            moveNext: function () {
                if (this._isFirst) {
                    if (this._subsetSize > this._setSize) {
                        return false;
                    }

                    this._current = System.Int64(((((1 << this._subsetSize) - 1) | 0)) << (((this._setSize - this._subsetSize) | 0)));

                    this._isFirst = false;
                    return true;
                }

                var lsb = this._current.and(this._current.neg());

                if (lsb.gt(System.Int64(1))) {
                    this._current = this._current.xor(lsb).xor((lsb.shr(1)));

                    return true;
                }

                var high = this._current.and((this._current.add(System.Int64(1))));

                if (high.equals(System.Int64(0))) {
                    return false;
                }

                var low = this._current.xor(high);
                low = (low.shl(2)).add(System.Int64(3));

                while ((low.and(high)).equals(System.Int64(0))) {
                    low = low.shl(1);
                }

                this._current = high.xor(low);

                return true;
            },
            reset: function () {
                this._isFirst = true;
            }
        }
    });

    Bridge.define("Algorithms.TransitivePartition", {
        props: {
            Parts: null
        },
        ctors: {
            ctor: function (set) {
                this.$initialize();
                this.Parts = function (_o21) {
                        var $t;
                        _o21.add(($t = new Algorithms.TransitivePartition.Part(), $t.Set = set, $t.Scores = new (System.Collections.Generic.List$1(System.Int32))(), $t));
                        return _o21;
                    }(new (System.Collections.Generic.List$1(Algorithms.TransitivePartition.Part))());
            }
        },
        methods: {
            Refine: function (score, scoreNumber) {
                var $t, $t1;
                if (this.Parts.getItem(0).Scores.Count >= scoreNumber) {
                    return;
                }

                var refined = new (System.Collections.Generic.List$1(Algorithms.TransitivePartition.Part))(this.Parts.Count);
                $t = Bridge.getEnumerator(this.Parts);
                try {
                    while ($t.moveNext()) {
                        var part = $t.Current;
                        var map = this.RefinePart(part, score);
                        $t1 = Bridge.getEnumerator(map);
                        try {
                            while ($t1.moveNext()) {
                                var kvp = $t1.Current;
                                var p = new Algorithms.TransitivePartition.Part();
                                p.Set = kvp.value;
                                p.Scores = new (System.Collections.Generic.List$1(System.Int32))(part.Scores);
                                p.Scores.add(kvp.key);

                                refined.add(p);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Parts = refined;
            },
            RefinePart: function (part, score) {
                var $t;
                var map = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();
                $t = Bridge.getEnumerator(part.Set);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        var x = score[System.Array.index(v, score)];
                        var l = { };
                        if (!map.tryGetValue(x, l)) {
                            l.v = new (System.Collections.Generic.List$1(System.Int32))();
                            map.set(x, l.v);
                        }

                        l.v.add(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return map;
            },
            equals: function (obj) {
                var $t;
                var tp = Bridge.as(obj, Algorithms.TransitivePartition);
                if (tp == null) {
                    return false;
                }

                $t = Bridge.getEnumerator(this.Parts);
                try {
                    while ($t.moveNext()) {
                        var part = $t.Current;
                        var p = tp.FindPartWithScores(part.Scores);
                        if (p == null) {
                            return false;
                        }

                        if (p.Set.Count !== part.Set.Count) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            getHashCode: function () {
                return Bridge.getHashCode(this);
            },
            FindPartWithScores: function (scores) {
                var $t;
                $t = Bridge.getEnumerator(this.Parts);
                try {
                    while ($t.moveNext()) {
                        var part = $t.Current;
                        if (System.Linq.Enumerable.from(part.Scores).sequenceEqual(scores)) {
                            return part;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return null;
            }
        }
    });

    Bridge.define("Algorithms.TransitivePartition.Part", {
        props: {
            Set: null,
            Scores: null
        }
    });

    Bridge.define("Algorithms.UnpermutedAssignmentEnumerator", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int64))],
        fields: {
            _vertexCount: 0,
            _f: null,
            _potSize: 0,
            _start: 0,
            _step: 0,
            _pairMaskToBadMask: null
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Collections$Generic$List$1$System$Int64$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (vertexCount, f, potSize, start, step) {
                if (start === void 0) { start = 0; }
                if (step === void 0) { step = 1; }

                this.$initialize();
                this._vertexCount = vertexCount;
                this._f = f;
                this._potSize = potSize;
                this._start = start;
                this._step = step;

                this._pairMaskToBadMask = Algorithms.Int64Usage.GeneratePairMasks(this._potSize);
            }
        },
        methods: {
            getEnumerator: function () {
                return System.Linq.Enumerable.from(this.GetEnumerable(this._vertexCount)).where(Bridge.fn.bind(this, $asm.$.Algorithms.UnpermutedAssignmentEnumerator.f1)).getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            GetEnumerableRecursive: function (vertexCount) {
                if (vertexCount === 1) {
                    return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int64), Algorithms.GenericExtensions.EnList(System.Int64, ((System.Int64(1).shl(this._f(0))).sub(System.Int64(1)))));
                }

                return System.Linq.Enumerable.from(this.GetEnumerableRecursive(((vertexCount - 1) | 0))).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.UnpermutedAssignmentEnumerator.f2));
            },
            GetEnumerable: function (vertexCount) {
                var enumerable = Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int64), Algorithms.GenericExtensions.EnList(System.Int64, ((System.Int64(1).shl(this._f(0))).sub(System.Int64(1)))));

                for (var i = 1; i < vertexCount; i = (i + 1) | 0) {
                    enumerable = System.Linq.Enumerable.from(enumerable).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.UnpermutedAssignmentEnumerator.f2));
                }

                return enumerable;
            },
            GetExtensions: function (list) {
                var restricted = System.Linq.Enumerable.from(this._pairMaskToBadMask).where(Bridge.fn.bind(this, function (kvp) {
                        return this.IsRestricted(kvp.key, list);
                    }));

                var size = this._f(list.Count);

                return System.Linq.Enumerable.from(new Algorithms.SubsetEnumerator(this._potSize, size)).where(function (subset) {
                        return restricted.all(function (kvp) {
                            return (subset.and(kvp.key)).ne(kvp.value);
                        });
                    }).select(function (subset) {
                    return System.Linq.Enumerable.from(list).concat(System.Array.init([subset], System.Int64)).toList(System.Int64);
                });
            },
            IsRestricted: function (p, list) {
                var $t;
                $t = Bridge.getEnumerator(list);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        var intersection = x.and(p);
                        if (intersection.ne(System.Int64(0)) && intersection.ne(x)) {
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            }
        }
    });

    Bridge.ns("Algorithms.UnpermutedAssignmentEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.UnpermutedAssignmentEnumerator, {
        f1: function (list, i) {
            return (((i - this._start) | 0)) % this._step === 0;
        },
        f2: function (list) {
            return this.GetExtensions(list);
        }
    });

    Bridge.define("Algorithms.Utility.EquivalenceRelation$1", function (T) { return {
        fields: {
            _nodeLookup: null
        },
        ctors: {
            init: function () {
                this._nodeLookup = new (System.Collections.Generic.Dictionary$2(T,Algorithms.Utility.EquivalenceRelation$1.Node(T)))();
            }
        },
        methods: {
            AddElement: function (t) {
                this.LookupNode(t);
            },
            Relate: function (x, y) {
                var nx = this.LookupNode(x);
                var ny = this.LookupNode(y);

                var xRoot = this.Find(nx);
                var yRoot = this.Find(ny);

                if (Bridge.referenceEquals(xRoot, yRoot)) {
                    return;
                }

                if (xRoot.Rank < yRoot.Rank) {
                    xRoot.Parent = yRoot;
                } else {
                    if (xRoot.Rank > yRoot.Rank) {
                        yRoot.Parent = xRoot;
                    } else {
                        yRoot.Parent = xRoot;
                        xRoot.Rank = (xRoot.Rank + 1) | 0;
                    }
                }
            },
            AreRelated: function (x, y) {
                var nx = this.LookupNode(x);
                var ny = this.LookupNode(y);

                return Bridge.referenceEquals(this.Find(nx), this.Find(ny));
            },
            GetEquivalenceClass: function (x) {
                var nx = this.LookupNode(x);
                var xRoot = this.Find(nx);

                return System.Linq.Enumerable.from(this._nodeLookup.getValues()).where(Bridge.fn.bind(this, function (node) {
                        return Bridge.referenceEquals(this.Find(node), xRoot);
                    })).select($asm.$.Algorithms.Utility.EquivalenceRelation$1.f1);
            },
            GetEquivalenceClasses: function () {
                return System.Linq.Enumerable.from(this._nodeLookup.getValues()).groupBy(Bridge.fn.bind(this, function (node) {
                        return this.Find(node);
                    })).select(function (group) {
                    return group.select($asm.$.Algorithms.Utility.EquivalenceRelation$1.f1);
                });
            },
            Find: function (n) {
                if (!Bridge.referenceEquals(n.Parent, n)) {
                    n.Parent = this.Find(n.Parent);
                }

                return n.Parent;
            },
            LookupNode: function (t) {
                var node = { };
                if (!this._nodeLookup.tryGetValue(t, node)) {
                    node.v = new (Algorithms.Utility.EquivalenceRelation$1.Node(T))();
                    node.v.Parent = node.v;
                    node.v.Rank = 0;
                    node.v.T = t;

                    this._nodeLookup.set(t, node.v);
                }

                return node.v;
            }
        }
    }; });

    Bridge.ns("Algorithms.Utility.EquivalenceRelation$1", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.EquivalenceRelation$1, {
        f1: function (node) {
            return node.T;
        }
    });

    Bridge.define("Algorithms.Utility.EquivalenceRelation$1.Node", function (T) { return {
        props: {
            Parent: null,
            Rank: 0,
            T: Bridge.getDefaultValue(T)
        }
    }; });

    Bridge.define("Algorithms.Utility.Factoradic", {
        props: {
            Digits: null,
            Value: System.Int64(0)
        },
        ctors: {
            $ctor1: function (value, n) {
                this.$initialize();
                this.Value = value;

                this.Digits = new (System.Collections.Generic.List$1(System.Int32))(n);
                this.Digits.add(0);

                var i = 1;
                while (value.gt(System.Int64(0))) {
                    this.Digits.add(System.Int64.clip32(value.mod(System.Int64(((i = (i + 1) | 0))))));
                    value = value.div(System.Int64(i));
                }

                for (i = this.Digits.Count; i < n; i = (i + 1) | 0) {
                    this.Digits.add(0);
                }
            },
            ctor: function (p) {
                this.$initialize();
                this.Digits = new (System.Collections.Generic.List$1(System.Int32))(p.N);

                var elements = new (System.Collections.Generic.List$1(System.Int32))(p.N);
                for (var i = 0; i < p.N; i = (i + 1) | 0) {
                    elements.add(i);
                }

                for (var i1 = 0; i1 < p.N; i1 = (i1 + 1) | 0) {
                    this.Digits.add(elements.indexOf(p.getItem(i1)));
                    elements.remove(p.getItem(i1));
                }

                this.Digits.reverse();

                this.Value = System.Int64(0);
                var n = 1;
                for (var i2 = 0; i2 < this.Digits.Count; i2 = (i2 + 1) | 0) {
                    this.Value = this.Value.add(System.Int64((Bridge.Int.mul(this.Digits.getItem(i2), n))));
                    n = Bridge.Int.mul(n, (((i2 + 1) | 0)));
                }

            }
        }
    });

    Bridge.define("Algorithms.Utility.Flows", {
        statics: {
            methods: {
                BipartiteMaximumMatching: function (n, adjacencies) {
                    var $t;
                    var capacity = System.Array.create(0, null, System.Int32, ((n + 2) | 0), ((n + 2) | 0));
                    var source = 0;
                    var target = 1;

                    var lo = 2;
                    var ro = (lo + adjacencies.Count) | 0;

                    for (var i = 0; i < adjacencies.Count; i = (i + 1) | 0) {
                        capacity.set([source, ((lo + i) | 0)], 1);

                        $t = Bridge.getEnumerator(adjacencies.getItem(i));
                        try {
                            while ($t.moveNext()) {
                                var j = $t.Current;
                                capacity.set([((lo + i) | 0), ((ro + j) | 0)], 1);
                                capacity.set([((ro + j) | 0), target], 1);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}

                    return Algorithms.Utility.Flows.MaxFlow(capacity, source, target);
                },
                MaxFlow: function (capacity, source, target) {
                    return new Algorithms.Utility.Flows.FordFulkerson(capacity, source, target).MaxFlow();
                }
            }
        }
    });

    Bridge.define("Algorithms.Utility.Flows.FordFulkerson", {
        fields: {
            _n: 0,
            _source: 0,
            _target: 0,
            _capacity: null,
            _flow: null
        },
        ctors: {
            ctor: function (capacity, source, target) {
                this.$initialize();
                this._capacity = capacity;
                this._source = source;
                this._target = target;

                this._n = System.Array.getLength(capacity, 0);
                this._flow = System.Array.create(0, null, System.Int32, this._n, this._n);
            }
        },
        methods: {
            MaxFlow: function () {
                while (true) {
                    var path = $asm.$.Algorithms.Utility.Flows.FordFulkerson.f1(new (System.Collections.Generic.List$1(System.Int32))());
                    var done = !this.FindAugmentingPath(path);
                    if (done) {
                        break;
                    }

                    this.AddFlow(path);
                }

                return System.Linq.Enumerable.range(0, this._n).sum(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.Flows.FordFulkerson.f2));
            },
            FindAugmentingPath: function (path) {
                var $t;
                var last = path.getItem(((path.Count - 1) | 0));

                if (last === this._target) {
                    return true;
                }

                $t = Bridge.getEnumerator(this.OutNeighbors(last), System.Int32);
                try {
                    while ($t.moveNext()) {
                        var j = $t.Current;
                        if (path.contains(j)) {
                            continue;
                        }

                        path.add(j);

                        var isAugmenting = this.FindAugmentingPath(path);
                        if (isAugmenting) {
                            return true;
                        }

                        path.remove(j);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            OutNeighbors: function (i) {
                return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (i) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        j,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        j = 0;
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ( j < this._n ) {
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 2: {
                                        if (((this._capacity.get([i, j]) - this._flow.get([i, j])) | 0) > 0) {
                                                $step = 3;
                                                continue;
                                            } 
                                            $step = 5;
                                            continue;
                                    }
                                    case 3: {
                                        $enumerator.current = j;
                                            $step = 4;
                                            return true;
                                    }
                                    case 4: {
                                        $step = 5;
                                        continue;
                                    }
                                    case 5: {
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        j = (j + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 7: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            AddFlow: function (path) {
                var gain = this.FindGain(path);

                for (var i = 0; i < ((path.Count - 1) | 0); i = (i + 1) | 0) {
                    this._flow.set([path.getItem(i), path.getItem(((i + 1) | 0))], (this._flow.get([path.getItem(i), path.getItem(((i + 1) | 0))]) + gain) | 0);
                    this._flow.set([path.getItem(((i + 1) | 0)), path.getItem(i)], (-this._flow.get([path.getItem(i), path.getItem(((i + 1) | 0))])) | 0);
                }
            },
            FindGain: function (path) {
                var gain = 2147483647;

                for (var i = 0; i < ((path.Count - 1) | 0); i = (i + 1) | 0) {
                    gain = Math.min(gain, ((this._capacity.get([path.getItem(i), path.getItem(((i + 1) | 0))]) - this._flow.get([path.getItem(i), path.getItem(((i + 1) | 0))])) | 0));
                }

                return gain;
            }
        }
    });

    Bridge.ns("Algorithms.Utility.Flows.FordFulkerson", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.Flows.FordFulkerson, {
        f1: function (_o22) {
            _o22.add(0);
            return _o22;
        },
        f2: function (i) {
            return this._flow.get([this._source, i]);
        }
    });

    Bridge.define("Algorithms.Utility.LinqExtensions", {
        statics: {
            methods: {
                CartesianProduct$2: function (T, a, b) {
                    return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(T, System.Array.init([a, b], System.Collections.Generic.IEnumerable$1(T)))).select(function (s) {
                            return { item1: System.Linq.Enumerable.from(s).elementAt(0), item2: System.Linq.Enumerable.from(s).elementAt(1) };
                        });
                },
                CartesianProduct: function (T, sequences) {
                    var emptyProduct = System.Array.init([System.Linq.Enumerable.empty()], System.Linq.EnumerableInstance$1);

                    return System.Linq.Enumerable.from(sequences).aggregate(emptyProduct, function (accumulator, sequence) {
                            return System.Linq.Enumerable.from(accumulator).selectMany(function (accseq) {
                                    return sequence;
                                }, function (accseq, item) {
                                    return System.Linq.Enumerable.from(accseq).concat(System.Array.init([item], T));
                                });
                        });
                },
                CartesianProduct$1: function (T, sequences) {
                    var emptyProduct = System.Array.init([System.Linq.Enumerable.empty()], System.Linq.EnumerableInstance$1);

                    return System.Linq.Enumerable.from(sequences).aggregate(emptyProduct, function (accumulator, sequence) {
                            return System.Linq.Enumerable.from(accumulator).selectMany(function (accseq) {
                                    return sequence;
                                }, function (accseq, item) {
                                    return System.Linq.Enumerable.from(accseq).concat(System.Array.init([item], T));
                                });
                        });
                },
                Concat: function (T, e, value) {
                    return new (Bridge.GeneratorEnumerable$1(T))(Bridge.fn.bind(this, function (T, e, value) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            $t,
                            v,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(T))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            $t = Bridge.getEnumerator(e, T);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    v = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = v;
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {
                                            $enumerator.current = value;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                Distinct: function (T, source, areEqual) {
                    return new (Bridge.GeneratorEnumerable$1(T))(Bridge.fn.bind(this, function (T, source, areEqual) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            yielded,
                            $t,
                            t,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(T))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            yielded = new (System.Collections.Generic.List$1(T))();

                                                $t = Bridge.getEnumerator(source, T);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    t = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 2: {
                                            if (System.Linq.Enumerable.from(yielded).all((function ($me, t) {
                                                        return function (x) {
                                                            return !areEqual(x, t);
                                                        };
                                                    })(this, t))) {
                                                    $step = 3;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 3: {
                                            yielded.add(t);
                                                $enumerator.current = t;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 5: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.Utility.ListUtility", {
        statics: {
            methods: {
                DifferenceSorted: function (T, A, B) {
                    if (B == null) {
                        return System.Linq.Enumerable.from(A).toList(T);
                    }

                    var C = new (System.Collections.Generic.List$1(T))(Math.max(4, ((A.Count - B.Count) | 0)));
                    var j = 0;
                    for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                        while (j < B.Count && Bridge.compare(A.getItem(i), B.getItem(j)) > 0) {
                            j = (j + 1) | 0;
                        }

                        if (j >= B.Count || Bridge.compare(A.getItem(i), B.getItem(j)) < 0) {
                            C.add(A.getItem(i));
                        }
                    }

                    return C;
                },
                DifferenceSorted$1: function (A, B) {
                    if (B == null) {
                        return System.Linq.Enumerable.from(A).toList(System.Int32);
                    }

                    var C = new (System.Collections.Generic.List$1(System.Int32))(Math.max(4, ((A.Count - B.Count) | 0)));
                    var j = 0;
                    for (var i = 0; i < A.Count; i = (i + 1) | 0) {
                        while (j < B.Count && A.getItem(i) > B.getItem(j)) {
                            j = (j + 1) | 0;
                        }

                        if (j >= B.Count || A.getItem(i) < B.getItem(j)) {
                            C.add(A.getItem(i));
                        }
                    }

                    return C;
                },
                IntersectionSorted: function (T, A, B) {
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }

                    var C = new (System.Collections.Generic.List$1(T))(Math.min(A.Count, B.Count));
                    var i = 0;
                    var j = 0;

                    while (i < A.Count && j < B.Count) {
                        var compare = Bridge.compare(A.getItem(i), B.getItem(j));

                        if (compare === 0) {
                            C.add(A.getItem(i));
                        }
                        if (compare <= 0) {
                            i = (i + 1) | 0;
                        }
                        if (compare >= 0) {
                            j = (j + 1) | 0;
                        }
                    }

                    return C;
                },
                IntersectionSorted$1: function (A, B) {
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(System.Int32))();
                    }

                    var C = new (System.Collections.Generic.List$1(System.Int32))(Math.min(A.Count, B.Count));
                    var i = 0;
                    var j = 0;

                    var ac = A.Count;
                    var bc = B.Count;
                    while (i < ac && j < bc) {
                        var a = A.getItem(i);
                        var b = B.getItem(j);

                        if (a === b) {
                            C.add(a);
                        }
                        if (a <= b) {
                            i = (i + 1) | 0;
                        }
                        if (a >= b) {
                            j = (j + 1) | 0;
                        }
                    }

                    return C;
                },
                IntersectionCountSorted$1: function (T, A, B) {
                    if (A == null || B == null) {
                        return 0;
                    }

                    var count = 0;
                    var i = 0;
                    var j = 0;

                    while (i < A.Count && j < B.Count) {
                        var compare = Bridge.compare(A.getItem(i), B.getItem(j));

                        if (compare === 0) {
                            count = (count + 1) | 0;
                        }
                        if (compare <= 0) {
                            i = (i + 1) | 0;
                        }
                        if (compare >= 0) {
                            j = (j + 1) | 0;
                        }
                    }

                    return count;
                },
                IntersectionCountSorted: function (A, B) {
                    if (A == null || B == null) {
                        return 0;
                    }

                    var count = 0;
                    var i = 0;
                    var j = 0;

                    var ac = A.Count;
                    var bc = B.Count;
                    while (i < ac && j < bc) {
                        var a = A.getItem(i);
                        var b = B.getItem(j);

                        if (a === b) {
                            count = (count + 1) | 0;
                        }
                        if (a <= b) {
                            i = (i + 1) | 0;
                        }
                        if (a >= b) {
                            j = (j + 1) | 0;
                        }
                    }

                    return count;
                },
                UnionSorted: function (T, A, B) {
                    var list = Algorithms.Utility.ListUtility.DifferenceSorted(T, A, B);
                    list.addRange(Algorithms.Utility.ListUtility.DifferenceSorted(T, B, A));

                    return list;
                },
                UnionSorted$1: function (A, B) {
                    var list = Algorithms.Utility.ListUtility.DifferenceSorted$1(A, B);
                    list.addRange(Algorithms.Utility.ListUtility.DifferenceSorted$1(B, A));

                    return list;
                },
                EqualSorted$1: function (T, A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted$1(T, A, B) === A.Count;
                },
                EqualSorted: function (A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted(A, B) === A.Count;
                },
                SubsetEqualSorted$1: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.IntersectionCountSorted$1(T, A, B) === A.Count;
                },
                SubsetEqualSorted: function (A, B) {
                    return Algorithms.Utility.ListUtility.IntersectionCountSorted(A, B) === A.Count;
                },
                SubsetSorted$1: function (T, A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted$1(T, A, B) === A.Count;
                },
                SubsetSorted: function (A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.IntersectionCountSorted(A, B) === A.Count;
                },
                MaximalElementsSorted: function (T, A) {
                    var $t;
                    if (A == null || A.Count <= 0) {
                        return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    }

                    var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var set = $t.Current;
                            var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), chainHeads, (function ($me, set) {
                                return function (head) {
                                    return Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, head, set);
                                };
                            })(this, set), $asm.$.Algorithms.Utility.ListUtility.f1);
                            if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                                    return function (head) {
                                        return !Algorithms.Utility.ListUtility.SubsetEqualSorted$1(T, set, head);
                                    };
                                })(this, set))) {
                                chainHeads.add(set);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return chainHeads;
                },
                MaximalElementsSorted$1: function (A) {
                    var $t;
                    if (A == null || A.Count <= 0) {
                        return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                    }

                    var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var set = $t.Current;
                            var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(System.Int32), chainHeads, (function ($me, set) {
                                return function (head) {
                                    return Algorithms.Utility.ListUtility.SubsetEqualSorted(head, set);
                                };
                            })(this, set), $asm.$.Algorithms.Utility.ListUtility.f1);
                            if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                                    return function (head) {
                                        return !Algorithms.Utility.ListUtility.SubsetEqualSorted(set, head);
                                    };
                                })(this, set))) {
                                chainHeads.add(set);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return chainHeads;
                },
                MultiSetIntersection: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).MultiSetIntersection(A, B);
                },
                MultiSetIntersectionCount: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).MultiSetIntersectionCount(A, B);
                },
                MultiSetEqual: function (T, A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.MultiSetIntersectionCount(T, A, B) === A.Count;
                },
                MultiSetSubsetEqual: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.MultiSetIntersectionCount(T, A, B) === A.Count;
                },
                MultiSetSubset: function (T, A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.MultiSetIntersectionCount(T, A, B) === A.Count;
                },
                BinomialCoefficient: function (n, k) {
                    if (k.lt(System.Int64(0))) {
                        return System.Int64(1);
                    }

                    var max = System.Int64.max(k, n.sub(k));
                    var min = System.Int64.min(k, n.sub(k));

                    var result = System.Int64(1);
                    while (n.gt(max)) {
                        result = result.mul(n);
                        n = n.dec();
                    }

                    while (min.gt(System.Int64(0))) {
                        result = result.div(min);

                        min = min.dec();
                    }

                    return result;
                },
                ToString: function (T, A) {
                    var $t;
                    var sb = new System.Text.StringBuilder();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            sb.appendFormat("{0}, ", t.toString());
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return System.String.trimEnd(sb.toString(), [32, 44]);
                },
                Difference: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Difference(A, B);
                },
                Intersection: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Intersection(A, B);
                },
                IntersectionCount: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).IntersectionCount(A, B);
                },
                Union$1: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Union$1(A, B);
                },
                Union: function (T, A, b) {
                    return Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T).Union(A, b);
                },
                Equal: function (T, A, B) {
                    return A.Count === B.Count && Algorithms.Utility.ListUtility.IntersectionCount(T, A, B) === A.Count;
                },
                SubsetEqual: function (T, A, B) {
                    return Algorithms.Utility.ListUtility.IntersectionCount(T, A, B) === A.Count;
                },
                Subset: function (T, A, B) {
                    return A.Count < B.Count && Algorithms.Utility.ListUtility.IntersectionCount(T, A, B) === A.Count;
                },
                MaximalElements: function (T, A) {
                    var $t;
                    if (A == null || A.Count <= 0) {
                        return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    }

                    var chainHeads = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var set = $t.Current;
                            var removed = Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), chainHeads, (function ($me, set) {
                                return function (head) {
                                    return Algorithms.Utility.ListUtility.SubsetEqual(T, head, set);
                                };
                            })(this, set), $asm.$.Algorithms.Utility.ListUtility.f1);
                            if (removed > 0 || System.Linq.Enumerable.from(chainHeads).all((function ($me, set) {
                                    return function (head) {
                                        return !Algorithms.Utility.ListUtility.SubsetEqual(T, set, head);
                                    };
                                })(this, set))) {
                                chainHeads.add(set);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return chainHeads;
                },
                GenerateSublists: function (T, list) {
                    var sublists = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    sublists.add(new (System.Collections.Generic.List$1(T))());

                    var clone = new (System.Collections.Generic.List$1(T))(list);

                    while (clone.Count > 0) {
                        var head = clone.getItem(0);

                        var count = sublists.Count;
                        for (var i = 0; i < count; i = (i + 1) | 0) {
                            var union = new (System.Collections.Generic.List$1(T))(sublists.getItem(i));
                            union.add(head);

                            sublists.add(union);
                        }

                        clone.removeAt(0);
                    }

                    return sublists;
                },
                GenerateSublists$1: function (T, list, size) {
                    var $t;
                    var sublists = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                    var n = list.Count;
                    $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex$1(n, size), System.Collections.Generic.List$1(System.Boolean));
                    try {
                        while ($t.moveNext()) {
                            var inOut = $t.Current;
                            sublists.add(Algorithms.Utility.ListUtility.ExtractSublist(T, list, inOut));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return sublists;
                },
                EnumerateSublists: function (T, list) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function (T, list) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            n,
                            $t,
                            inOut,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            n = list.Count;
                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex(n), System.Collections.Generic.List$1(System.Boolean));
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    inOut = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = Algorithms.Utility.ListUtility.ExtractSublist(T, list, inOut);
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateSublists$1: function (T, list, size) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function (T, list, size) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            n,
                            $t,
                            inOut,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(T)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            n = list.Count;
                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex$1(n, size), System.Collections.Generic.List$1(System.Boolean));
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    inOut = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = Algorithms.Utility.ListUtility.ExtractSublist(T, list, inOut);
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                NextSublist: function (T, list, size, state) {
                    var n = list.Count;
                    var areMore = Algorithms.Utility.ListUtility.NextShortLex$1(n, size, state);

                    var sublist = Algorithms.Utility.ListUtility.ExtractSublist(T, list, state.v);

                    if (!areMore) {
                        state.v = null;
                    }

                    return sublist;
                },
                ExtractSublist: function (T, list, inOut) {
                    var sublist = new (System.Collections.Generic.List$1(T))();
                    for (var i = 0; i < inOut.Count; i = (i + 1) | 0) {
                        if (inOut.getItem(i)) {
                            sublist.add(list.getItem(i));
                        }
                    }

                    return sublist;
                },
                EnumerateShortLex$1: function (n, k) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function (n, k) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            list,
                            i,
                            i1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            k = Math.max(0, k);

                                                list = new (System.Collections.Generic.List$1(System.Boolean))(n);
                                                for (i = 0; i < k; i = (i + 1) | 0) {
                                                    list.add(true);
                                                }
                                                for (i1 = k; i1 < n; i1 = (i1 + 1) | 0) {
                                                    list.add(false);
                                                }

                                                
                                        }
                                        case 1: {
                                            $enumerator.current = list;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 3: {
                                            if ( Algorithms.Utility.ListUtility.NextSameTrueCount(list, k) ) {

                                                    $step = 1;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateShortLex: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            list,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            list = new (System.Collections.Generic.List$1(System.Boolean))(n);
                                                for (i = 0; i < n; i = (i + 1) | 0) {
                                                    list.add(false);
                                                }

                                                
                                        }
                                        case 1: {
                                            $enumerator.current = list;
                                                $step = 2;
                                                return true;
                                        }
                                        case 2: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 3: {
                                            if ( Algorithms.Utility.ListUtility.Next(list) ) {

                                                    $step = 1;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                EnumerateShortLexNonempty: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            k,
                            $t,
                            list,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Boolean)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            k = 1;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( k <= n ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumerateShortLex$1(n, k), System.Collections.Generic.List$1(System.Boolean));
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t.moveNext()) {
                                                    list = $t.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            $enumerator.current = list;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            k = (k + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 8: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                NextShortLex$1: function (n, k, state) {
                    if (state.v == null) {
                        k = Math.max(0, k);

                        state.v = new (System.Collections.Generic.List$1(System.Boolean))(n);
                        for (var i = 0; i < k; i = (i + 1) | 0) {
                            state.v.add(true);
                        }
                        for (var i1 = k; i1 < n; i1 = (i1 + 1) | 0) {
                            state.v.add(false);
                        }

                        return k > 0 && k < n;
                    }

                    return Algorithms.Utility.ListUtility.NextSameTrueCount(state.v, k);
                },
                NextShortLex: function (n, k, state) {
                    if (state.v == null) {
                        k = Math.max(0, k);

                        state.v = System.Array.init(n, 0, System.Int32);
                        for (var i = 0; i < k; i = (i + 1) | 0) {
                            state.v[System.Array.index(i, state.v)] = 1;
                        }

                        return k <= 0 || k >= n;
                    }

                    var done = !Algorithms.Utility.ListUtility.NextSameOnCount(state.v, k);

                    if (done) {
                        for (var i1 = 0; i1 < k; i1 = (i1 + 1) | 0) {
                            state.v[System.Array.index(i1, state.v)] = 1;
                        }

                        for (var i2 = k; i2 < n; i2 = (i2 + 1) | 0) {
                            state.v[System.Array.index(i2, state.v)] = 0;
                        }
                    }

                    return done;
                },
                Next: function (list) {
                    var trueCount = System.Linq.Enumerable.from(Bridge.cast(list, System.Collections.Generic.IEnumerable$1(System.Boolean))).count($asm.$.Algorithms.Utility.ListUtility.f2);
                    if (trueCount === list.Count) {
                        return false;
                    }

                    var firstHole = Algorithms.Utility.ListUtility.FindFirstHole(list);

                    if (firstHole >= list.Count) {
                        for (var i = 0; i < ((trueCount + 1) | 0); i = (i + 1) | 0) {
                            list.setItem(i, true);
                        }
                        for (var i1 = (trueCount + 1) | 0; i1 < list.Count; i1 = (i1 + 1) | 0) {
                            list.setItem(i1, false);
                        }
                    } else {
                        list.setItem(firstHole, true);

                        var initialTrues = trueCount;
                        for (var i2 = firstHole; i2 < list.Count; i2 = (i2 + 1) | 0) {
                            if (list.getItem(i2)) {
                                initialTrues = (initialTrues - 1) | 0;
                            }
                        }

                        for (var i3 = 0; i3 < initialTrues; i3 = (i3 + 1) | 0) {
                            list.setItem(i3, true);
                        }
                        for (var i4 = initialTrues; i4 < firstHole; i4 = (i4 + 1) | 0) {
                            list.setItem(i4, false);
                        }
                    }

                    return true;
                },
                NextSameTrueCount: function (list, trueCount) {
                    var firstHole = Algorithms.Utility.ListUtility.FindFirstHole(list);

                    if (firstHole >= list.Count) {
                        return false;
                    }

                    list.setItem(firstHole, true);

                    var initialTrues = trueCount;
                    for (var i = firstHole; i < list.Count; i = (i + 1) | 0) {
                        if (list.getItem(i)) {
                            initialTrues = (initialTrues - 1) | 0;
                        }
                    }

                    for (var i1 = 0; i1 < initialTrues; i1 = (i1 + 1) | 0) {
                        list.setItem(i1, true);
                    }
                    for (var i2 = initialTrues; i2 < firstHole; i2 = (i2 + 1) | 0) {
                        list.setItem(i2, false);
                    }

                    return true;
                },
                FindFirstHole: function (list) {
                    var i = 0;
                    while (i < ((list.Count - 1) | 0)) {
                        if (list.getItem(i) && !list.getItem(((i + 1) | 0))) {
                            break;
                        }

                        i = (i + 1) | 0;
                    }

                    return ((i + 1) | 0);
                },
                FindFirstHole$1: function (list) {
                    var i = 0;
                    while (i < ((list.length - 1) | 0)) {
                        if (list[System.Array.index(i, list)] === 1 && list[System.Array.index(((i + 1) | 0), list)] === 0) {
                            break;
                        }

                        i = (i + 1) | 0;
                    }

                    return ((i + 1) | 0);
                },
                NextSameOnCount: function (list, trueCount) {
                    var firstHole = Algorithms.Utility.ListUtility.FindFirstHole$1(list);

                    if (firstHole >= list.length) {
                        return false;
                    }

                    list[System.Array.index(firstHole, list)] = 1;

                    var initialOnes = trueCount;
                    for (var i = firstHole; i < list.length; i = (i + 1) | 0) {
                        initialOnes = (initialOnes - list[System.Array.index(i, list)]) | 0;
                    }

                    for (var i1 = 0; i1 < initialOnes; i1 = (i1 + 1) | 0) {
                        list[System.Array.index(i1, list)] = 1;
                    }
                    for (var i2 = initialOnes; i2 < firstHole; i2 = (i2 + 1) | 0) {
                        list[System.Array.index(i2, list)] = 0;
                    }

                    return true;
                },
                EnumeratePartitionsUnordered: function (sizes) {
                    return Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)), Algorithms.Utility.ListUtility.EnumeratePartitions$1(sizes, 0), $asm.$.Algorithms.Utility.ListUtility.f4);
                },
                EnumeratePartitions: function (sizes) {
                    return Algorithms.Utility.ListUtility.EnumeratePartitions$1(sizes, 0);
                },
                EnumeratePartitions$1: function (sizes, item) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (sizes, item) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            childless,
                            i,
                            $t,
                            partition,
                            partition1,
                            i1,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            childless = true;
                                                i = 0;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( i < sizes.length ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (sizes[System.Array.index(i, sizes)] <= 0) {
                                                    $step = 7;
                                                    continue;
                                                }

                                                childless = false;

                                                sizes[System.Array.index(i, sizes)] = (sizes[System.Array.index(i, sizes)] - 1) | 0;

                                                $t = Bridge.getEnumerator(Algorithms.Utility.ListUtility.EnumeratePartitions$1(sizes, ((item + 1) | 0)), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ($t.moveNext()) {
                                                    partition = $t.Current;
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 4: {
                                            partition.getItem(i).add(item);
                                                $enumerator.current = partition;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            $step = 3;
                                            continue;
                                        }
                                        case 6: {
                                            sizes[System.Array.index(i, sizes)] = (sizes[System.Array.index(i, sizes)] + 1) | 0;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            i = (i + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 8: {
                                            if (childless) {
                                                    $step = 9;
                                                    continue;
                                                } 
                                                $step = 11;
                                                continue;
                                        }
                                        case 9: {
                                            partition1 = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                                for (i1 = 0; i1 < sizes.length; i1 = (i1 + 1) | 0) {
                                                    partition1.add(new (System.Collections.Generic.List$1(System.Int32))());
                                                }

                                                $enumerator.current = partition1;
                                                $step = 10;
                                                return true;
                                        }
                                        case 10: {
                                            $step = 11;
                                            continue;
                                        }
                                        case 11: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.ns("Algorithms.Utility.ListUtility", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.ListUtility, {
        f1: function (x) { },
        f2: function (b) {
            return b;
        },
        f3: function (a, b) {
            var $t;
            return Algorithms.Utility.ListUtility.Equal(System.Int32, a, b) ? ($t = new Algorithms.Utility.PartialOrderResult(), $t.AtMost = true, $t.AtLeast = true, $t) : new Algorithms.Utility.PartialOrderResult();
        },
        f4: function (aa, bb) {
            return Algorithms.Utility.PartialOrder.Embeds(System.Collections.Generic.List$1(System.Int32), aa, bb, $asm.$.Algorithms.Utility.ListUtility.f3);
        }
    });

    Bridge.define("Algorithms.Utility.ListUtility.ListUtilityGeneric$1", function (T) { return {
        statics: {
            fields: {
                _set: null,
                _multiSet: null
            },
            ctors: {
                init: function () {
                    this._set = new (System.Collections.Generic.HashSet$1(T)).ctor();
                    this._multiSet = new (System.Collections.Generic.Dictionary$2(T,System.Int32))();
                }
            },
            methods: {
                Intersection: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var intersection = new (System.Collections.Generic.List$1(T))(inB.Count);
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (inB.contains(t1)) {
                                intersection.add(t1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return intersection;
                },
                IntersectionCount: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return 0;
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var count = 0;
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (inB.contains(t1)) {
                                count = (count + 1) | 0;
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return count;
                },
                Difference: function (A, B) {
                    var $t, $t1;
                    if (A == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }
                    if (B == null) {
                        B = new (System.Collections.Generic.List$1(T))();
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var difference = new (System.Collections.Generic.List$1(T))(inB.Count);
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (!inB.contains(t1)) {
                                difference.add(t1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return difference;
                },
                Union$1: function (A, B) {
                    var $t, $t1;
                    if (A == null && B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }
                    if (A == null) {
                        return B;
                    }
                    if (B == null) {
                        return A;
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._set;
                    inB.clear();

                    $t = Bridge.getEnumerator(B);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            inB.add(t);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var union = new (System.Collections.Generic.List$1(T))(B);
                    $t1 = Bridge.getEnumerator(A);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            if (!inB.contains(t1)) {
                                union.add(t1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return union;
                },
                Union: function (A, b) {
                    var union = new (System.Collections.Generic.List$1(T))(A);
                    if (!union.contains(b)) {
                        union.add(b);
                    }

                    return union;
                },
                MultiSetIntersection: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return new (System.Collections.Generic.List$1(T))();
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._multiSet;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            var count = { };
                            inB.tryGetValue(t, count);

                            inB.set(t, (count.v + 1) | 0);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var intersection = new (System.Collections.Generic.List$1(T))(inB.count);
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            var count1 = { };
                            inB.tryGetValue(t1, count1);

                            if (count1.v > 0) {
                                intersection.add(t1);
                                inB.set(t1, (count1.v - 1) | 0);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return intersection;
                },
                MultiSetIntersectionCount: function (A, B) {
                    var $t, $t1;
                    if (A == null || B == null) {
                        return 0;
                    }

                    var inB = Algorithms.Utility.ListUtility.ListUtilityGeneric$1(T)._multiSet;
                    inB.clear();

                    $t = Bridge.getEnumerator(B, T);
                    try {
                        while ($t.moveNext()) {
                            var t = $t.Current;
                            var count = { };
                            inB.tryGetValue(t, count);

                            inB.set(t, (count.v + 1) | 0);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    var total = 0;
                    $t1 = Bridge.getEnumerator(A, T);
                    try {
                        while ($t1.moveNext()) {
                            var t1 = $t1.Current;
                            var count1 = { };
                            inB.tryGetValue(t1, count1);

                            if (count1.v > 0) {
                                total = (total + 1) | 0;
                                inB.set(t1, (count1.v - 1) | 0);
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return total;
                }
            }
        }
    }; });

    Bridge.define("Algorithms.Utility.PartialOrder", {
        statics: {
            methods: {
                Embeds: function (T, A, B, order) {
                    var $t;
                    if (A.Count > B.Count) {
                        return false;
                    }

                    var n = (A.Count + B.Count) | 0;
                    var adjacencies = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))(A.Count);

                    $t = Bridge.getEnumerator(A);
                    try {
                        while ($t.moveNext()) {
                            var a = $t.Current;
                            var neighbors = new (System.Collections.Generic.List$1(System.Int32))();
                            for (var i = 0; i < B.Count; i = (i + 1) | 0) {
                                var result = order(a, B.getItem(i));
                                if (result.AtMost) {
                                    neighbors.add(i);
                                }
                            }

                            adjacencies.add(neighbors);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return Algorithms.Utility.Flows.BipartiteMaximumMatching(n, adjacencies) === A.Count;
                }
            }
        }
    });

    Bridge.define("Algorithms.Utility.PartialOrderResult", {
        $kind: "struct",
        statics: {
            methods: {
                getDefaultValue: function () { return new Algorithms.Utility.PartialOrderResult(); }
            }
        },
        fields: {
            AtMost: false,
            AtLeast: false
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            }
        },
        methods: {
            getHashCode: function () {
                var h = Bridge.addHash([7175930089, this.AtMost, this.AtLeast]);
                return h;
            },
            equals: function (o) {
                if (!Bridge.is(o, Algorithms.Utility.PartialOrderResult)) {
                    return false;
                }
                return Bridge.equals(this.AtMost, o.AtMost) && Bridge.equals(this.AtLeast, o.AtLeast);
            },
            $clone: function (to) {
                var s = to || new Algorithms.Utility.PartialOrderResult();
                s.AtMost = this.AtMost;
                s.AtLeast = this.AtLeast;
                return s;
            }
        }
    });

    Bridge.define("Algorithms.Utility.Permutation", {
        statics: {
            methods: {
                EnumerateAll: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(Algorithms.Utility.Permutation))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            count,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.Utility.Permutation))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            count = Algorithms.Counting.Factorial(n);

                                                i = System.Int64(0);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( i.lt(count) ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 5;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = new Algorithms.Utility.Permutation.ctor(new Algorithms.Utility.Factoradic.$ctor1(i, n));
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {
                                            i = i.inc();
                                            $step = 1;
                                            continue;
                                        }
                                        case 5: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                op_Multiply: function (p1, p2) {
                    if (Algorithms.Utility.Permutation.op_Equality(p1, null) || Algorithms.Utility.Permutation.op_Equality(p2, null)) {
                        return null;
                    }

                    if (p1.N !== p2.N) {
                        throw new System.Exception("You tried to multiply permutations of different sets.");
                    }

                    var sequence = new (System.Collections.Generic.List$1(System.Int32))(p2.N);

                    for (var i = 0; i < p2.N; i = (i + 1) | 0) {
                        sequence.add(p1.getItem(p2.getItem(i)));
                    }

                    return new Algorithms.Utility.Permutation.$ctor1(sequence);
                },
                op_Equality: function (p1, p2) {
                    if (p1 == null && p2 == null) {
                        return true;
                    }
                    if (p1 == null || p2 == null) {
                        return false;
                    }

                    return p1.equals(p2);
                },
                op_Inequality: function (p1, p2) {
                    return !(Algorithms.Utility.Permutation.op_Equality(p1, p2));
                }
            }
        },
        props: {
            Sequence: null,
            N: 0
        },
        ctors: {
            ctor: function (f) {
                this.$initialize();
                var sequence = new (System.Collections.Generic.List$1(System.Int32))(f.Digits.Count);
                for (var i = 0; i < f.Digits.Count; i = (i + 1) | 0) {
                    sequence.add(i);
                }

                for (var i1 = 0; i1 < f.Digits.Count; i1 = (i1 + 1) | 0) {
                    var j = (f.Digits.getItem(((((f.Digits.Count - 1) | 0) - i1) | 0)) + i1) | 0;

                    sequence.insert(i1, sequence.getItem(j));
                    sequence.removeAt(((j + 1) | 0));
                }

                this.Sequence = sequence;
                this.N = this.Sequence.Count;
            },
            $ctor1: function (sequence) {
                this.$initialize();                var $t;

                this.Sequence = new (System.Collections.Generic.List$1(System.Int32))(sequence);
                this.N = this.Sequence.Count;

                var hash = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Boolean))();
                $t = Bridge.getEnumerator(sequence);
                try {
                    while ($t.moveNext()) {
                        var i = $t.Current;
                        if (hash.containsKey(i)) {
                            throw new System.Exception("The supplied sequence has duplicates.");
                        }

                        if (i < 0 || i > ((this.N - 1) | 0)) {
                            throw new System.Exception("The supplied sequence has elements that are out of range.");
                        }

                        hash.set(i, true);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
    },
    methods: {
        getItem: function (i) {
            return this.Sequence.getItem(i);
        },
        Apply: function (T, list) {
            if (list == null || list.Count !== this.N) {
                throw new System.Exception("The permutation cannot be applied to the given list.");
            }

            var permutedList = new (System.Collections.Generic.List$1(T))(this.N);

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                permutedList.add(list.getItem(this.getItem(i)));
            }

            return permutedList;
        },
        Inverse: function () {
            var sequence = System.Array.init(this.N, 0, System.Int32);

            for (var i = 0; i < this.N; i = (i + 1) | 0) {
                sequence[System.Array.index(this.getItem(i), sequence)] = i;
            }

            return new Algorithms.Utility.Permutation.$ctor1(new (System.Collections.Generic.List$1(System.Int32))(sequence));
        },
        equals: function (obj) {
            if (obj == null) {
                return false;
            }

            return Bridge.referenceEquals(this.toString(), obj.toString());
        },
        toString: function () {
            return System.String.concat("(", Bridge.toArray(System.Linq.Enumerable.from(this.Sequence).select($asm.$.Algorithms.Utility.Permutation.f1)).join(" "), ")");
        },
        getHashCode: function () {
            return Bridge.getHashCode(this.toString());
        }
    }
    });

    Bridge.ns("Algorithms.Utility.Permutation", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.Permutation, {
        f1: function (i) {
            return ((i + 1) | 0);
        }
    });

    Bridge.define("Algorithms.Utility.SafeCollection$1", function (T) { return {
        inherits: [System.Collections.Generic.ICollection$1(T)],
        fields: {
            _count: 0,
            _first: null,
            _last: null
        },
        props: {
            Count: {
                get: function () {
                    return this._count;
                }
            },
            IsReadOnly: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "add", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$add",
            "clear", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$clear",
            "contains", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$contains",
            "copyTo", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$copyTo",
            "Count", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$Count",
            "IsReadOnly", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$IsReadOnly",
            "remove", "System$Collections$Generic$ICollection$1$" + Bridge.getTypeAlias(T) + "$remove",
            "getEnumerator", ["System$Collections$Generic$IEnumerable$1$" + Bridge.getTypeAlias(T) + "$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]
        ],
        ctors: {
            ctor: function () {
                this.$initialize();
                this._first = new (Algorithms.Utility.SafeCollection$1.Node(T))();
                this._last = this._first;
            }
        },
        methods: {
            add: function (item) {
                var $t;
                this._last.Next = ($t = new (Algorithms.Utility.SafeCollection$1.Node(T))(), $t.Item = item, $t);
                this._last = this._last.Next;
                this._count = (this._count + 1) | 0;
            },
            clear: function () {
                this._first.Next = null;
                this._last = this._first;
                this._count = 0;
            },
            contains: function (item) {
                return this.FindPreviousNode(item) != null;
            },
            copyTo: function (array, arrayIndex) {
                var node = this._first;
                while (true) {
                    var next = node.Next;
                    if (next == null) {
                        break;
                    }

                    array[System.Array.index(Bridge.identity(arrayIndex, (arrayIndex = (arrayIndex + 1) | 0)), array)] = next.Item;
                    node = next;
                }
            },
            remove: function (item) {
                var node = this.FindPreviousNode(item);
                if (node == null) {
                    return false;
                }

                var next = node.Next;
                if (next == null) {
                    return false;
                }

                node.Next = next.Next;
                this._count = (this._count - 1) | 0;
                return true;
            },
            getEnumerator: function () {
                var $step = 0,
                    $jumpFromFinally,
                    $returnValue,
                    node,
                    next,
                    $async_e;

                var $enumerator = new (Bridge.GeneratorEnumerator$1(T))(Bridge.fn.bind(this, function () {
                    try {
                        for (;;) {
                            switch ($step) {
                                case 0: {
                                    node = this._first;
                                        
                                    $step = 1;
                                    continue;
                                }
                                case 1: {
                                    if ( true ) {
                                            $step = 2;
                                            continue;
                                        } 
                                        $step = 4;
                                        continue;
                                }
                                case 2: {
                                    next = node.Next;
                                        if (next == null) {
                                            $step = 4;
                                            continue;
                                        }

                                        $enumerator.current = next.Item;
                                        $step = 3;
                                        return true;
                                }
                                case 3: {
                                    node = next;

                                        $step = 1;
                                        continue;
                                }
                                case 4: {

                                }
                                default: {
                                    return false;
                                }
                            }
                        }
                    } catch($async_e1) {
                        $async_e = System.Exception.create($async_e1);
                        throw $async_e;
                    }
                }));
                return $enumerator;
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            FindPreviousNode: function (item) {
                var node = this._first;
                while (true) {
                    var next = node.Next;
                    if (next == null) {
                        break;
                    }

                    if (System.Collections.Generic.EqualityComparer$1(T).def.equals2(next.Item, item)) {
                        return node;
                    }

                    node = next;
                }

                return null;
            }
        }
    }; });

    Bridge.define("Algorithms.Utility.SafeCollection$1.Node", function (T) { return {
        fields: {
            Item: Bridge.getDefaultValue(T),
            Next: null
        }
    }; });

    Bridge.define("Algorithms.Utility.SequenceGeneralizer$1", function (T) { return {
        fields: {
            _length: 0,
            _alphabet: null,
            _matchers: null,
            _generalizers: null,
            _vectorComparer: null
        },
        ctors: {
            init: function () {
                this._matchers = new (System.Collections.Generic.List$1(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T)))();
                this._vectorComparer = new (Algorithms.Utility.SequenceGeneralizer$1.VectorComparer(T))();
            },
            ctor: function (length, alphabet) {
                this.$initialize();                var $t;

                this._length = length;
                this._alphabet = alphabet;

                $t = Bridge.getEnumerator(alphabet);
                try {
                    while ($t.moveNext()) {
                        var t = $t.Current;
                        this.AddMatcher(t.toString(), (function ($me, t) {
                            return function (tt) {
                                return Bridge.equals(t, tt);
                            };
                        })(this, t));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.AddMatcher("*", $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f1);
        }
    },
    methods: {
        AddMatcher: function (name, match) {
            var $t;
            this._matchers.add(($t = new (Algorithms.Utility.SequenceGeneralizer$1.Matcher(T))(), $t.Name = name, $t.Match = match, $t));
        },
        Generalize: function (examples, nonExamples, mostGeneral) {
            var $t, $t1;
            if (mostGeneral === void 0) { mostGeneral = false; }
            this.BuildMatcherLattice();

            var possibles = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            $t = Bridge.getEnumerator(examples);
            try {
                while ($t.moveNext()) {
                    var example = $t.Current;
                    var asMatcherIndices = System.Linq.Enumerable.from(example).select(Bridge.fn.bind(this, function (t) {
                            return Algorithms.GenericExtensions.FirstIndex(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T), this._matchers, function (m) {
                                return Bridge.referenceEquals(m.Name, t.toString());
                            });
                        })).toList(System.Int32);
                    possibles.addRange(System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Int32, System.Linq.Enumerable.from(asMatcherIndices).select(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f2)))).select($asm.$.Algorithms.Utility.SequenceGeneralizer$1.f3));
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            possibles = System.Linq.Enumerable.from(possibles).distinct(this._vectorComparer).toList(System.Collections.Generic.List$1(System.Int32));

            $t1 = Bridge.getEnumerator(nonExamples);
            try {
                while ($t1.moveNext()) {
                    var nonExample = $t1.Current;
                    var asMatcherIndices1 = System.Linq.Enumerable.from(nonExample).select(Bridge.fn.bind(this, function (t) {
                            return Algorithms.GenericExtensions.FirstIndex(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T), this._matchers, function (m) {
                                return Bridge.referenceEquals(m.Name, t.toString());
                            });
                        })).toList(System.Int32);
                    possibles = System.Linq.Enumerable.from(possibles).except(System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Int32, System.Linq.Enumerable.from(asMatcherIndices1).select(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f2)))).select($asm.$.Algorithms.Utility.SequenceGeneralizer$1.f3), this._vectorComparer).toList(System.Collections.Generic.List$1(System.Int32));
                }
            } finally {
                if (Bridge.is($t1, System.IDisposable)) {
                    $t1.System$IDisposable$dispose();
                }
            }
            var generalizations = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
            var remaining = System.Linq.Enumerable.from(examples).toList(System.Collections.Generic.List$1(T));
            while (remaining.Count > 0) {
                var ordered = { v : System.Linq.Enumerable.from(possibles).select(Bridge.fn.bind(this, function (pp) {
                        return new $asm.$AnonymousType$3(pp, System.Linq.Enumerable.from(remaining).count(Bridge.fn.bind(this, function (r) {
                                return this.IsMatch(r, pp);
                            })));
                    })).orderByDescending($asm.$.Algorithms.Utility.SequenceGeneralizer$1.f4).toList(System.Object) };
                var maxers = System.Linq.Enumerable.from(ordered.v).takeWhile((function ($me, ordered) {
                        return function (xx) {
                            return xx.Count === ordered.v.getItem(0).Count;
                        };
                    })(this, ordered)).orderByDescending(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f6));

                var best = { v : mostGeneral ? maxers.first().Vector : maxers.last().Vector };

                generalizations.add(best.v);
                Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), remaining, (function ($me, best) {
                    return Bridge.fn.bind($me, function (r) {
                        return this.IsMatch(r, best.v);
                    });
                })(this, best), $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f7);
            }

            return System.Linq.Enumerable.from(generalizations).select(Bridge.fn.bind(this, function (l) {
                    return System.Linq.Enumerable.from(l).select(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f8)).toList(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T));
                })).toList(System.Collections.Generic.List$1(Algorithms.Utility.SequenceGeneralizer$1.Matcher(T)));
        },
        BuildMatcherLattice: function () {
            this._generalizers = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(System.Int32)))();
            for (var i = 0; i < this._matchers.Count; i = (i + 1) | 0) {
                this._generalizers.set(i, new (System.Collections.Generic.List$1(System.Int32))());
                var matches = System.Linq.Enumerable.from(this._alphabet).where(Bridge.fn.bind(this, function (a) {
                        return this._matchers.getItem(i).Match(a);
                    })).toList(T);

                for (var j = { v : 0 }; j.v < this._matchers.Count; j.v = (j.v + 1) | 0) {
                    if (Algorithms.Utility.ListUtility.SubsetEqual(T, matches, System.Linq.Enumerable.from(this._alphabet).where((function ($me, j) {
                            return Bridge.fn.bind($me, function (a) {
                                return this._matchers.getItem(j.v).Match(a);
                            });
                        })(this, j)).toList(T))) {
                        this._generalizers.get(i).add(j.v);
                    }
                }
            }
        },
        IsMatch: function (vector, m) {
            for (var i = 0; i < vector.Count; i = (i + 1) | 0) {
                if (!this._matchers.getItem(m.getItem(i)).Match(vector.getItem(i))) {
                    return false;
                }
            }

            return true;
        }
    }
    }; });

    Bridge.define("$AnonymousType$3", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (vector, count) {
                this.Vector = vector;
                this.Count = count;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$3)) {
                    return false;
                }
                return Bridge.equals(this.Vector, o.Vector) && Bridge.equals(this.Count, o.Count);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196188, this.Vector, this.Count]);
                return h;
            },
            toJSON: function () {
                return {
                    Vector : this.Vector,
                    Count : this.Count
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"Count","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_Count","t":8,"rt":System.Int32,"fg":"Count"},"fn":"Count"},{"a":2,"n":"Vector","t":16,"rt":System.Collections.Generic.List$1(System.Int32),"g":{"a":2,"n":"get_Vector","t":8,"rt":System.Collections.Generic.List$1(System.Int32),"fg":"Vector"},"fn":"Vector"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.Utility.SequenceGeneralizer$1", $asm.$);

    Bridge.apply($asm.$.Algorithms.Utility.SequenceGeneralizer$1, {
        f1: function (tt) {
            return true;
        },
        f2: function (i) {
            return this._generalizers.get(i);
        },
        f3: function (v) {
            return System.Linq.Enumerable.from(v).toList(System.Int32);
        },
        f4: function (xx) {
            return xx.Count;
        },
        f5: function (total, x) {
            if (Bridge.referenceEquals(this._matchers.getItem(x).Name, "*")) {
                return Bridge.Int.mul(total, this._alphabet.Count);
            }
            if (System.String.startsWith(this._matchers.getItem(x).Name, "!")) {
                return Bridge.Int.mul(total, (((this._alphabet.Count - 1) | 0)));
            }

            return total;
        },
        f6: function (xx) {
            return System.Linq.Enumerable.from(xx.Vector).aggregate(Bridge.fn.bind(this, $asm.$.Algorithms.Utility.SequenceGeneralizer$1.f5));
        },
        f7: function (x) { },
        f8: function (i) {
            return this._matchers.getItem(i);
        }
    });

    Bridge.define("Algorithms.Utility.SequenceGeneralizer$1.Matcher", function (T) { return {
        fields: {
            Name: null,
            Match: null
        }
    }; });

    Bridge.define("Algorithms.Utility.SequenceGeneralizer$1.VectorComparer", function (T) { return {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(System.Int32))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$System$Int32$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return System.Linq.Enumerable.from(x).sequenceEqual(y);
            },
            getHashCode2: function (l) {
                var $t;
                var hash = 17;
                $t = Bridge.getEnumerator(l);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        hash = (((hash * 23) | 0) + x) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return hash;
            }
        }
    }; });

    Bridge.define("Algorithms.WordGame.AccessibilityChecker", {
        fields: {
            _alphabet: null
        },
        ctors: {
            ctor: function (alphabet) {
                this.$initialize();
                this._alphabet = System.Linq.Enumerable.from(alphabet).toList(System.Char);
            }
        },
        methods: {
            IsAccessible: function (w, S) {
                var $t, $t1, $t2;
                $t = Bridge.getEnumerator(this._alphabet);
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        var goodChoiceAlwaysExists = true;

                        var swappers = System.Linq.Enumerable.from(this._alphabet).except(System.Array.init([c], System.Char)).toList(System.Char);
                        $t1 = Bridge.getEnumerator(this.EnumeratePartitions(w, swappers), System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)));
                        try {
                            while ($t1.moveNext()) {
                                var partition = $t1.Current;
                                var goodChoiceExists = false;
                                $t2 = Bridge.getEnumerator(Algorithms.Utility.ListUtility.GenerateSublists(System.Int32, System.Linq.Enumerable.range(0, partition.Count).toList(System.Int32)));
                                try {
                                    while ($t2.moveNext()) {
                                        var choice = $t2.Current;
                                        if (choice.Count <= 0) {
                                            continue;
                                        }

                                        var ww = this.MakeMove(w, partition, choice, swappers);
                                        if (S.contains(ww)) {
                                            goodChoiceExists = true;
                                            break;
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                if (!goodChoiceExists) {
                                    goodChoiceAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (goodChoiceAlwaysExists) {
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            EnumeratePartitions: function (w, swappers) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function (w, swappers) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        chars,
                        indices,
                        indexPartitions,
                        $t,
                        indexPartition,
                        partition,
                        $t1,
                        indexPart,
                        part,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32))))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        chars = System.String.toCharArray(w, 0, w.length);
                                            indices = System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(System.Char, chars, function (c) {
                                                    return swappers.contains(c);
                                                })).toList(System.Int32);

                                            indexPartitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(indices.Count);
                                            $t = Bridge.getEnumerator(indexPartitions);
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                indexPartition = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        partition = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))(indexPartition.Count);
                                            $t1 = Bridge.getEnumerator(indexPartition);
                                            try {
                                                while ($t1.moveNext()) {
                                                    indexPart = $t1.Current;
                                                    part = System.Linq.Enumerable.from(indexPart).select(function (i) {
                                                            return indices.getItem(i);
                                                        }).toList(System.Int32);
                                                    partition.add(part);
                                                }
                                            } finally {
                                                if (Bridge.is($t1, System.IDisposable)) {
                                                    $t1.System$IDisposable$dispose();
                                                }
                                            }
                                            $enumerator.current = partition;
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            MakeMove: function (w, partition, choice, swappers) {
                var $t;
                var chars = System.String.toCharArray(w, 0, w.length);
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(choice).selectMany(function (i) {
                        return partition.getItem(i);
                    }));
                try {
                    while ($t.moveNext()) {
                        var j = $t.Current;
                        chars[System.Array.index(j, chars)] = swappers.getItem(((1 - swappers.indexOf(chars[System.Array.index(j, chars)])) | 0));
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return String.fromCharCode.apply(null, chars);
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Boxification", {
        statics: {
            methods: {
                Split: function (T, allPoints) {
                    var chunks = new (System.Collections.Generic.List$1(System.Object))();

                    var points = System.Linq.Enumerable.from(allPoints).toList(System.Collections.Generic.List$1(T));
                    var n = allPoints.getItem(0).Count;

                    while (points.Count > 0) {
                        var bestT = 1;
                        var bestSplit = { v : 1 };

                        for (var split = { v : 1 }; split.v < ((n - 1) | 0); split.v = (split.v + 1) | 0) {
                            var left = { v : System.Linq.Enumerable.from(points).select((function ($me, split) {
                                    return function (p) {
                                        return System.Linq.Enumerable.from(p).take(split.v).toList(T);
                                    };
                                })(this, split)).toList(System.Collections.Generic.List$1(T)) };
                            var right = { v : System.Linq.Enumerable.from(points).select((function ($me, split) {
                                    return function (p) {
                                        return System.Linq.Enumerable.from(p).skip(split.v).toList(T);
                                    };
                                })(this, split)).toList(System.Collections.Generic.List$1(T)) };

                            var t = (Algorithms.WordGame.Boxification.Binary(1, ((points.Count - 1) | 0), (function ($me, left, right) {
                                return function (i) {
                                    var lefts = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(left.v).take(i), function (l1, l2) {
                                            return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                        })).toList(System.Collections.Generic.List$1(T));
                                    var rights = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(right.v).take(i), function (l1, l2) {
                                            return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                        })).toList(System.Collections.Generic.List$1(T));

                                    var span = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Collections.Generic.List$1(T), lefts, rights)).select(function (tup) {
                                            return System.Linq.Enumerable.from(tup.item1).concat(tup.item2).toList(T);
                                        }).toList(System.Collections.Generic.List$1(T));
                                    var allExist = System.Linq.Enumerable.from(span).all(function (p) {
                                            return System.Linq.Enumerable.from(points).any(function (pp) {
                                                    return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                                });
                                        });

                                    return allExist ? 1 : -1;
                                };
                            })(this, left, right)) - 1) | 0;

                            if (t >= bestT) {
                                if (t > bestT || Math.abs(((((Bridge.Int.div(n, 2)) | 0) - split.v) | 0)) < Math.abs(((((Bridge.Int.div(n, 2)) | 0) - bestSplit.v) | 0))) {
                                    bestT = t;
                                    bestSplit.v = split.v;
                                }
                            }
                        }

                        var l = System.Linq.Enumerable.from(points).select((function ($me, bestSplit) {
                                return function (p) {
                                    return System.Linq.Enumerable.from(p).take(bestSplit.v).toList(T);
                                };
                            })(this, bestSplit)).toList(System.Collections.Generic.List$1(T));
                        var r = System.Linq.Enumerable.from(points).select((function ($me, bestSplit) {
                                return function (p) {
                                    return System.Linq.Enumerable.from(p).skip(bestSplit.v).toList(T);
                                };
                            })(this, bestSplit)).toList(System.Collections.Generic.List$1(T));
                        var ls = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(l).take(bestT), function (l1, l2) {
                                return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                            })).toList(System.Collections.Generic.List$1(T));
                        var rs = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), System.Linq.Enumerable.from(r).take(bestT), function (l1, l2) {
                                return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                            })).toList(System.Collections.Generic.List$1(T));
                        var s = { v : System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Collections.Generic.List$1(T), ls, rs)).select(function (tup) {
                                return System.Linq.Enumerable.from(tup.item1).concat(tup.item2).toList(T);
                            }).toList(System.Collections.Generic.List$1(T)) };

                        chunks.add({ item1: ls, item2: rs });
                        Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), points, (function ($me, s) {
                            return function (p) {
                                return System.Linq.Enumerable.from(s.v).any(function (pp) {
                                        return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                    });
                            };
                        })(this, s), $asm.$.Algorithms.WordGame.Boxification.f1);
                    }

                    return chunks;
                },
                SplitMultiway: function (T, allPoints) {
                    var $t;
                    var chunks = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))))();

                    var points = System.Linq.Enumerable.from(allPoints).toList(System.Collections.Generic.List$1(T));
                    var n = allPoints.getItem(0).Count;

                    while (points.Count > 0) {
                        var bestT = 1;
                        var bestSplit = { v : new (System.Collections.Generic.List$1(System.Int32))() };

                        $t = Bridge.getEnumerator(System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.EnumerateSublists(System.Int32, System.Linq.Enumerable.range(0, n).toList(System.Int32))).select($asm.$.Algorithms.WordGame.Boxification.f3));
                        try {
                            while ($t.moveNext()) {
                                var split = $t.Current;
                                if (Algorithms.WordGame.Boxification.ExtractRanges(T, split, points.getItem(0)).Count <= 1) {
                                    continue;
                                }

                                var t = (Algorithms.WordGame.Boxification.Binary(1, ((points.Count - 1) | 0), function (i) {
                                    var ranges = System.Linq.Enumerable.from(points).take(i).select(function (p) {
                                        return Algorithms.WordGame.Boxification.ExtractRanges(T, split, p);
                                    }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                                    var rangeValues = System.Linq.Enumerable.from(ranges).aggregate(System.Linq.Enumerable.range(0, ranges.getItem(0).Count).select(function (__) {
                                            return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                                        }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T))), function (union, next) {
                                            return System.Linq.Enumerable.from(union).zip(next, function (A, B) {
                                                    return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), Algorithms.Utility.LinqExtensions.Concat(System.Collections.Generic.List$1(T), A, B), function (l1, l2) {
                                                            return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                                        })).toList(System.Collections.Generic.List$1(T));
                                                }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                                        });

                                    var cp = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Collections.Generic.List$1(T), rangeValues)).select(function (ll) {
                                            return System.Linq.Enumerable.from(ll).toList(System.Collections.Generic.List$1(T));
                                        }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                                    var span = System.Linq.Enumerable.from(cp).select(function (ll) {
                                            return System.Linq.Enumerable.from(ll).selectMany($asm.$.Algorithms.WordGame.Boxification.f4).toList(T);
                                        }).toList(System.Collections.Generic.List$1(T));
                                    var allExist = System.Linq.Enumerable.from(span).all(function (p) {
                                            return System.Linq.Enumerable.from(points).any(function (pp) {
                                                    return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                                });
                                        });

                                    return allExist ? 1 : -1;
                                }) - 1) | 0;

                                if (t > bestT) {
                                    bestT = t;
                                    bestSplit.v = split;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        var rr = System.Linq.Enumerable.from(points).take(bestT).select((function ($me, bestSplit) {
                            return function (p) {
                                return Algorithms.WordGame.Boxification.ExtractRanges(T, bestSplit.v, p);
                            };
                        })(this, bestSplit)).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                        var rrv = System.Linq.Enumerable.from(rr).aggregate(System.Linq.Enumerable.range(0, rr.getItem(0).Count).select(function (__) {
                                return new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();
                            }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T))), function (union, next) {
                                return System.Linq.Enumerable.from(union).zip(next, function (A, B) {
                                        return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.Distinct(System.Collections.Generic.List$1(T), Algorithms.Utility.LinqExtensions.Concat(System.Collections.Generic.List$1(T), A, B), function (l1, l2) {
                                                return System.Linq.Enumerable.from(l1).sequenceEqual(l2);
                                            })).toList(System.Collections.Generic.List$1(T));
                                    }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                            });

                        var s = { v : System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Collections.Generic.List$1(T), rrv)).select(function (ll) {
                                return System.Linq.Enumerable.from(ll).selectMany($asm.$.Algorithms.WordGame.Boxification.f4).toList(T);
                            }).toList(System.Collections.Generic.List$1(T)) };

                        chunks.add(rrv);
                        Algorithms.GenericExtensions.RemoveAll(System.Collections.Generic.List$1(T), points, (function ($me, s) {
                            return function (p) {
                                return System.Linq.Enumerable.from(s.v).any(function (pp) {
                                        return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                    });
                            };
                        })(this, s), $asm.$.Algorithms.WordGame.Boxification.f1);
                    }

                    return chunks;
                },
                ExtractRanges: function (T, stops, l) {
                    var $t;
                    var ranges = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)))();

                    var left = 0;
                    $t = Bridge.getEnumerator(stops);
                    try {
                        while ($t.moveNext()) {
                            var stop = $t.Current;
                            ranges.add(l.getRange(left, ((((stop - left) | 0) + 1) | 0)));
                            left = (stop + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (left < l.Count) {
                        ranges.add(l.getRange(left, ((l.Count - left) | 0)));
                    }

                    return ranges;
                },
                Boxify: function (T, points) {
                    var boxes = System.Linq.Enumerable.from(points).select(function (p) {
                            return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(T), p);
                        }).toList(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)));
                    while (true) {
                        var boxContainers = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$2(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T)), boxes, boxes)).where(function (pair) {
                                return !System.Linq.Enumerable.from(pair.item1).sequenceEqual(pair.item2);
                            }).select(function (pair) {
                            return new $asm.$AnonymousType$4(pair, Algorithms.WordGame.Boxification.BoxContainer(T, System.Linq.Enumerable.from(pair.item1).concat(pair.item2).toList(System.Collections.Generic.List$1(T))));
                        });

                        var grown = boxContainers.firstOrDefault(function (bc) {
                                return Algorithms.WordGame.Boxification.ContainsBoxContainer(T, points, bc.BoxedUnion);
                            }, null);
                        if (grown == null) {
                            break;
                        }

                        var count = boxes.Count;
                        boxes.remove(grown.Pair.item1);
                        boxes.remove(grown.Pair.item2);
                        boxes.add(grown.BoxedUnion);

                        if (boxes.Count === count) {
                            break;
                        }
                    }

                    return boxes;
                },
                PrefixBoxify: function (T, points) {
                    var allPoints = System.Linq.Enumerable.from(points).toList(System.Collections.Generic.List$1(T));
                    var boxes = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Collections.Generic.List$1(T))))();

                    while (true) {
                        var t = Algorithms.WordGame.Boxification.Binary(1, ((points.Count - 1) | 0), function (i) {
                            return Algorithms.WordGame.Boxification.ContainsBox(T, allPoints, System.Linq.Enumerable.from(points).take(i).toList(System.Collections.Generic.List$1(T))) ? 1 : -1;
                        });

                        boxes.add(Algorithms.WordGame.Boxification.BoxContainer(T, System.Linq.Enumerable.from(points).take(t).toList(System.Collections.Generic.List$1(T))));
                        points = System.Linq.Enumerable.from(points).skip(t).toList(System.Collections.Generic.List$1(T));
                        if (points.Count <= 0) {
                            break;
                        }
                    }

                    return boxes;
                },
                ContainsBox: function (T, allPoints, points) {
                    var box = Algorithms.WordGame.Boxification.BoxContainer(T, points);
                    return Algorithms.WordGame.Boxification.ContainsBoxContainer(T, allPoints, box);
                },
                ContainsBoxContainer: function (T, allPoints, boxContainer) {
                    return System.Linq.Enumerable.from(boxContainer).all(function (p) {
                            return System.Linq.Enumerable.from(allPoints).any(function (pp) {
                                    return System.Linq.Enumerable.from(pp).sequenceEqual(p);
                                });
                        });
                },
                BoxContainer: function (T, points) {
                    return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(T, System.Linq.Enumerable.range(0, points.getItem(0).Count).select(function (i) {
                            return System.Linq.Enumerable.from(points).select(function (p) {
                                    return p.getItem(i);
                                }).distinct().toList(T);
                        }))).select(function (e) {
                            return System.Linq.Enumerable.from(e).toList(T);
                        }).toList(System.Collections.Generic.List$1(T));
                },
                IsBox: function (T, points) {
                    return points.Count === Algorithms.WordGame.Boxification.BoxContainer(T, points).Count;
                },
                ToBoxString: function (T, points) {
                    return Bridge.toArray(System.Linq.Enumerable.range(0, points.getItem(0).Count).select(function (i) {
                            return System.String.concat("{", Bridge.toArray(System.Linq.Enumerable.from(points).select(function (p) {
                                        return p.getItem(i);
                                    }).distinct()).join(","), "}");
                        })).join(" * ");
                },
                ToMultiChunkString: function (T, multiChunk) {
                    return Bridge.toArray(System.Linq.Enumerable.from(multiChunk).select(function (chunk) {
                                return Algorithms.WordGame.Boxification.ToListOfListsString(T, chunk);
                            })).join(" * ");
                },
                ToChunkString: function (T, chunk) {
                    return System.String.concat(Algorithms.WordGame.Boxification.ToListOfListsString(T, chunk.item1), " * ", Algorithms.WordGame.Boxification.ToListOfListsString(T, chunk.item2));
                },
                ToListOfListsString: function (T, l) {
                    return System.String.concat("{", Bridge.toArray(System.Linq.Enumerable.from(l).select(function (sl) {
                                return System.String.concat("{", Bridge.toArray(sl).join(","), "}");
                            })).join(","), "}");
                },
                Binary: function (first, last, targetDirection) {
                    var left = (first - 1) | 0;
                    var right = (last + 1) | 0;

                    while (((right - left) | 0) >= 2) {
                        var middle = (left + ((Bridge.Int.div((((right - left) | 0)), 2)) | 0)) | 0;
                        var direction = targetDirection(middle);

                        if (direction === 0) {
                            return middle;
                        } else {
                            if (direction < 0) {
                                right = middle;
                            } else {
                                left = middle;
                            }
                        }
                    }

                    if (left < first) {
                        return ((first - 1) | 0);
                    }
                    if (right > last) {
                        return ((last + 1) | 0);
                    }

                    return left;
                }
            }
        }
    });

    Bridge.define("$AnonymousType$4", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (pair, boxedUnion) {
                this.Pair = pair;
                this.BoxedUnion = boxedUnion;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$4)) {
                    return false;
                }
                return Bridge.equals(this.Pair, o.Pair) && Bridge.equals(this.BoxedUnion, o.BoxedUnion);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196189, this.Pair, this.BoxedUnion]);
                return h;
            },
            toJSON: function () {
                return {
                    Pair : this.Pair,
                    BoxedUnion : this.BoxedUnion
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"BoxedUnion","t":16,"rt":System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Object)),"g":{"a":2,"n":"get_BoxedUnion","t":8,"rt":System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Object)),"fg":"BoxedUnion"},"fn":"BoxedUnion"},{"a":2,"n":"Pair","t":16,"rt":System.Object,"g":{"a":2,"n":"get_Pair","t":8,"rt":System.Object,"fg":"Pair"},"fn":"Pair"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.Boxification", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.Boxification, {
        f1: function (x) { },
        f2: function (x) {
            return x;
        },
        f3: function (l) {
            return System.Linq.Enumerable.from(l).orderBy($asm.$.Algorithms.WordGame.Boxification.f2).toList(System.Int32);
        },
        f4: function (pp) {
            return pp;
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastAccessibilityChecker", {
        fields: {
            _fixerResponses: null,
            _fixerResponseCount: 0,
            _breakerChoicesCache: null
        },
        ctors: {
            init: function () {
                this._breakerChoicesCache = new (System.Collections.Generic.Dictionary$2(System.UInt64,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64))))();
            },
            ctor: function (n) {
                this.$initialize();
                this._fixerResponses = System.Array.init(1 << ((((n + 1) | 0)) >> 1), System.UInt64(0), System.UInt64);
            }
        },
        methods: {
            IsAccessible: function (board, wonBoards) {
                var $t;
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        var x = board._trace[System.Array.index(i, board._trace)];
                        var y = board._trace[System.Array.index(j, board._trace)];
                        var swappable = x.xor(y);

                        var winningSwapAlwaysExists = true;
                        $t = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                        try {
                            while ($t.moveNext()) {
                                var breakerChoice = $t.Current;
                                var winningSwapExists = false;

                                this.GetFixerResponses(breakerChoice);
                                for (var k = 1; k < this._fixerResponseCount; k = (k + 1) | 0) {
                                    var childBoard = new Algorithms.WordGame.Optimized.FastWord.$ctor1(board._trace, i, j, this._fixerResponses[System.Array.index(k, this._fixerResponses)], board._stackCount);
                                    if (wonBoards.contains(childBoard)) {
                                        winningSwapExists = true;
                                        break;
                                    }
                                }

                                if (!winningSwapExists) {
                                    winningSwapAlwaysExists = false;
                                    break;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            return true;
                        }
                    }
                }

                return false;
            },
            GetFixerResponses: function (possibleMoves) {
                this._fixerResponseCount = 1 << possibleMoves.Count;

                var subset = 1;
                while (subset < this._fixerResponseCount) {
                    var response = System.UInt64(0);
                    var x = { v : subset };

                    while (x.v !== 0) {
                        response = response.or(possibleMoves.getItem(Algorithms.Int32Usage.GetAndClearLeastSignificantBit(x)));
                    }

                    this._fixerResponses[System.Array.index(subset, this._fixerResponses)] = response;
                    subset = (subset + 1) | 0;
                }
            },
            GetBreakerChoices: function (swappable) {
                var $t, $t1, $t2;
                var choices = { };
                if (!this._breakerChoicesCache.tryGetValue(swappable, choices)) {
                    var bits = Algorithms.Int64Usage.GetBits$1(swappable);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(bits.Count);
                    choices.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64)))(partitions.Count);

                    $t = Bridge.getEnumerator(partitions);
                    try {
                        while ($t.moveNext()) {
                            var partition = $t.Current;
                            var choice = new (System.Collections.Generic.List$1(System.UInt64))(partition.Count);
                            choices.v.add(choice);

                            $t1 = Bridge.getEnumerator(partition);
                            try {
                                while ($t1.moveNext()) {
                                    var part = $t1.Current;
                                    var x = System.UInt64(0);
                                    $t2 = Bridge.getEnumerator(part);
                                    try {
                                        while ($t2.moveNext()) {
                                            var i = $t2.Current;
                                            x = x.or(bits.getItem(i));
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    choice.add(x);
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    this._breakerChoicesCache.set(swappable, choices.v);
                }

                return choices.v;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.TarpitEnumerator", {
        statics: {
            fields: {
                Alphabet: null
            },
            ctors: {
                init: function () {
                    this.Alphabet = $asm.$.Algorithms.WordGame.TarpitEnumerator.f1(new (System.Collections.Generic.List$1(System.Char))());
                }
            },
            methods: {
                IsPermutationClosed: function (S) {
                    return System.Linq.Enumerable.from(Algorithms.WordGame.TarpitEnumerator.EnumerateAlphabetPermutations(S)).select($asm.$.Algorithms.WordGame.TarpitEnumerator.f3).distinct().count() === 1;
                },
                RemovePermutationRedundancies: function (S) {
                    var hash = new (System.Collections.Generic.HashSet$1(System.String)).ctor();
                    var permutedLists = System.Linq.Enumerable.from(Algorithms.WordGame.TarpitEnumerator.EnumerateAlphabetPermutations(S)).toList(System.Collections.Generic.List$1(System.String));
                    for (var i = 0; i < S.Count; i = (i + 1) | 0) {
                        hash.add(System.Linq.Enumerable.from(permutedLists).select(function (l) {
                                return l.getItem(i);
                            }).orderBy($asm.$.Algorithms.WordGame.TarpitEnumerator.f2).first());
                    }

                    return System.Linq.Enumerable.from(hash).toList(System.String);
                },
                ReorderAlphabetByOccurenceRate: function (S) {
                    return System.Linq.Enumerable.from(S).select($asm.$.Algorithms.WordGame.TarpitEnumerator.f5).toList(System.String);
                },
                EnumerateAlphabetPermutations: function (S) {
                    return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function (S) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            uppered,
                            $t,
                            permutation,
                            p,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            uppered = System.Linq.Enumerable.from(S).select($asm.$.Algorithms.WordGame.TarpitEnumerator.f6).toList(System.String);
                                                $t = Bridge.getEnumerator(Algorithms.Utility.Permutation.EnumerateAll(3), Algorithms.Utility.Permutation);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    permutation = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            p = { v : permutation.Apply(System.Char, Algorithms.WordGame.TarpitEnumerator.Alphabet) };
                                                $enumerator.current = System.Linq.Enumerable.from(uppered).select((function ($me, p) {
                                                        return function (s) {
                                                            return System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(s, String.fromCharCode(88), String.fromCharCode(p.v.getItem(0))), String.fromCharCode(89), String.fromCharCode(p.v.getItem(1))), String.fromCharCode(90), String.fromCharCode(p.v.getItem(2)));
                                                        };
                                                    })(this, p)).toList(System.String);
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        },
        methods: {
            GenerateMinimalTarpits: function (foundTarpit) { }
        }
    });

    Bridge.define("$AnonymousType$5", $asm, {
        $kind: "anonymous",
        ctors: {
            ctor: function (c, rate) {
                this.C = c;
                this.Rate = rate;
            }
        },
        methods: {
            equals: function (o) {
                if (!Bridge.is(o, $asm.$AnonymousType$5)) {
                    return false;
                }
                return Bridge.equals(this.C, o.C) && Bridge.equals(this.Rate, o.Rate);
            },
            getHashCode: function () {
                var h = Bridge.addHash([7550196190, this.C, this.Rate]);
                return h;
            },
            toJSON: function () {
                return {
                    C : this.C,
                    Rate : this.Rate
                };
            }
        },
        statics : {
            methods: {
                $metadata : function () { return {"m":[{"a":2,"n":"C","t":16,"rt":System.Char,"g":{"a":2,"n":"get_C","t":8,"rt":System.Char,"fg":"C"},"fn":"C"},{"a":2,"n":"Rate","t":16,"rt":System.Int32,"g":{"a":2,"n":"get_Rate","t":8,"rt":System.Int32,"fg":"Rate"},"fn":"Rate"}]}; }
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.TarpitEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.TarpitEnumerator, {
        f1: function (_o23) {
            _o23.add(120);
            _o23.add(121);
            _o23.add(122);
            return _o23;
        },
        f2: function (s) {
            return s;
        },
        f3: function (T) {
            return Bridge.toArray(System.Linq.Enumerable.from(T).orderBy($asm.$.Algorithms.WordGame.TarpitEnumerator.f2)).join(",");
        },
        f4: function (d) {
            return d.Rate;
        },
        f5: function (s) {
            var chars = System.String.toCharArray(s, 0, s.length);
            var p = System.Linq.Enumerable.from(Algorithms.WordGame.TarpitEnumerator.Alphabet).select(function (c) {
                    return new $asm.$AnonymousType$5(c, System.Linq.Enumerable.from(chars).count(function (cc) {
                            return cc === c;
                        }));
                }).orderByDescending($asm.$.Algorithms.WordGame.TarpitEnumerator.f4).toList(System.Object);

            return System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(s, String.fromCharCode(p.getItem(0).C), String.fromCharCode(88)), String.fromCharCode(p.getItem(1).C), String.fromCharCode(89)), String.fromCharCode(p.getItem(2).C), String.fromCharCode(90)).toLowerCase();

        },
        f6: function (s) {
            return s.toUpperCase();
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastWord", {
        fields: {
            _trace: null,
            _length: 0,
            _stackCount: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (trace, stackCount) {
                this.$initialize();
                this._trace = trace;
                this._length = this._trace.length;
                this._stackCount = stackCount;
                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);
            },
            $ctor1: function (trace, i, j, swap, stackCount) {
                this.$initialize();
                this._trace = System.Array.init(trace.length, System.UInt64(0), System.UInt64);
                this._length = 0;
                for (var k = 0; k < trace.length; k = (k + 1) | 0) {
                    var v = System.UInt64(0);
                    if (k === i || k === j) {
                        v = trace[System.Array.index(k, trace)].xor(swap);
                    } else {
                        v = trace[System.Array.index(k, trace)];
                    }

                    var q = this._length;
                    while (q > 0 && this._trace[System.Array.index(((q - 1) | 0), this._trace)].gt(v)) {
                        q = (q - 1) | 0;
                    }

                    if (q < this._length) {
                        System.Array.copy(this._trace, q << 3, this._trace, (((q + 1) | 0)) << 3, (((this._length - q) | 0)) << 3);
                    }
                    this._trace[System.Array.index(q, this._trace)] = v;

                    this._length = (this._length + 1) | 0;
                }

                this._stackCount = stackCount;
                this._hashCode = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Hashing.Hash(this._trace, this._length);
            }
        },
        methods: {
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, Algorithms.WordGame.Optimized.FastWord));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._trace[System.Array.index(i, this._trace)].ne(other._trace[System.Array.index(i, other._trace)])) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastWordGenerator", {
        methods: {
            GenerateWords: function (length) {
                var words = System.Linq.Enumerable.from(Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine.Enumerate(System.Linq.Enumerable.repeat(1, length), 3)).select(function (trace) {
                        return new Algorithms.WordGame.Optimized.FastWord.ctor(trace, length);
                    }).toList(Algorithms.WordGame.Optimized.FastWord);
                return words;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine", {
        statics: {
            methods: {
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ulong.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, System.UInt64(0), System.UInt64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ulong.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_ulong.Zeroes(sizeVector))).not();
                    return Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine.Enumerate$1(sizeVector, assignment, r, 0, System.UInt64(0), c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = care.and(last.not());
                                                q = care.not().and(dontCare.not()).and(last);

                                                if (g.gt(q)) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = Algorithms.Int64Usage.RightFillToMSB(g);
                                                x = (care.and(f)).or((last.and(f.not())));
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q.gt(g)) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = Algorithms.Int64Usage.RightFillToMSB(q);
                                                t = f1.not().and(last);
                                                y = dontCare.and(f1.not()).and(t.not());
                                                if (y.equals(System.UInt64(0))) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = dontCare.and(t).and((y.or((y.sub(System.UInt64(1))))));

                                                x = (care.and((f1.shru(1)))).or((t.and(y2.not()))).or((y.and((System.UInt64(0).sub(y)))));
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = care.or(dontCare);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, System.UInt64(0), System.UInt64);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x.equals(end)) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_ulong.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_ulong.Zeroes(sizes);

                                                if ((c.and(z)).equals(System.UInt64(0))) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (c.or(z)).not();
                                                $t = Bridge.getEnumerator(Algorithms.WordGame.Optimized.FastWordGenerator.TheEnumerationMachine.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt64));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_ulong.Increment(sizes, x);

                                                if (x.equals(end)) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("Algorithms.WordGame.WordEnumerator", {
        fields: {
            _alphabet: null
        },
        ctors: {
            ctor: function (alphabet) {
                if (alphabet === void 0) { alphabet = []; }

                Algorithms.WordGame.WordEnumerator.$ctor1.call(this, Bridge.cast(alphabet, System.Collections.Generic.IEnumerable$1(System.Char)));
            },
            $ctor1: function (alphabet) {
                this.$initialize();
                this._alphabet = System.Linq.Enumerable.from(alphabet).toList(System.Char);
            }
        },
        methods: {
            EnumerateWords: function (length) {
                return System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Char, System.Linq.Enumerable.repeat(this._alphabet, length))).select($asm.$.Algorithms.WordGame.WordEnumerator.f1);
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.WordEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.WordEnumerator, {
        f1: function (chars) {
            return String.fromCharCode.apply(null, System.Linq.Enumerable.from(chars).toArray());
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_byte", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_byte.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.Byte)))(countEstimate);
                    var assignment = System.Array.init(potSize, 0, System.Byte);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Byte));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_byte.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_byte.Zeroes(sizeVector))) & 255;
                    BitLevelGeneration.Assignments_byte.Generate$1(sizeVector, assignments, assignment, r, 0, 1, c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = (care & ~last) & 255;
                    var q = (~care & ~dontCare & last) & 255;

                    if (g > q) {
                        var f = BitLevelGeneration.BitOperations.RightFillToMSB(g);
                        x = ((care & f) | (last & ~f)) & 255;
                    } else if (q > g) {
                        var f1 = BitLevelGeneration.BitOperations.RightFillToMSB(q);
                        var t = (~f1 & last) & 255;
                        var y = (dontCare & ~f1 & ~t) & 255;
                        if (y === 0) {
                            return;
                        }

                        var y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 255;

                        x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 255;
                    } else {
                        x = last;
                    }

                    var end = (care | dontCare) & 255;
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, 0, System.Byte);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_byte.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_byte.Zeroes(sizes);

                            if ((c & z) === 0) {
                                var dc = (~(c | z)) & 255;
                                BitLevelGeneration.Assignments_byte.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_byte.Increment(sizes, x);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_byte.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, 0, System.Byte);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Byte));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_byte.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_byte.Zeroes(sizeVector))) & 255;
                    return BitLevelGeneration.Assignments_byte.Enumerate$1(sizeVector, assignment, r, 0, 1, c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Byte)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Byte)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = (care & ~last) & 255;
                                                q = (~care & ~dontCare & last) & 255;

                                                if (g > q) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitOperations.RightFillToMSB(g);
                                                x = ((care & f) | (last & ~f)) & 255;
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q > g) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitOperations.RightFillToMSB(q);
                                                t = (~f1 & last) & 255;
                                                y = (dontCare & ~f1 & ~t) & 255;
                                                if (y === 0) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 255;

                                                x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 255;
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = (care | dontCare) & 255;
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, 0, System.Byte);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x === end) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_byte.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_byte.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_byte.Zeroes(sizes);

                                                if ((c & z) === 0) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (~(c | z)) & 255;
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_byte.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.Byte));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_byte.Increment(sizes, x);

                                                if (x === end) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 255;

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_long", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_long.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.Int64)))(countEstimate);
                    var assignment = System.Array.init(potSize, System.Int64(0), System.Int64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Int64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_long.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_long.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_long.Zeroes(sizeVector))).not();
                    BitLevelGeneration.Assignments_long.Generate$1(sizeVector, assignments, assignment, r, 0, System.Int64(1), c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = care.and(last.not());
                    var q = care.not().and(dontCare.not()).and(last);

                    if (g.gt(q)) {
                        var f = BitLevelGeneration.BitUsage_long.RightFillToMSB(g);
                        x = (care.and(f)).or((last.and(f.not())));
                    } else if (q.gt(g)) {
                        var f1 = BitLevelGeneration.BitUsage_long.RightFillToMSB(q);
                        var t = f1.not().and(last);
                        var y = dontCare.and(f1.not()).and(t.not());
                        if (y.equals(System.Int64(0))) {
                            return;
                        }

                        var y2 = dontCare.and(t).and((y.or((y.sub(System.Int64(1))))));

                        x = (care.and((f1.shr(1)))).or((t.and(y2.not()))).or((y.and((System.Int64(0).sub(y)))));
                    } else {
                        x = last;
                    }

                    var end = care.or(dontCare);
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, System.Int64(0), System.Int64);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_long.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_long.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_long.Zeroes(sizes);

                            if ((c.and(z)).equals(System.Int64(0))) {
                                var dc = (c.or(z)).not();
                                BitLevelGeneration.Assignments_long.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_long.Increment(sizes, x);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_long.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, System.Int64(0), System.Int64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.Int64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_long.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_long.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_long.Zeroes(sizeVector))).not();
                    return BitLevelGeneration.Assignments_long.Enumerate$1(sizeVector, assignment, r, 0, System.Int64(1), c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.Int64)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.Int64)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = care.and(last.not());
                                                q = care.not().and(dontCare.not()).and(last);

                                                if (g.gt(q)) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitUsage_long.RightFillToMSB(g);
                                                x = (care.and(f)).or((last.and(f.not())));
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q.gt(g)) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitUsage_long.RightFillToMSB(q);
                                                t = f1.not().and(last);
                                                y = dontCare.and(f1.not()).and(t.not());
                                                if (y.equals(System.Int64(0))) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = dontCare.and(t).and((y.or((y.sub(System.Int64(1))))));

                                                x = (care.and((f1.shr(1)))).or((t.and(y2.not()))).or((y.and((System.Int64(0).sub(y)))));
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = care.or(dontCare);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, System.Int64(0), System.Int64);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x.equals(end)) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_long.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_long.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_long.Zeroes(sizes);

                                                if ((c.and(z)).equals(System.Int64(0))) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (c.or(z)).not();
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_long.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.Int64));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_long.Increment(sizes, x);

                                                if (x.equals(end)) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_uint", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_uint.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.UInt32)))(countEstimate);
                    var assignment = System.Array.init(potSize, 0, System.UInt32);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt32));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_uint.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = ~(((c | BitLevelGeneration.BitVectors_uint.Zeroes(sizeVector)) >>> 0));
                    BitLevelGeneration.Assignments_uint.Generate$1(sizeVector, assignments, assignment, r, 0, 1, c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = ((care & ~last) >>> 0);
                    var q = ((((~care & ~dontCare) >>> 0) & last) >>> 0);

                    if (g > q) {
                        var f = BitLevelGeneration.BitUsage_uint.RightFillToMSB(g);
                        x = (((((care & f) >>> 0)) | (((last & ~f) >>> 0))) >>> 0);
                    } else if (q > g) {
                        var f1 = BitLevelGeneration.BitUsage_uint.RightFillToMSB(q);
                        var t = ((~f1 & last) >>> 0);
                        var y = ((((dontCare & ~f1) >>> 0) & ~t) >>> 0);
                        if (y === 0) {
                            return;
                        }

                        var y2 = ((((dontCare & t) >>> 0) & (((y | (((y - 1) >>> 0))) >>> 0))) >>> 0);

                        x = (((((((care & (f1 >>> 1)) >>> 0)) | (((t & ~y2) >>> 0))) >>> 0) | (((y & (((0 - y) >>> 0))) >>> 0))) >>> 0);
                    } else {
                        x = last;
                    }

                    var end = ((care | dontCare) >>> 0);
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, 0, System.UInt32);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x === end) {
                                break;
                            }

                            x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_uint.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_uint.Zeroes(sizes);

                            if ((((c & z) >>> 0)) === 0) {
                                var dc = ~(((c | z) >>> 0));
                                BitLevelGeneration.Assignments_uint.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_uint.Increment(sizes, x);

                            if (x === end) {
                                break;
                            }

                            x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_uint.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, 0, System.UInt32);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt32));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_uint.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = ~(((c | BitLevelGeneration.BitVectors_uint.Zeroes(sizeVector)) >>> 0));
                    return BitLevelGeneration.Assignments_uint.Enumerate$1(sizeVector, assignment, r, 0, 1, c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt32)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt32)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = ((care & ~last) >>> 0);
                                                q = ((((~care & ~dontCare) >>> 0) & last) >>> 0);

                                                if (g > q) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitUsage_uint.RightFillToMSB(g);
                                                x = (((((care & f) >>> 0)) | (((last & ~f) >>> 0))) >>> 0);
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q > g) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitUsage_uint.RightFillToMSB(q);
                                                t = ((~f1 & last) >>> 0);
                                                y = ((((dontCare & ~f1) >>> 0) & ~t) >>> 0);
                                                if (y === 0) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = ((((dontCare & t) >>> 0) & (((y | (((y - 1) >>> 0))) >>> 0))) >>> 0);

                                                x = (((((((care & (f1 >>> 1)) >>> 0)) | (((t & ~y2) >>> 0))) >>> 0) | (((y & (((0 - y) >>> 0))) >>> 0))) >>> 0);
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = ((care | dontCare) >>> 0);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, 0, System.UInt32);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x === end) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_uint.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_uint.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_uint.Zeroes(sizes);

                                                if ((((c & z) >>> 0)) === 0) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = ~(((c | z) >>> 0));
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_uint.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt32));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_uint.Increment(sizes, x);

                                                if (x === end) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((((((((x - (((care + dontCare) >>> 0))) >>> 0)) & dontCare) >>> 0)) + care) >>> 0);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_ulong", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ulong.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.UInt64)))(countEstimate);
                    var assignment = System.Array.init(potSize, System.UInt64(0), System.UInt64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ulong.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_ulong.Zeroes(sizeVector))).not();
                    BitLevelGeneration.Assignments_ulong.Generate$1(sizeVector, assignments, assignment, r, 0, System.UInt64(1), c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = care.and(last.not());
                    var q = care.not().and(dontCare.not()).and(last);

                    if (g.gt(q)) {
                        var f = BitLevelGeneration.BitOperations.RightFillToMSB$2(g);
                        x = (care.and(f)).or((last.and(f.not())));
                    } else if (q.gt(g)) {
                        var f1 = BitLevelGeneration.BitOperations.RightFillToMSB$2(q);
                        var t = f1.not().and(last);
                        var y = dontCare.and(f1.not()).and(t.not());
                        if (y.equals(System.UInt64(0))) {
                            return;
                        }

                        var y2 = dontCare.and(t).and((y.or((y.sub(System.UInt64(1))))));

                        x = (care.and((f1.shru(1)))).or((t.and(y2.not()))).or((y.and((System.UInt64(0).sub(y)))));
                    } else {
                        x = last;
                    }

                    var end = care.or(dontCare);
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, System.UInt64(0), System.UInt64);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_ulong.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_ulong.Zeroes(sizes);

                            if ((c.and(z)).equals(System.UInt64(0))) {
                                var dc = (c.or(z)).not();
                                BitLevelGeneration.Assignments_ulong.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_ulong.Increment(sizes, x);

                            if (x.equals(end)) {
                                break;
                            }

                            x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ulong.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, System.UInt64(0), System.UInt64);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt64));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ulong.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (c.or(BitLevelGeneration.BitVectors_ulong.Zeroes(sizeVector))).not();
                    return BitLevelGeneration.Assignments_ulong.Enumerate$1(sizeVector, assignment, r, 0, System.UInt64(1), c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt64)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = care.and(last.not());
                                                q = care.not().and(dontCare.not()).and(last);

                                                if (g.gt(q)) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitOperations.RightFillToMSB$2(g);
                                                x = (care.and(f)).or((last.and(f.not())));
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q.gt(g)) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitOperations.RightFillToMSB$2(q);
                                                t = f1.not().and(last);
                                                y = dontCare.and(f1.not()).and(t.not());
                                                if (y.equals(System.UInt64(0))) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = dontCare.and(t).and((y.or((y.sub(System.UInt64(1))))));

                                                x = (care.and((f1.shru(1)))).or((t.and(y2.not()))).or((y.and((System.UInt64(0).sub(y)))));
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = care.or(dontCare);
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, System.UInt64(0), System.UInt64);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x.equals(end)) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_ulong.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_ulong.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_ulong.Zeroes(sizes);

                                                if ((c.and(z)).equals(System.UInt64(0))) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (c.or(z)).not();
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_ulong.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt64));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_ulong.Increment(sizes, x);

                                                if (x.equals(end)) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = ((x.sub((care.add(dontCare)))).and(dontCare)).add(care);

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.Assignments_ushort", {
        statics: {
            methods: {
                Generate: function (sizes, potSize, countEstimate) {
                    if (countEstimate === void 0) { countEstimate = 2048; }
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ushort.ToBitVector(sizes);

                    var assignments = new (System.Collections.Generic.List$1(System.Array.type(System.UInt16)))(countEstimate);
                    var assignment = System.Array.init(potSize, 0, System.UInt16);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt16));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ushort.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_ushort.Zeroes(sizeVector))) & 65535;
                    BitLevelGeneration.Assignments_ushort.Generate$1(sizeVector, assignments, assignment, r, 0, 1, c, dc);

                    return assignments;
                },
                Generate$1: function (sizes, assignments, assignment, r, i, last, care, dontCare) {
                    var x;

                    var g = (care & ~last) & 65535;
                    var q = (~care & ~dontCare & last) & 65535;

                    if (g > q) {
                        var f = BitLevelGeneration.BitOperations.RightFillToMSB$1(g);
                        x = ((care & f) | (last & ~f)) & 65535;
                    } else if (q > g) {
                        var f1 = BitLevelGeneration.BitOperations.RightFillToMSB$1(q);
                        var t = (~f1 & last) & 65535;
                        var y = (dontCare & ~f1 & ~t) & 65535;
                        if (y === 0) {
                            return;
                        }

                        var y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 65535;

                        x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 65535;
                    } else {
                        x = last;
                    }

                    var end = (care | dontCare) & 65535;
                    if (i >= ((assignment.length - 1) | 0)) {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            var assignmentCopy = System.Array.init(assignment.length, 0, System.UInt16);
                            System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);
                            assignments.add(assignmentCopy);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;
                        }
                    } else {
                        while (true) {
                            assignment[System.Array.index(i, assignment)] = x;

                            BitLevelGeneration.BitVectors_ushort.Decrement(sizes, x);
                            var c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                            var z = BitLevelGeneration.BitVectors_ushort.Zeroes(sizes);

                            if ((c & z) === 0) {
                                var dc = (~(c | z)) & 65535;
                                BitLevelGeneration.Assignments_ushort.Generate$1(sizes, assignments, assignment, r, ((i + 1) | 0), x, c, dc);
                            }

                            BitLevelGeneration.BitVectors_ushort.Increment(sizes, x);

                            if (x === end) {
                                break;
                            }

                            x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;
                        }
                    }
                },
                Enumerate: function (sizes, potSize) {
                    var sizesCount = System.Linq.Enumerable.from(sizes).count();
                    var sizeVector = BitLevelGeneration.BitVectors_ushort.ToBitVector(sizes);

                    var assignment = System.Array.init(potSize, 0, System.UInt16);

                    var r = System.Array.init(potSize, null, System.Collections.Generic.List$1(System.UInt16));
                    for (var i = 0; i < potSize; i = (i + 1) | 0) {
                        r[System.Array.index(i, r)] = BitLevelGeneration.BitVectors_ushort.ToBitVector(System.Linq.Enumerable.repeat(((((potSize - 1) | 0) - i) | 0), sizesCount));
                    }

                    var c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizeVector, r[System.Array.index(0, r)]);
                    var dc = (~(c | BitLevelGeneration.BitVectors_ushort.Zeroes(sizeVector))) & 65535;
                    return BitLevelGeneration.Assignments_ushort.Enumerate$1(sizeVector, assignment, r, 0, 1, c, dc);
                },
                Enumerate$1: function (sizes, assignment, r, i, last, care, dontCare) {
                    return new (Bridge.GeneratorEnumerable$1(System.Array.type(System.UInt16)))(Bridge.fn.bind(this, function (sizes, assignment, r, i, last, care, dontCare) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            g,
                            q,
                            f,
                            f1,
                            t,
                            y,
                            y2,
                            end,
                            assignmentCopy,
                            c,
                            z,
                            dc,
                            $t,
                            a,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Array.type(System.UInt16)))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            g = (care & ~last) & 65535;
                                                q = (~care & ~dontCare & last) & 65535;

                                                if (g > q) {
                                                    $step = 1;
                                                    continue;
                                                } else  {
                                                    $step = 2;
                                                    continue;
                                                }
                                        }
                                        case 1: {
                                            f = BitLevelGeneration.BitOperations.RightFillToMSB$1(g);
                                                x = ((care & f) | (last & ~f)) & 65535;
                                            $step = 8;
                                            continue;
                                        }
                                        case 2: {
                                            if (q > g) {
                                                    $step = 3;
                                                    continue;
                                                } else  {
                                                    $step = 6;
                                                    continue;
                                                }
                                        }
                                        case 3: {
                                            f1 = BitLevelGeneration.BitOperations.RightFillToMSB$1(q);
                                                t = (~f1 & last) & 65535;
                                                y = (dontCare & ~f1 & ~t) & 65535;
                                                if (y === 0) {
                                                    $step = 4;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 4: {
                                            return false;
                                        }
                                        case 5: {
                                            y2 = (dontCare & t & (y | (((y - 1) | 0)))) & 65535;

                                                x = ((care & (f1 >> 1)) | (t & ~y2) | (y & (((0 - y) | 0)))) & 65535;
                                            $step = 7;
                                            continue;
                                        }
                                        case 6: {
                                            x = last;
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            end = (care | dontCare) & 65535;
                                                if (i >= ((assignment.length - 1) | 0)) {
                                                    $step = 9;
                                                    continue;
                                                } else  {
                                                    $step = 14;
                                                    continue;
                                                }
                                        }
                                        case 9: {
                                            $step = 10;
                                            continue;
                                        }
                                        case 10: {
                                            if ( true ) {
                                                    $step = 11;
                                                    continue;
                                                } 
                                                $step = 13;
                                                continue;
                                        }
                                        case 11: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                assignmentCopy = System.Array.init(assignment.length, 0, System.UInt16);
                                                System.Array.copy(assignment, 0, assignmentCopy, 0, assignmentCopy.length);

                                                $enumerator.current = assignmentCopy;
                                                $step = 12;
                                                return true;
                                        }
                                        case 12: {
                                            if (x === end) {
                                                    $step = 13;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;

                                                $step = 10;
                                                continue;
                                        }
                                        case 13: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 14: {
                                            $step = 15;
                                            continue;
                                        }
                                        case 15: {
                                            if ( true ) {
                                                    $step = 16;
                                                    continue;
                                                } 
                                                $step = 23;
                                                continue;
                                        }
                                        case 16: {
                                            assignment[System.Array.index(i, assignment)] = x;

                                                BitLevelGeneration.BitVectors_ushort.Decrement(sizes, x);
                                                c = BitLevelGeneration.BitVectors_ushort.GreaterThan(sizes, r[System.Array.index(((i + 1) | 0), r)]);
                                                z = BitLevelGeneration.BitVectors_ushort.Zeroes(sizes);

                                                if ((c & z) === 0) {
                                                    $step = 17;
                                                    continue;
                                                } 
                                                $step = 22;
                                                continue;
                                        }
                                        case 17: {
                                            dc = (~(c | z)) & 65535;
                                                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_ushort.Enumerate$1(sizes, assignment, r, ((i + 1) | 0), x, c, dc), System.Array.type(System.UInt16));
                                                $step = 18;
                                                continue;
                                        }
                                        case 18: {
                                            if ($t.moveNext()) {
                                                    a = $t.Current;
                                                    $step = 19;
                                                    continue;
                                                }
                                            $step = 21;
                                            continue;
                                        }
                                        case 19: {
                                            $enumerator.current = a;
                                                $step = 20;
                                                return true;
                                        }
                                        case 20: {
                                            $step = 18;
                                            continue;
                                        }
                                        case 21: {
                                            $step = 22;
                                            continue;
                                        }
                                        case 22: {
                                            BitLevelGeneration.BitVectors_ushort.Increment(sizes, x);

                                                if (x === end) {
                                                    $step = 23;
                                                    continue;
                                                }

                                                x = (((((((x - (((care + dontCare) | 0))) | 0)) & dontCare) + care) | 0)) & 65535;

                                                $step = 15;
                                                continue;
                                        }
                                        case 23: {
                                            $step = 24;
                                            continue;
                                        }
                                        case 24: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.IGraph_long", {
        $kind: "interface"
    });

    Bridge.define("BitLevelGeneration.IGraph_uint", {
        $kind: "interface"
    });

    Bridge.define("BitLevelGeneration.BitOperations", {
        statics: {
            methods: {
                To_ulong: function (bits) {
                    var $t;
                    var x = System.UInt64(0);
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = x.or((System.UInt64(1).shl(bit)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                To_ushort: function (bits) {
                    var $t;
                    var x = 0;
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = (x | ((1 << bit) & 65535)) & 65535;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                To_byte: function (bits) {
                    var $t;
                    var x = 0;
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = (x | ((1 << bit) & 255)) & 255;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                RightFillToMSB$2: function (x) {
                    x = x.or((x.shru(1)));
                    x = x.or((x.shru(2)));
                    x = x.or((x.shru(4)));
                    x = x.or((x.shru(8)));
                    x = x.or((x.shru(16)));
                    x = x.or((x.shru(32)));

                    return x;
                },
                RightFillToMSB$1: function (x) {
                    x = (x | ((x >> 1) & 65535)) & 65535;
                    x = (x | ((x >> 2) & 65535)) & 65535;
                    x = (x | ((x >> 4) & 65535)) & 65535;
                    x = (x | ((x >> 8) & 65535)) & 65535;

                    return x;
                },
                RightFillToMSB: function (x) {
                    x = (x | ((x >> 1) & 255)) & 255;
                    x = (x | ((x >> 2) & 255)) & 255;
                    x = (x | ((x >> 4) & 255)) & 255;

                    return x;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitUsage_long", {
        statics: {
            fields: {
                DeBruijnMultiplier: System.UInt64(0),
                DeBruijnLookup: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = System.UInt64(System.Int64([-1706153790,133027301]));
                    this.DeBruijnLookup = System.Array.init([
                        63, 
                        0, 
                        58, 
                        1, 
                        59, 
                        47, 
                        53, 
                        2, 
                        60, 
                        39, 
                        48, 
                        27, 
                        54, 
                        33, 
                        42, 
                        3, 
                        61, 
                        51, 
                        37, 
                        40, 
                        49, 
                        18, 
                        28, 
                        20, 
                        55, 
                        30, 
                        34, 
                        11, 
                        43, 
                        14, 
                        22, 
                        4, 
                        62, 
                        57, 
                        46, 
                        52, 
                        38, 
                        26, 
                        32, 
                        41, 
                        50, 
                        36, 
                        17, 
                        19, 
                        29, 
                        10, 
                        13, 
                        21, 
                        56, 
                        45, 
                        25, 
                        31, 
                        35, 
                        16, 
                        9, 
                        12, 
                        44, 
                        24, 
                        15, 
                        8, 
                        23, 
                        7, 
                        6, 
                        5
                    ], System.Int32);
                }
            },
            methods: {
                Extract: function (x) {
                    return BitLevelGeneration.BitUsage_long.DeBruijnLookup[System.Array.index(System.Int64.toNumber((System.Int64.clipu64(x).mul(BitLevelGeneration.BitUsage_long.DeBruijnMultiplier)).shru(58)), BitLevelGeneration.BitUsage_long.DeBruijnLookup)];
                },
                LeastSignificantBit: function (x) {
                    return BitLevelGeneration.BitUsage_long.DeBruijnLookup[System.Array.index(System.Int64.clipu64((x.and(x.neg()))).mul(BitLevelGeneration.BitUsage_long.DeBruijnMultiplier).shru(58), BitLevelGeneration.BitUsage_long.DeBruijnLookup)];
                },
                GetAndClearLeastSignificantBit: function (x) {
                    var m = x.v.and(x.v.neg());
                    x.v = x.v.xor(m);
                    return BitLevelGeneration.BitUsage_long.DeBruijnLookup[System.Array.index(System.Int64.toNumber((System.Int64.clipu64(m).mul(BitLevelGeneration.BitUsage_long.DeBruijnMultiplier)).shru(58)), BitLevelGeneration.BitUsage_long.DeBruijnLookup)];
                },
                PopulationCount: function (b) {
                    var q = 0;
                    while (b.gt(System.Int64(0))) {
                        q = (q + 1) | 0;
                        b = b.and((b.sub(System.Int64(1))));
                    }
                    return q;
                },
                PopulationCountDense: function (x) {
                    x = x.sub(((x.shr(1)).and(System.Int64([1431655765,1431655765]))));
                    x = (x.and(System.Int64([858993459,858993459]))).add(((x.shr(2)).and(System.Int64([858993459,858993459]))));
                    x = (x.add((x.shr(4)))).and(System.Int64([252645135,252645135]));
                    x = (x.mul(System.Int64([16843009,16843009]))).shr(56);

                    return System.Int64.clip32(x);
                },
                ToSet: function (x) {
                    x = {v:x};
                    var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                    while (x.v.ne(System.Int64(0))) {
                        onBits.add(BitLevelGeneration.BitUsage_long.GetAndClearLeastSignificantBit(x));
                    }

                    return onBits;
                },
                RightFillToMSB: function (x) {
                    x = x.or((x.shr(1)));
                    x = x.or((x.shr(2)));
                    x = x.or((x.shr(4)));
                    x = x.or((x.shr(8)));
                    x = x.or((x.shr(16)));

                    return x;
                },
                To_long: function (bits) {
                    var $t;
                    var x = System.Int64(0);
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = x.or((System.Int64(1).shl(bit)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                Or: function (colorGraph, offset) {
                    var result = System.Int64(0);
                    for (var i = offset; i < colorGraph.length; i = (i + 1) | 0) {
                        result = result.or(colorGraph[System.Array.index(i, colorGraph)]);
                    }
                    return result;
                },
                TrueForAllBitIndices: function (x, predicate) {
                    x = {v:x};
                    while (x.v.ne(System.Int64(0))) {
                        if (!predicate(BitLevelGeneration.BitUsage_long.GetAndClearLeastSignificantBit(x))) {
                            return false;
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitUsage_uint", {
        statics: {
            fields: {
                DeBruijnMultiplier: 0,
                DeBruijnLookup: null
            },
            ctors: {
                init: function () {
                    this.DeBruijnMultiplier = 125613361;
                    this.DeBruijnLookup = System.Array.init([0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8, 31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9], System.Int32);
                }
            },
            methods: {
                Extract: function (x) {
                    return BitLevelGeneration.BitUsage_uint.DeBruijnLookup[System.Array.index((Bridge.Int.umul(x, BitLevelGeneration.BitUsage_uint.DeBruijnMultiplier)) >>> 27, BitLevelGeneration.BitUsage_uint.DeBruijnLookup)];
                },
                LeastSignificantBit: function (x) {
                    return BitLevelGeneration.BitUsage_uint.DeBruijnLookup[System.Array.index((Bridge.Int.umul((((x & (((~x + 1) >>> 0))) >>> 0)), BitLevelGeneration.BitUsage_uint.DeBruijnMultiplier)) >>> 27, BitLevelGeneration.BitUsage_uint.DeBruijnLookup)];
                },
                GetAndClearLeastSignificantBit: function (x) {
                    var m = (x.v & (((~x.v + 1) >>> 0))) >>> 0;
                    x.v = (x.v ^ m) >>> 0;
                    return BitLevelGeneration.BitUsage_uint.DeBruijnLookup[System.Array.index((Bridge.Int.umul(m, BitLevelGeneration.BitUsage_uint.DeBruijnMultiplier)) >>> 27, BitLevelGeneration.BitUsage_uint.DeBruijnLookup)];
                },
                PopulationCount: function (b) {
                    var q = 0;
                    while (b > 0) {
                        q = (q + 1) | 0;
                        b = (b & (((b - 1) >>> 0))) >>> 0;
                    }
                    return q;
                },
                ToSet: function (x) {
                    x = {v:x};
                    var onBits = new (System.Collections.Generic.List$1(System.Int32))(10);
                    while (x.v !== 0) {
                        onBits.add(BitLevelGeneration.BitUsage_uint.GetAndClearLeastSignificantBit(x));
                    }

                    return onBits;
                },
                RightFillToMSB: function (x) {
                    x = (x | (x >>> 1)) >>> 0;
                    x = (x | (x >>> 2)) >>> 0;
                    x = (x | (x >>> 4)) >>> 0;
                    x = (x | (x >>> 8)) >>> 0;
                    x = (x | (x >>> 16)) >>> 0;

                    return x;
                },
                To_uint: function (bits) {
                    var $t;
                    var x = 0;
                    $t = Bridge.getEnumerator(bits, System.Int32);
                    try {
                        while ($t.moveNext()) {
                            var bit = $t.Current;
                            x = (x | (((1 << bit) >>> 0))) >>> 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return x;
                },
                Or: function (colorGraph, offset) {
                    var result = 0;
                    for (var i = offset; i < colorGraph.length; i = (i + 1) | 0) {
                        result = (result | colorGraph[System.Array.index(i, colorGraph)]) >>> 0;
                    }
                    return result;
                },
                TrueForAllBitIndices: function (x, predicate) {
                    x = {v:x};
                    while (x.v !== 0) {
                        if (!predicate(BitLevelGeneration.BitUsage_uint.GetAndClearLeastSignificantBit(x))) {
                            return false;
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_byte", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(8);
                    for (var i = 0; i < 8; i = (i + 1) | 0) {
                        var b = (1 << i) & 255;
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b & n.getItem(j)) !== 0) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.Byte))();
                    while (true) {
                        var m = 0;
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = (m | ((1 << i) & 255)) & 255;
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & n.getItem(i)) & 255;
                        var t2 = (m ^ n.getItem(i)) & 255;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & ~n.getItem(i)) & 255;
                        var t2 = (m ^ n.getItem(i)) & 255;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = 0;
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = (m | n.getItem(i)) & 255;
                    }

                    return ((~m) & 255);
                },
                GreaterThan: function (n, k) {
                    var a = 0;
                    var b = 0;
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = (a | n.getItem(i)) & 255;
                        } else {
                            if (i >= n.Count) {
                                b = (b | k.getItem(i)) & 255;
                            } else {
                                a = (a | ((~b & n.getItem(i) & ~k.getItem(i)) & 255)) & 255;
                                b = (b | ((~a & ~n.getItem(i) & k.getItem(i)) & 255)) & 255;
                            }
                        }
                    }

                    return ((a & ~b) & 255);
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_long", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(64);
                    for (var i = 0; i < 64; i = (i + 1) | 0) {
                        var b = System.Int64(1).shl(i);
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b.and(n.getItem(j))).ne(System.Int64(0))) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.Int64))();
                    while (true) {
                        var m = System.Int64(0);
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = m.or(System.Int64(1).shl(i));
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m.ne(System.Int64(0))) {
                        var t1 = m.and(n.getItem(i));
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m.ne(System.Int64(0))) {
                        var t1 = m.and(n.getItem(i).not());
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = System.Int64(0);
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = m.or(n.getItem(i));
                    }

                    return m.not();
                },
                GreaterThan: function (n, k) {
                    var a = System.Int64(0);
                    var b = System.Int64(0);
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = a.or(n.getItem(i));
                        } else {
                            if (i >= n.Count) {
                                b = b.or(k.getItem(i));
                            } else {
                                a = a.or(b.not().and(n.getItem(i)).and(k.getItem(i).not()));
                                b = b.or(a.not().and(n.getItem(i).not()).and(k.getItem(i)));
                            }
                        }
                    }

                    return a.and(b.not());
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_uint", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(32);
                    for (var i = 0; i < 32; i = (i + 1) | 0) {
                        var b = ((1 << i) >>> 0);
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((((b & n.getItem(j)) >>> 0)) !== 0) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.UInt32))();
                    while (true) {
                        var m = 0;
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = (m | ((1 << i) >>> 0)) >>> 0;
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = ((m & n.getItem(i)) >>> 0);
                        var t2 = ((m ^ n.getItem(i)) >>> 0);

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = ((m & ~n.getItem(i)) >>> 0);
                        var t2 = ((m ^ n.getItem(i)) >>> 0);

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = 0;
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = (m | n.getItem(i)) >>> 0;
                    }

                    return ~m;
                },
                GreaterThan: function (n, k) {
                    var a = 0;
                    var b = 0;
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = (a | n.getItem(i)) >>> 0;
                        } else {
                            if (i >= n.Count) {
                                b = (b | k.getItem(i)) >>> 0;
                            } else {
                                a = (a | ((((~b & n.getItem(i)) >>> 0) & ~k.getItem(i)) >>> 0)) >>> 0;
                                b = (b | ((((~a & ~n.getItem(i)) >>> 0) & k.getItem(i)) >>> 0)) >>> 0;
                            }
                        }
                    }

                    return ((a & ~b) >>> 0);
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_ulong", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(64);
                    for (var i = 0; i < 64; i = (i + 1) | 0) {
                        var b = System.UInt64(1).shl(i);
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b.and(n.getItem(j))).ne(System.UInt64(0))) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.UInt64))();
                    while (true) {
                        var m = System.UInt64(0);
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = m.or(System.UInt64(1).shl(i));
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m.ne(System.UInt64(0))) {
                        var t1 = m.and(n.getItem(i));
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m.ne(System.UInt64(0))) {
                        var t1 = m.and(n.getItem(i).not());
                        var t2 = m.xor(n.getItem(i));

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = System.UInt64(0);
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = m.or(n.getItem(i));
                    }

                    return m.not();
                },
                GreaterThan: function (n, k) {
                    var a = System.UInt64(0);
                    var b = System.UInt64(0);
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = a.or(n.getItem(i));
                        } else {
                            if (i >= n.Count) {
                                b = b.or(k.getItem(i));
                            } else {
                                a = a.or(b.not().and(n.getItem(i)).and(k.getItem(i).not()));
                                b = b.or(a.not().and(n.getItem(i).not()).and(k.getItem(i)));
                            }
                        }
                    }

                    return a.and(b.not());
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitVectors_ushort", {
        statics: {
            methods: {
                FromBitVector: function (n) {
                    var v = new (System.Collections.Generic.List$1(System.Int32))(16);
                    for (var i = 0; i < 16; i = (i + 1) | 0) {
                        var b = (1 << i) & 65535;
                        var m = 0;
                        for (var j = 0; j < n.Count; j = (j + 1) | 0) {
                            if ((b & n.getItem(j)) !== 0) {
                                m = (m + (1 << j)) | 0;
                            }
                        }

                        v.add(m);
                    }

                    return v;
                },
                ToBitVector: function (w) {
                    var v = System.Linq.Enumerable.from(w).toList(System.Int32);
                    var n = new (System.Collections.Generic.List$1(System.UInt16))();
                    while (true) {
                        var m = 0;
                        var zero = true;
                        for (var i = 0; i < v.Count; i = (i + 1) | 0) {
                            if (v.getItem(i) !== 0) {
                                zero = false;
                            }

                            if ((v.getItem(i) & 1) !== 0) {
                                m = (m | ((1 << i) & 65535)) & 65535;
                            }

                            v.setItem(i, v.getItem(i) >> 1);
                        }

                        n.add(m);

                        if (zero) {
                            break;
                        }
                    }

                    return n;
                },
                Increment: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & n.getItem(i)) & 65535;
                        var t2 = (m ^ n.getItem(i)) & 65535;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Decrement: function (n, m) {
                    var i = 0;
                    while (m !== 0) {
                        var t1 = (m & ~n.getItem(i)) & 65535;
                        var t2 = (m ^ n.getItem(i)) & 65535;

                        m = t1;
                        n.setItem(i, t2);

                        i = (i + 1) | 0;
                    }
                },
                Zeroes: function (n) {
                    var m = 0;
                    for (var i = 0; i < n.Count; i = (i + 1) | 0) {
                        m = (m | n.getItem(i)) & 65535;
                    }

                    return ((~m) & 65535);
                },
                GreaterThan: function (n, k) {
                    var a = 0;
                    var b = 0;
                    for (var i = (Math.max(n.Count, k.Count) - 1) | 0; i >= 0; i = (i - 1) | 0) {
                        if (i >= k.Count) {
                            a = (a | n.getItem(i)) & 65535;
                        } else {
                            if (i >= n.Count) {
                                b = (b | k.getItem(i)) & 65535;
                            } else {
                                a = (a | ((~b & n.getItem(i) & ~k.getItem(i)) & 65535)) & 65535;
                                b = (b | ((~a & ~n.getItem(i) & k.getItem(i)) & 65535)) & 65535;
                            }
                        }
                    }

                    return ((a & ~b) & 65535);
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.GraphChoosability_long", {
        statics: {
            methods: {
                IsFChoosable: function (graph, f, badAssignment) {
                    var $step = 0,
                        $jumpFromFinally, 
                        liveVertexBits, 
                        sizes, 
                        maxListSize, 
                        potSize, 
                        $t, 
                        colorGraph, 
                        xx, 
                        i, 
                        i1, 
                        j, 
                        $t1, 
                        color, 
                        $t2, 
                        v, 
                        list, 
                        bit, 
                        i2, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,18,20,21,22,23,24,25,27,28,30,31], $step);
                                switch ($step) {
                                    case 0: {
                                        badAssignment.v = null;

                                        liveVertexBits = BitLevelGeneration.BitUsage_long.To_long(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_long$N));
                                        sizes = System.Linq.Enumerable.from(graph.BitLevelGeneration$IGraph_long$Vertices).select(function (v) {
                                            return f(v);
                                        }).toList(System.Int32);
                                        maxListSize = System.Linq.Enumerable.from(sizes).max();

                                        potSize = maxListSize;
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( potSize < graph.BitLevelGeneration$IGraph_long$N ) {
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 31;
                                        continue;
                                    }
                                    case 2: {
                                        $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_long.Enumerate(sizes, potSize), System.Array.type(System.Int64));
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        if ($t.moveNext()) {
                                            colorGraph = $t.Current;
                                            $step = 4;
                                            continue;
                                        }
                                        $step = 29;
                                        continue;
                                    }
                                    case 4: {
                                        if (potSize > maxListSize) {
                                            $step = 5;
                                            continue;
                                        } 
                                        $step = 27;
                                        continue;
                                    }
                                    case 5: {
                                        xx = System.Int64(0);
                                        i = 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        if ( i < colorGraph.length ) {
                                            $step = 7;
                                            continue;
                                        }
                                        $step = 11;
                                        continue;
                                    }
                                    case 7: {
                                        xx = xx.or(colorGraph[System.Array.index(i, colorGraph)]);

                                        if (BitLevelGeneration.BitUsage_long.PopulationCount(xx) <= ((i + 1) | 0)) {
                                            $step = 8;
                                            continue;
                                        } 
                                        $step = 9;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 10: {
                                        i = (i + 1) | 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 11: {
                                        i1 = 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {
                                        if ( i1 < colorGraph.length ) {
                                            $step = 13;
                                            continue;
                                        }
                                        $step = 21;
                                        continue;
                                    }
                                    case 13: {
                                        j = (i1 + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }
                                    case 14: {
                                        if ( j < colorGraph.length ) {
                                            $step = 15;
                                            continue;
                                        }
                                        $step = 19;
                                        continue;
                                    }
                                    case 15: {
                                        if ((colorGraph[System.Array.index(i1, colorGraph)].and(colorGraph[System.Array.index(j, colorGraph)])).equals(System.Int64(0))) {
                                            $step = 16;
                                            continue;
                                        } 
                                        $step = 17;
                                        continue;
                                    }
                                    case 16: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 18: {
                                        j = (j + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }

                                    case 20: {
                                        i1 = (i1 + 1) | 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 21: {
                                        $t1 = Bridge.getEnumerator(colorGraph);
                                        $step = 22;
                                        continue;
                                    }
                                    case 22: {
                                        if ($t1.moveNext()) {
                                            color = $t1.Current;
                                            $step = 23;
                                            continue;
                                        }
                                        $step = 26;
                                        continue;
                                    }
                                    case 23: {
                                        if (graph.BitLevelGeneration$IGraph_long$IsIndependent(color)) {
                                            $step = 24;
                                            continue;
                                        } 
                                        $step = 25;
                                        continue;
                                    }
                                    case 24: {
                                        $step = 28;
                                        continue;
                                    }
                                    case 25: {
                                        $step = 22;
                                        continue;
                                    }

                                    case 27: {
                                        if (!BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, liveVertexBits, System.Int64(0))) {
                                            badAssignment.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                            $t2 = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_long$Vertices, System.Int32);
                                            try {
                                                while ($t2.moveNext()) {
                                                    v = $t2.Current;
                                                    list = new (System.Collections.Generic.List$1(System.Int32))();
                                                    bit = System.Int64(1).shl(v);
                                                    for (i2 = 0; i2 < colorGraph.length; i2 = (i2 + 1) | 0) {
                                                        if ((bit.and(colorGraph[System.Array.index(i2, colorGraph)])).ne(System.Int64(0))) {
                                                            list.add(i2);
                                                        }
                                                    }

                                                    badAssignment.v.add(list);
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            return false;
                                        }
                                    }
                                    case 28: {
                                        ;
                                        $step = 3;
                                        continue;
                                    }

                                    case 30: {
                                        potSize = (potSize + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 31: {
                                        return true;
                                    }
                                    default: {
                                        return;
                                    }
                                }
                            }
                        }, arguments);

                    return $asyncBody();
                },
                IsChoosable: function (graph, colorGraph) {
                    return BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, BitLevelGeneration.BitUsage_long.To_long(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_long$N)), System.Int64(0));
                },
                IsChoosable$1: function (graph, colorGraph, subset) {
                    return BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, subset, System.Int64(0));
                },
                IsChoosable$2: function (graph, colorGraph, liveVertexBits, c) {
                    var $t;
                    liveVertexBits = {v:liveVertexBits};
                    BitLevelGeneration.GraphChoosability_long.BeGreedy(graph, colorGraph, liveVertexBits, c);
                    if (liveVertexBits.v.equals(System.Int64(0))) {
                        return true;
                    }
                    if ((liveVertexBits.v.and(BitLevelGeneration.BitUsage_long.Or(colorGraph, c).not())).ne(System.Int64(0))) {
                        return false;
                    }

                    var choosable = false;
                    var V = colorGraph[System.Array.index(c, colorGraph)].and(liveVertexBits.v);
                    $t = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_long$MaximalIndependentSubsets(V), System.Int64);
                    try {
                        while ($t.moveNext()) {
                            var C = $t.Current;
                            if (BitLevelGeneration.GraphChoosability_long.IsChoosable$2(graph, colorGraph, liveVertexBits.v.xor(C), System.Int64(c + 1))) {
                                choosable = true;
                                break;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return choosable;
                },
                BeGreedy: function (graph, colorGraph, liveVertexBits, c) {
                    while (true) {
                        var originalBits = liveVertexBits.v;
                        var bits = liveVertexBits.v;
                        while (bits.ne(System.Int64(0))) {
                            var bit = bits.and(bits.neg());
                            bits = bits.xor(bit);

                            var colorCount = 0;
                            for (var i = c; i < colorGraph.length; i = (i + 1) | 0) {
                                if ((bit.and(colorGraph[System.Array.index(i, colorGraph)])).ne(System.Int64(0))) {
                                    colorCount = (colorCount + 1) | 0;
                                }
                            }

                            if (colorCount > graph.BitLevelGeneration$IGraph_long$DegreeInSet(BitLevelGeneration.BitUsage_long.Extract(bit), liveVertexBits.v)) {
                                liveVertexBits.v = liveVertexBits.v.xor(bit);
                            }
                        }

                        if (liveVertexBits.v.equals(originalBits)) {
                            break;
                        }
                    }
                },
                IsSubsetTwoColorable: function (g, set) {
                    var c = System.Array.init(g.N, 0, System.Int32);
                    var q = System.Array.init(g.N, 0, System.Int32);

                    var leftover = set;
                    var s = 0;
                    while (leftover.ne(System.Int64(0))) {
                        var r = BitLevelGeneration.BitUsage_long.LeastSignificantBit(leftover);
                        q[System.Array.index(s, q)] = r;
                        c[System.Array.index(r, c)] = 1;
                        var e = s;

                        while (s <= e) {
                            var v = q[System.Array.index(Bridge.identity(s, (s = (s + 1) | 0)), q)];
                            var n = g.NeighborsInSet(v, set);

                            while (n.ne(System.Int64(0))) {
                                var bit = n.and(n.neg());
                                var w = BitLevelGeneration.BitUsage_long.Extract(bit);

                                if (c[System.Array.index(w, c)] === 0) {
                                    q[System.Array.index(((e = (e + 1) | 0)), q)] = w;
                                    c[System.Array.index(w, c)] = (3 - c[System.Array.index(v, c)]) | 0;
                                } else if (c[System.Array.index(w, c)] !== ((3 - c[System.Array.index(v, c)]) | 0)) {
                                    return false;
                                }

                                n = n.xor(bit);
                            }

                            leftover = leftover.xor((System.Int64(1).shl(v)));
                        }
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.GraphChoosability_uint", {
        statics: {
            methods: {
                IsFChoosable: function (graph, f, badAssignment) {
                    var nodesVisited = { }, cacheHits = { };
                    return BitLevelGeneration.GraphChoosability_uint.IsFChoosable$1(graph, f, badAssignment, nodesVisited, cacheHits);
                },
                IsFChoosable$1: function (graph, f, badAssignment, nodesVisited, cacheHits) {
                    var $step = 0,
                        $jumpFromFinally, 
                        liveVertexBits, 
                        sizes, 
                        maxListSize, 
                        potSize, 
                        cache, 
                        $t, 
                        colorGraph, 
                        xx, 
                        i, 
                        i1, 
                        j, 
                        $t1, 
                        color, 
                        $t2, 
                        v, 
                        list, 
                        bit, 
                        i2, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,10,11,12,13,14,15,16,18,20,21,22,23,24,25,27,28,30,31], $step);
                                switch ($step) {
                                    case 0: {
                                        badAssignment.v = null;

                                        nodesVisited.v = System.Int64(0);
                                        cacheHits.v = System.Int64(0);
                                        liveVertexBits = BitLevelGeneration.BitUsage_uint.To_uint(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_uint$N));
                                        sizes = System.Linq.Enumerable.from(graph.BitLevelGeneration$IGraph_uint$Vertices).select(function (v) {
                                            return f(v);
                                        }).toList(System.Int32);
                                        maxListSize = System.Linq.Enumerable.from(sizes).max();

                                        potSize = maxListSize;
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( potSize < graph.BitLevelGeneration$IGraph_uint$N ) {
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 31;
                                        continue;
                                    }
                                    case 2: {
                                        //var cache = new Dictionary<BitLevelGeneration.HashedAssignment_uint, bool>();
                                        cache = null;

                                        $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_uint.Enumerate(sizes, potSize), System.Array.type(System.UInt32));
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        if ($t.moveNext()) {
                                            colorGraph = $t.Current;
                                            $step = 4;
                                            continue;
                                        }
                                        $step = 29;
                                        continue;
                                    }
                                    case 4: {
                                        if (potSize > maxListSize) {
                                            $step = 5;
                                            continue;
                                        } 
                                        $step = 27;
                                        continue;
                                    }
                                    case 5: {
                                        xx = 0;
                                        i = 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 6: {
                                        if ( i < colorGraph.length ) {
                                            $step = 7;
                                            continue;
                                        }
                                        $step = 11;
                                        continue;
                                    }
                                    case 7: {
                                        xx = (xx | colorGraph[System.Array.index(i, colorGraph)]) >>> 0;

                                        if (BitLevelGeneration.BitUsage_uint.PopulationCount(xx) <= ((i + 1) | 0)) {
                                            $step = 8;
                                            continue;
                                        } 
                                        $step = 9;
                                        continue;
                                    }
                                    case 8: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 10: {
                                        i = (i + 1) | 0;
                                        $step = 6;
                                        continue;
                                    }
                                    case 11: {
                                        i1 = 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {
                                        if ( i1 < colorGraph.length ) {
                                            $step = 13;
                                            continue;
                                        }
                                        $step = 21;
                                        continue;
                                    }
                                    case 13: {
                                        j = (i1 + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }
                                    case 14: {
                                        if ( j < colorGraph.length ) {
                                            $step = 15;
                                            continue;
                                        }
                                        $step = 19;
                                        continue;
                                    }
                                    case 15: {
                                        if ((((colorGraph[System.Array.index(i1, colorGraph)] & colorGraph[System.Array.index(j, colorGraph)]) >>> 0)) === 0) {
                                            $step = 16;
                                            continue;
                                        } 
                                        $step = 17;
                                        continue;
                                    }
                                    case 16: {
                                        $step = 28;
                                        continue;
                                    }

                                    case 18: {
                                        j = (j + 1) | 0;
                                        $step = 14;
                                        continue;
                                    }

                                    case 20: {
                                        i1 = (i1 + 1) | 0;
                                        $step = 12;
                                        continue;
                                    }
                                    case 21: {
                                        $t1 = Bridge.getEnumerator(colorGraph);
                                        $step = 22;
                                        continue;
                                    }
                                    case 22: {
                                        if ($t1.moveNext()) {
                                            color = $t1.Current;
                                            $step = 23;
                                            continue;
                                        }
                                        $step = 26;
                                        continue;
                                    }
                                    case 23: {
                                        if (graph.BitLevelGeneration$IGraph_uint$IsIndependent(color)) {
                                            $step = 24;
                                            continue;
                                        } 
                                        $step = 25;
                                        continue;
                                    }
                                    case 24: {
                                        $step = 28;
                                        continue;
                                    }
                                    case 25: {
                                        $step = 22;
                                        continue;
                                    }

                                    case 27: {
                                        if (!BitLevelGeneration.GraphChoosability_uint.IsChoosable$2(graph, colorGraph, liveVertexBits, 0, cache, nodesVisited, cacheHits)) {
                                            badAssignment.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                                            $t2 = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_uint$Vertices, System.Int32);
                                            try {
                                                while ($t2.moveNext()) {
                                                    v = $t2.Current;
                                                    list = new (System.Collections.Generic.List$1(System.Int32))();
                                                    bit = (1 << v) >>> 0;
                                                    for (i2 = 0; i2 < colorGraph.length; i2 = (i2 + 1) | 0) {
                                                        if ((((bit & colorGraph[System.Array.index(i2, colorGraph)]) >>> 0)) !== 0) {
                                                            list.add(i2);
                                                        }
                                                    }

                                                    badAssignment.v.add(list);
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            return false;
                                        }
                                    }
                                    case 28: {
                                        ;
                                        $step = 3;
                                        continue;
                                    }

                                    case 30: {
                                        potSize = (potSize + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 31: {
                                        return true;
                                    }
                                    default: {
                                        return;
                                    }
                                }
                            }
                        }, arguments);

                    return $asyncBody();
                },
                IsChoosable: function (graph, colorGraph) {
                    var nodesVisited = { }, cacheHits = { };
                    return BitLevelGeneration.GraphChoosability_uint.IsChoosable$1(graph, colorGraph, nodesVisited, cacheHits);
                },
                IsChoosable$1: function (graph, colorGraph, nodesVisited, cacheHits) {
                    nodesVisited.v = System.Int64(0);
                    cacheHits.v = System.Int64(0);
                    //var cache = new Dictionary<BitLevelGeneration.HashedAssignment_uint, bool>();
                    var cache = null;

                    return BitLevelGeneration.GraphChoosability_uint.IsChoosable$2(graph, colorGraph, BitLevelGeneration.BitUsage_uint.To_uint(System.Linq.Enumerable.range(0, graph.BitLevelGeneration$IGraph_uint$N)), 0, cache, nodesVisited, cacheHits);
                },
                IsChoosable$2: function (graph, colorGraph, liveVertexBits, c, cache, nodesVisited, cacheHits) {
                    var $t;
                    liveVertexBits = {v:liveVertexBits};
                    nodesVisited.v = nodesVisited.v.inc();

                    BitLevelGeneration.GraphChoosability_uint.BeGreedy(graph, colorGraph, liveVertexBits, c);
                    if (liveVertexBits.v === 0) {
                        return true;
                    }
                    if ((((liveVertexBits.v & ~BitLevelGeneration.BitUsage_uint.Or(colorGraph, c)) >>> 0)) !== 0) {
                        return false;
                    }

                    //bool cachedResult;
                    //var key = new BitLevelGeneration.HashedAssignment_uint(colorGraph, c, liveVertexBits);
                    //if (cache.TryGetValue(key, out cachedResult))
                    //{
                    //    cacheHits++;
                    //    return cachedResult;
                    //}

                    var choosable = false;
                    var V = (colorGraph[System.Array.index(c, colorGraph)] & liveVertexBits.v) >>> 0;
                    $t = Bridge.getEnumerator(graph.BitLevelGeneration$IGraph_uint$MaximalIndependentSubsets(V), System.UInt32);
                    try {
                        while ($t.moveNext()) {
                            var C = $t.Current;
                            if (BitLevelGeneration.GraphChoosability_uint.IsChoosable$2(graph, colorGraph, ((liveVertexBits.v ^ C) >>> 0), ((c + 1) | 0), cache, nodesVisited, cacheHits)) {
                                choosable = true;
                                break;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    //cache[key] = choosable;
                    return choosable;
                },
                BeGreedy: function (graph, colorGraph, liveVertexBits, c) {
                    while (true) {
                        var originalBits = liveVertexBits.v;
                        var bits = liveVertexBits.v;
                        while (bits !== 0) {
                            var bit = (bits & (((~bits + 1) >>> 0))) >>> 0;
                            bits = (bits ^ bit) >>> 0;

                            var colorCount = 0;
                            for (var i = c; i < colorGraph.length; i = (i + 1) | 0) {
                                if ((((bit & colorGraph[System.Array.index(i, colorGraph)]) >>> 0)) !== 0) {
                                    colorCount = (colorCount + 1) | 0;
                                }
                            }

                            if (colorCount > graph.BitLevelGeneration$IGraph_uint$DegreeInSet(BitLevelGeneration.BitUsage_uint.Extract(bit), liveVertexBits.v)) {
                                liveVertexBits.v = (liveVertexBits.v ^ bit) >>> 0;
                            }
                        }

                        if (liveVertexBits.v === originalBits) {
                            break;
                        }
                    }
                }
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_byte", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), 0, System.Byte);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = (assignment[System.Array.index(i, assignment)] & on) & 255;
                    if (x !== 0) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = System.UInt64(list[System.Array.index(i, list)]).add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_byte));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)] !== other._assignment[System.Array.index(i, other._assignment)]) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_uint", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), 0, System.UInt32);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = ((assignment[System.Array.index(i, assignment)] & on) >>> 0);
                    if (x !== 0) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = System.UInt64(list[System.Array.index(i, list)]).add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_uint));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)] !== other._assignment[System.Array.index(i, other._assignment)]) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_ulong", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), System.UInt64(0), System.UInt64);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = assignment[System.Array.index(i, assignment)].and(on);
                    if (x.ne(System.UInt64(0))) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = list[System.Array.index(i, list)].add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_ulong));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)].ne(other._assignment[System.Array.index(i, other._assignment)])) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.HashedAssignment_ushort", {
        fields: {
            _assignment: null,
            _length: 0,
            _hashCode: 0
        },
        ctors: {
            ctor: function (assignment, index, on) {
                this.$initialize();
                this._assignment = System.Array.init(((assignment.length - index) | 0), 0, System.UInt16);
                this._length = 0;

                for (var i = index; i < assignment.length; i = (i + 1) | 0) {
                    var x = (assignment[System.Array.index(i, assignment)] & on) & 65535;
                    if (x !== 0) {
                        this._assignment[System.Array.index(this._length, this._assignment)] = x;
                        this._length = (this._length + 1) | 0;
                    }
                }

                System.Array.sort(this._assignment, 0, this._length);

                this._hashCode = this.Hash(this._assignment, this._length);
            }
        },
        methods: {
            Hash: function (list, length) {
                var hash = System.UInt64(5381);
                for (var i = 0; i < length; i = (i + 1) | 0) {
                    hash = System.UInt64(list[System.Array.index(i, list)]).add((hash.shl(5))).add(hash);
                }

                return System.Int64.clip32(hash);
            },
            equals: function (obj) {
                return this.Equals(Bridge.as(obj, BitLevelGeneration.HashedAssignment_ushort));
            },
            Equals: function (other) {
                if (other == null || this._length !== other._length) {
                    return false;
                }

                for (var i = 0; i < this._length; i = (i + 1) | 0) {
                    if (this._assignment[System.Array.index(i, this._assignment)] !== other._assignment[System.Array.index(i, other._assignment)]) {
                        return false;
                    }
                }

                return true;
            },
            getHashCode: function () {
                return this._hashCode;
            }
        }
    });

    Bridge.define("BitLevelGeneration.MaximalndependentSetSearching", {
        statics: {
            methods: {
                GenerateMaximalIndependentSubsets: function (g, set) {
                    var d = System.Array.init(64, 0, System.Int32);

                    var n = BitLevelGeneration.BitUsage_long.PopulationCountDense(set);
                    var D = System.Array.init(n, System.Int64(0), System.Int64);

                    var q = set;
                    while (q.ne(System.Int64(0))) {
                        var bit = q.and(q.neg());
                        var v = BitLevelGeneration.BitUsage_long.Extract(bit);

                        d[System.Array.index(v, d)] = g.DegreeInSet(v, set);
                        D[System.Array.index(d[System.Array.index(v, d)], D)] = D[System.Array.index(d[System.Array.index(v, d)], D)].or(bit);

                        q = q.xor(bit);
                    }

                    var bits = System.Array.init(n, System.Int64(0), System.Int64);
                    for (var i = 0; i < n; i = (i + 1) | 0) {
                        for (var j = 0; j < n; j = (j + 1) | 0) {
                            if (D[System.Array.index(j, D)].ne(System.Int64(0))) {
                                var bit1 = D[System.Array.index(j, D)].and(D[System.Array.index(j, D)].neg());
                                bits[System.Array.index(((((n - 1) | 0) - i) | 0), bits)] = bit1;

                                var v1 = BitLevelGeneration.BitUsage_long.Extract(bit1);
                                q = g.NeighborsInSet(v1, set);

                                while (q.ne(System.Int64(0))) {
                                    var b = q.and(q.neg());
                                    var x = BitLevelGeneration.BitUsage_long.Extract(b);

                                    D[System.Array.index(d[System.Array.index(x, d)], D)] = D[System.Array.index(d[System.Array.index(x, d)], D)].xor(b);
                                    d[System.Array.index(x, d)] = (d[System.Array.index(x, d)] - 1) | 0;
                                    D[System.Array.index(d[System.Array.index(x, d)], D)] = D[System.Array.index(d[System.Array.index(x, d)], D)].or(b);

                                    q = q.xor(b);
                                }

                                set = set.xor(bit1);
                                D[System.Array.index(j, D)] = D[System.Array.index(j, D)].xor(bit1);
                                break;
                            }
                        }
                    }

                    return BitLevelGeneration.MaximalndependentSetSearching.GenerateMaximalIndependentSubsets$1(g, bits);
                },
                GenerateMaximalIndependentSubsets$1: function (g, bits) {
                    var $step = 0,
                        $jumpFromFinally, 
                        mis, 
                        earlier, 
                        j, 
                        bit, 
                        v, 
                        count, 
                        i, 
                        m, 
                        N, 
                        mp, 
                        mpp, 
                        q, 
                        l, 
                        b, 
                        w, 
                        qq, 
                        bb, 
                        z, 
                        X, 
                        b1, 
                        w1, 
                        Z, 
                        mm, 
                        b2, 
                        w2, 
                        qq1, 
                        bb1, 
                        z1, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            for (;;) {
                                $step = System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,28,29,31,32,33,34], $step);
                                switch ($step) {
                                    case 0: {
                                        mis = new (System.Collections.Generic.List$1(System.Int64))(8);
                                        mis.add(System.Int64(0));

                                        earlier = System.Int64(0);
                                        j = 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 1: {
                                        if ( j < bits.length ) {
                                            $step = 2;
                                            continue;
                                        }
                                        $step = 34;
                                        continue;
                                    }
                                    case 2: {
                                        bit = bits[System.Array.index(j, bits)];
                                        v = BitLevelGeneration.BitUsage_long.Extract(bit);

                                        count = mis.Count;
                                        i = 0;
                                        $step = 3;
                                        continue;
                                    }
                                    case 3: {
                                        if ( i < count ) {
                                            $step = 4;
                                            continue;
                                        }
                                        $step = 32;
                                        continue;
                                    }
                                    case 4: {
                                        m = mis.getItem(i);
                                        N = g.NeighborsInSet(v, m);
                                        if (N.equals(System.Int64(0))) {
                                            $step = 5;
                                            continue;
                                        } else  {
                                            $step = 6;
                                            continue;
                                        }
                                    }
                                    case 5: {
                                        mis.setItem(i, mis.getItem(i).or(bit));
                                        $step = 30;
                                        continue;
                                    }
                                    case 6: {
                                        mp = m.and(N.not());
                                        mpp = mp.or(bit);
                                        q = N;
                                        l = earlier.and(mpp.not());

                                        
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        if ( q.ne(System.Int64(0)) ) {
                                            $step = 8;
                                            continue;
                                        } 
                                        $step = 14;
                                        continue;
                                    }
                                    case 8: {
                                        b = q.and(q.neg());
                                        w = BitLevelGeneration.BitUsage_long.Extract(b);

                                        qq = g.NeighborsInSet(w, l);
                                        
                                        $step = 9;
                                        continue;
                                    }
                                    case 9: {
                                        if ( qq.ne(System.Int64(0)) ) {
                                            $step = 10;
                                            continue;
                                        } 
                                        $step = 13;
                                        continue;
                                    }
                                    case 10: {
                                        bb = qq.and(qq.neg());
                                        z = BitLevelGeneration.BitUsage_long.Extract(bb);

                                        if (g.NeighborsInSet(z, mpp).equals(System.Int64(0))) {
                                            $step = 11;
                                            continue;
                                        } 
                                        $step = 12;
                                        continue;
                                    }
                                    case 11: {
                                        $step = 29;
                                        continue;
                                    }
                                    case 12: {
                                        qq = qq.xor(bb);

                                        $step = 9;
                                        continue;
                                    }
                                    case 13: {
                                        q = q.xor(b);

                                        $step = 7;
                                        continue;
                                    }
                                    case 14: {
                                        X = g.NeighborsInSet(v, earlier);
                                        q = X.and(N.not());

                                        while (q.ne(System.Int64(0))) {
                                            b1 = q.and(q.neg());
                                            w1 = BitLevelGeneration.BitUsage_long.Extract(b1);

                                            if (g.NeighborsInSet(w1, mp).ne(System.Int64(0))) {
                                                X = X.xor(b1);
                                            }
                                            q = q.xor(b1);
                                        }

                                        if (X.ne(N)) {
                                            $step = 15;
                                            continue;
                                        } 
                                        $step = 28;
                                        continue;
                                    }
                                    case 15: {
                                        Z = System.Int64(0);
                                        
                                        $step = 16;
                                        continue;
                                    }
                                    case 16: {
                                        if ( Z.lt(N) ) {
                                            $step = 17;
                                            continue;
                                        } 
                                        $step = 27;
                                        continue;
                                    }
                                    case 17: {
                                        Z = (Z.sub(X)).and(X);

                                        if ((Z.and(N)).equals(Z)) {
                                            $step = 16;
                                            continue;
                                        }

                                        if (!g.IsIndependent(Z)) {
                                            $step = 16;
                                            continue;
                                        }

                                        mm = mp.or(Z);
                                        l = earlier.and(mm.not());
                                        q = N.and(Z.not());

                                        
                                        $step = 18;
                                        continue;
                                    }
                                    case 18: {
                                        if ( q.ne(System.Int64(0)) ) {
                                            $step = 19;
                                            continue;
                                        } 
                                        $step = 25;
                                        continue;
                                    }
                                    case 19: {
                                        b2 = q.and(q.neg());
                                        w2 = BitLevelGeneration.BitUsage_long.Extract(b2);

                                        qq1 = g.NeighborsInSet(w2, l);
                                        
                                        $step = 20;
                                        continue;
                                    }
                                    case 20: {
                                        if ( qq1.ne(System.Int64(0)) ) {
                                            $step = 21;
                                            continue;
                                        } 
                                        $step = 24;
                                        continue;
                                    }
                                    case 21: {
                                        bb1 = qq1.and(qq1.neg());
                                        z1 = BitLevelGeneration.BitUsage_long.Extract(bb1);

                                        if (g.NeighborsInSet(z1, mm).equals(System.Int64(0))) {
                                            $step = 22;
                                            continue;
                                        } 
                                        $step = 23;
                                        continue;
                                    }
                                    case 22: {
                                        $step = 26;
                                        continue;
                                    }
                                    case 23: {
                                        qq1 = qq1.xor(bb1);

                                        $step = 20;
                                        continue;
                                    }
                                    case 24: {
                                        q = q.xor(b2);

                                        $step = 18;
                                        continue;
                                    }
                                    case 25: {
                                        $step = 29;
                                        continue;
                                    }
                                    case 26: {
                                        ;

                                        $step = 16;
                                        continue;
                                    }

                                    case 28: {
                                        mis.add((m.or(bit)).and(N.not()));
                                    }
                                    case 29: {
                                        ;
                                        $step = 30;
                                        continue;
                                    }

                                    case 31: {
                                        i = (i + 1) | 0;
                                        $step = 3;
                                        continue;
                                    }
                                    case 32: {
                                        earlier = earlier.or(bit);
                                        $step = 33;
                                        continue;
                                    }
                                    case 33: {
                                        j = (j + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 34: {
                                        return mis;
                                    }
                                    default: {
                                        return;
                                    }
                                }
                            }
                        }, arguments);

                    return $asyncBody();
                },
                LexicographicallyFirstContaining: function (g, set, S) {
                    set = set.xor(S);
                    while (set.ne(System.Int64(0))) {
                        var bit = set.and(set.neg());
                        var v = BitLevelGeneration.BitUsage_long.Extract(bit);

                        if (g.NeighborsInSet(v, S).equals(System.Int64(0))) {
                            S = S.or(bit);
                        }

                        set = set.xor(bit);
                    }

                    return S;
                },
                Parent: function (g, set, LFMIS, S) {
                    var a = LFMIS.and(S.not());
                    var bit = a.and(a.neg());
                    var v = BitLevelGeneration.BitUsage_long.Extract(bit);
                    var N = g.NeighborsInSet(v, S);

                    return BitLevelGeneration.MaximalndependentSetSearching.LexicographicallyFirstContaining(g, set, (S.or(bit)).xor(N));
                },
                Later: function (g, set, LFMIS, v) {
                    var q = g.NeighborsInSet(v, set.xor(LFMIS));

                    var earlier = ((System.Int64(1).shl(v)).sub(System.Int64(1))).and(LFMIS);
                    var later = System.Int64(0);
                    while (set.ne(System.Int64(0))) {
                        var bit = q.and(q.neg());
                        var w = BitLevelGeneration.BitUsage_long.Extract(bit);

                        if (g.NeighborsInSet(w, earlier).equals(System.Int64(0))) {
                            later = later.or(bit);
                        }

                        q = q.xor(bit);
                    }

                    return later;
                }
            }
        }
    });

    Bridge.define("GraphicsLayer.ARGB", {
        statics: {
            methods: {
                BasicPalette: function (q) {
                    if (q === -1) {
                        return new GraphicsLayer.ARGB.ctor(255, 255, 255);
                    }

                    return GraphicsLayer.ARGB.FromHSL(0.6 + GraphicsLayer.ARGB.ReverseBits((q >>> 0)) / Math.pow(2.0, 32), 1.0, 0.65);
                },
                FromFractional: function (a, r, g, b) {
                    return new GraphicsLayer.ARGB.$ctor1(Bridge.Int.clip32(a * 255), Bridge.Int.clip32(r * 255), Bridge.Int.clip32(g * 255), Bridge.Int.clip32(b * 255));
                },
                FromHSL: function (h, s, l) {
                    while (h > 1.0) {
                        h -= 1.0;
                    }
                    while (s > 1.0) {
                        s -= 1.0;
                    }
                    while (l > 1.0) {
                        l -= 1.0;
                    }

                    if (s === 0.0) {
                        return GraphicsLayer.ARGB.FromFractional(1.0, l, l, l);
                    }

                    var q = l < 0.5 ? l * (1.0 + s) : l + s - l * s;
                    var p = 2.0 * l - q;
                    var r = GraphicsLayer.ARGB.HueToRgb(p, q, h + 0.33333333333333331);
                    var g = GraphicsLayer.ARGB.HueToRgb(p, q, h);
                    var b = GraphicsLayer.ARGB.HueToRgb(p, q, h - 0.33333333333333331);

                    return GraphicsLayer.ARGB.FromFractional(1.0, r, g, b);
                },
                HueToRgb: function (p, q, t) {
                    if (t < 0.0) {
                        t += 1.0;
                    }
                    if (t > 1.0) {
                        t -= 1.0;
                    }
                    if (t < 0.16666666666666666) {
                        return p + (q - p) * 6.0 * t;
                    }
                    if (t < 0.5) {
                        return q;
                    }
                    if (t < 0.66666666666666663) {
                        return p + (q - p) * (0.66666666666666663 - t) * 6.0;
                    }
                    return p;
                },
                ReverseBits: function (x) {
                    var y = 0;
                    for (var i = 0; i < 32; i = (i + 1) | 0) {
                        y = (y | System.Int64.clipu32((System.Int64(x).and(System.Int64((1 << i)))).shl((((31 - Bridge.Int.mul(2, i)) | 0))))) >>> 0;
                    }

                    return y;
                }
            }
        },
        props: {
            A: 0,
            R: 0,
            G: 0,
            B: 0
        },
        ctors: {
            $ctor1: function (a, r, g, b) {
                this.$initialize();
                this.A = a;
                this.R = r;
                this.G = g;
                this.B = b;
            },
            ctor: function (r, g, b) {
                GraphicsLayer.ARGB.$ctor1.call(this, 255, r, g, b);
            }
        },
        methods: {
            toString: function () {
                return System.String.format("{0},{1},{2},{3}", Bridge.box(this.A, System.Int32), Bridge.box(this.R, System.Int32), Bridge.box(this.G, System.Int32), Bridge.box(this.B, System.Int32));
            }
        }
    });

    Bridge.define("GraphicsLayer.Box", {
        statics: {
            fields: {
                Empty: null
            },
            ctors: {
                init: function () {
                    this.Empty = new GraphicsLayer.Box.ctor(0, 0);
                }
            }
        },
        props: {
            Top: 0,
            Left: 0,
            Width: 0,
            Height: 0,
            X: {
                get: function () {
                    return this.Left;
                }
            },
            Y: {
                get: function () {
                    return this.Top;
                }
            },
            Right: {
                get: function () {
                    return this.Left + this.Width;
                }
            },
            Bottom: {
                get: function () {
                    return this.Top + this.Height;
                }
            }
        },
        ctors: {
            ctor: function (left, top) {
                this.$initialize();
                this.Left = left;
                this.Top = top;
            },
            $ctor1: function (left, top, width, height) {
                this.$initialize();
                this.Left = left;
                this.Top = top;
                this.Width = width;
                this.Height = height;
            }
        },
        methods: {
            Inflate: function (x, y) {
                this.Left -= x;
                this.Top -= y;
                this.Width += 2 * x;
                this.Height += 2 * y;
            },
            Contains$1: function (x, y) {
                return this.Left <= x && x <= this.Right && this.Top <= y && y <= this.Bottom;
            },
            Contains: function (box) {
                return this.Left <= box.Left && box.Right <= this.Right && this.Top <= box.Top && box.Bottom <= this.Bottom;
            }
        }
    });

    Bridge.define("GraphicsLayer.Font", {
        props: {
            Name: null,
            Size: 0
        },
        ctors: {
            ctor: function (name, size) {
                this.$initialize();
                this.Name = name;
                this.Size = size;
            }
        }
    });

    Bridge.define("GraphicsLayer.IProduceMouseEvents", {
        $kind: "interface"
    });

    Bridge.define("GraphicsLayer.IGraphics", {
        $kind: "interface"
    });

    Bridge.define("GraphicsLayer.IPaintable", {
        $kind: "interface"
    });

    Bridge.define("GraphicsLayer.MouseButton", {
        $kind: "enum",
        statics: {
            fields: {
                Left: 0,
                Middle: 1,
                Right: 2
            }
        }
    });

    Bridge.define("Graphs.Ascii85", {
        statics: {
            fields: {
                _asciiOffset: 0
            },
            ctors: {
                init: function () {
                    this._asciiOffset = 33;
                }
            }
        },
        fields: {
            
            PrefixMark: null,
            /**
             * Suffix mark that identifies an encoded ASCII85 string, traditionally '~&gt;'
             *
             * @instance
             * @public
             * @memberof Graphs.Ascii85
             * @default ""
             * @type string
             */
            SuffixMark: null,
            /**
             * Maximum line length for encoded ASCII85 string; 
             set to zero for one unbroken line.
             *
             * @instance
             * @public
             * @memberof Graphs.Ascii85
             * @default 0
             * @type number
             */
            LineLength: 0,
            /**
             * Add the Prefix and Suffix marks when encoding, and enforce their presence for decoding
             *
             * @instance
             * @public
             * @memberof Graphs.Ascii85
             * @default false
             * @type boolean
             */
            EnforceMarks: false,
            _encodedBlock: null,
            _decodedBlock: null,
            _tuple: 0,
            _linePos: 0,
            pow85: null
        },
        ctors: {
            init: function () {
                this.PrefixMark = "";
                this.SuffixMark = "";
                this.LineLength = 0;
                this.EnforceMarks = false;
                this._encodedBlock = System.Array.init(5, 0, System.Byte);
                this._decodedBlock = System.Array.init(4, 0, System.Byte);
                this._tuple = 0;
                this._linePos = 0;
                this.pow85 = System.Array.init([
                    52200625, 
                    614125, 
                    7225, 
                    85, 
                    1
                ], System.UInt32);
            }
        },
        methods: {
            /**
             * Decodes an ASCII85 encoded string into the original binary data
             *
             * @instance
             * @public
             * @this Graphs.Ascii85
             * @memberof Graphs.Ascii85
             * @param   {string}            s    ASCII85 encoded string
             * @return  {Array.<number>}         byte array of decoded binary data
             */
            Decode: function (s) {
                var $t;
                if (this.EnforceMarks) {
                    if (!!(!System.String.startsWith(s, this.PrefixMark) | !System.String.endsWith(s, this.SuffixMark))) {
                        throw new System.Exception(System.String.concat("ASCII85 encoded data should begin with '", this.PrefixMark, "' and end with '", this.SuffixMark, "'"));
                    }
                }

                // strip prefix and suffix if present
                if (System.String.startsWith(s, this.PrefixMark)) {
                    s = s.substr(this.PrefixMark.length);
                }
                if (System.String.endsWith(s, this.SuffixMark)) {
                    s = s.substr(0, ((s.length - this.SuffixMark.length) | 0));
                }

                var ms = new (System.Collections.Generic.List$1(System.Byte))();
                var count = 0;
                var processChar = false;

                $t = Bridge.getEnumerator(s);
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        switch (c) {
                            case 122: 
                                if (count !== 0) {
                                    throw new System.Exception("The character 'z' is invalid inside an ASCII85 block.");
                                }
                                this._decodedBlock[System.Array.index(0, this._decodedBlock)] = 0;
                                this._decodedBlock[System.Array.index(1, this._decodedBlock)] = 0;
                                this._decodedBlock[System.Array.index(2, this._decodedBlock)] = 0;
                                this._decodedBlock[System.Array.index(3, this._decodedBlock)] = 0;
                                ms.addRange(this._decodedBlock);
                                processChar = false;
                                break;
                            case 10: 
                            case 13: 
                            case 9: 
                            case 0: 
                            case 12: 
                            case 8: 
                                processChar = false;
                                break;
                            default: 
                                if (c < 33 || c > 117) {
                                    throw new System.Exception("Bad character '" + String.fromCharCode(c) + "' found. ASCII85 only allows characters '!' to 'u'.");
                                }
                                processChar = true;
                                break;
                        }

                        if (processChar) {
                            this._tuple = (this._tuple + (Bridge.Int.umul((((((c - Graphs.Ascii85._asciiOffset) | 0))) >>> 0), this.pow85[System.Array.index(count, this.pow85)]))) >>> 0;
                            count = (count + 1) | 0;
                            if (count === this._encodedBlock.length) {
                                this.DecodeBlock();
                                ms.addRange(this._decodedBlock);
                                this._tuple = 0;
                                count = 0;
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                // if we have some bytes left over at the end..
                if (count !== 0) {
                    if (count === 1) {
                        throw new System.Exception("The last block of ASCII85 data cannot be a single byte.");
                    }
                    count = (count - 1) | 0;
                    this._tuple = (this._tuple + this.pow85[System.Array.index(count, this.pow85)]) >>> 0;
                    this.DecodeBlock$1(count);
                    for (var i = 0; i < count; i = (i + 1) | 0) {
                        ms.add(this._decodedBlock[System.Array.index(i, this._decodedBlock)]);
                    }
                }

                return ms.toArray();
            },
            /**
             * Encodes binary data into a plaintext ASCII85 format string
             *
             * @instance
             * @public
             * @this Graphs.Ascii85
             * @memberof Graphs.Ascii85
             * @param   {Array.<number>}    ba    binary data to encode
             * @return  {string}                  ASCII85 encoded string
             */
            Encode: function (ba) {
                var $t;
                var sb = new System.Text.StringBuilder("", Bridge.Int.mul(ba.length, (((Bridge.Int.div(this._encodedBlock.length, this._decodedBlock.length)) | 0))));
                this._linePos = 0;

                if (this.EnforceMarks) {
                    this.AppendString(sb, this.PrefixMark);
                }

                var count = 0;
                this._tuple = 0;
                $t = Bridge.getEnumerator(ba);
                try {
                    while ($t.moveNext()) {
                        var b = $t.Current;
                        if (count >= ((this._decodedBlock.length - 1) | 0)) {
                            this._tuple = (this._tuple | b) >>> 0;
                            if (this._tuple === 0) {
                                this.AppendChar(sb, 122);
                            } else {
                                this.EncodeBlock$1(sb);
                            }
                            this._tuple = 0;
                            count = 0;
                        } else {
                            this._tuple = (this._tuple | ((b << (((24 - (Bridge.Int.mul(count, 8))) | 0))) >>> 0)) >>> 0;
                            count = (count + 1) | 0;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                // if we have some bytes left over at the end..
                if (count > 0) {
                    this.EncodeBlock(((count + 1) | 0), sb);
                }

                if (this.EnforceMarks) {
                    this.AppendString(sb, this.SuffixMark);
                }
                return sb.toString();
            },
            EncodeBlock$1: function (sb) {
                this.EncodeBlock(this._encodedBlock.length, sb);
            },
            EncodeBlock: function (count, sb) {
                for (var i = (this._encodedBlock.length - 1) | 0; i >= 0; i = (i - 1) | 0) {
                    this._encodedBlock[System.Array.index(i, this._encodedBlock)] = ((((this._tuple % 85) + Graphs.Ascii85._asciiOffset) >>> 0)) & 255;
                    this._tuple = (Bridge.Int.div(this._tuple, 85)) >>> 0;
                }

                for (var i1 = 0; i1 < count; i1 = (i1 + 1) | 0) {
                    var c = this._encodedBlock[System.Array.index(i1, this._encodedBlock)];
                    this.AppendChar(sb, c);
                }

            },
            DecodeBlock: function () {
                this.DecodeBlock$1(this._decodedBlock.length);
            },
            DecodeBlock$1: function (bytes) {
                for (var i = 0; i < bytes; i = (i + 1) | 0) {
                    this._decodedBlock[System.Array.index(i, this._decodedBlock)] = (this._tuple >>> ((24 - (Bridge.Int.mul(i, 8))) | 0)) & 255;
                }
            },
            AppendString: function (sb, s) {
                if (this.LineLength > 0 && (((this._linePos + s.length) | 0) > this.LineLength)) {
                    this._linePos = 0;
                    sb.append(String.fromCharCode(13));
                    sb.append(String.fromCharCode(10));
                } else {
                    this._linePos = (this._linePos + s.length) | 0;
                }
                sb.append(s);
            },
            AppendChar: function (sb, c) {
                sb.append(String.fromCharCode(c));
                this._linePos = (this._linePos + 1) | 0;
                if (this.LineLength > 0 && (this._linePos >= this.LineLength)) {
                    this._linePos = 0;
                    sb.append(String.fromCharCode(13));
                    sb.append(String.fromCharCode(10));
                }
            }
        }
    });

    Bridge.define("Graphs.IHittable", {
        $kind: "interface"
    });

    Bridge.define("Graphs.Edge.Orientations", {
        $kind: "enum",
        statics: {
            fields: {
                None: 0,
                Forward: 1,
                Backward: 2
            }
        }
    });

    Bridge.define("Graphs.GraphCanvas.HistoricalGraph", {
        props: {
            Graph: null,
            ViewScale: 0,
            Zoom: 0
        }
    });

    Bridge.define("Graphs.GraphCanvas.States", {
        $kind: "enum",
        statics: {
            fields: {
                Idle: 0,
                DraggingVertex: 1,
                DraggingSelectionRegion: 2,
                DraggingSelectedVertices: 3
            }
        }
    });

    Bridge.define("Graphs.PolygonContainer", {
        fields: {
            _dots: null,
            _boundingBox: null
        },
        ctors: {
            ctor: function (dots) {
                this.$initialize();
                this._dots = dots;

                var minx = System.Linq.Enumerable.from(this._dots).min($asm.$.Graphs.PolygonContainer.f1);
                var maxx = System.Linq.Enumerable.from(this._dots).max($asm.$.Graphs.PolygonContainer.f1);
                var miny = System.Linq.Enumerable.from(this._dots).min($asm.$.Graphs.PolygonContainer.f2);
                var maxy = System.Linq.Enumerable.from(this._dots).max($asm.$.Graphs.PolygonContainer.f2);

                this._boundingBox = new GraphicsLayer.Box.$ctor1(minx, miny, maxx - minx, maxy - miny);
            }
        },
        methods: {
            Contains: function (dot) {
                if (!this._boundingBox.Contains(dot)) {
                    return false;
                }

                var contains = false;
                var j = (System.Array.getCount(this._dots, GraphicsLayer.Box) - 1) | 0;

                for (var i = 0; i < System.Array.getCount(this._dots, GraphicsLayer.Box); i = (i + 1) | 0) {
                    if ((System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y <= dot.Y && dot.Y < System.Array.getItem(this._dots, j, GraphicsLayer.Box).Y || System.Array.getItem(this._dots, j, GraphicsLayer.Box).Y <= dot.Y && dot.Y < System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y) && dot.X < (System.Array.getItem(this._dots, j, GraphicsLayer.Box).X - System.Array.getItem(this._dots, i, GraphicsLayer.Box).X) * (dot.Y - System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y) / (System.Array.getItem(this._dots, j, GraphicsLayer.Box).Y - System.Array.getItem(this._dots, i, GraphicsLayer.Box).Y) + System.Array.getItem(this._dots, i, GraphicsLayer.Box).X) {
                        contains = !contains;
                    }

                    j = i;
                }

                return contains;
            }
        }
    });

    Bridge.ns("Graphs.PolygonContainer", $asm.$);

    Bridge.apply($asm.$.Graphs.PolygonContainer, {
        f1: function (dot) {
            return dot.X;
        },
        f2: function (dot) {
            return dot.Y;
        }
    });

    Bridge.define("Graphs.SerializationEdge", {
        fields: {
            IndexV1: 0,
            IndexV2: 0,
            Orientation: 0,
            Thickness: 0,
            Multiplicity: 0,
            Style: null,
            Label: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (e, vertices) {
                this.$initialize();                var $t, $t1;

                this.IndexV1 = vertices.indexOf(e.V1);
                this.IndexV2 = vertices.indexOf(e.V2);
                this.Orientation = e.Orientation;
                this.Thickness = e.Thickness;
                this.Multiplicity = e.Multiplicity;
                this.Style = ($t = e.Style, $t != null ? $t : "");
                this.Label = ($t1 = e.Label, $t1 != null ? $t1 : "");

                if (Bridge.referenceEquals(this.Style, "")) {
                    if (this.Orientation === Graphs.Edge.Orientations.Forward) {
                        this.Style = (e.Style = "post", "post");
                    } else {
                        if (this.Orientation === Graphs.Edge.Orientations.Backward) {
                            this.Style = (e.Style = "pre", "pre");
                        }
                    }
                }
        }
    }
    });

    Bridge.define("Graphs.SerializationGraph", {
        fields: {
            Vertices: null,
            Edges: null,
            Name: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (g) {
                this.$initialize();
                this.Vertices = System.Linq.Enumerable.from(g.Vertices).select($asm.$.Graphs.SerializationGraph.f1).toList(Graphs.SerializationVertex);
                this.Edges = System.Linq.Enumerable.from(g.Edges).select(function (e) {
                        return new Graphs.SerializationEdge.$ctor1(e, g.Vertices);
                    }).toList(Graphs.SerializationEdge);
                this.Name = g.Name;
            }
        }
    });

    Bridge.ns("Graphs.SerializationGraph", $asm.$);

    Bridge.apply($asm.$.Graphs.SerializationGraph, {
        f1: function (v) {
            return new Graphs.SerializationVertex.$ctor1(v);
        }
    });

    Bridge.define("Graphs.SerializationVector", {
        fields: {
            X: 0,
            Y: 0
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (v) {
                this.$initialize();
                this.X = v.X;
                this.Y = v.Y;
            }
        }
    });

    Bridge.define("Graphs.SerializationVertex", {
        fields: {
            Location: null,
            Label: null,
            Padding: 0,
            Style: null
        },
        ctors: {
            ctor: function () {
                this.$initialize();
            },
            $ctor1: function (v) {
                this.$initialize();                var $t;

                this.Location = new Graphs.SerializationVector.$ctor1(v.Location);
                this.Label = v.Label;
                this.Padding = v.Padding;
                this.Style = ($t = v.Style, $t != null ? $t : "");
        }
    }
    });

    Bridge.define("Graphs.Utility", {
        statics: {
            methods: {
                RotateAroundPoint: function (v, center, angle) {
                    var x = center.X + (v.X - center.X) * Math.cos(angle) - (v.Y - center.Y) * Math.sin(angle);
                    var y = center.Y + (v.X - center.X) * Math.sin(angle) + (v.Y - center.Y) * Math.cos(angle);

                    return new GraphicsLayer.Box.ctor(x, y);
                },
                RotateAroundPoint$1: function (v, center, angle) {
                    var x = center.X + (v.X - center.X) * Math.cos(angle) - (v.Y - center.Y) * Math.sin(angle);
                    var y = center.Y + (v.X - center.X) * Math.sin(angle) + (v.Y - center.Y) * Math.cos(angle);

                    return new Graphs.Vector(x, y);
                },
                PolarToRectangular: function (r, theta) {
                    return new Graphs.Vector(r * Math.cos(theta), r * Math.sin(theta));
                },
                HaveIntersection: function (start1, end1, start2, end2) {
                    var denom = ((end1.X - start1.X) * (end2.Y - start2.Y)) - ((end1.Y - start1.Y) * (end2.X - start2.X));

                    if (denom === 0) {
                        return false;
                    }

                    var numer = ((start1.Y - start2.Y) * (end2.X - start2.X)) - ((start1.X - start2.X) * (end2.Y - start2.Y));
                    var r = numer / denom;
                    var numer2 = ((start1.Y - start2.Y) * (end1.X - start1.X)) - ((start1.X - start2.X) * (end1.Y - start1.Y));
                    var s = numer2 / denom;

                    if (r < 0 || r > 1 || s < 0 || s > 1) {
                        return false;
                    }

                    return true;
                }
            }
        }
    });

    Bridge.define("Graphs.Vector", {
        statics: {
            methods: {
                op_Addition: function (a, b) {
                    return new Graphs.Vector(a._X + b._X, a._Y + b._Y);
                },
                op_UnaryNegation: function (a) {
                    return new Graphs.Vector(-a._X, -a._Y);
                },
                op_Subtraction: function (a, b) {
                    return new Graphs.Vector(a._X - b._X, a._Y - b._Y);
                },
                op_Multiply: function (a, b) {
                    return new Graphs.Vector(a._X * b, a._Y * b);
                },
                op_Multiply$1: function (a, b) {
                    return new Graphs.Vector(a._X * b, a._Y * b);
                },
                op_Equality: function (a, b) {
                    return a.Equals(b);
                },
                op_Inequality: function (a, b) {
                    return !(Graphs.Vector.op_Equality(a, b));
                },
                op_Implicit: function (v) {
                    return new GraphicsLayer.Box.ctor(v.X, v.Y);
                }
            }
        },
        fields: {
            _X: 0,
            _Y: 0
        },
        props: {
            Length: {
                get: function () {
                    return Math.sqrt(this._X * this._X + this._Y * this._Y);
                }
            },
            X: {
                get: function () {
                    return this._X;
                },
                set: function (value) {
                    this._X = value;
                }
            },
            Y: {
                get: function () {
                    return this._Y;
                },
                set: function (value) {
                    this._Y = value;
                }
            }
        },
        ctors: {
            ctor: function (x, y) {
                this.$initialize();
                this._X = x;
                this._Y = y;
            }
        },
        methods: {
            Normalize: function () {
                var length = this.Length;

                this._X = this._X / length;
                this._Y = this._Y / length;

                return length > 0;
            },
            Dot: function (vector) {
                return this._X * vector._X + this._Y * vector._Y;
            },
            Distance: function (vector) {
                return Math.sqrt(Math.pow(vector._X - this._X, 2) + Math.pow(vector._Y - this._Y, 2));
            },
            equals: function (obj) {
                if (!(Bridge.is(obj, Graphs.Vector))) {
                    return false;
                }

                var v = Bridge.cast(obj, Graphs.Vector);

                return this.Equals(v);
            },
            Equals: function (v) {
                return this._X === v._X && this._Y === v._Y;
            },
            getHashCode: function () {
                return Bridge.getHashCode(this.toString());
            },
            toString: function () {
                return "(" + System.Double.format(this._X) + ", " + System.Double.format(this._Y) + ")";
            }
        }
    });

    Bridge.define("GraphsCore.CompactSerializer", {
        statics: {
            fields: {
                Scale: 0,
                Prefix: null,
                ASCII: null
            },
            ctors: {
                init: function () {
                    this.Scale = 10000;
                    this.Prefix = "webgraph:";
                    this.ASCII = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";
                }
            },
            methods: {
                LooksLikeASerializedGraph: function (s) {
                    return !System.String.isNullOrEmpty(s) && System.String.startsWith(s, GraphsCore.CompactSerializer.Prefix);
                },
                Serialize: function (g) {
                    var bytes = GraphsCore.CompactSerializer.SerializeToByteArray(g);
                    var compressed = QuickLZ.compress(bytes);
                    var Ascii85 = new Graphs.Ascii85();
                    return System.String.concat(GraphsCore.CompactSerializer.Prefix, Ascii85.Encode(compressed));
                },
                SerializeToByteArray: function (g) {
                    var $t, $t1, $t2, $t3, $t4;
                    var bytes = new (System.Collections.Generic.List$1(System.Byte))();
                    bytes.add(((g.Vertices.Count) & 255));
                    $t = Bridge.getEnumerator(g.Vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(v.X * GraphsCore.CompactSerializer.Scale, 0, 6))));
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(v.Y * GraphsCore.CompactSerializer.Scale, 0, 6))));
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(v.Padding * GraphsCore.CompactSerializer.Scale, 0, 6))));
                            bytes.addRange(GraphsCore.CompactSerializer.GetBytes(v.Label));
                            bytes.addRange(GraphsCore.CompactSerializer.GetBytes(($t1 = v.Style, $t1 != null ? $t1 : "")));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    bytes.addRange(System.BitConverter.getBytes$7(((g.Edges.Count) & 65535)));
                    $t2 = Bridge.getEnumerator(g.Edges);
                    try {
                        while ($t2.moveNext()) {
                            var e = $t2.Current;
                            bytes.add(((g.Vertices.indexOf(e.V1)) & 255));
                            bytes.add(((g.Vertices.indexOf(e.V2)) & 255));
                            bytes.add(((e.Multiplicity) & 255));
                            bytes.add(((e.Orientation) & 255));
                            bytes.addRange(System.BitConverter.getBytes$7(Bridge.Int.clipu16(Bridge.Math.round(e.Thickness * 100, 0, 6))));

                            var label = ($t3 = e.Label, $t3 != null ? $t3 : "");
                            var hackedStyle = System.String.concat((($t4 = e.Style, $t4 != null ? $t4 : "")), "~~|~|~~", label);
                            bytes.addRange(GraphsCore.CompactSerializer.GetBytes(hackedStyle));
                        }
                    } finally {
                        if (Bridge.is($t2, System.IDisposable)) {
                            $t2.System$IDisposable$dispose();
                        }
                    }
                    return bytes.toArray();
                },
                Deserialize: function (s) {
                    try {
                        var Ascii85 = new Graphs.Ascii85();
                        var compressed = Ascii85.Decode(s.substr(GraphsCore.CompactSerializer.Prefix.length));
                        var bytes = QuickLZ.decompress(compressed);
                        return GraphsCore.CompactSerializer.DeserializeFromByteArray(bytes);
                    }
                    catch (ex) {
                        ex = System.Exception.create(ex);
                        System.Console.WriteLine(ex.Message);
                    }

                    return null;
                },
                DeserializeFromByteArray: function (bytes) {
                    var $t;
                    var offset = { v : 0 };
                    var n = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                    var vertices = new (System.Collections.Generic.List$1(Graphs.Vertex))();
                    for (var i = 0; i < n; i = (i + 1) | 0) {
                        var x = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / GraphsCore.CompactSerializer.Scale;
                        var y = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / GraphsCore.CompactSerializer.Scale;
                        var padding = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / GraphsCore.CompactSerializer.Scale;
                        var label = GraphsCore.CompactSerializer.ReadString(bytes, offset);
                        var style = GraphsCore.CompactSerializer.ReadString(bytes, offset);
                        vertices.add(($t = new Graphs.Vertex.$ctor3(x, y), $t.Padding = padding, $t.Label = label, $t.Style = style, $t));
                    }

                    var e = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset);
                    var edges = new (System.Collections.Generic.List$1(Graphs.Edge))();
                    for (var i1 = 0; i1 < e; i1 = (i1 + 1) | 0) {
                        var v1 = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var v2 = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var multiplicity = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var orientation = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        var thickness = GraphsCore.CompactSerializer.ReadUInt16(bytes, offset) / 100;
                        var style1 = GraphsCore.CompactSerializer.ReadString(bytes, offset);

                        edges.add(($t = new Graphs.Edge.$ctor1(vertices.getItem(v1), vertices.getItem(v2)), $t.Multiplicity = multiplicity, $t.Orientation = orientation, $t.Thickness = thickness, $t.Style = style1, $t));
                    }

                    return new Graphs.Graph.$ctor3(vertices, edges);
                },
                ReadByte: function (bytes, offset) {
                    return bytes[System.Array.index(Bridge.identity(offset.v, (offset.v = (offset.v + 1) | 0)), bytes)];
                },
                ReadUInt16: function (bytes, offset) {
                    var x = System.BitConverter.toUInt16(bytes, offset.v);
                    offset.v = (offset.v + 2) | 0;
                    return x;
                },
                ReadUInt32: function (bytes, offset) {
                    var x = System.BitConverter.toUInt32(bytes, offset.v);
                    offset.v = (offset.v + 4) | 0;
                    return x;
                },
                Get7BitEncodedInt: function (value) {
                    var bytes = new (System.Collections.Generic.List$1(System.Byte))();
                    var num = value >>> 0;
                    while (num >= 128) {
                        bytes.add(((((num | 128) >>> 0)) & 255));
                        num = num >>> 7;
                    }
                    bytes.add((num & 255));

                    return bytes.toArray();
                },
                Read7BitEncodedInt: function (bytes, offset) {
                    var num1 = 0;
                    var num2 = 0;
                    while (num2 !== 35) {
                        var num3 = GraphsCore.CompactSerializer.ReadByte(bytes, offset);
                        num1 = num1 | ((num3 & 127) << num2);
                        num2 = (num2 + 7) | 0;
                        if ((num3 & 128) === 0) {
                            return num1;
                        }
                    }
                    throw new System.FormatException("bad 7-bit encoded int");
                },
                GetBytes: function (s) {
                    var $t, $t1;
                    var bytes = new (System.Collections.Generic.List$1(System.Byte))();
                    $t = Bridge.getEnumerator(System.String.toCharArray(s, 0, s.length));
                    try {
                        while ($t.moveNext()) {
                            var c = $t.Current;
                            bytes.addRange(System.BitConverter.getBytes$1(c));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    $t1 = Bridge.getEnumerator(System.Linq.Enumerable.from(Bridge.cast(GraphsCore.CompactSerializer.Get7BitEncodedInt(bytes.Count), System.Collections.Generic.IEnumerable$1(System.Byte))).reverse());
                    try {
                        while ($t1.moveNext()) {
                            var b = $t1.Current;
                            bytes.insert(0, b);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    return bytes.toArray();
                },
                ReadString: function (bytes, offset) {
                    var length = GraphsCore.CompactSerializer.Read7BitEncodedInt(bytes, offset);

                    var s = "";
                    while (Bridge.identity(length, (length = (length - 1) | 0)) > 0) {
                        s = System.String.concat(s, String.fromCharCode(GraphsCore.CompactSerializer.ASCII.charCodeAt(((bytes[System.Array.index(Bridge.identity(offset.v, (offset.v = (offset.v + 1) | 0)), bytes)] - 32) | 0))));
                    }
                    return s;
                }
            }
        }
    });

    Bridge.define("GraphsCore.GraphIO", {
        statics: {
            fields: {
                ASCII: null
            },
            ctors: {
                init: function () {
                    this.ASCII = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";
                }
            },
            methods: {
                ToAdjacencyMatrix: function (edgeWeights, isDirected) {
                    var $t;
                    if (isDirected === void 0) { isDirected = false; }
                    var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                    var m = System.Array.create(0, null, System.Char, n, n);

                    var k = 0;
                    for (var i = 0; i < n; i = (i + 1) | 0) {
                        for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                            var ew = edgeWeights.getItem(k);
                            if (isDirected) {
                                m.set([i, j], (m.set([j, i], 48), 48));

                                if (ew > 0) {
                                    m.set([i, j], 49);
                                } else {
                                    if (ew < 0) {
                                        m.set([j, i], 49);
                                    }
                                }
                            } else {
                                m.set([i, j], ($t = ew !== 0 ? 49 : 48, m.set([j, i], $t), $t));
                            }

                            k = (k + 1) | 0;
                        }
                    }

                    for (var i1 = 0; i1 < n; i1 = (i1 + 1) | 0) {
                        m.set([i1, i1], 48);
                    }

                    var s = "";
                    for (var i2 = 0; i2 < n; i2 = (i2 + 1) | 0) {
                        for (var j1 = 0; j1 < n; j1 = (j1 + 1) | 0) {
                            s = System.String.concat(s, String.fromCharCode(m.get([i2, j1])));
                        }
                        s = System.String.concat(s, '\n');
                    }

                    return s;
                },
                ToGraph6: function (g) {
                    return GraphsCore.GraphIO.ToGraph6$1(g.GetEdgeWeights());
                },
                ToGraph6$1: function (w) {
                    var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, w.Count)) | 0))) / 2);
                    if (n > 62) {
                        throw new System.NotImplementedException("i have yet to write/read graph6 files with more than 62 vertices.");
                    }

                    var p = System.Linq.Enumerable.from(GraphsCore.GraphIO.RowToColumnPermutation(n)).toList(System.Int32);
                    var wp = new (System.Collections.Generic.List$1(System.Int32))(w.Count);

                    for (var i = 0; i < p.Count; i = (i + 1) | 0) {
                        wp.add(Math.abs(w.getItem(p.indexOf(i))));
                    }

                    while (wp.Count % 6 !== 0) {
                        wp.add(0);
                    }

                    var bb = System.Linq.Enumerable.from(MoreLinq.MoreEnumerable.Prepend(System.Byte, MoreLinq.MoreEnumerable.Batch(System.Int32, System.Byte, wp, 6, $asm.$.GraphsCore.GraphIO.f2), ((((n + 63) | 0)) & 255))).toArray();
                    return Bridge.toArray(System.Linq.Enumerable.from(bb).select($asm.$.GraphsCore.GraphIO.f3)).join("");
                },
                RowToColumnPermutation: function (n) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (n) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            x,
                            j,
                            y,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            x = 0;
                                                j = 0;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( j < ((n - 1) | 0) ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 9;
                                            continue;
                                        }
                                        case 2: {
                                            y = x;
                                                i = 0;
                                                $step = 3;
                                                continue;
                                        }
                                        case 3: {
                                            if ( i < ((((n - 1) | 0) - j) | 0) ) {
                                                    $step = 4;
                                                    continue;
                                                }
                                            $step = 7;
                                            continue;
                                        }
                                        case 4: {
                                            $enumerator.current = y;
                                                $step = 5;
                                                return true;
                                        }
                                        case 5: {
                                            y = (y + (((((1 + j) | 0) + i) | 0))) | 0;
                                            $step = 6;
                                            continue;
                                        }
                                        case 6: {
                                            i = (i + 1) | 0;
                                            $step = 3;
                                            continue;
                                        }
                                        case 7: {
                                            x = (x + (((2 + j) | 0))) | 0;
                                            $step = 8;
                                            continue;
                                        }
                                        case 8: {
                                            j = (j + 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 9: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                Low6: function (b) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (b) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            i,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            i = 5;
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ( i >= 0 ) {
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 5;
                                            continue;
                                        }
                                        case 2: {
                                            $enumerator.current = (b & (1 << i)) >> i;
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            $step = 4;
                                            continue;
                                        }
                                        case 4: {
                                            i = (i - 1) | 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 5: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        }
    });

    Bridge.ns("GraphsCore.GraphIO", $asm.$);

    Bridge.apply($asm.$.GraphsCore.GraphIO, {
        f1: function (pair) {
            return pair.value << pair.key;
        },
        f2: function (bits) {
            return ((((System.Linq.Enumerable.from(MoreLinq.MoreEnumerable.Index(System.Int32, System.Linq.Enumerable.from(bits).reverse())).select($asm.$.GraphsCore.GraphIO.f1).sum() + 63) | 0)) & 255);
        },
        f3: function (b) {
            return String.fromCharCode(GraphsCore.GraphIO.ASCII.charCodeAt(((b - 32) | 0)));
        }
    });

    /** @namespace System */

    /**
     * @memberof System
     * @callback System.Func
     * @param   {System.Collections.Generic.IEnumerable$1}    arg
     * @return  {TResult}
     */

    Bridge.define("MoreLinq.MoreEnumerable", {
        statics: {
            methods: {
                /**
                 * Batches the source sequence into sized buckets.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource    Type of elements in <b>TSource</b> sequence.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source     The source sequence.
                 * @param   {number}                                      size       Size of buckets.
                 * @return  {System.Collections.Generic.IEnumerable$1}               A sequence of equally sized buckets containing elements of the source collection.
                 */
                Batch$1: function (TSource, source, size) {
                    return MoreLinq.MoreEnumerable.Batch(TSource, System.Collections.Generic.IEnumerable$1(TSource), source, size, $asm.$.MoreLinq.MoreEnumerable.f1);
                },
                /**
                 * Batches the source sequence into sized buckets and applies a projection to each bucket.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource           Type of elements in <b>TSource</b> sequence.
                 * @param   {Function}                                    TResult           Type of result returned by <b>TResult</b>.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source            The source sequence.
                 * @param   {number}                                      size              Size of buckets.
                 * @param   {System.Func}                                 resultSelector    The projection to apply to each bucket.
                 * @return  {System.Collections.Generic.IEnumerable$1}                      A sequence of projections on equally sized buckets containing elements of the source collection.
                 */
                Batch: function (TSource, TResult, source, size, resultSelector) {
                    return MoreLinq.MoreEnumerable.BatchImpl(TSource, TResult, source, size, resultSelector);
                },
                BatchImpl: function (TSource, TResult, source, size, resultSelector) {
                    return new (Bridge.GeneratorEnumerable$1(TResult))(Bridge.fn.bind(this, function (TSource, TResult, source, size, resultSelector) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            bucket,
                            count,
                            $t,
                            item,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(TResult))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            bucket = null;
                                                count = 0;

                                                $t = Bridge.getEnumerator(source, TSource);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    item = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            if (bucket == null) {
                                                    bucket = System.Array.init(size, function (){
                                                        return Bridge.getDefaultValue(TSource);
                                                    }, TSource);
                                                }

                                                bucket[System.Array.index(Bridge.identity(count, (count = (count + 1) | 0)), bucket)] = item;

                                                // The bucket is fully buffered before it's yielded
                                                if (count !== size) {
                                                    $step = 1;
                                                    continue;
                                                }

                                                // Select is necessary so bucket contents are streamed too
                                                $enumerator.current = resultSelector(System.Linq.Enumerable.from(bucket).select($asm.$.MoreLinq.MoreEnumerable.f1));
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            bucket = null;
                                                count = 0;
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {
                                            // Return the last bucket with all remaining elements
                                                if (bucket != null && count > 0) {
                                                    $step = 5;
                                                    continue;
                                                } 
                                                $step = 7;
                                                continue;
                                        }
                                        case 5: {
                                            $enumerator.current = resultSelector(System.Linq.Enumerable.from(bucket).take(count));
                                                $step = 6;
                                                return true;
                                        }
                                        case 6: {
                                            $step = 7;
                                            continue;
                                        }
                                        case 7: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                /**
                 * Returns a sequence of {@link } 
                 where the key is the zero-based index of the value in the source 
                 sequence.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource    Type of elements in <b>TSource</b> sequence.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source     The source sequence.
                 * @return  {System.Collections.Generic.IEnumerable$1}               A sequence of {@link }.
                 */
                Index: function (TSource, source) {
                    return MoreLinq.MoreEnumerable.Index$1(TSource, source, 0);
                },
                /**
                 * Returns a sequence of {@link } 
                 where the key is the index of the value in the source sequence.
                 An additional parameter specifies the starting index.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource       Type of elements in <b>TSource</b> sequence.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source        The source sequence.
                 * @param   {number}                                      startIndex
                 * @return  {System.Collections.Generic.IEnumerable$1}                  A sequence of {@link }.
                 */
                Index$1: function (TSource, source, startIndex) {
                    return System.Linq.Enumerable.from(source).select(function (item, index) {
                            return new (System.Collections.Generic.KeyValuePair$2(System.Int32,TSource))(((startIndex + index) | 0), item);
                        });
                },
                /**
                 * Prepends a single value to a sequence.
                 *
                 * @static
                 * @public
                 * @this MoreLinq.MoreEnumerable
                 * @memberof MoreLinq.MoreEnumerable
                 * @param   {Function}                                    TSource    The type of the elements of <b>TSource</b>.
                 * @param   {System.Collections.Generic.IEnumerable$1}    source     The sequence to prepend to.
                 * @param   {TSource}                                     value      The value to prepend.
                 * @return  {System.Collections.Generic.IEnumerable$1}               Returns a sequence where a value is prepended to it.
                 */
                Prepend: function (TSource, source, value) {
                    if (source == null) {
                        throw new System.ArgumentNullException("source");
                    }
                    return System.Linq.Enumerable.from(System.Linq.Enumerable.repeat(value, 1)).concat(source);
                }
            }
        }
    });

    Bridge.ns("MoreLinq.MoreEnumerable", $asm.$);

    Bridge.apply($asm.$.MoreLinq.MoreEnumerable, {
        f1: function (x) {
            return x;
        }
    });

    Bridge.define("QuickLZ", {
        statics: {
            fields: {
                QLZ_VERSION_MAJOR: 0,
                QLZ_VERSION_MINOR: 0,
                QLZ_VERSION_REVISION: 0,
                QLZ_STREAMING_BUFFER: 0,
                QLZ_MEMORY_SAFE: 0,
                HASH_VALUES: 0,
                MINOFFSET: 0,
                UNCONDITIONAL_MATCHLEN: 0,
                UNCOMPRESSED_END: 0,
                CWORD_LEN: 0,
                DEFAULT_HEADERLEN: 0,
                QLZ_POINTERS_1: 0,
                QLZ_POINTERS_3: 0
            },
            ctors: {
                init: function () {
                    this.QLZ_VERSION_MAJOR = 1;
                    this.QLZ_VERSION_MINOR = 5;
                    this.QLZ_VERSION_REVISION = 0;
                    this.QLZ_STREAMING_BUFFER = 0;
                    this.QLZ_MEMORY_SAFE = 0;
                    this.HASH_VALUES = 4096;
                    this.MINOFFSET = 2;
                    this.UNCONDITIONAL_MATCHLEN = 6;
                    this.UNCOMPRESSED_END = 4;
                    this.CWORD_LEN = 4;
                    this.DEFAULT_HEADERLEN = 9;
                    this.QLZ_POINTERS_1 = 1;
                    this.QLZ_POINTERS_3 = 16;
                }
            },
            methods: {
                headerLen: function (source) {
                    return ((source[System.Array.index(0, source)] & 2) === 2) ? 9 : 3;
                },
                sizeDecompressed: function (source) {
                    if (QuickLZ.headerLen(source) === 9) {
                        return source[System.Array.index(5, source)] | (source[System.Array.index(6, source)] << 8) | (source[System.Array.index(7, source)] << 16) | (source[System.Array.index(8, source)] << 24);
                    } else {
                        return source[System.Array.index(2, source)];
                    }
                },
                sizeCompressed: function (source) {
                    if (QuickLZ.headerLen(source) === 9) {
                        return source[System.Array.index(1, source)] | (source[System.Array.index(2, source)] << 8) | (source[System.Array.index(3, source)] << 16) | (source[System.Array.index(4, source)] << 24);
                    } else {
                        return source[System.Array.index(1, source)];
                    }
                },
                write_header: function (dst, level, compressible, size_compressed, size_decompressed) {
                    dst[System.Array.index(0, dst)] = (2 | (compressible ? 1 : 0)) & 255;
                    dst[System.Array.index(0, dst)] = (dst[System.Array.index(0, dst)] | ((level << 2) & 255)) & 255;
                    dst[System.Array.index(0, dst)] = (dst[System.Array.index(0, dst)] | (64)) & 255;
                    dst[System.Array.index(0, dst)] = (dst[System.Array.index(0, dst)] | (0)) & 255;
                    QuickLZ.fast_write(dst, 1, size_decompressed, 4);
                    QuickLZ.fast_write(dst, 5, size_compressed, 4);
                },
                compress: function (source, level) {
                    var $t;
                    if (level === void 0) { level = 1; }
                    var src = 0;
                    var dst = 13;
                    var cword_val = 2147483648;
                    var cword_ptr = QuickLZ.DEFAULT_HEADERLEN;
                    var destination = System.Array.init(((source.length + 400) | 0), 0, System.Byte);
                    var hashtable;
                    var cachetable = System.Array.init(QuickLZ.HASH_VALUES, 0, System.Int32);
                    var hash_counter = System.Array.init(QuickLZ.HASH_VALUES, 0, System.Byte);
                    var d2;
                    var fetch = 0;
                    var last_matchstart = (((((((source.length - QuickLZ.UNCONDITIONAL_MATCHLEN) | 0) - QuickLZ.UNCOMPRESSED_END) | 0) - 1) | 0));
                    var lits = 0;

                    if (level !== 1 && level !== 3) {
                        throw new System.ArgumentException("C# version only supports level 1 and 3");
                    }

                    if (level === 1) {
                        hashtable = System.Array.create(0, null, System.Int32, 4096, 1);
                    } else {
                        hashtable = System.Array.create(0, null, System.Int32, 4096, 16);
                    }

                    if (source.length === 0) {
                        return System.Array.init(0, 0, System.Byte);
                    }

                    if (src <= last_matchstart) {
                        fetch = source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16);
                    }

                    while (src <= last_matchstart) {
                        if ((((cword_val & 1) >>> 0)) === 1) {
                            if (src > source.length >> 1 && dst > ((src - (src >> 5)) | 0)) {
                                d2 = System.Array.init(((source.length + QuickLZ.DEFAULT_HEADERLEN) | 0), 0, System.Byte);
                                QuickLZ.write_header(d2, level, false, source.length, ((source.length + QuickLZ.DEFAULT_HEADERLEN) | 0));
                                System.Array.copy(source, 0, d2, QuickLZ.DEFAULT_HEADERLEN, source.length);
                                return d2;
                            }

                            QuickLZ.fast_write(destination, cword_ptr, (((((cword_val >>> 1) | 2147483648) >>> 0)) | 0), 4);
                            cword_ptr = dst;
                            dst = (dst + QuickLZ.CWORD_LEN) | 0;
                            cword_val = 2147483648;
                        }

                        if (level === 1) {
                            var hash = ((fetch >> 12) ^ fetch) & (4095);
                            var o = hashtable.get([hash, 0]);
                            var cache = cachetable[System.Array.index(hash, cachetable)] ^ fetch;
                            cachetable[System.Array.index(hash, cachetable)] = fetch;
                            hashtable.set([hash, 0], src);

                            if (cache === 0 && hash_counter[System.Array.index(hash, hash_counter)] !== 0 && (((src - o) | 0) > QuickLZ.MINOFFSET || (src === ((o + 1) | 0) && lits >= 3 && src > 3 && source[System.Array.index(src, source)] === source[System.Array.index(((src - 3) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src - 2) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src - 1) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src + 1) | 0), source)] && source[System.Array.index(src, source)] === source[System.Array.index(((src + 2) | 0), source)]))) {
                                cword_val = ((((cword_val >>> 1) | 2147483648) >>> 0));
                                if (source[System.Array.index(((o + 3) | 0), source)] !== source[System.Array.index(((src + 3) | 0), source)]) {
                                    var f = 1 | (hash << 4);
                                    destination[System.Array.index(((dst + 0) | 0), destination)] = (f >> 0) & 255;
                                    destination[System.Array.index(((dst + 1) | 0), destination)] = (f >> 8) & 255;
                                    src = (src + 3) | 0;
                                    dst = (dst + 2) | 0;
                                } else {
                                    var old_src = src;
                                    var remaining = ((((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)) > 255 ? 255 : (((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)));

                                    src = (src + 4) | 0;
                                    if (source[System.Array.index(((((o + src) | 0) - old_src) | 0), source)] === source[System.Array.index(src, source)]) {
                                        src = (src + 1) | 0;
                                        if (source[System.Array.index(((((o + src) | 0) - old_src) | 0), source)] === source[System.Array.index(src, source)]) {
                                            src = (src + 1) | 0;
                                            while (source[System.Array.index(((o + (((src - old_src) | 0))) | 0), source)] === source[System.Array.index(src, source)] && (((src - old_src) | 0)) < remaining) {
                                                src = (src + 1) | 0;
                                            }
                                        }
                                    }

                                    var matchlen = (src - old_src) | 0;

                                    hash = hash << 4;
                                    if (matchlen < 18) {
                                        var f1 = (hash | (((matchlen - 2) | 0)));
                                        destination[System.Array.index(((dst + 0) | 0), destination)] = (f1 >> 0) & 255;
                                        destination[System.Array.index(((dst + 1) | 0), destination)] = (f1 >> 8) & 255;
                                        dst = (dst + 2) | 0;
                                    } else {
                                        QuickLZ.fast_write(destination, dst, hash | (matchlen << 16), 3);
                                        dst = (dst + 3) | 0;
                                    }
                                }
                                fetch = source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16);
                                lits = 0;
                            } else {
                                lits = (lits + 1) | 0;
                                hash_counter[System.Array.index(hash, hash_counter)] = 1;
                                destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                cword_val = (cword_val >>> 1);
                                src = (src + 1) | 0;
                                dst = (dst + 1) | 0;
                                fetch = ((fetch >> 8) & 65535) | (source[System.Array.index(((src + 2) | 0), source)] << 16);
                            }

                        } else {
                            fetch = source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16);

                            var o1, offset2;
                            var matchlen1, k, m, best_k = 0;
                            var c;
                            var remaining1 = ((((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)) > 255 ? 255 : (((((((((source.length - QuickLZ.UNCOMPRESSED_END) | 0) - src) | 0) + 1) | 0) - 1) | 0)));
                            var hash1 = ((fetch >> 12) ^ fetch) & (4095);

                            c = hash_counter[System.Array.index(hash1, hash_counter)];
                            matchlen1 = 0;
                            offset2 = 0;
                            for (k = 0; k < QuickLZ.QLZ_POINTERS_3 && c > k; k = (k + 1) | 0) {
                                o1 = hashtable.get([hash1, k]);
                                if ((fetch & 255) === source[System.Array.index(o1, source)] && (((fetch >> 8)) & 255) === source[System.Array.index(((o1 + 1) | 0), source)] && (((fetch >> 16)) & 255) === source[System.Array.index(((o1 + 2) | 0), source)] && o1 < ((src - QuickLZ.MINOFFSET) | 0)) {
                                    m = 3;
                                    while (source[System.Array.index(((o1 + m) | 0), source)] === source[System.Array.index(((src + m) | 0), source)] && m < remaining1) {
                                        m = (m + 1) | 0;
                                    }
                                    if ((m > matchlen1) || (m === matchlen1 && o1 > offset2)) {
                                        offset2 = o1;
                                        matchlen1 = m;
                                        best_k = k;
                                    }
                                }
                            }
                            o1 = offset2;
                            hashtable.set([hash1, c & (15)], src);
                            c = (c + 1) & 255;
                            hash_counter[System.Array.index(hash1, hash_counter)] = c;

                            if (matchlen1 >= 3 && ((src - o1) | 0) < 131071) {
                                var offset = (src - o1) | 0;

                                for (var u = 1; u < matchlen1; u = (u + 1) | 0) {
                                    fetch = source[System.Array.index(((src + u) | 0), source)] | (source[System.Array.index(((((src + u) | 0) + 1) | 0), source)] << 8) | (source[System.Array.index(((((src + u) | 0) + 2) | 0), source)] << 16);
                                    hash1 = ((fetch >> 12) ^ fetch) & (4095);
                                    c = Bridge.identity(hash_counter[System.Array.index(hash1, hash_counter)], ($t = (hash_counter[System.Array.index(hash1, hash_counter)] + 1) & 255, hash_counter[System.Array.index(hash1, hash_counter)] = $t, $t));
                                    hashtable.set([hash1, c & (15)], (src + u) | 0);
                                }

                                src = (src + matchlen1) | 0;
                                cword_val = ((((cword_val >>> 1) | 2147483648) >>> 0));

                                if (matchlen1 === 3 && offset <= 63) {
                                    QuickLZ.fast_write(destination, dst, offset << 2, 1);
                                    dst = (dst + 1) | 0;
                                } else if (matchlen1 === 3 && offset <= 16383) {
                                    QuickLZ.fast_write(destination, dst, (offset << 2) | 1, 2);
                                    dst = (dst + 2) | 0;
                                } else if (matchlen1 <= 18 && offset <= 1023) {
                                    QuickLZ.fast_write(destination, dst, ((((matchlen1 - 3) | 0)) << 2) | (offset << 6) | 2, 2);
                                    dst = (dst + 2) | 0;
                                } else if (matchlen1 <= 33) {
                                    QuickLZ.fast_write(destination, dst, ((((matchlen1 - 2) | 0)) << 2) | (offset << 7) | 3, 3);
                                    dst = (dst + 3) | 0;
                                } else {
                                    QuickLZ.fast_write(destination, dst, ((((matchlen1 - 3) | 0)) << 7) | (offset << 15) | 3, 4);
                                    dst = (dst + 4) | 0;
                                }
                                lits = 0;
                            } else {
                                destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                cword_val = (cword_val >>> 1);
                                src = (src + 1) | 0;
                                dst = (dst + 1) | 0;
                            }
                        }
                    }
                    while (src <= ((source.length - 1) | 0)) {
                        if ((((cword_val & 1) >>> 0)) === 1) {
                            QuickLZ.fast_write(destination, cword_ptr, (((((cword_val >>> 1) | 2147483648) >>> 0)) | 0), 4);
                            cword_ptr = dst;
                            dst = (dst + QuickLZ.CWORD_LEN) | 0;
                            cword_val = 2147483648;
                        }

                        destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                        src = (src + 1) | 0;
                        dst = (dst + 1) | 0;
                        cword_val = (cword_val >>> 1);
                    }
                    while ((((cword_val & 1) >>> 0)) !== 1) {
                        cword_val = (cword_val >>> 1);
                    }
                    QuickLZ.fast_write(destination, cword_ptr, (((((cword_val >>> 1) | 2147483648) >>> 0)) | 0), QuickLZ.CWORD_LEN);
                    QuickLZ.write_header(destination, level, true, source.length, dst);
                    d2 = System.Array.init(dst, 0, System.Byte);
                    System.Array.copy(destination, 0, d2, 0, dst);
                    return d2;
                },
                fast_write: function (a, i, value, numbytes) {
                    for (var j = 0; j < numbytes; j = (j + 1) | 0) {
                        a[System.Array.index(((i + j) | 0), a)] = (value >> (Bridge.Int.mul(j, 8))) & 255;
                    }
                },
                decompress: function (source) {
                    var level;
                    var size = QuickLZ.sizeDecompressed(source);
                    var src = QuickLZ.headerLen(source);
                    var dst = 0;
                    var cword_val = 1;
                    var destination = System.Array.init(size, 0, System.Byte);
                    var hashtable = System.Array.init(4096, 0, System.Int32);
                    var hash_counter = System.Array.init(4096, 0, System.Byte);
                    var last_matchstart = (((((size - QuickLZ.UNCONDITIONAL_MATCHLEN) | 0) - QuickLZ.UNCOMPRESSED_END) | 0) - 1) | 0;
                    var last_hashed = -1;
                    var hash;
                    var fetch = 0;

                    level = (source[System.Array.index(0, source)] >> 2) & 3;

                    if (level !== 1 && level !== 3) {
                        throw new System.ArgumentException("C# version only supports level 1 and 3");
                    }

                    if ((source[System.Array.index(0, source)] & 1) !== 1) {
                        var d2 = System.Array.init(size, 0, System.Byte);
                        System.Array.copy(source, QuickLZ.headerLen(source), d2, 0, size);
                        return d2;
                    }

                    for (; ; ) {
                        if (cword_val === 1) {
                            cword_val = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16) | (source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0;
                            src = (src + 4) | 0;
                            if (dst <= last_matchstart) {
                                if (level === 1) {
                                    fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0;
                                } else {
                                    fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16) | (source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0;
                                }
                            }
                        }

                        if ((((cword_val & 1) >>> 0)) === 1) {
                            var matchlen;
                            var offset2;

                            cword_val = cword_val >>> 1;

                            if (level === 1) {
                                hash = ((fetch | 0) >> 4) & 4095;
                                offset2 = (hashtable[System.Array.index(hash, hashtable)]) >>> 0;

                                if ((((fetch & 15) >>> 0)) !== 0) {
                                    matchlen = ((((fetch & 15) >>> 0)) + 2) >>> 0;
                                    src = (src + 2) | 0;
                                } else {
                                    matchlen = source[System.Array.index(((src + 2) | 0), source)];
                                    src = (src + 3) | 0;
                                }
                            } else {
                                var offset;
                                if ((((fetch & 3) >>> 0)) === 0) {
                                    offset = (((fetch & 255) >>> 0)) >>> 2;
                                    matchlen = 3;
                                    src = (src + 1) | 0;
                                } else if ((((fetch & 2) >>> 0)) === 0) {
                                    offset = (((fetch & 65535) >>> 0)) >>> 2;
                                    matchlen = 3;
                                    src = (src + 2) | 0;
                                } else if ((((fetch & 1) >>> 0)) === 0) {
                                    offset = (((fetch & 65535) >>> 0)) >>> 6;
                                    matchlen = (((((fetch >>> 2) & 15) >>> 0)) + 3) >>> 0;
                                    src = (src + 2) | 0;
                                } else if ((((fetch & 127) >>> 0)) !== 3) {
                                    offset = ((fetch >>> 7) & 131071) >>> 0;
                                    matchlen = (((((fetch >>> 2) & 31) >>> 0)) + 2) >>> 0;
                                    src = (src + 3) | 0;
                                } else {
                                    offset = (fetch >>> 15);
                                    matchlen = (((((fetch >>> 7) & 255) >>> 0)) + 3) >>> 0;
                                    src = (src + 4) | 0;
                                }
                                offset2 = System.Int64.clipu32(System.Int64(dst).sub(System.Int64(offset)));
                            }

                            destination[System.Array.index(((dst + 0) | 0), destination)] = destination[System.Array.index(((offset2 + 0) >>> 0), destination)];
                            destination[System.Array.index(((dst + 1) | 0), destination)] = destination[System.Array.index(((offset2 + 1) >>> 0), destination)];
                            destination[System.Array.index(((dst + 2) | 0), destination)] = destination[System.Array.index(((offset2 + 2) >>> 0), destination)];

                            for (var i = 3; System.Int64(i).lt(System.Int64(matchlen)); i = (i + 1) | 0) {
                                destination[System.Array.index(((dst + i) | 0), destination)] = destination[System.Array.index(System.Int64.toNumber(System.Int64(offset2).add(System.Int64(i))), destination)];
                            }

                            dst = (dst + (matchlen | 0)) | 0;

                            if (level === 1) {
                                fetch = (destination[System.Array.index(((last_hashed + 1) | 0), destination)] | (destination[System.Array.index(((last_hashed + 2) | 0), destination)] << 8) | (destination[System.Array.index(((last_hashed + 3) | 0), destination)] << 16)) >>> 0;
                                while (System.Int64(last_hashed).lt(System.Int64(dst).sub(System.Int64(matchlen)))) {
                                    last_hashed = (last_hashed + 1) | 0;
                                    hash = (((((((fetch >>> 12) ^ fetch) >>> 0)) & (4095)) >>> 0)) | 0;
                                    hashtable[System.Array.index(hash, hashtable)] = last_hashed;
                                    hash_counter[System.Array.index(hash, hash_counter)] = 1;
                                    fetch = ((((fetch >>> 8 & 65535) >>> 0) | (((destination[System.Array.index(((last_hashed + 3) | 0), destination)] << 16)) >>> 0)) >>> 0);
                                }
                                fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0;
                            } else {
                                fetch = (source[System.Array.index(src, source)] | (source[System.Array.index(((src + 1) | 0), source)] << 8) | (source[System.Array.index(((src + 2) | 0), source)] << 16) | (source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0;
                            }
                            last_hashed = (dst - 1) | 0;
                        } else {
                            if (dst <= last_matchstart) {
                                destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                dst = (dst + 1) | 0;
                                src = (src + 1) | 0;
                                cword_val = cword_val >>> 1;

                                if (level === 1) {
                                    while (last_hashed < ((dst - 3) | 0)) {
                                        last_hashed = (last_hashed + 1) | 0;
                                        var fetch2 = destination[System.Array.index(last_hashed, destination)] | (destination[System.Array.index(((last_hashed + 1) | 0), destination)] << 8) | (destination[System.Array.index(((last_hashed + 2) | 0), destination)] << 16);
                                        hash = ((fetch2 >> 12) ^ fetch2) & (4095);
                                        hashtable[System.Array.index(hash, hashtable)] = last_hashed;
                                        hash_counter[System.Array.index(hash, hash_counter)] = 1;
                                    }
                                    fetch = ((((fetch >>> 8 & 65535) >>> 0) | (((source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0)) >>> 0);
                                } else {
                                    fetch = ((((((fetch >>> 8 & 65535) >>> 0) | (((source[System.Array.index(((src + 2) | 0), source)] << 16)) >>> 0)) >>> 0) | (((source[System.Array.index(((src + 3) | 0), source)] << 24)) >>> 0)) >>> 0);
                                }
                            } else {
                                while (dst <= ((size - 1) | 0)) {
                                    if (cword_val === 1) {
                                        src = (src + QuickLZ.CWORD_LEN) | 0;
                                        cword_val = 2147483648;
                                    }

                                    destination[System.Array.index(dst, destination)] = source[System.Array.index(src, source)];
                                    dst = (dst + 1) | 0;
                                    src = (src + 1) | 0;
                                    cword_val = cword_val >>> 1;
                                }
                                return destination;
                            }
                        }
                    }
                }
            }
        }
    });

    Bridge.define("Test.App", {
        main: function Main () {
            window.onload = Bridge.fn.combine(window.onload, Test.App.OnWindowLoad);
            window.onresize = Bridge.fn.combine(window.onresize, Test.App.OnResize);
        },
        statics: {
            fields: {
                _sageContainer: null,
                _newSheetTab: null,
                _currentTabCanvas: null,
                _tabID: 0,
                _canvasLookup: null
            },
            props: {
                CurrentTabCanvas: {
                    get: function () {
                        return Test.App._canvasLookup.get(Test.App._currentTabCanvas);
                    }
                }
            },
            ctors: {
                init: function () {
                    this._tabID = 1;
                    this._canvasLookup = new (System.Collections.Generic.Dictionary$2(System.String,Test.TabCanvas))();
                }
            },
            methods: {
                OnResize: function (e) {
                    Test.App.OnLayoutChange();
                },
                OnLayoutChange: function () {
                    var tc = Test.App.CurrentTabCanvas;
                    if (tc != null) {
                        tc.OnLayoutChange();
                    }
                },
                OnWindowLoad: function (eee) {
                    window.addEventListener("copy", $asm.$.Test.App.f1);

                    window.addEventListener("paste", $asm.$.Test.App.f2);

                    $(document).on("keydown", Test.App.OnKeyDown);
                    $(document).on("contextmenu", ".IAmAGraphCanvas", $asm.$.Test.App.f3);

                    Test.App._sageContainer = document.getElementById("SageContainer");
                    $("#SageManual").on("click", $asm.$.Test.App.f4);
                    $("#SageGraph6").on("click", $asm.$.Test.App.f5);
                    $("#SageSparse6").on("click", $asm.$.Test.App.f6);
                    $("#SageChromaticNumber").on("click", $asm.$.Test.App.f7);
                    $("#SageChromaticPolynomial").on("click", $asm.$.Test.App.f8);
                    $("#SageColoring").on("click", $asm.$.Test.App.f9);
                    $("#SageIndependentSet").on("click", $asm.$.Test.App.f10);
                    $("#SageIsPerfect").on("click", $asm.$.Test.App.f11);
                    $("#SageMatchingPolynomial").on("click", $asm.$.Test.App.f12);
                    $("#SagePathwidth").on("click", $asm.$.Test.App.f13);
                    $("#SageTreewidth").on("click", $asm.$.Test.App.f14);
                    $("#SageTuttePolynomial").on("click", $asm.$.Test.App.f15);
                    $("#SageVertexCover").on("click", $asm.$.Test.App.f16);
                    $("#SageCliqueComplex").on("click", $asm.$.Test.App.f17);
                    $("#SageCliqueMaximum").on("click", $asm.$.Test.App.f18);
                    $("#SageCliqueNumber").on("click", $asm.$.Test.App.f19);
                    $("#SageCliquePolynomial").on("click", $asm.$.Test.App.f20);
                    $("#SageBridges").on("click", $asm.$.Test.App.f21);
                    $("#SageGomoryHuTree").on("click", $asm.$.Test.App.f22);
                    $("#SageRandomSpanningTree").on("click", $asm.$.Test.App.f23);
                    $("#SageApexVertices").on("click", $asm.$.Test.App.f24);
                    $("#SageIsApex").on("click", $asm.$.Test.App.f25);
                    $("#SageIsArcTransitive").on("click", $asm.$.Test.App.f26);
                    $("#SageIsAsteroidalTripleFree").on("click", $asm.$.Test.App.f27);
                    $("#SageIsBiconnected").on("click", $asm.$.Test.App.f28);
                    $("#SageIsBipartite").on("click", $asm.$.Test.App.f29);
                    $("#SageIsBlockGraph").on("click", $asm.$.Test.App.f30);
                    $("#SageIsCartesianProduct").on("click", $asm.$.Test.App.f31);
                    $("#SageIsDistanceRegular").on("click", $asm.$.Test.App.f32);
                    $("#SageIsEdgeTransitive").on("click", $asm.$.Test.App.f33);
                    $("#SageIsEvenHoleFree").on("click", $asm.$.Test.App.f34);
                    $("#SageIsForest").on("click", $asm.$.Test.App.f35);
                    $("#SageIsHalfTransitive").on("click", $asm.$.Test.App.f36);
                    $("#SageIsLineGraph").on("click", $asm.$.Test.App.f37);
                    $("#SageIsLongAntiholeFree").on("click", $asm.$.Test.App.f38);
                    $("#SageIsLongHoleFree").on("click", $asm.$.Test.App.f39);
                    $("#SageIsOddHoleFree").on("click", $asm.$.Test.App.f40);
                    $("#SageIsOverfull").on("click", $asm.$.Test.App.f41);
                    $("#SageIsPartialCube").on("click", $asm.$.Test.App.f42);
                    $("#SageIsPrime").on("click", $asm.$.Test.App.f43);
                    $("#SageIsSemiSymmetric").on("click", $asm.$.Test.App.f44);
                    $("#SageIsSplit").on("click", $asm.$.Test.App.f45);
                    $("#SageIsStronglyRegular").on("click", $asm.$.Test.App.f46);
                    $("#SageIsTree").on("click", $asm.$.Test.App.f47);
                    $("#SageIsTriangleFree").on("click", $asm.$.Test.App.f48);
                    $("#SageIsWeaklyChordal").on("click", $asm.$.Test.App.f49);
                    $("#SageOddGirth").on("click", $asm.$.Test.App.f50);
                    $("#SageFractionalChromaticIndex").on("click", $asm.$.Test.App.f51);
                    $("#SageHasPerfectMatching").on("click", $asm.$.Test.App.f52);
                    $("#SageKirchhoffSymanzikPolynomial").on("click", $asm.$.Test.App.f53);
                    $("#SageLovaszTheta").on("click", $asm.$.Test.App.f54);
                    $("#SageMatching").on("click", $asm.$.Test.App.f55);
                    $("#SageMaximumAverageDegree").on("click", $asm.$.Test.App.f56);
                    $("#SageSeidelAdjacencyMatrix").on("click", $asm.$.Test.App.f57);
                    $("#SageNetworkxGraph").on("click", $asm.$.Test.App.f58);
                    $("#SageAdjacencyMatrix").on("click", $asm.$.Test.App.f59);
                    $("#SageIncidenceMatrix").on("click", $asm.$.Test.App.f60);
                    $("#SageDistanceMatrix").on("click", $asm.$.Test.App.f61);
                    $("#SageKirchhoffMatrix").on("click", $asm.$.Test.App.f62);
                    $("#SageDensity").on("click", $asm.$.Test.App.f63);
                    $("#SageOrder").on("click", $asm.$.Test.App.f64);
                    $("#SageSize").on("click", $asm.$.Test.App.f65);
                    $("#SageAverageDegree").on("click", $asm.$.Test.App.f66);
                    $("#SageDegreeSequence").on("click", $asm.$.Test.App.f67);
                    $("#SageCycleBasis").on("click", $asm.$.Test.App.f68);
                    $("#SageAllPaths").on("click", $asm.$.Test.App.f69);
                    $("#SageTrianglesCount").on("click", $asm.$.Test.App.f70);
                    $("#SageSpectrum").on("click", $asm.$.Test.App.f71);
                    $("#SageEigenvectors").on("click", $asm.$.Test.App.f72);
                    $("#SageEigenspaces").on("click", $asm.$.Test.App.f73);
                    $("#SageAutomorphismGroup").on("click", $asm.$.Test.App.f74);
                    $("#SageIsVertexTransitive").on("click", $asm.$.Test.App.f75);
                    $("#SageCanonicalLabel").on("click", $asm.$.Test.App.f76);
                    $("#SageIsCayley").on("click", $asm.$.Test.App.f77);
                    $("#SageIsEulerian").on("click", $asm.$.Test.App.f78);
                    $("#SageIsPlanar").on("click", $asm.$.Test.App.f79);
                    $("#SageIsRegular").on("click", $asm.$.Test.App.f80);
                    $("#SageIsChordal").on("click", $asm.$.Test.App.f81);
                    $("#SageIsCirculant").on("click", $asm.$.Test.App.f82);
                    $("#SageIsInterval").on("click", $asm.$.Test.App.f83);
                    $("#SageIsGallaiTree").on("click", $asm.$.Test.App.f84);
                    $("#SageIsClique").on("click", $asm.$.Test.App.f85);
                    $("#SageIsCycle").on("click", $asm.$.Test.App.f86);
                    $("#SageIsIndependentSet").on("click", $asm.$.Test.App.f87);
                    $("#SageIsTransitivelyReduced").on("click", $asm.$.Test.App.f88);
                    $("#SageIsEquitable").on("click", $asm.$.Test.App.f89);
                    $("#SageEccentricity").on("click", $asm.$.Test.App.f90);
                    $("#SageRadius").on("click", $asm.$.Test.App.f91);
                    $("#SageDiameter").on("click", $asm.$.Test.App.f92);
                    $("#SageGirth").on("click", $asm.$.Test.App.f93);
                    $("#SageEdgeConnectivity").on("click", $asm.$.Test.App.f94);
                    $("#SageVertexConnectivity").on("click", $asm.$.Test.App.f95);
                    $("#SageIsHamiltonian").on("click", $asm.$.Test.App.f96);
                    $("#SageCharacteristicPolynomial").on("click", $asm.$.Test.App.f97);
                    $("#SageGenus").on("click", $asm.$.Test.App.f98);


                    $("#SageLayoutSprings").on("click", $asm.$.Test.App.f99);
                    $("#SageLayoutRanked").on("click", $asm.$.Test.App.f100);
                    $("#SageLayoutRandom").on("click", $asm.$.Test.App.f101);
                    $("#SageLayoutCircular").on("click", $asm.$.Test.App.f102);
                    $("#SageLayoutTree").on("click", $asm.$.Test.App.f103);
                    $("#SageLayoutGraphViz").on("click", $asm.$.Test.App.f104);
                    $("#SageLayoutPlanar").on("click", $asm.$.Test.App.f105);

                    $(".NamedGraph").on("click", $asm.$.Test.App.f106);



                    Test.App.NewTab();
                    Test.App.AddNewSheetTab();

                    $(".nav-tabs").on("click", "a", $asm.$.Test.App.f107);

                    $(".new-sheet-anchor").on("click", $asm.$.Test.App.f108);
                },
                AddNewSheetTab: function () {
                    var tabControl = document.getElementById("TabControl");
                    Test.App._newSheetTab = document.createElement('li');
                    Test.App._newSheetTab.id = "new-sheet";

                    var anchor = document.createElement('a');
                    anchor.className = "new-sheet-anchor";
                    anchor.textContent = "+";
                    anchor.href = "#";

                    Test.App._newSheetTab.appendChild(anchor);
                    tabControl.appendChild(Test.App._newSheetTab);
                },
                NewTab: function (name, G) {
                    var $t, $t1;
                    if (name === void 0) { name = null; }
                    if (G === void 0) { G = null; }
                    if (System.String.isNullOrEmpty(name)) {
                        name = "sheet " + Test.App._tabID;
                    }

                    var canvas = document.createElement('canvas');
                    canvas.id = "Tab" + Test.App._tabID;
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                    canvas.className = "IAmAGraphCanvas";

                    canvas.onshow = Bridge.fn.combine(canvas.onshow, function () {
                        canvas.width = canvas.parentElement.clientWidth;
                        canvas.height = canvas.parentElement.clientHeight;
                    });

                    if (G == null) {
                        G = new Graphs.Graph.ctor();
                    }
                    var graphCanvas = new Graphs.GraphCanvas(G);
                    var tc = new Test.TabCanvas(canvas, graphCanvas);
                    tc.Invalidate();

                    var tabPane = document.createElement('div');
                    tabPane.className = "tab-pane active";
                    tabPane.id = "Tab" + Test.App._tabID;
                    tabPane.appendChild(canvas);

                    var tabControlContent = document.getElementById("TabControlContent");
                    $t = Bridge.getEnumerator(tabControlContent.children);
                    try {
                        while ($t.moveNext()) {
                            var child = $t.Current;
                            child.className = "tab-pane";
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }tabControlContent.appendChild(tabPane);

                    var tab = document.createElement('li');
                    tab.className = "active";

                    var anchor = document.createElement('a');
                    anchor.setAttribute("data-toggle", "tab");
                    anchor.textContent = name;
                    anchor.href = "#Tab" + Test.App._tabID;
                    Test.App._canvasLookup.set(anchor.href, tc);
                    Test.App._currentTabCanvas = anchor.href;

                    tab.appendChild(anchor);

                    var tabControl = document.getElementById("TabControl");
                    $t1 = Bridge.getEnumerator(tabControl.children);
                    try {
                        while ($t1.moveNext()) {
                            var child1 = $t1.Current;
                            child1.className = "narf";
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }tabControl.insertBefore(tab, Test.App._newSheetTab);

                    Test.App._tabID = (Test.App._tabID + 1) | 0;
                },
                OnKeyDown: function (e) {
                    var tc = Test.App.CurrentTabCanvas;

                    switch (e.key) {
                        case "f": 
                            tc.GraphCanvas.DoZoomFit();
                            break;
                        case "-": 
                            tc.GraphCanvas.DoZoom(-1, new GraphicsLayer.Box.ctor(0.5, 0.5));
                            break;
                        case "+": 
                            tc.GraphCanvas.DoZoom(1, new GraphicsLayer.Box.ctor(0.5, 0.5));
                            break;
                        case "i": 
                            tc.GraphCanvas.ToggleVertexIndices();
                            break;
                        case "I": 
                            tc.GraphCanvas.RotateVertexIndices();
                            break;
                        case "j": 
                            tc.GraphCanvas.ToggleEdgeIndices();
                            break;
                        case "J": 
                            tc.GraphCanvas.RotateEdgeIndices();
                            break;
                        case "r": 
                            tc.GraphCanvas.DoReverseSelectedEdges();
                            break;
                        case "R": 
                            tc.GraphCanvas.DoRotateSelectedEdges();
                            break;
                        case "y": 
                            if (e.ctrlKey) {
                                tc.GraphCanvas.DoRedo();
                            }
                            break;
                        case "z": 
                            if (e.ctrlKey) {
                                tc.GraphCanvas.DoUndo();
                            }
                            break;
                    }
                },
                AskSage: function (s) {
                    var div = Test.App.AppendSageDiv(s);

                    sagecell.makeSagecell({"inputLocation": "div.compute", hide: ["permalink", "fullScreen"], autoeval:false});
                    $("#SageModal").modal('show');
                },
                AskSageAuto: function (s) {
                    Test.App.AppendSageDiv(s);

                    sagecell.makeSagecell({"inputLocation": "div.compute", hide: ["permalink", "evalButton", "fullScreen", "editor"], autoeval:true});
                    $("#SageModal").modal('show');
                },
                AskSageAsync: function (G, sageCodeAboutG) {
                    var $step = 0,
                        $task1, 
                        $taskResult1, 
                        $jumpFromFinally, 
                        $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                        $returnValue, 
                        $async_e, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    $step = System.Array.min([0,1], $step);
                                    switch ($step) {
                                        case 0: {
                                            $task1 = Test.App.AskSageAsync$1(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(G.GetEdgeWeights()), "')", '\n', sageCodeAboutG));
                                            $step = 1;
                                            $task1.continueWith($asyncBody);
                                            return;
                                        }
                                        case 1: {
                                            $taskResult1 = $task1.getAwaitedResult();
                                            $tcs.setResult($taskResult1);
                                            return;
                                        }
                                        default: {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                $tcs.setException($async_e);
                            }
                        }, arguments);

                    $asyncBody();
                    return $tcs.task;
                },
                AskSageAsync$1: function (sageCode) {
                    var $step = 0,
                        $task1, 
                        $jumpFromFinally, 
                        $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                        $returnValue, 
                        output, 
                        response, 
                        ss, 
                        $async_e, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    $step = System.Array.min([0,1,2,3,4], $step);
                                    switch ($step) {
                                        case 0: {
                                            output = document.getElementById("SageSecretOutputHole");
                                            output.textContent = "working";
                                            Test.App.AppendSageDiv(sageCode);

                                            sagecell.makeSagecell({"inputLocation": "div.compute", hide: ["permalink", "evalButton", "fullScreen", "editor"], autoeval:true, outputLocation:"#SageSecretOutputHole"});

                                            
                                            $step = 1;
                                            continue;
                                        }
                                        case 1: {
                                            if ( !System.String.contains(output.textContent,"Accepted:") ) {
                                                $step = 2;
                                                continue;
                                            } 
                                            $step = 4;
                                            continue;
                                        }
                                        case 2: {
                                            $task1 = System.Threading.Tasks.Task.delay(100);
                                            $step = 3;
                                            $task1.continueWith($asyncBody);
                                            return;
                                        }
                                        case 3: {
                                            $task1.getAwaitedResult();
                                            
                                            $step = 1;
                                            continue;
                                        }
                                        case 4: {
                                            response = output.textContent;
                                            if (System.String.isNullOrEmpty(response)) {
                                                $tcs.setResult("flibble");
                                                return;
                                            }

                                            ss = System.Linq.Enumerable.from(System.String.split(response, System.Array.init(['\n'], System.String), null, 1)).firstOrDefault($asm.$.Test.App.f109, null);
                                            if (System.String.isNullOrEmpty(ss)) {
                                                $tcs.setResult("flabble");
                                                return;
                                            }

                                            ss = ss.substr(((((System.String.indexOf(ss, "text/plain") + ("text/plain").length) | 0) + 3) | 0));
                                            ss = ss.substr(0, System.String.indexOf(ss, "\""));

                                            $tcs.setResult(ss);
                                            return;
                                        }
                                        default: {
                                            $tcs.setResult(null);
                                            return;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                $tcs.setException($async_e);
                            }
                        }, arguments);

                    $asyncBody();
                    return $tcs.task;
                },
                AppendSageDiv: function (s) {
                    var $t;
                    if (Test.App._sageContainer.childElementCount > 0) {
                        Test.App._sageContainer.removeChild(($t = Test.App._sageContainer.children)[System.Array.index(0, $t)]);
                    }
                    var div = document.createElement('div');
                    div.className = "compute";
                    div.textContent = s;
                    Test.App._sageContainer.appendChild(div);

                    return div;
                }
            }
        }
    });

    Bridge.ns("Test.App", $asm.$);

    Bridge.apply($asm.$.Test.App, {
        f1: function (e) {
            if ((Bridge.is(e.target, HTMLSpanElement)) || (Bridge.is(e.target, HTMLAnchorElement))) {
                e.preventDefault();
            }
            var tc = Test.App._canvasLookup.get(Test.App._currentTabCanvas);
            var s = tc.GraphCanvas.DoCopy();
            if (!System.String.isNullOrEmpty(s)) {
                e.clipboardData.setData("Text", s);
            }
        },
        f2: function (e) {
            e.preventDefault();
            var s = e.clipboardData.getData("Text");
            var tc = Test.App._canvasLookup.get(Test.App._currentTabCanvas);
            tc.GraphCanvas.DoPaste(s || "");
        },
        f3: function (e) {
            e.preventDefault();
        },
        f4: function () {
            Test.App.CurrentTabCanvas.SageManual();
        },
        f5: function () {
            Test.App.CurrentTabCanvas.SageGraph6();
        },
        f6: function () {
            Test.App.CurrentTabCanvas.SageSparse6();
        },
        f7: function () {
            Test.App.CurrentTabCanvas.SageChromaticNumber();
        },
        f8: function () {
            Test.App.CurrentTabCanvas.SageChromaticPolynomial();
        },
        f9: function () {
            Test.App.CurrentTabCanvas.SageColoring();
        },
        f10: function () {
            Test.App.CurrentTabCanvas.SageIndependentSet();
        },
        f11: function () {
            Test.App.CurrentTabCanvas.SageIsPerfect();
        },
        f12: function () {
            Test.App.CurrentTabCanvas.SageMatchingPolynomial();
        },
        f13: function () {
            Test.App.CurrentTabCanvas.SagePathwidth();
        },
        f14: function () {
            Test.App.CurrentTabCanvas.SageTreewidth();
        },
        f15: function () {
            Test.App.CurrentTabCanvas.SageTuttePolynomial();
        },
        f16: function () {
            Test.App.CurrentTabCanvas.SageVertexCover();
        },
        f17: function () {
            Test.App.CurrentTabCanvas.SageCliqueComplex();
        },
        f18: function () {
            Test.App.CurrentTabCanvas.SageCliqueMaximum();
        },
        f19: function () {
            Test.App.CurrentTabCanvas.SageCliqueNumber();
        },
        f20: function () {
            Test.App.CurrentTabCanvas.SageCliquePolynomial();
        },
        f21: function () {
            Test.App.CurrentTabCanvas.SageBridges();
        },
        f22: function () {
            Test.App.CurrentTabCanvas.SageGomoryHuTree();
        },
        f23: function () {
            Test.App.CurrentTabCanvas.SageRandomSpanningTree();
        },
        f24: function () {
            Test.App.CurrentTabCanvas.SageApexVertices();
        },
        f25: function () {
            Test.App.CurrentTabCanvas.SageIsApex();
        },
        f26: function () {
            Test.App.CurrentTabCanvas.SageIsArcTransitive();
        },
        f27: function () {
            Test.App.CurrentTabCanvas.SageIsAsteroidalTripleFree();
        },
        f28: function () {
            Test.App.CurrentTabCanvas.SageIsBiconnected();
        },
        f29: function () {
            Test.App.CurrentTabCanvas.SageIsBipartite();
        },
        f30: function () {
            Test.App.CurrentTabCanvas.SageIsBlockGraph();
        },
        f31: function () {
            Test.App.CurrentTabCanvas.SageIsCartesianProduct();
        },
        f32: function () {
            Test.App.CurrentTabCanvas.SageIsDistanceRegular();
        },
        f33: function () {
            Test.App.CurrentTabCanvas.SageIsEdgeTransitive();
        },
        f34: function () {
            Test.App.CurrentTabCanvas.SageIsEvenHoleFree();
        },
        f35: function () {
            Test.App.CurrentTabCanvas.SageIsForest();
        },
        f36: function () {
            Test.App.CurrentTabCanvas.SageIsHalfTransitive();
        },
        f37: function () {
            Test.App.CurrentTabCanvas.SageIsLineGraph();
        },
        f38: function () {
            Test.App.CurrentTabCanvas.SageIsLongAntiholeFree();
        },
        f39: function () {
            Test.App.CurrentTabCanvas.SageIsLongHoleFree();
        },
        f40: function () {
            Test.App.CurrentTabCanvas.SageIsOddHoleFree();
        },
        f41: function () {
            Test.App.CurrentTabCanvas.SageIsOverfull();
        },
        f42: function () {
            Test.App.CurrentTabCanvas.SageIsPartialCube();
        },
        f43: function () {
            Test.App.CurrentTabCanvas.SageIsPrime();
        },
        f44: function () {
            Test.App.CurrentTabCanvas.SageIsSemiSymmetric();
        },
        f45: function () {
            Test.App.CurrentTabCanvas.SageIsSplit();
        },
        f46: function () {
            Test.App.CurrentTabCanvas.SageIsStronglyRegular();
        },
        f47: function () {
            Test.App.CurrentTabCanvas.SageIsTree();
        },
        f48: function () {
            Test.App.CurrentTabCanvas.SageIsTriangleFree();
        },
        f49: function () {
            Test.App.CurrentTabCanvas.SageIsWeaklyChordal();
        },
        f50: function () {
            Test.App.CurrentTabCanvas.SageOddGirth();
        },
        f51: function () {
            Test.App.CurrentTabCanvas.SageFractionalChromaticIndex();
        },
        f52: function () {
            Test.App.CurrentTabCanvas.SageHasPerfectMatching();
        },
        f53: function () {
            Test.App.CurrentTabCanvas.SageKirchhoffSymanzikPolynomial();
        },
        f54: function () {
            Test.App.CurrentTabCanvas.SageLovaszTheta();
        },
        f55: function () {
            Test.App.CurrentTabCanvas.SageMatching();
        },
        f56: function () {
            Test.App.CurrentTabCanvas.SageMaximumAverageDegree();
        },
        f57: function () {
            Test.App.CurrentTabCanvas.SageSeidelAdjacencyMatrix();
        },
        f58: function () {
            Test.App.CurrentTabCanvas.SageNetworkxGraph();
        },
        f59: function () {
            Test.App.CurrentTabCanvas.SageAdjacencyMatrix();
        },
        f60: function () {
            Test.App.CurrentTabCanvas.SageIncidenceMatrix();
        },
        f61: function () {
            Test.App.CurrentTabCanvas.SageDistanceMatrix();
        },
        f62: function () {
            Test.App.CurrentTabCanvas.SageKirchhoffMatrix();
        },
        f63: function () {
            Test.App.CurrentTabCanvas.SageDensity();
        },
        f64: function () {
            Test.App.CurrentTabCanvas.SageOrder();
        },
        f65: function () {
            Test.App.CurrentTabCanvas.SageSize();
        },
        f66: function () {
            Test.App.CurrentTabCanvas.SageAverageDegree();
        },
        f67: function () {
            Test.App.CurrentTabCanvas.SageDegreeSequence();
        },
        f68: function () {
            Test.App.CurrentTabCanvas.SageCycleBasis();
        },
        f69: function () {
            Test.App.CurrentTabCanvas.SageAllPaths();
        },
        f70: function () {
            Test.App.CurrentTabCanvas.SageTrianglesCount();
        },
        f71: function () {
            Test.App.CurrentTabCanvas.SageSpectrum();
        },
        f72: function () {
            Test.App.CurrentTabCanvas.SageEigenvectors();
        },
        f73: function () {
            Test.App.CurrentTabCanvas.SageEigenspaces();
        },
        f74: function () {
            Test.App.CurrentTabCanvas.SageAutomorphismGroup();
        },
        f75: function () {
            Test.App.CurrentTabCanvas.SageIsVertexTransitive();
        },
        f76: function () {
            Test.App.CurrentTabCanvas.SageCanonicalLabel();
        },
        f77: function () {
            Test.App.CurrentTabCanvas.SageIsCayley();
        },
        f78: function () {
            Test.App.CurrentTabCanvas.SageIsEulerian();
        },
        f79: function () {
            Test.App.CurrentTabCanvas.SageIsPlanar();
        },
        f80: function () {
            Test.App.CurrentTabCanvas.SageIsRegular();
        },
        f81: function () {
            Test.App.CurrentTabCanvas.SageIsChordal();
        },
        f82: function () {
            Test.App.CurrentTabCanvas.SageIsCirculant();
        },
        f83: function () {
            Test.App.CurrentTabCanvas.SageIsInterval();
        },
        f84: function () {
            Test.App.CurrentTabCanvas.SageIsGallaiTree();
        },
        f85: function () {
            Test.App.CurrentTabCanvas.SageIsClique();
        },
        f86: function () {
            Test.App.CurrentTabCanvas.SageIsCycle();
        },
        f87: function () {
            Test.App.CurrentTabCanvas.SageIsIndependentSet();
        },
        f88: function () {
            Test.App.CurrentTabCanvas.SageIsTransitivelyReduced();
        },
        f89: function () {
            Test.App.CurrentTabCanvas.SageIsEquitable();
        },
        f90: function () {
            Test.App.CurrentTabCanvas.SageEccentricity();
        },
        f91: function () {
            Test.App.CurrentTabCanvas.SageRadius();
        },
        f92: function () {
            Test.App.CurrentTabCanvas.SageDiameter();
        },
        f93: function () {
            Test.App.CurrentTabCanvas.SageGirth();
        },
        f94: function () {
            Test.App.CurrentTabCanvas.SageEdgeConnectivity();
        },
        f95: function () {
            Test.App.CurrentTabCanvas.SageVertexConnectivity();
        },
        f96: function () {
            Test.App.CurrentTabCanvas.SageIsHamiltonian();
        },
        f97: function () {
            Test.App.CurrentTabCanvas.SageCharacteristicPolynomial();
        },
        f98: function () {
            Test.App.CurrentTabCanvas.SageGenus();
        },
        f99: function () {
            Test.App.CurrentTabCanvas.SageLayoutSpring();
        },
        f100: function () {
            Test.App.CurrentTabCanvas.SageLayoutRanked();
        },
        f101: function () {
            Test.App.CurrentTabCanvas.SageLayoutExtendRandomly();
        },
        f102: function () {
            Test.App.CurrentTabCanvas.SageLayoutCircular();
        },
        f103: function () {
            Test.App.CurrentTabCanvas.SageLayoutTree();
        },
        f104: function () {
            Test.App.CurrentTabCanvas.SageLayoutGraphviz();
        },
        f105: function () {
            Test.App.CurrentTabCanvas.SageLayoutPlanar();
        },
        f106: function (ee) {
            Test.TabCanvas.SageLoadNamedGraph(Bridge.cast(ee.currentTarget, HTMLElement).textContent);
        },
        f107: function (ee) {
            ee.preventDefault();
            if (!$(this).hasClass("new-sheet-anchor")) {
                var d = $(this);
                Test.App._currentTabCanvas = ee.target.href;
                var canvas = Test.App._canvasLookup.get(Test.App._currentTabCanvas).Canvas;
                d.tab("show");
            }
        },
        f108: function (ee) {
            ee.preventDefault();
            Test.App.NewTab();
        },
        f109: function (line) {
        return System.String.contains(line,"Accepted:");
    }
    });

    Bridge.define("Test.HelperExtensions", {
        statics: {
            methods: {
                ToColor: function (argb) {
                    return System.String.format("rgba({0},{1},{2},{3:0.00})", Bridge.box(argb.R, System.Int32), Bridge.box(argb.G, System.Int32), Bridge.box(argb.B, System.Int32), Bridge.box(argb.A / 255.0, System.Double, System.Double.format, System.Double.getHashCode));
                }
            }
        }
    });

    Bridge.define("Test.LayoutAnimation", {
        statics: {
            fields: {
                Steps: 0
            },
            ctors: {
                init: function () {
                    this.Steps = 100;
                }
            }
        },
        fields: {
            _update: null,
            _finalUpdate: null,
            _layout: null,
            _xstep: null,
            _ystep: null,
            _step: 0,
            _G: null
        },
        ctors: {
            init: function () {
                this._step = 0;
            },
            ctor: function (update, finalUpdate, layout, G) {
                this.$initialize();
                this._G = G;
                this._update = update;
                this._finalUpdate = finalUpdate;
                this._layout = layout;

                try {
                    this._xstep = System.Array.init(this._layout.Count, 0, System.Double);
                    this._ystep = System.Array.init(this._layout.Count, 0, System.Double);
                    for (var i = 0; i < this._layout.Count; i = (i + 1) | 0) {
                        this._xstep[System.Array.index(i, this._xstep)] = (this._layout.getItem(i).X - this._G.Vertices.getItem(i).X) / Test.LayoutAnimation.Steps;
                        this._ystep[System.Array.index(i, this._ystep)] = (this._layout.getItem(i).Y - this._G.Vertices.getItem(i).Y) / Test.LayoutAnimation.Steps;
                    }
                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
            }
        },
        methods: {
            Animate: function () {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([1,2,3,4], $step);
                                switch ($step) {

                                    case 1: {
                                        if ( this._step < Test.LayoutAnimation.Steps ) {
                                            $step = 2;
                                            continue;
                                        } 
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        this.DoStep();
                                        $task1 = System.Threading.Tasks.Task.delay(10);
                                        $step = 3;
                                        $task1.continueWith($asyncBody);
                                        return;
                                    }
                                    case 3: {
                                        $task1.getAwaitedResult();
                                        
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            DoStep: function () {
                var $t, $t1;
                for (var i = 0; i < this._layout.Count; i = (i + 1) | 0) {
                    $t = this._G.Vertices.getItem(i);
                    $t.X += this._xstep[System.Array.index(i, this._xstep)];
                    $t1 = this._G.Vertices.getItem(i);
                    $t1.Y += this._ystep[System.Array.index(i, this._ystep)];
                }

                this._update();
                this._step = (this._step + 1) | 0;
                if (this._step >= Test.LayoutAnimation.Steps) {
                    this.OnFinish();
                }
            },
            OnFinish: function () {
                for (var i = 0; i < this._layout.Count; i = (i + 1) | 0) {
                    this._G.Vertices.getItem(i).X = this._layout.getItem(i).X;
                    this._G.Vertices.getItem(i).Y = this._layout.getItem(i).Y;
                }
                this._finalUpdate();
            }
        }
    });

    Bridge.define("Algorithms.DataStructures.UnionFindTrackedRoots$1", function (T) { return {
        inherits: [Algorithms.DataStructures.UnionFind$1(T)],
        fields: {
            _roots: null
        },
        ctors: {
            init: function () {
                this._roots = new (System.Collections.Generic.List$1(Algorithms.DataStructures.UnionFind$1.Node(T)))();
            }
        },
        methods: {
            FindAllExcept: function (nodes) {
                return System.Linq.Enumerable.from(this._roots).except(System.Linq.Enumerable.from(nodes).select(Bridge.fn.bind(this, function (n) {
                            return this.Find(n);
                        })));
            },
            RootAdded: function (n) {
                this._roots.add(n);
            },
            RootRemoved: function (n) {
                this._roots.remove(n);
            }
        }
    }; });

    Bridge.define("Algorithms.FixerBreaker.Chronicle.ChronicledBranch", {
        inherits: [System.Collections.Generic.IEnumerable$1(System.Collections.Generic.IEnumerable$1(Algorithms.FixerBreaker.Move))],
        props: {
            Alpha: 0,
            Beta: 0,
            SwapComponents: null
        },
        alias: ["getEnumerator", ["System$Collections$Generic$IEnumerable$1$System$Collections$Generic$IEnumerable$1$Algorithms$FixerBreaker$Move$getEnumerator", "System$Collections$Generic$IEnumerable$1$getEnumerator"]],
        ctors: {
            ctor: function (S, alpha, beta, partitions) {
                this.$initialize();
                this.Alpha = alpha;
                this.Beta = beta;
                this.SwapComponents = System.Linq.Enumerable.from(partitions).select(function (p) {
                        return System.Linq.Enumerable.from(p).select(function (i) {
                                return S.getItem(i);
                            }).toList(System.Int32);
                    }).toList(System.Collections.Generic.List$1(System.Int32));
            }
        },
        methods: {
            getEnumerator: function () {
                return System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.EnumerateShortLexNonempty(this.SwapComponents.Count)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.Chronicle.ChronicledBranch.f1)).getEnumerator();
            },
            System$Collections$IEnumerable$getEnumerator: function () {
                return this.getEnumerator();
            },
            EnumerateMoves: function (cf) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.FixerBreaker.Move))(Bridge.fn.bind(this, function (cf) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        i,
                        $t,
                        s,
                        $t1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.FixerBreaker.Move))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        i = 0;
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ( i < cf.Count ) {
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 8;
                                        continue;
                                    }
                                    case 2: {
                                        if (!cf.getItem(i)) {
                                                $step = 7;
                                                continue;
                                            }

                                            $t = Bridge.getEnumerator(this.SwapComponents.getItem(i));
                                            $step = 3;
                                            continue;
                                    }
                                    case 3: {
                                        if ($t.moveNext()) {
                                                s = $t.Current;
                                                $step = 4;
                                                continue;
                                            }
                                        $step = 6;
                                        continue;
                                    }
                                    case 4: {
                                        $enumerator.current = ($t1 = new Algorithms.FixerBreaker.Move(), $t1.Added = this.Alpha, $t1.Removed = this.Beta, $t1.Stack = s, $t1);
                                            $step = 5;
                                            return true;
                                    }
                                    case 5: {
                                        $step = 3;
                                        continue;
                                    }
                                    case 6: {
                                        $step = 7;
                                        continue;
                                    }
                                    case 7: {
                                        i = (i + 1) | 0;
                                        $step = 1;
                                        continue;
                                    }
                                    case 8: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.Chronicle.ChronicledBranch", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.Chronicle.ChronicledBranch, {
        f1: function (cf) {
            return this.EnumerateMoves(cf);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        statics: {
            methods: {
                ColorableWithoutEdge: function (knowledge, board, edgeIndex) {
                    return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge$1(knowledge, board.Stacks, edgeIndex);
                },
                ColorableWithoutEdge$1: function (knowledge, stacks, edgeIndex) {
                    var lg = knowledge.GraphKnowledge.LineGraph;

                    return lg.IsChoosable(System.Linq.Enumerable.range(0, lg.N).select(function (e) {
                        if (e === edgeIndex) {
                            return System.Int64(-1);
                        }

                        return knowledge.GetEdgeColorList$1(stacks, e);
                    }).toList(System.Int64));
                }
            }
        },
        props: {
            Reason: {
                get: function () {
                    return "color all";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                var lineGraph = knowledge.GraphKnowledge.LineGraph;
                var canColor = lineGraph.IsChoosable(System.Linq.Enumerable.range(0, lineGraph.N).select(function (e) {
                    return knowledge.GetEdgeColorList(board, e);
                }).toList(System.Int64));

                if (canColor) {
                    knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, this.Reason);
                }

                return canColor;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            Reason: {
                get: function () {
                    return "common color";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                var commonColor = System.Linq.Enumerable.from(board.Stacks).aggregate(System.Int64(-1), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer.f1).ne(System.Int64(0));

                if (commonColor) {
                    knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, this.Reason);
                }

                return commonColor;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.CommonColorAnalyzer, {
        f1: function (t, s) {
            return t.and(s);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            FindCleanestWin: false,
            DoSuperabundantCheck: false,
            Reason: {
                get: function () {
                    return "good swap";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return true;
                }
            },
            ChildReason: {
                get: function () {
                    return "";
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        ctors: {
            ctor: function (findCleanestWin, superabundantOnly) {
                if (findCleanestWin === void 0) { findCleanestWin = true; }
                if (superabundantOnly === void 0) { superabundantOnly = true; }

                this.$initialize();
                this.FindCleanestWin = findCleanestWin;
                this.DoSuperabundantCheck = superabundantOnly;
            }
        },
        methods: {
            IsChildBoardBetter: function (knowledge, board, childBoard) {
                return false;
            },
            Analyze: function (knowledge, board) {
                var $t, $t1, $t2;
                var potKnowledge = knowledge.getItem(board.Template.Value).getItem(board.ColorCount);
                var graphKnowledge = knowledge.GraphKnowledge;

                var boardKnowledge = potKnowledge.getItem(board);
                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(boardKnowledge)) {
                    return true;
                }

                var win = false;
                var winDepth = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(potKnowledge.ColorPairs).orderByDescending(function (pair) {
                        return System.Linq.Enumerable.from(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateExactlyOneIntersecters(board, pair)).count() % 2;
                    }));
                try {
                    while ($t.moveNext()) {
                        var colorPair = $t.Current;
                        var colorPairWinDepth = 0;
                        var winningSwaps = new (System.Collections.Generic.List$1(System.Object))();
                        var improvingSwaps = new (System.Collections.Generic.List$1(System.Object))();
                        var winningSwapAlwaysExists = true;
                        var improvingSwapAlwaysExists = true;

                        $t1 = Bridge.getEnumerator(Algorithms.FixerBreaker.Chronicle.BranchGenerator.EnumerateBranches(board, colorPair), Algorithms.FixerBreaker.Chronicle.ChronicledBranch);
                        try {
                            while ($t1.moveNext()) {
                                var branch = $t1.Current;
                                var winningSwap = null;
                                var improvingSwap = null;

                                var branchWinDepth = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;

                                $t2 = Bridge.getEnumerator(branch);
                                try {
                                    while ($t2.moveNext()) {
                                        var swap = $t2.Current;
                                        var childBoard = board.Clone();
                                        childBoard.DoMoveCombination(swap);

                                        if (this.DoSuperabundantCheck && !Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition(graphKnowledge.Graph, childBoard)) {
                                            continue;
                                        }

                                        var childBoardKnowledge = potKnowledge.getItem(childBoard);
                                        if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(childBoardKnowledge) && ((childBoardKnowledge.Depth + 1) | 0) < branchWinDepth) {
                                            branchWinDepth = (childBoardKnowledge.Depth + 1) | 0;
                                            winningSwap = { item1: branch.SwapComponents, item2: System.Linq.Enumerable.from(swap).toList(Algorithms.FixerBreaker.Move), item3: childBoardKnowledge.Reason };

                                            if (!this.FindCleanestWin) {
                                                break;
                                            }
                                        } else if (this.IsChildBoardBetter(knowledge, board, childBoard)) {
                                            improvingSwap = { item1: branch.SwapComponents, item2: System.Linq.Enumerable.from(swap).toList(Algorithms.FixerBreaker.Move), item3: System.String.concat(this.ChildReason, " better") };
                                        }
                                    }
                                } finally {
                                    if (Bridge.is($t2, System.IDisposable)) {
                                        $t2.System$IDisposable$dispose();
                                    }
                                }
                                colorPairWinDepth = Math.max(colorPairWinDepth, branchWinDepth);

                                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(winningSwap)) {
                                    winningSwaps.add(winningSwap);
                                    improvingSwaps.add(winningSwap);
                                } else {
                                    winningSwapAlwaysExists = false;
                                    if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Exists(improvingSwap)) {
                                        improvingSwaps.add(improvingSwap);
                                    } else {
                                        improvingSwapAlwaysExists = false;
                                        break;
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        if (winningSwapAlwaysExists) {
                            if (colorPairWinDepth < winDepth) {
                                winDepth = colorPairWinDepth;

                                win = true;
                                potKnowledge.AddWin$1(board, this.Reason, winDepth, colorPair, winningSwaps);

                                if (!this.FindCleanestWin) {
                                    break;
                                }
                            }
                        } else if (improvingSwapAlwaysExists) {
                            potKnowledge.AddImprovement(board, this.ChildReason, colorPairWinDepth, colorPair, improvingSwaps);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return win;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        statics: {
            methods: {
                IsKierstead: function (knowledge, board, enforceDegreeRequirement, reason) {
                    if (enforceDegreeRequirement === void 0) { enforceDegreeRequirement = false; }
                    if (reason === void 0) { reason = ""; }
                    return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.EnumerateKiersteadEdgeIndices(knowledge, board, enforceDegreeRequirement, reason)).any();
                },
                IsKierstead$1: function (knowledge, board, edgeIndex, enforceDegreeRequirement) {
                    var $t;
                    if (enforceDegreeRequirement === void 0) { enforceDegreeRequirement = false; }
                    $t = Bridge.getEnumerator(knowledge.GraphKnowledge.ConnectedOrderings.Value.get(knowledge.GraphKnowledge.Edges.getItem(edgeIndex)));
                    try {
                        while ($t.moveNext()) {
                            var ordering = $t.Current;
                            var penultimate = ordering.getItem(((ordering.Count - 2) | 0));
                            if (enforceDegreeRequirement && Algorithms.Int64Usage.PopulationCount(board.Stacks.getItem(penultimate)) <= knowledge.GraphKnowledge.Graph.Degree(penultimate)) {
                                continue;
                            }

                            if (Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.IsKierstead$2(knowledge, board, edgeIndex, ordering)) {
                                return true;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return false;
                },
                IsKierstead$2: function (knowledge, board, edgeIndex, ordering) {
                    var gn = knowledge.GraphKnowledge;

                    return gn.LineGraph.IsChoosable(System.Linq.Enumerable.range(0, gn.LineGraph.N).select(function (e) {
                        var $t;
                        if (e === edgeIndex) {
                            return System.Int64(-1);
                        }

                        var edge = gn.Edges.getItem(e);
                        var j = Math.max(ordering.indexOf(edge.item1), ordering.indexOf(edge.item2));
                        var priorStacks = System.Linq.Enumerable.from(board.Stacks).where(function (stack, i) {
                                return ordering.indexOf(i) < j;
                            }).toList(System.Int64);

                        var allowedList = System.Int64(0);
                        var list = knowledge.GetEdgeColorList(board, e);
                        $t = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits(list), System.Int32);
                        try {
                            while ($t.moveNext()) {
                                var alpha = $t.Current;
                                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.d_H(alpha, priorStacks) % 2 === 0) {
                                    allowedList = Algorithms.Int64Usage.SetBit(allowedList, System.Int64(alpha));
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        return allowedList;
                    }).toList(System.Int64));
                },
                EnumerateKiersteadEdgeIndices: function (knowledge, board, enforceDegreeRequirement, reason) {
                    return new (Bridge.GeneratorEnumerable$1(System.Int32))(Bridge.fn.bind(this, function (knowledge, board, enforceDegreeRequirement, reason) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            g,
                            internalVertices,
                            $t,
                            edgeIndex,
                            e,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Int32))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            if (enforceDegreeRequirement === void 0) { enforceDegreeRequirement = false; }
                                                if (reason === void 0) { reason = ""; }
                                                g = knowledge.GraphKnowledge.Graph;
                                                internalVertices = System.Linq.Enumerable.from(g.Vertices).where(function (v) {
                                                        return g.Degree(v) >= 2;
                                                    }).toList(System.Int32);

                                                $t = Bridge.getEnumerator(knowledge.GraphKnowledge.EdgeIndices);
                                                $step = 1;
                                                continue;
                                        }
                                        case 1: {
                                            if ($t.moveNext()) {
                                                    edgeIndex = $t.Current;
                                                    $step = 2;
                                                    continue;
                                                }
                                            $step = 6;
                                            continue;
                                        }
                                        case 2: {
                                            e = knowledge.GraphKnowledge.Edges.getItem(edgeIndex);
                                                if (internalVertices.contains(e.item1) && internalVertices.contains(e.item2)) {
                                                    $step = 1;
                                                    continue;
                                                }

                                                if (Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.IsKierstead$1(knowledge, board, edgeIndex)) {
                                                    $step = 3;
                                                    continue;
                                                } 
                                                $step = 5;
                                                continue;
                                        }
                                        case 3: {
                                            knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, reason);
                                                $enumerator.current = edgeIndex;
                                                $step = 4;
                                                return true;
                                        }
                                        case 4: {
                                            $step = 5;
                                            continue;
                                        }
                                        case 5: {
                                            $step = 1;
                                            continue;
                                        }
                                        case 6: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                }
            }
        },
        props: {
            Reason: {
                get: function () {
                    return "run kierstead";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                return Algorithms.FixerBreaker.KnowledgeEngine.KiersteadAnalyzer.IsKierstead(knowledge, board, true, this.Reason);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree", {
        inherits: function () { return [Algorithms.FixerBreaker.Tree$1(Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree)]; },
        props: {
            Swap: null,
            ColorPair: null,
            Board: null,
            Note: null,
            Number: 0
        },
        methods: {
            AddChild$1: function (swap) {
                var $t;
                var child = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.KnowledgeTree(), $t.Swap = swap, $t);
                this.AddChild(child);

                return child;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.ReductionAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            Reason: {
                get: function () {
                    return "reducible";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        methods: {
            Analyze: function (knowledge, board) {
                var $t, $t1;
                var g = knowledge.GraphKnowledge.Graph;

                $t = Bridge.getEnumerator(knowledge.GraphKnowledge.Edges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        var x = { v : Math.min(e.item1, e.item2) };
                        var y = { v : Math.max(e.item1, e.item2) };

                        var common = board.Stacks.getItem(x.v).and(board.Stacks.getItem(y.v));
                        var stacks = System.Linq.Enumerable.from(board.Stacks).toList(System.Int64);

                        $t1 = Bridge.getEnumerator(Algorithms.Int64Usage.EnumerateBits(common), System.Int32);
                        try {
                            while ($t1.moveNext()) {
                                var c = $t1.Current;
                                stacks.setItem(x.v, Algorithms.Int64Usage.ClearBit(board.Stacks.getItem(x.v), System.Int64(c)));
                                stacks.setItem(y.v, Algorithms.Int64Usage.ClearBit(board.Stacks.getItem(y.v), System.Int64(c)));

                                if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(g, stacks, board.Pot, (function ($me, x, y) {
                                    return function (X) {
                                        return X.contains(x.v) && X.contains(y.v) ? 1 : 0;
                                    };
                                })(this, x, y))) {
                                    knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, System.String.format("color {0}{1} with {2}", Bridge.box(((x.v + 1) | 0), System.Int32), Bridge.box(((y.v + 1) | 0), System.Int32), Bridge.box(c, System.Int32)));
                                    return true;
                                }
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IMind],
        props: {
            StopAnalysisOnBreakerWin: false,
            NearlyColorableOnly: false,
            SuperabundantOnly: false,
            MinPot: 0,
            MaxPot: 0,
            BreakerWonBoard: null,
            FixerWonAllNearlyColorableBoards: false,
            TotalPositions: 0,
            Knowledge: null,
            ColoringAnalyzer: null,
            SwapAnalyzer: null,
            BoardLookup: null,
            BoardIDLookup: null,
            RemainingBoardIDs: null,
            WonBoardIDs: null,
            NextBoardID: 0
        },
        alias: [
            "MaxPot", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$MaxPot",
            "FixerWonAllNearlyColorableBoards", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$FixerWonAllNearlyColorableBoards",
            "TotalPositions", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$TotalPositions",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$Analyze"
        ],
        ctors: {
            ctor: function (g) {
                this.$initialize();
                this.SuperabundantOnly = false;
                this.NearlyColorableOnly = false;
                this.MaxPot = Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Infinity;
                this.Knowledge = new Algorithms.FixerBreaker.KnowledgeEngine.Knowledge(g);

                this.ColoringAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer();
            }
        },
        methods: {
            Analyze: function (template, progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                this.BoardLookup = new (System.Collections.Generic.Dictionary$2(System.Int32,Algorithms.FixerBreaker.Board))();
                this.BoardIDLookup = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.Board,System.Int32))();
                this.WonBoardIDs = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.SortedIntList();
                this.SwapAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimSwapAnalyzer(this.Knowledge, this.BoardLookup, this.BoardIDLookup);

                this.FixerWonAllNearlyColorableBoards = true;

                var minimumColorCount = Math.max(this.MinPot, System.Linq.Enumerable.from(template.Sizes).max());
                var maximumColorCount = Math.min(this.MaxPot, System.Linq.Enumerable.from(template.Sizes).sum());

                var foundAtLeastOneBoard = false;
                $t = Bridge.getEnumerator(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.Interval(minimumColorCount, maximumColorCount), System.Int32);
                try {
                    while ($t.moveNext()) {
                        var colorCount = $t.Current;
                        this.GenerateAllBoards(template, colorCount, progress);
                        if (foundAtLeastOneBoard && this.BoardLookup.count <= 0) {
                            break;
                        }

                        this.TotalPositions = this.BoardLookup.count;
                        foundAtLeastOneBoard = true;
                        this.RemainingBoardIDs = System.Linq.Enumerable.from(this.BoardLookup.getKeys()).toList(System.Int32);

                        var breakerWin = !this.Analyze$1(progress);
                        if (breakerWin && this.StopAnalysisOnBreakerWin) {
                            return false;
                        }

                        this.Knowledge.getItem(template).Promote(colorCount);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return System.Linq.Enumerable.from(this.Knowledge.getItem(template).LostBoards).count() <= 0;
            },
            Analyze$1: function (progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                var winLength = 0;

                var totalBoards = this.RemainingBoardIDs.Count;
                var lastP = -1;

                for (var i = (this.RemainingBoardIDs.Count - 1) | 0; i >= 0; i = (i - 1) | 0) {
                    var id = this.RemainingBoardIDs.getItem(i);

                    var b = this.BoardLookup.get(id);
                    if (this.ColoringAnalyzer.Analyze(this.Knowledge, b)) {
                        this.RemainingBoardIDs.removeAt(i);
                        this.WonBoardIDs.Add(id);

                        if (!Bridge.staticEquals(progress, null)) {
                            var p = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this.RemainingBoardIDs.Count) | 0))), totalBoards)) | 0;
                            if (p > lastP) {
                                progress({ item1: "Finding all colorable positions...", item2: p });
                                lastP = p;
                            }
                        }
                    }
                }

                while (this.RemainingBoardIDs.Count > 0) {
                    winLength = (winLength + 1) | 0;

                    var count = this.RemainingBoardIDs.Count;

                    for (var i1 = (this.RemainingBoardIDs.Count - 1) | 0; i1 >= 0; i1 = (i1 - 1) | 0) {
                        var id1 = this.RemainingBoardIDs.getItem(i1);

                        var b1 = this.BoardLookup.get(id1);
                        if (this.SwapAnalyzer.Analyze(id1, this.WonBoardIDs)) {
                            this.RemainingBoardIDs.removeAt(i1);
                            this.WonBoardIDs.Add(id1);

                            if (!Bridge.staticEquals(progress, null)) {
                                var p1 = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this.RemainingBoardIDs.Count) | 0))), totalBoards)) | 0;
                                if (p1 > lastP) {
                                    progress({ item1: System.String.format("Finding all {0} move wins...", Bridge.box(winLength, System.Int32)), item2: p1 });
                                    lastP = p1;
                                }
                            }
                        }
                    }

                    if (this.RemainingBoardIDs.Count === count) {
                        $t = Bridge.getEnumerator(this.RemainingBoardIDs);
                        try {
                            while ($t.moveNext()) {
                                var id2 = $t.Current;
                                var b2 = this.BoardLookup.get(id2);
                                this.Knowledge.getItem(b2.Template.Value).getItem(b2.ColorCount).AddLoss(b2);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        var g = { v : this.Knowledge.GraphKnowledge.Graph };

                        var nearlyColorable = System.Linq.Enumerable.range(0, this.Knowledge.GraphKnowledge.LineGraph.N).all(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f1));
                        if (nearlyColorable) {
                            this.FixerWonAllNearlyColorableBoards = false;
                            this.BreakerWonBoard = System.Linq.Enumerable.from(this.RemainingBoardIDs).where((function ($me, g) {
                                    return Bridge.fn.bind($me, function (id3) {
                                        var b3 = this.BoardLookup.get(id3);
                                        return Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition(g.v, b3) && Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, b3, 0);
                                    });
                                })(this, g)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f2)).firstOrDefault(null, null);

                            if (this.BreakerWonBoard == null) {
                                this.BreakerWonBoard = this.BoardLookup.get(System.Linq.Enumerable.from(this.RemainingBoardIDs).first(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f3)));
                            }
                        }

                        return false;
                    }
                }

                return true;
            },
            GenerateAllBoards: function (template, colorCount, progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                var boards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.Board)).ctor();

                var vertices = System.Linq.Enumerable.range(0, template.Sizes.Count).toList(System.Int32);
                var potSet = System.Linq.Enumerable.range(0, colorCount).toList(System.Int32);
                var pot = Algorithms.Int64Usage.ToInt64(potSet);

                var fix = System.Linq.Enumerable.from(vertices).orderBy(function (v) {
                        return Math.abs(((template.Sizes.getItem(v) - ((Bridge.Int.div(colorCount, 2)) | 0)) | 0));
                    }).first();
                var lastP = -1;
                var current = 0;
                var total = System.Linq.Enumerable.from(vertices).aggregate(System.Int64(1), function (x, v) {
                        if (v === fix) {
                            return x;
                        }

                        return x.mul(Algorithms.Utility.ListUtility.BinomialCoefficient(System.Int64(potSet.Count), System.Int64(template.Sizes.getItem(v))));
                    });

                $t = Bridge.getEnumerator(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(vertices).select(function (v) {
                        if (v === fix) {
                            return Algorithms.GenericExtensions.EnList(System.Collections.Generic.List$1(System.Int32), System.Linq.Enumerable.from(potSet).take(template.Sizes.getItem(v)).toList(System.Int32));
                        }

                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, potSet, template.Sizes.getItem(v));
                    })), System.Collections.Generic.IEnumerable$1(System.Collections.Generic.List$1(System.Int32)));
                try {
                    while ($t.moveNext()) {
                        var assignmentSets = $t.Current;
                        var sets = System.Linq.Enumerable.from(assignmentSets).toList(System.Collections.Generic.List$1(System.Int32));
                        var totalColors = System.Linq.Enumerable.from(sets).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f4).distinct().count();
                        if (totalColors < colorCount) {
                            continue;
                        }

                        var stacks = System.Linq.Enumerable.from(sets).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind.f5).toList(System.Int64);

                        if (this.SuperabundantOnly && !Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(this.Knowledge.GraphKnowledge.Graph, stacks, pot)) {
                            continue;
                        }

                        var board = new Algorithms.FixerBreaker.Board(stacks, pot);

                        var count = boards.Count;
                        boards.add(board);

                        if (boards.Count > count) {
                            this.BoardLookup.set(this.NextBoardID, board);
                            this.BoardIDLookup.set(board, this.NextBoardID);

                            this.NextBoardID = (this.NextBoardID + 1) | 0;
                        }

                        if (!Bridge.staticEquals(progress, null)) {
                            var p = System.Int64.clip32(System.Int64(Bridge.Int.mul(100, current)).div(total));
                            if (p > lastP) {
                                progress({ item1: "Finding all positions...", item2: p });
                                lastP = p;
                            }
                        }

                        current = (current + 1) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.SlimMind, {
        f1: function (e) {
            return System.Linq.Enumerable.from(this.RemainingBoardIDs).any(Bridge.fn.bind(this, function (id3) {
                    return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, this.BoardLookup.get(id3), e);
                }));
        },
        f2: function (id3) {
            return this.BoardLookup.get(id3);
        },
        f3: function (id3) {
            return Algorithms.FixerBreaker.KnowledgeEngine.ColoringAnalyzer.ColorableWithoutEdge(this.Knowledge, this.BoardLookup.get(id3), 0);
        },
        f4: function (set) {
            return set;
        },
        f5: function (list) {
            return Algorithms.Int64Usage.ToInt64(list);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree", {
        inherits: function () { return [Algorithms.FixerBreaker.Tree$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree)]; },
        props: {
            Board: null,
            IsColorable: false,
            IsSuperabundant: false,
            IsFixerWin: false,
            GameTreeIndex: 0,
            SameAsIndex: 0,
            Info: null
        },
        methods: {
            AddChild$1: function (tree, info) {
                tree.Info = info;
                this.AddChild(tree);
            },
            equals: function (obj) {
                var gg = Bridge.as(obj, Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree);
                if (gg == null) {
                    return false;
                }

                return gg.Board.Equals(this.Board);
            },
            getHashCode: function () {
                return this.Board.getHashCode();
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo", {
        inherits: [System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo)],
        methods: {
            Add: function (breakerChoice, i, j, fixerResponse) {
                var $t;
                this.add(($t = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo(), $t.Partition = System.Linq.Enumerable.from(breakerChoice).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo.f1).toList(System.Collections.Generic.List$1(System.Int32)), $t.Alpha = i, $t.Beta = j, $t.Response = fixerResponse, $t.SwapVertices = Algorithms.Int64Usage.ToSet$1(fixerResponse), $t));
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTreeInfo, {
        f1: function (choice) {
            return Algorithms.Int64Usage.ToSet$1(choice);
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GreedyWinFilter", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter],
        fields: {
            _swapAnalyzer: null
        },
        ctors: {
            ctor: function (swapAnalyzer) {
                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter.ctor.call(this);
                this._swapAnalyzer = swapAnalyzer;
            }
        },
        methods: {
            Filter: function (R, W) {
                return Algorithms.GenericExtensions.IndicesWhere(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, R, Bridge.fn.bind(this, function (b) {
                    return this._swapAnalyzer.Analyze(b, W);
                }));
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofBuilder],
        fields: {
            _permutationLinked: null
        },
        ctors: {
            ctor: function (mind, usePermutations) {
                if (usePermutations === void 0) { usePermutations = false; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofBuilder.ctor.call(this, mind, usePermutations);

            }
        },
        methods: {
            ExtractCases: function () {
                var $t, $t1, $t2, $t3, $t4, $t5, $t6;
                this.Cases = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase))();

                this._permutationLinked = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,System.Collections.Generic.List$1(System.Object)))();

                var indices = System.Linq.Enumerable.range(0, this.Mind.ColorableBoards.getItem(0).Stacks.Value.length).toList(System.Int32);
                var permutations = System.Linq.Enumerable.from(Algorithms.Utility.Permutation.EnumerateAll(indices.Count)).toList(Algorithms.Utility.Permutation);

                var caseNumber = 0;

                var colorableCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, 0, this.Mind.ColorableBoards);
                this.Cases.add(colorableCase);
                caseNumber = (caseNumber + 1) | 0;

                var remainingBoards = System.Linq.Enumerable.from(this.Mind.NonColorableBoards).except(this.Mind.BreakerWonBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                var wonBoards = System.Linq.Enumerable.from(this.Mind.ColorableBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                while (remainingBoards.Count > 0) {
                    var proofCase = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, caseNumber);
                    this.Cases.add(proofCase);

                    var addedRootBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                    var addedBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                    $t = Bridge.getEnumerator(remainingBoards);
                    try {
                        while ($t.moveNext()) {
                            var board = $t.Current;
                            if (addedBoards.contains(board)) {
                                continue;
                            }

                            var treeInfo = this.Mind.GetWinTreeInfo(board);
                            var childBoards = System.Linq.Enumerable.from(treeInfo).select(function (bc) {
                                    return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, bc.Alpha, bc.Beta, bc.Response, board._stackCount);
                                }).distinct().toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);

                            if (Algorithms.Utility.ListUtility.SubsetEqual(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, childBoards, wonBoards)) {
                                addedRootBoards.add(board);
                                addedBoards.add(board);
                                this._permutationLinked.set(board, new (System.Collections.Generic.List$1(System.Object))());

                                if (this.UsePermutations) {
                                    $t1 = Bridge.getEnumerator(permutations);
                                    try {
                                        while ($t1.moveNext()) {
                                            var p = $t1.Current;
                                            var pb = board.Permute(p, indices);
                                            if (wonBoards.contains(pb) || addedBoards.contains(pb)) {
                                                continue;
                                            }

                                            var closed = true;
                                            $t2 = Bridge.getEnumerator(childBoards);
                                            try {
                                                while ($t2.moveNext()) {
                                                    var cb = $t2.Current;
                                                    if (!wonBoards.contains(cb.Permute(p, indices))) {
                                                        closed = false;
                                                        break;
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }
                                            if (closed) {
                                                this._permutationLinked.get(board).add({ item1: p, item2: pb });
                                                addedBoards.add(pb);
                                            }
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }}
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    $t3 = Bridge.getEnumerator(addedRootBoards);
                    try {
                        while ($t3.moveNext()) {
                            var board1 = $t3.Current;
                            proofCase.AddBoard(board1);
                        }
                    } finally {
                        if (Bridge.is($t3, System.IDisposable)) {
                            $t3.System$IDisposable$dispose();
                        }
                    }
                    $t4 = Bridge.getEnumerator(addedBoards);
                    try {
                        while ($t4.moveNext()) {
                            var board2 = $t4.Current;
                            wonBoards.add(board2);
                            remainingBoards.remove(board2);
                        }
                    } finally {
                        if (Bridge.is($t4, System.IDisposable)) {
                            $t4.System$IDisposable$dispose();
                        }
                    }
                    caseNumber = (caseNumber + 1) | 0;
                }

                if (this.Mind.BreakerWonBoards.Count > 0) {
                    $t5 = Bridge.getEnumerator(System.Linq.Enumerable.from(this.Mind.BreakerWonBoards).groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.f1)));
                    try {
                        while ($t5.moveNext()) {
                            var group = $t5.Current;
                            var lostCase = ($t6 = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase(this.Mind, caseNumber, group.toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)), $t6.BreakerWin = true, $t6.Superabundant = group.key(), $t6);
                            this.Cases.add(lostCase);
                        }
                    } finally {
                        if (Bridge.is($t5, System.IDisposable)) {
                            $t5.System$IDisposable$dispose();
                        }
                    }}
            },
            GetHandledCaseNumber: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                if (this.Cases.getItem(0).Boards.contains(childBoard)) {
                    return 1;
                }

                return ((System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ProofCase, System.Linq.Enumerable.from(this.Cases).skip(1), Bridge.fn.bind(this, function (cc) {
                        return System.Linq.Enumerable.from(cc.Boards).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.f3)).contains(childBoard);
                    }))).first() + 2) | 0);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder, {
        f1: function (b) {
            return this.Mind.IsSuperabundant(b);
        },
        f2: function (tup) {
            return tup.item2;
        },
        f3: function (bb) {
            return System.Linq.Enumerable.from(System.Array.init([bb], Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).union(System.Linq.Enumerable.from(this._permutationLinked.get(bb)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.f2));
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.IWinFilter],
        fields: {
            _fixerResponses: null,
            _fixerResponseCount: 0,
            _breakerChoicesCache: null
        },
        ctors: {
            init: function () {
                this._fixerResponses = System.Array.init(8192, System.UInt64(0), System.UInt64);
                this._breakerChoicesCache = new (System.Collections.Generic.Dictionary$2(System.UInt64,System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64))))();
            }
        },
        methods: {
            Filter: function (R, W) {
                throw new System.NotImplementedException();
            },
            Analyze: function (board) {
                var colorPairs = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < board._length; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < board._length; j = (j + 1) | 0) {
                        colorPairs.add({ item1: i, item2: j });
                    }
                }

                return System.Linq.Enumerable.from(colorPairs).orderBy(function (cp) {
                        return Algorithms.Int64Usage.PopulationCount$1((board._trace[System.Array.index(cp.item1, board._trace)].xor(board._trace[System.Array.index(cp.item2, board._trace)])));
                    }).select(Bridge.fn.bind(this, function (cp) {
                    var $t;
                    return ($t = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.ColorPairOutcome(), $t.Colors = cp, $t.FixerOutcomes = this.AnalyzeColorPair(cp, board), $t);
                }));
            },
            AnalyzeColorPair: function (colors, board) {
                return new (Bridge.GeneratorEnumerable$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome))(Bridge.fn.bind(this, function (colors, board) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        i,
                        j,
                        x,
                        y,
                        swappable,
                        $t,
                        breakerChoice,
                        responses,
                        $t1,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        i = colors.item1;
                                            j = colors.item2;

                                            x = board._trace[System.Array.index(i, board._trace)];
                                            y = board._trace[System.Array.index(j, board._trace)];
                                            swappable = x.xor(y);

                                            $t = Bridge.getEnumerator(this.GetBreakerChoices(swappable));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                breakerChoice = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 4;
                                        continue;
                                    }
                                    case 2: {
                                        this.GetFixerResponses(breakerChoice);
                                            responses = System.Linq.Enumerable.range(1, ((this._fixerResponseCount - 1) | 0)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter.f1)).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter.f2);

                                            $enumerator.current = ($t1 = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.FixerOutcome(), $t1.BreakerChoice = breakerChoice, $t1.Exits = responses.select(function (response) {
                                                return new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, i, j, response, board._stackCount);
                                            }).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard), $t1);
                                            $step = 3;
                                            return true;
                                    }
                                    case 3: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 4: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            GetFixerResponses: function (possibleMoves) {
                this._fixerResponseCount = 1 << possibleMoves.Count;
                var tableLength = this._fixerResponses.length;
                while (tableLength <= this._fixerResponseCount) {
                    tableLength = Bridge.Int.mul(tableLength, 2);
                }
                if (tableLength > this._fixerResponses.length) {
                    this._fixerResponses = System.Array.init(tableLength, System.UInt64(0), System.UInt64);
                }

                var subset = 1;
                while (subset < this._fixerResponseCount) {
                    var response = System.UInt64(0);
                    var x = { v : subset };

                    while (x.v !== 0) {
                        response = response.or(possibleMoves.getItem(Algorithms.Int32Usage.GetAndClearLeastSignificantBit(x)));
                    }

                    this._fixerResponses[System.Array.index(subset, this._fixerResponses)] = response;
                    subset = (subset + 1) | 0;
                }
            },
            GetBreakerChoices: function (swappable) {
                var $t, $t1, $t2;
                var choices = { };
                if (!this._breakerChoicesCache.tryGetValue(swappable, choices)) {
                    var bits = Algorithms.Int64Usage.GetBits$1(swappable);
                    var partitions = Algorithms.FixerBreaker.Chronicle.BranchGenerator.GetPartitions(bits.Count);
                    choices.v = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.UInt64)))(partitions.Count);

                    $t = Bridge.getEnumerator(partitions);
                    try {
                        while ($t.moveNext()) {
                            var partition = $t.Current;
                            var choice = new (System.Collections.Generic.List$1(System.UInt64))(partition.Count);
                            choices.v.add(choice);

                            $t1 = Bridge.getEnumerator(partition);
                            try {
                                while ($t1.moveNext()) {
                                    var part = $t1.Current;
                                    var x = System.UInt64(0);
                                    $t2 = Bridge.getEnumerator(part);
                                    try {
                                        while ($t2.moveNext()) {
                                            var i = $t2.Current;
                                            x = x.or(bits.getItem(i));
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    choice.add(x);
                                }
                            } finally {
                                if (Bridge.is($t1, System.IDisposable)) {
                                    $t1.System$IDisposable$dispose();
                                }
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    this._breakerChoicesCache.set(swappable, choices.v);
                }

                return choices.v;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SmartFilter, {
        f1: function (k) {
            return this._fixerResponses[System.Array.index(k, this._fixerResponses)];
        },
        f2: function (fr) {
            return Algorithms.Int64Usage.PopulationCount$1(fr) <= 1;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IMind],
        fields: {
            _remainingBoards: null,
            _wonBoards: null,
            _swapAnalyzer: null,
            _coloringAnalyzer: null,
            _graph: null,
            _lineGraph: null,
            _edges: null,
            _totalPositions: 0,
            _gameTreeIndex: 0
        },
        props: {
            MinPot: 0,
            MaxPot: 0,
            FixerWonAllNearlyColorableBoards: false,
            HasNonSuperabundantBoardThatIsNearlyColorable: false,
            TotalPositions: {
                get: function () {
                    return this._totalPositions;
                }
            },
            BreakerWonBoard: null,
            BoardCounts: null,
            BoardCountsList: null,
            OnlyConsiderNearlyColorableBoards: false,
            ExcludeNonNearlyColorableNonSuperabundantBoards: false,
            MissingEdgeIndex: 0,
            SuperabundantOnly: false,
            ThinkHarder: false,
            PerformCompleteAnalysis: false,
            ColoringAnalyzer: {
                get: function () {
                    return this._coloringAnalyzer;
                }
            },
            NonColorableBoards: null,
            ColorableBoards: null,
            BreakerWonBoards: null,
            FixerWonBoards: {
                get: function () {
                    return this._wonBoards;
                }
            },
            BoardsOfDepth: null,
            ExtraPsi: 0,
            WinFilter: null
        },
        alias: [
            "MaxPot", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$MaxPot",
            "FixerWonAllNearlyColorableBoards", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$FixerWonAllNearlyColorableBoards",
            "TotalPositions", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$TotalPositions",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IMind$Analyze"
        ],
        ctors: {
            ctor: function (g, proofFindingMode, weaklyFixable) {
                if (proofFindingMode === void 0) { proofFindingMode = false; }
                if (weaklyFixable === void 0) { weaklyFixable = false; }

                this.$initialize();
                this._graph = g;
                this.BuildLineGraph();

                this._coloringAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimColoringAnalyzer(this._lineGraph, Bridge.fn.cacheBind(this, this.GetEdgeColorList));
                this._swapAnalyzer = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimSwapAnalyzer(g.N, proofFindingMode, proofFindingMode || weaklyFixable);
                this._wonBoards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).ctor();
                this._remainingBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();

                this.MissingEdgeIndex = -1;
            }
        },
        methods: {
            Analyze: function (template, progress) {
                if (progress === void 0) { progress = null; }
                this._wonBoards.clear();
                this._remainingBoards.clear();
                this.BoardCountsList = new (System.Collections.Generic.List$1(System.Collections.Generic.List$1(System.Int32)))();
                this.BreakerWonBoard = null;
                this.NonColorableBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                this.ColorableBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                this.BreakerWonBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();

                if (this.WinFilter == null) {
                    this.WinFilter = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GreedyWinFilter(this._swapAnalyzer);
                }

                this.FixerWonAllNearlyColorableBoards = true;

                var minimumColorCount = Math.max(this.MinPot, System.Linq.Enumerable.from(template.Sizes).max());
                var maximumColorCount = Math.min(this.MaxPot, System.Linq.Enumerable.from(template.Sizes).sum());

                var foundAtLeastOneBoard = false;
                var fixerWin = true;
                for (var colorCount = minimumColorCount; colorCount <= maximumColorCount; colorCount = (colorCount + 1) | 0) {
                    this.GenerateAllBoards(template, colorCount, progress);
                    if (this.OnlyConsiderNearlyColorableBoards) {
                        if (this.MissingEdgeIndex >= 0) {
                            Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this._remainingBoards, Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f1), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f2);
                        } else {
                            Algorithms.GenericExtensions.RemoveAll(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this._remainingBoards, Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f3), $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f2);
                        }
                    }

                    if (foundAtLeastOneBoard && this._remainingBoards.Count <= 0) {
                        break;
                    }

                    this._totalPositions = (this._remainingBoards.Count + this._wonBoards.Count) | 0;
                    foundAtLeastOneBoard = true;

                    fixerWin = !!(fixerWin & this.Analyze$1(progress));
                }

                return fixerWin;
            },
            Analyze$1: function (progress) {
                var $t, $t1;
                if (progress === void 0) { progress = null; }
                var winLength = 0;
                var totalBoards = this._remainingBoards.Count;
                var lastP = -1;

                this.BoardsOfDepth = new (System.Collections.Generic.Dictionary$2(System.Int32,System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)))();
                this.BoardCounts = new (System.Collections.Generic.List$1(System.Int32))();
                this.BoardCountsList.add(this.BoardCounts);
                this.BoardCounts.add(this._remainingBoards.Count);

                for (var i = (this._remainingBoards.Count - 1) | 0; i >= 0; i = (i - 1) | 0) {
                    var b = this._remainingBoards.getItem(i);
                    if (this._coloringAnalyzer.Analyze(b)) {
                        this._remainingBoards.removeAt(i);
                        this._wonBoards.add(b);
                        this.ColorableBoards.add(b);
                    }

                    if (!Bridge.staticEquals(progress, null)) {
                        var p = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this._remainingBoards.Count) | 0))), totalBoards)) | 0;
                        if (p > lastP) {
                            progress({ item1: "Finding all colorable positions...", item2: p });
                            lastP = p;
                        }
                    }
                }

                this.BoardsOfDepth.set(winLength, System.Linq.Enumerable.from(this._wonBoards).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
                this.BoardCounts.add(this._remainingBoards.Count);

                var nonSuperabundantBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();

                for (var i1 = (this._remainingBoards.Count - 1) | 0; i1 >= 0; i1 = (i1 - 1) | 0) {
                    var b1 = this._remainingBoards.getItem(i1);
                    if (!this.IsSuperabundant(b1)) {
                        if (this.OnlyConsiderNearlyColorableBoards && this.MissingEdgeIndex >= 0) {
                            this.HasNonSuperabundantBoardThatIsNearlyColorable = true;
                            this.BreakerWonBoard = b1;

                            if (!this.PerformCompleteAnalysis) {
                                return false;
                            }
                        }

                        this._remainingBoards.removeAt(i1);
                        nonSuperabundantBoards.add(b1);
                    }

                    if (!Bridge.staticEquals(progress, null)) {
                        var p1 = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this._remainingBoards.Count) | 0))), totalBoards)) | 0;
                        if (p1 > lastP) {
                            progress({ item1: "Finding all non-superabundant positions...", item2: p1 });
                            lastP = p1;
                        }
                    }
                }

                if (nonSuperabundantBoards.Count > 0 && !this.SuperabundantOnly) {
                    if (!this.OnlyConsiderNearlyColorableBoards && !this.ExcludeNonNearlyColorableNonSuperabundantBoards) {
                        this.FixerWonAllNearlyColorableBoards = false;
                        this.BreakerWonBoard = nonSuperabundantBoards.getItem(0);
                        this.BreakerWonBoards.addRange(nonSuperabundantBoards);

                        if (!this.PerformCompleteAnalysis) {
                            return false;
                        }
                    } else if (this.ExistsNearlyColorableBoardForEachEdge(nonSuperabundantBoards)) {
                        this.FixerWonAllNearlyColorableBoards = false;
                        this.HasNonSuperabundantBoardThatIsNearlyColorable = true;
                        this.BreakerWonBoard = nonSuperabundantBoards.getItem(0);
                        this.BreakerWonBoards.addRange(nonSuperabundantBoards);
                        if (!this.PerformCompleteAnalysis) {
                            return false;
                        }
                    }
                }

                this.BoardCounts.add(this._remainingBoards.Count);
                this.NonColorableBoards.addRange(this._remainingBoards);

                while (this._remainingBoards.Count > 0) {
                    var count = this._remainingBoards.Count;
                    winLength = (winLength + 1) | 0;

                    var boardIndicesToAdd = { v : System.Linq.Enumerable.from(this.WinFilter.Filter(this._remainingBoards, this._wonBoards)).orderByDescending($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f4).toList(System.Int32) };
                    var wonBoards = System.Linq.Enumerable.from(this._remainingBoards).where((function ($me, boardIndicesToAdd) {
                            return function (b2, i2) {
                                return boardIndicesToAdd.v.contains(i2);
                            };
                        })(this, boardIndicesToAdd)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                    $t = Bridge.getEnumerator(wonBoards);
                    try {
                        while ($t.moveNext()) {
                            var b2 = $t.Current;
                            this._wonBoards.add(b2);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }this.BoardsOfDepth.set(winLength, wonBoards);

                    $t1 = Bridge.getEnumerator(boardIndicesToAdd.v);
                    try {
                        while ($t1.moveNext()) {
                            var i2 = $t1.Current;
                            this._remainingBoards.removeAt(i2);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    if (!Bridge.staticEquals(progress, null)) {
                        var p2 = (Bridge.Int.div(Bridge.Int.mul(100, (((totalBoards - this._remainingBoards.Count) | 0))), totalBoards)) | 0;
                        if (p2 > lastP) {
                            progress({ item1: System.String.format("Finding all {0} move wins...", Bridge.box(winLength, System.Int32)), item2: p2 });
                            lastP = p2;
                        }
                    }

                    this.BoardCounts.add(this._remainingBoards.Count);

                    if (this._remainingBoards.Count === count) {
                        this.BreakerWonBoards.addRange(this._remainingBoards);

                        if (this.BreakerWonBoard == null) {
                            this.BreakerWonBoard = this._remainingBoards.getItem(0);
                        }

                        if (this.OnlyConsiderNearlyColorableBoards && this.MissingEdgeIndex >= 0) {
                            this.FixerWonAllNearlyColorableBoards = false;
                        } else if (this.ExistsNearlyColorableBoardForEachEdge(this._remainingBoards)) {
                            this.FixerWonAllNearlyColorableBoards = false;
                            this.BreakerWonBoard = System.Linq.Enumerable.from(this._remainingBoards).firstOrDefault(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f5), null);

                            if (this.BreakerWonBoard == null) {
                                this.BreakerWonBoard = System.Linq.Enumerable.from(this._remainingBoards).first(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f5));
                            }
                        }

                        return false;
                    }
                }

                return true;
            },
            NearlyColorableForEdge: function (board, edgeIndex) {
                return this._coloringAnalyzer.ColorableWithoutEdge(board, edgeIndex);
            },
            ExistsNearlyColorableBoardForEachEdge: function (boards) {
                return System.Linq.Enumerable.range(0, this._lineGraph.N).all(Bridge.fn.bind(this, function (e) {
                    return System.Linq.Enumerable.from(boards).any(Bridge.fn.bind(this, function (b) {
                            return this.NearlyColorableForEdge(b, e);
                        }));
                }));
            },
            NearlyColorableForSomeEdge: function (board) {
                return System.Linq.Enumerable.range(0, this._lineGraph.N).any(Bridge.fn.bind(this, function (e) {
                    return this.NearlyColorableForEdge(board, e);
                }));
            },
            LookAtSuperabundance: function () {
                var packs = System.Linq.Enumerable.range(0, this._lineGraph.N).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f6)).toList(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
                var goodPacks = System.Linq.Enumerable.from(packs).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f8)).toList(System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard));
            },
            IsSuperabundant: function (b) {
                var subset = System.UInt64(0);

                var total = 0;
                while (subset.lt((System.UInt64(1).shl(b._stackCount)))) {
                    total = 0;
                    for (var i = 0; i < b._length; i = (i + 1) | 0) {
                        total = (total + (((Bridge.Int.div(Algorithms.Int64Usage.PopulationCount$1((subset.and(b._trace[System.Array.index(i, b._trace)]))), 2)) | 0))) | 0;
                    }

                    var e = this._graph.EdgesOn(Algorithms.Int64Usage.ToSet$1(subset));
                    if (total < e) {
                        return false;
                    }

                    subset = subset.inc();
                }

                if (this.ExtraPsi > 0) {
                    return total >= ((this._graph.E + this.ExtraPsi) | 0);
                }

                return true;
            },
            ComputeAbundanceSurplus: function (b) {
                var total = 0;
                for (var i = 0; i < b._length; i = (i + 1) | 0) {
                    total = (total + (((Bridge.Int.div(Algorithms.Int64Usage.PopulationCount$1(b._trace[System.Array.index(i, b._trace)]), 2)) | 0))) | 0;
                }

                return ((total - this._graph.E) | 0);
            },
            ComputeMatchingAbundanceShadow: function (b) {
                var shadow = new (System.Collections.Generic.List$1(System.Int32))();

                var subset = System.UInt64(0);
                while (subset.lt((System.UInt64(1).shl(b._stackCount)))) {
                    var e = { };
                    if (!this.IsMatchingAbundant(b, subset, e)) {
                        shadow.add(e.v);
                    }
                    subset = subset.inc();
                }

                shadow.sort();

                return shadow;
            },
            IsMatchingAbundant: function (b, subset, e) {
                e.v = this._graph.EdgesOn(Algorithms.Int64Usage.ToSet$1(subset));

                var total = 0;
                for (var i = 0; i < b._length; i = (i + 1) | 0) {
                    var vc = Algorithms.Int64Usage.ToSet$1((subset.and(b._trace[System.Array.index(i, b._trace)])));
                    total = (total + (this._lineGraph.IndependenceNumber$1(this._graph.EdgeIndicesOn(vc)))) | 0;
                }

                return total >= e.v;
            },
            GenerateAllBoards: function (template, colorCount, progress) {
                var $t;
                if (progress === void 0) { progress = null; }
                if (!Bridge.staticEquals(progress, null)) {
                    progress({ item1: "Finding all positions...", item2: 0 });
                }

                $t = Bridge.getEnumerator(BitLevelGeneration.Assignments_ulong.Generate(template.Sizes, colorCount));
                try {
                    while ($t.moveNext()) {
                        var t = $t.Current;
                        var b = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.ctor(t, template.Sizes.Count);
                        this._remainingBoards.add(b);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            BuildLineGraph: function () {
                var adjacent = this._graph.Adjacent;
                var n = ((System.Array.getLength(adjacent, 0) - 1) + 1) | 0;

                this._edges = new (System.Collections.Generic.List$1(System.Object))();
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        if (adjacent.get([i, j])) {
                            this._edges.add({ item1: i, item2: j });
                        }
                    }
                }

                var meets = System.Array.create(false, null, System.Boolean, this._edges.Count, this._edges.Count);
                for (var i1 = 0; i1 < this._edges.Count; i1 = (i1 + 1) | 0) {
                    for (var j1 = (i1 + 1) | 0; j1 < this._edges.Count; j1 = (j1 + 1) | 0) {
                        if (this._edges.getItem(i1).item1 === this._edges.getItem(j1).item1 || this._edges.getItem(i1).item1 === this._edges.getItem(j1).item2 || this._edges.getItem(i1).item2 === this._edges.getItem(j1).item1 || this._edges.getItem(i1).item2 === this._edges.getItem(j1).item2) {
                            meets.set([i1, j1], (meets.set([j1, i1], true), true));
                        }
                    }
                }

                this._lineGraph = new Algorithms.Graph.ctor(meets);
            },
            GetEdgeColorList: function (b, e) {
                var v1 = this._edges.getItem(e).item1;
                var v2 = this._edges.getItem(e).item2;
                var stacks = b.Stacks.Value;

                return stacks[System.Array.index(v1, stacks)].and(stacks[System.Array.index(v2, stacks)]);
            },
            GetWinTreeInfo: function (board) {
                return this._swapAnalyzer.WinTreeInfo.get(board);
            },
            BuildGameTree: function (board, win) {
                if (win === void 0) { win = true; }
                var seenBoards = new (System.Collections.Generic.Dictionary$2(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard,System.Int32))();
                this._gameTreeIndex = 1;
                return this.BuildGameTree$1(board, seenBoards, win);
            },
            BuildGameTree$1: function (board, seenBoards, win, depth) {
                var $t;
                if (win === void 0) { win = true; }
                if (depth === void 0) { depth = 0; }
                seenBoards.set(board, this._gameTreeIndex);
                var tree = ($t = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.GameTree(), $t.Board = board, $t.IsFixerWin = win, $t);
                tree.IsColorable = this._coloringAnalyzer.Analyze(board);
                tree.IsSuperabundant = win || this.IsSuperabundant(board);
                tree.GameTreeIndex = this._gameTreeIndex;
                this._gameTreeIndex = (this._gameTreeIndex + 1) | 0;

                if (tree.IsColorable) {
                    return tree;
                }

                if (!tree.IsSuperabundant) {
                    return tree;
                }

                var treeInfo = { };
                if (win) {
                    this._swapAnalyzer.WinTreeInfo.tryGetValue(board, treeInfo);
                } else {
                    this._swapAnalyzer.LossTreeInfo.tryGetValue(board, treeInfo);
                }

                if (treeInfo.v != null) {
                    var localSeenBoards = new (System.Collections.Generic.HashSet$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).ctor();
                    $t = Bridge.getEnumerator(treeInfo.v);
                    try {
                        while ($t.moveNext()) {
                            var bc = $t.Current;
                            var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(board._trace, bc.Alpha, bc.Beta, bc.Response, board._stackCount);
                            if (localSeenBoards.contains(childBoard)) {
                                continue;
                            }
                            localSeenBoards.add(childBoard);

                            if (!win && seenBoards.containsKey(childBoard)) {
                                continue;
                            }

                            var childTree = this.BuildGameTree$1(childBoard, seenBoards, win, ((depth + 1) | 0));
                            tree.AddChild$1(childTree, bc);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return tree;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind, {
        f1: function (b) {
            return !this.NearlyColorableForEdge(b, this.MissingEdgeIndex);
        },
        f2: function (x) { },
        f3: function (b) {
            return !this.NearlyColorableForSomeEdge(b);
        },
        f4: function (x) {
            return x;
        },
        f5: function (b3) {
            return this._coloringAnalyzer.ColorableWithoutEdge(b3, 0);
        },
        f6: function (e) {
            return System.Linq.Enumerable.from(this._remainingBoards).where(Bridge.fn.bind(this, function (b) {
                    return this._coloringAnalyzer.ColorableWithoutEdge(b, e);
                })).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
        },
        f7: function (ssb) {
            return this.IsSuperabundant(ssb);
        },
        f8: function (pack) {
            return System.Linq.Enumerable.from(pack).all(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimMind.f7));
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.IBoardAnalyzer],
        props: {
            SubTemplates: null,
            Reason: {
                get: function () {
                    return "sub template";
                }
            },
            IsKnowledgeDependent: {
                get: function () {
                    return false;
                }
            }
        },
        alias: [
            "Reason", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Reason",
            "IsKnowledgeDependent", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$IsKnowledgeDependent",
            "Analyze", "Algorithms$FixerBreaker$KnowledgeEngine$IBoardAnalyzer$Analyze"
        ],
        ctors: {
            ctor: function (subTemplates) {
                if (subTemplates === void 0) { subTemplates = []; }

                this.$initialize();
                this.SubTemplates = System.Linq.Enumerable.from(subTemplates).toList(Algorithms.FixerBreaker.KnowledgeEngine.Template);
            }
        },
        methods: {
            Analyze: function (knowledge, board) {
                var $t;
                $t = Bridge.getEnumerator(this.SubTemplates);
                try {
                    while ($t.moveNext()) {
                        var template = $t.Current;
                        var color = { };
                        var x = { };
                        if (this.ContainsSuberabundantSubStacksAboveTemplate(knowledge, board, template, color, x)) {
                            knowledge.getItem(board.Template.Value).getItem(board.ColorCount).AddWin(board, System.String.format("set L({0}) = L({0}) - {1}", Bridge.box(((x.v + 1) | 0), System.Int32), Bridge.box(color.v, System.Int32)));
                            return true;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            },
            ContainsSuberabundantSubStacksAboveTemplate: function (knowledge, board, template, color, x) {
                var $t;
                color.v = -1;
                x.v = -1;
                var g = knowledge.GraphKnowledge.Graph;
                var stackSets = System.Linq.Enumerable.from(board.Stacks).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer.f1).toList(System.Collections.Generic.List$1(System.Int32));
                var bigs = System.Linq.Enumerable.range(0, stackSets.Count).count(function (i) {
                    return stackSets.getItem(i).Count > template.Sizes.getItem(i);
                });
                if (bigs <= 0 || bigs > 1) {
                    return false;
                }

                var shrinkable = System.Linq.Enumerable.range(0, stackSets.Count).where(function (i) {
                    return stackSets.getItem(i).Count === ((template.Sizes.getItem(i) + 1) | 0);
                }).toList(System.Int32);
                if (shrinkable.Count <= 0) {
                    return false;
                }

                x.v = shrinkable.getItem(0);
                $t = Bridge.getEnumerator(System.Linq.Enumerable.from(stackSets.getItem(x.v)).toList(System.Int32));
                try {
                    while ($t.moveNext()) {
                        var c = $t.Current;
                        stackSets.getItem(x.v).remove(c);

                        if (Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.DegreeCondition$1(g, System.Linq.Enumerable.from(stackSets).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer.f2).toList(System.Int64), board.Pot)) {
                            color.v = c;
                            return true;
                        }

                        stackSets.getItem(x.v).add(c);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return false;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.SubTemplateAnalyzer, {
        f1: function (s) {
            return Algorithms.Int64Usage.ToSet(s);
        },
        f2: function (s) {
            return Algorithms.Int64Usage.ToInt64(s);
        }
    });

    Bridge.define("Algorithms.Graph.IsomorphismComparer", {
        inherits: [System.Collections.Generic.IEqualityComparer$1(Algorithms.Graph)],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$Algorithms$Graph$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$Algorithms$Graph$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return Algorithms.Graph.Isomorphic(x, y);
            },
            getHashCode2: function (g) {
                return 0;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastTarpitEnumerator", {
        inherits: [Algorithms.WordGame.TarpitEnumerator],
        statics: {
            fields: {
                EmptyList: null
            },
            ctors: {
                init: function () {
                    this.EmptyList = new (System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))();
                }
            }
        },
        fields: {
            _words: null,
            _accessibilityChecker: null
        },
        ctors: {
            ctor: function (n) {
                this.$initialize();
                Algorithms.WordGame.TarpitEnumerator.ctor.call(this);
                this._words = new Algorithms.WordGame.Optimized.FastWordGenerator().GenerateWords(n);
                this._accessibilityChecker = new Algorithms.WordGame.Optimized.FastAccessibilityChecker(n);
            }
        },
        methods: {
            GenerateMinimalTarpits: function (foundTarpit) {
                this.GenerateMinimalTarpitsFast(Bridge.fn.bind(this, function (l) {
                    foundTarpit(System.Linq.Enumerable.from(l).select(Bridge.fn.bind(this, $asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f1)).toList(System.String));
                }));
            },
            GenerateMinimalTarpitsFast: function (foundTarpit) {
                this.GenerateMinimalTarpitsFastIn(this._words, new (System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))(), foundTarpit);
            },
            GenerateMinimalTarpitsFastIn: function (S, mustHaves, foundTarpit) {
                var $t, $t1;
                var excluded = false;

                var extendedMustHaves = System.Linq.Enumerable.from(mustHaves).toList(Algorithms.WordGame.Optimized.FastWord);
                var T = System.Linq.Enumerable.from(S).except(mustHaves).toList(Algorithms.WordGame.Optimized.FastWord);

                $t = Bridge.getEnumerator(T);
                try {
                    while ($t.moveNext()) {
                        var w = $t.Current;
                        var W = this.RunEscape$1(System.Linq.Enumerable.from(S).except(System.Array.init([w], Algorithms.WordGame.Optimized.FastWord)), extendedMustHaves);

                        if (W != null && W.Count > 0) {
                            excluded = true;
                            this.GenerateMinimalTarpitsFastIn(W, extendedMustHaves, foundTarpit);
                        }

                        extendedMustHaves.add(w);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                if (!excluded) {
                    $t1 = Bridge.getEnumerator(mustHaves);
                    try {
                        while ($t1.moveNext()) {
                            var w1 = $t1.Current;
                            var W1 = this.RunEscape(System.Linq.Enumerable.from(S).except(System.Array.init([w1], Algorithms.WordGame.Optimized.FastWord)));
                            if (W1.Count > 0) {
                                excluded = true;
                                break;
                            }
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }
                    if (!excluded) {
                        foundTarpit(S);
                    }
                }
            },
            RunEscape$1: function (S, mustHaves) {
                var $t;
                var T = System.Linq.Enumerable.from(S).toList(Algorithms.WordGame.Optimized.FastWord);
                var R = new (System.Collections.Generic.HashSet$1(Algorithms.WordGame.Optimized.FastWord)).$ctor1(System.Linq.Enumerable.from(this._words).except(T));
                while (true) {
                    if (System.Linq.Enumerable.from(mustHaves).any(Bridge.fn.bind(this, function (w) {
                            return this._accessibilityChecker.IsAccessible(w, R);
                        }))) {
                        return null;
                    }

                    var escapers = System.Linq.Enumerable.from(T).except(mustHaves).where(Bridge.fn.bind(this, function (w) {
                        return this._accessibilityChecker.IsAccessible(w, R);
                    })).toList(Algorithms.WordGame.Optimized.FastWord);

                    $t = Bridge.getEnumerator(escapers);
                    try {
                        while ($t.moveNext()) {
                            var w = $t.Current;
                            T.remove(w);
                            R.add(w);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    if (escapers.Count <= 0) {
                        break;
                    }
                }

                return T;
            },
            RunEscape: function (S) {
                return this.RunEscape$1(S, Algorithms.WordGame.Optimized.FastTarpitEnumerator.EmptyList);
            },
            Wordify: function (b) {
                var $t;
                var st = System.Array.init(b._stackCount, System.Int64(0), System.Int64);
                var traceBits = System.Linq.Enumerable.from(b._trace).select($asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f2).toList(System.Collections.Generic.List$1(System.Int32));
                for (var c = 0; c < traceBits.Count; c = (c + 1) | 0) {
                    $t = Bridge.getEnumerator(traceBits.getItem(c));
                    try {
                        while ($t.moveNext()) {
                            var i = $t.Current;
                            st[System.Array.index(i, st)] = st[System.Array.index(i, st)].or((System.Int64(1).shl(c)));
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return Bridge.toArray(System.Linq.Enumerable.from(st).select($asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f3)).join("");
            },
            EnumerateMinimalTarpits: function () {
                return System.Linq.Enumerable.from(this.EnumerateMinimalTarpitsFast()).select(Bridge.fn.bind(this, $asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator.f4));
            },
            EnumerateMinimalTarpitsFast: function () {
                var explored = new (System.Collections.Generic.HashSet$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))).$ctor3(new Algorithms.WordGame.Optimized.FastTarpitEnumerator.SortedListComparer());
                return this.EnumerateMinimalTarpitsFastIn(this._words, explored, new (System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))());
            },
            EnumerateMinimalTarpitsFastIn: function (S, explored, mustHaves) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord)))(Bridge.fn.bind(this, function (S, explored, mustHaves) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        excluded,
                        $t,
                        w,
                        W,
                        $t1,
                        TP,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        excluded = false;

                                            $t = Bridge.getEnumerator(S);
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                w = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 9;
                                        continue;
                                    }
                                    case 2: {
                                        W = this.RunEscape(System.Linq.Enumerable.from(S).except(System.Array.init([w], Algorithms.WordGame.Optimized.FastWord)));
                                            if (W.Count <= 0) {
                                                $step = 1;
                                                continue;
                                            }

                                            excluded = true;

                                            if (Algorithms.Utility.ListUtility.SubsetEqual(Algorithms.WordGame.Optimized.FastWord, mustHaves, W) && !explored.contains(W)) {
                                                $step = 3;
                                                continue;
                                            } 
                                            $step = 8;
                                            continue;
                                    }
                                    case 3: {
                                        $t1 = Bridge.getEnumerator(this.EnumerateMinimalTarpitsFastIn(W, explored, System.Linq.Enumerable.from(mustHaves).toList(Algorithms.WordGame.Optimized.FastWord)), System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord));
                                            $step = 4;
                                            continue;
                                    }
                                    case 4: {
                                        if ($t1.moveNext()) {
                                                TP = $t1.Current;
                                                $step = 5;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 5: {
                                        $enumerator.current = TP;
                                            $step = 6;
                                            return true;
                                    }
                                    case 6: {
                                        $step = 4;
                                        continue;
                                    }
                                    case 7: {
                                        $step = 8;
                                        continue;
                                    }
                                    case 8: {
                                        explored.add(W);
                                            mustHaves.add(w);
                                        $step = 1;
                                        continue;
                                    }
                                    case 9: {
                                        if (!excluded) {
                                                $step = 10;
                                                continue;
                                            } 
                                            $step = 12;
                                            continue;
                                    }
                                    case 10: {
                                        $enumerator.current = System.Linq.Enumerable.from(S).toList(Algorithms.WordGame.Optimized.FastWord);
                                            $step = 11;
                                            return true;
                                    }
                                    case 11: {
                                        $step = 12;
                                        continue;
                                    }
                                    case 12: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.Optimized.FastTarpitEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.Optimized.FastTarpitEnumerator, {
        f1: function (s) {
            return this.Wordify(s);
        },
        f2: function (t) {
            return Algorithms.Int64Usage.ToSet$1(t);
        },
        f3: function (s) {
            switch (s.toString()) {
                case "1": 
                    return 120;
                case "2": 
                    return 121;
                case "4": 
                    return 122;
                default: 
                    return 63;
            }
        },
        f4: function (list) {
            return System.Linq.Enumerable.from(list).select(Bridge.fn.cacheBind(this, this.Wordify)).toList(System.String);
        }
    });

    Bridge.define("Algorithms.WordGame.Optimized.FastTarpitEnumerator.SortedListComparer", {
        inherits: [System.Collections.Generic.IEqualityComparer$1(System.Collections.Generic.List$1(Algorithms.WordGame.Optimized.FastWord))],
        alias: [
            "equals2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$Algorithms$WordGame$Optimized$FastWord$equals2", "System$Collections$Generic$IEqualityComparer$1$equals2"],
            "getHashCode2", ["System$Collections$Generic$IEqualityComparer$1$System$Collections$Generic$List$1$Algorithms$WordGame$Optimized$FastWord$getHashCode2", "System$Collections$Generic$IEqualityComparer$1$getHashCode2"]
        ],
        methods: {
            equals2: function (x, y) {
                return System.Linq.Enumerable.from(x).sequenceEqual(y);
            },
            getHashCode2: function (list) {
                var $t;
                var hash = 19;
                $t = Bridge.getEnumerator(list);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        hash = (((hash * 31) | 0) + x.getHashCode()) | 0;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return hash;
            }
        }
    });

    Bridge.define("Algorithms.WordGame.ReferenceTarpitEnumerator", {
        inherits: [Algorithms.WordGame.TarpitEnumerator],
        fields: {
            _words: null,
            _accessibilityChecker: null
        },
        ctors: {
            ctor: function (n) {
                this.$initialize();
                Algorithms.WordGame.TarpitEnumerator.ctor.call(this);
                this._words = System.Linq.Enumerable.from(new Algorithms.WordGame.WordEnumerator.$ctor1(Algorithms.WordGame.TarpitEnumerator.Alphabet).EnumerateWords(n)).toList(System.String);
                this._accessibilityChecker = new Algorithms.WordGame.AccessibilityChecker(Algorithms.WordGame.TarpitEnumerator.Alphabet);
            }
        },
        methods: {
            EnumerateMinimalTarpits: function () {
                var seen = new (System.Collections.Generic.HashSet$1(System.String)).ctor();
                return this.EnumerateMinimalTarpitsIn(this._words, seen);
            },
            EnumerateMinimalTarpitsIn: function (S, seen) {
                return new (Bridge.GeneratorEnumerable$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function (S, seen) {
                    var $step = 0,
                        $jumpFromFinally,
                        $returnValue,
                        excluded,
                        $t,
                        T,
                        W,
                        key,
                        $t1,
                        TP,
                        $async_e;

                    var $enumerator = new (Bridge.GeneratorEnumerator$1(System.Collections.Generic.List$1(System.String)))(Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                switch ($step) {
                                    case 0: {
                                        excluded = false;
                                            $t = Bridge.getEnumerator(System.Linq.Enumerable.from(S).select(function (w) {
                                                    return System.Linq.Enumerable.from(S).except(System.Array.init([w], System.String)).toList(System.String);
                                                }));
                                            $step = 1;
                                            continue;
                                    }
                                    case 1: {
                                        if ($t.moveNext()) {
                                                T = $t.Current;
                                                $step = 2;
                                                continue;
                                            }
                                        $step = 7;
                                        continue;
                                    }
                                    case 2: {
                                        W = this.RunEscape(T);
                                            if (W.Count <= 0) {
                                                $step = 1;
                                                continue;
                                            }

                                            excluded = true;

                                            key = this.GenerateSimpleKey(W);
                                            if (seen.contains(key)) {
                                                $step = 1;
                                                continue;
                                            }

                                            seen.add(key);
                                            $t1 = Bridge.getEnumerator(this.EnumerateMinimalTarpitsIn(W, seen), System.Collections.Generic.List$1(System.String));
                                            $step = 3;
                                            continue;
                                    }
                                    case 3: {
                                        if ($t1.moveNext()) {
                                                TP = $t1.Current;
                                                $step = 4;
                                                continue;
                                            }
                                        $step = 6;
                                        continue;
                                    }
                                    case 4: {
                                        $enumerator.current = TP;
                                            $step = 5;
                                            return true;
                                    }
                                    case 5: {
                                        $step = 3;
                                        continue;
                                    }
                                    case 6: {
                                        $step = 1;
                                        continue;
                                    }
                                    case 7: {
                                        if (!excluded) {
                                                $step = 8;
                                                continue;
                                            } 
                                            $step = 10;
                                            continue;
                                    }
                                    case 8: {
                                        $enumerator.current = System.Linq.Enumerable.from(S).orderBy($asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator.f1).toList(System.String);
                                            $step = 9;
                                            return true;
                                    }
                                    case 9: {
                                        $step = 10;
                                        continue;
                                    }
                                    case 10: {

                                    }
                                    default: {
                                        return false;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            throw $async_e;
                        }
                    }));
                    return $enumerator;
                }, arguments));
            },
            RunEscape: function (S) {
                var T = System.Linq.Enumerable.from(S).toList(System.String);
                while (true) {
                    var R = { v : Algorithms.Utility.ListUtility.Difference(System.String, this._words, T) };
                    if (Algorithms.GenericExtensions.RemoveAll(System.String, T, (function ($me, R) {
                        return Bridge.fn.bind($me, function (w) {
                            return this._accessibilityChecker.IsAccessible(w, R.v);
                        });
                    })(this, R), $asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator.f2) <= 0) {
                        break;
                    }
                }

                return T;
            },
            GenerateSimpleKey: function (S) {
                return Bridge.toArray(System.Linq.Enumerable.from(S).orderBy($asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator.f1)).join(",");
            }
        }
    });

    Bridge.ns("Algorithms.WordGame.ReferenceTarpitEnumerator", $asm.$);

    Bridge.apply($asm.$.Algorithms.WordGame.ReferenceTarpitEnumerator, {
        f1: function (s) {
            return s;
        },
        f2: function (x) { }
    });

    Bridge.define("BitLevelGeneration.BitGraph_long", {
        inherits: [BitLevelGeneration.IGraph_long],
        fields: {
            _vertices: null,
            _neighborhood: null
        },
        props: {
            N: {
                get: function () {
                    return this._vertices.length;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            }
        },
        alias: [
            "N", "BitLevelGeneration$IGraph_long$N",
            "Vertices", "BitLevelGeneration$IGraph_long$Vertices",
            "IsIndependent", "BitLevelGeneration$IGraph_long$IsIndependent",
            "Degree", "BitLevelGeneration$IGraph_long$Degree",
            "DegreeInSet", "BitLevelGeneration$IGraph_long$DegreeInSet",
            "NeighborsInSet", "BitLevelGeneration$IGraph_long$NeighborsInSet",
            "MaximalIndependentSubsets", "BitLevelGeneration$IGraph_long$MaximalIndependentSubsets"
        ],
        ctors: {
            ctor: function (edgeWeights) {
                this.$initialize();
                var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);

                this._neighborhood = System.Array.init(n, System.Int64(0), System.Int64);

                var k = 0;
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    var iBit = System.Int64(1).shl(i);
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        var jBit = System.Int64(1).shl(j);

                        if (edgeWeights.getItem(k) !== 0) {
                            this._neighborhood[System.Array.index(i, this._neighborhood)] = this._neighborhood[System.Array.index(i, this._neighborhood)].or(jBit);
                            this._neighborhood[System.Array.index(j, this._neighborhood)] = this._neighborhood[System.Array.index(j, this._neighborhood)].or(iBit);
                        }

                        k = (k + 1) | 0;
                    }
                }
            },
            $ctor1: function (n, neighborhood) {
                this.$initialize();
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);
                this._neighborhood = neighborhood;
            }
        },
        methods: {
            IsIndependent: function (set) {
                return BitLevelGeneration.BitUsage_long.TrueForAllBitIndices(set, Bridge.fn.bind(this, function (i) {
                    return (this._neighborhood[System.Array.index(i, this._neighborhood)].and(set)).equals(System.Int64(0));
                }));
            },
            Degree: function (v) {
                return BitLevelGeneration.BitUsage_long.PopulationCount(this._neighborhood[System.Array.index(v, this._neighborhood)]);
            },
            DegreeInSet: function (v, set) {
                return BitLevelGeneration.BitUsage_long.PopulationCount((this._neighborhood[System.Array.index(v, this._neighborhood)].and(set)));
            },
            NeighborsInSet: function (v, set) {
                return this._neighborhood[System.Array.index(v, this._neighborhood)].and(set);
            },
            MaximalIndependentSubsets: function (set) {
                var list = new (System.Collections.Generic.List$1(System.Int64))(8);
                this.BronKerbosch(set, System.Int64(0), System.Int64(0), list);
                return list;
            },
            BronKerbosch: function (P, R, X, list) {
                if (P.equals(System.Int64(0)) && X.equals(System.Int64(0))) {
                    list.add(R);
                } else {
                    var u = this.TomitaPivot(P, X);
                    var q = P.and(((System.Int64(1).shl(u)).or(this._neighborhood[System.Array.index(u, this._neighborhood)])));

                    while (q.ne(System.Int64(0))) {
                        var bit = q.and(q.neg());
                        var v = BitLevelGeneration.BitUsage_long.Extract(bit);
                        var non = (bit.or(this._neighborhood[System.Array.index(v, this._neighborhood)])).not();

                        this.BronKerbosch(P.and(non), R.or(bit), X.and(non), list);

                        q = q.xor(bit);
                        P = P.xor(bit);
                        X = X.or(bit);
                    }
                }
            },
            TomitaPivot: function (P, X) {
                var min = 2147483647;
                var best = -1;
                var q = P.or(X);

                while (q.ne(System.Int64(0))) {
                    var bit = q.and(q.neg());
                    var u = BitLevelGeneration.BitUsage_long.Extract(bit);

                    var n = BitLevelGeneration.BitUsage_long.PopulationCount(((bit.or(this._neighborhood[System.Array.index(u, this._neighborhood)])).and(P)));
                    if (n < min) {
                        min = n;
                        best = u;
                    }

                    q = q.xor(bit);
                }

                return best;
            }
        }
    });

    Bridge.define("BitLevelGeneration.BitGraph_uint", {
        inherits: [BitLevelGeneration.IGraph_uint],
        fields: {
            _vertices: null,
            _neighborhood: null
        },
        props: {
            N: {
                get: function () {
                    return this._vertices.length;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            }
        },
        alias: [
            "N", "BitLevelGeneration$IGraph_uint$N",
            "Vertices", "BitLevelGeneration$IGraph_uint$Vertices",
            "IsIndependent", "BitLevelGeneration$IGraph_uint$IsIndependent",
            "Degree", "BitLevelGeneration$IGraph_uint$Degree",
            "DegreeInSet", "BitLevelGeneration$IGraph_uint$DegreeInSet",
            "NeighborsInSet", "BitLevelGeneration$IGraph_uint$NeighborsInSet",
            "MaximalIndependentSubsets", "BitLevelGeneration$IGraph_uint$MaximalIndependentSubsets"
        ],
        ctors: {
            ctor: function (edgeWeights) {
                this.$initialize();
                var n = Bridge.Int.clip32((1 + Math.sqrt(((1 + Bridge.Int.mul(8, edgeWeights.Count)) | 0))) / 2);
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);

                this._neighborhood = System.Array.init(n, 0, System.UInt32);

                var k = 0;
                for (var i = 0; i < n; i = (i + 1) | 0) {
                    var iBit = (1 << i) >>> 0;
                    for (var j = (i + 1) | 0; j < n; j = (j + 1) | 0) {
                        var jBit = (1 << j) >>> 0;

                        if (edgeWeights.getItem(k) !== 0) {
                            this._neighborhood[System.Array.index(i, this._neighborhood)] = (this._neighborhood[System.Array.index(i, this._neighborhood)] | jBit) >>> 0;
                            this._neighborhood[System.Array.index(j, this._neighborhood)] = (this._neighborhood[System.Array.index(j, this._neighborhood)] | iBit) >>> 0;
                        }

                        k = (k + 1) | 0;
                    }
                }
            },
            $ctor1: function (n, neighborhood) {
                this.$initialize();
                this._vertices = System.Linq.Enumerable.range(0, n).toArray(System.Int32);
                this._neighborhood = neighborhood;
            }
        },
        methods: {
            IsIndependent: function (set) {
                return BitLevelGeneration.BitUsage_uint.TrueForAllBitIndices(set, Bridge.fn.bind(this, function (i) {
                    return (((this._neighborhood[System.Array.index(i, this._neighborhood)] & set) >>> 0)) === 0;
                }));
            },
            Degree: function (v) {
                return BitLevelGeneration.BitUsage_uint.PopulationCount(this._neighborhood[System.Array.index(v, this._neighborhood)]);
            },
            DegreeInSet: function (v, set) {
                return BitLevelGeneration.BitUsage_uint.PopulationCount((((this._neighborhood[System.Array.index(v, this._neighborhood)] & set) >>> 0)));
            },
            NeighborsInSet: function (v, set) {
                return ((this._neighborhood[System.Array.index(v, this._neighborhood)] & set) >>> 0);
            },
            MaximalIndependentSubsets: function (set) {
                var list = new (System.Collections.Generic.List$1(System.UInt32))(8);
                this.BronKerbosch(set, 0, 0, list);
                return list;
            },
            BronKerbosch: function (P, R, X, list) {
                if (P === 0 && X === 0) {
                    list.add(R);
                } else {
                    var u = this.TomitaPivot(P, X);
                    var q = (P & ((((((1 << u) >>> 0)) | this._neighborhood[System.Array.index(u, this._neighborhood)]) >>> 0))) >>> 0;

                    while (q !== 0) {
                        var bit = (q & (((~q + 1) >>> 0))) >>> 0;
                        var v = BitLevelGeneration.BitUsage_uint.Extract(bit);
                        var non = ~(((bit | this._neighborhood[System.Array.index(v, this._neighborhood)]) >>> 0));

                        this.BronKerbosch(((P & non) >>> 0), ((R | bit) >>> 0), ((X & non) >>> 0), list);

                        q = (q ^ bit) >>> 0;
                        P = (P ^ bit) >>> 0;
                        X = (X | bit) >>> 0;
                    }
                }
            },
            TomitaPivot: function (P, X) {
                var min = 2147483647;
                var best = -1;
                var q = (P | X) >>> 0;

                while (q !== 0) {
                    var bit = (q & (((~q + 1) >>> 0))) >>> 0;
                    var u = BitLevelGeneration.BitUsage_uint.Extract(bit);

                    var n = BitLevelGeneration.BitUsage_uint.PopulationCount(((((((bit | this._neighborhood[System.Array.index(u, this._neighborhood)]) >>> 0)) & P) >>> 0)));
                    if (n < min) {
                        min = n;
                        best = u;
                    }

                    q = (q ^ bit) >>> 0;
                }

                return best;
            }
        }
    });

    Bridge.define("GraphicsLayer.ICanvas", {
        inherits: [GraphicsLayer.IProduceMouseEvents],
        $kind: "interface"
    });

    Bridge.define("Graphs.Edge", {
        inherits: [GraphicsLayer.IPaintable,Graphs.IHittable],
        statics: {
            fields: {
                LabelFont: null,
                LabelBrushColor: null,
                IndexFont: null,
                IndexBrushColor: null
            },
            ctors: {
                init: function () {
                    this.LabelFont = new GraphicsLayer.Font("Times New Roman", 18);
                    this.LabelBrushColor = new GraphicsLayer.ARGB.$ctor1(120, 0, 0, 255);
                    this.IndexFont = new GraphicsLayer.Font("System", 8);
                    this.IndexBrushColor = new GraphicsLayer.ARGB.$ctor1(200, 200, 0, 0);
                }
            }
        },
        fields: {
            _V1: null,
            _V2: null,
            _Orientation: 0,
            _thickness: 0,
            _Color: null,
            _penColor: null,
            _IsSelected: false,
            _Multiplicity: 0,
            _style: null,
            _showIndex: false
        },
        props: {
            ParentIndex: 0,
            IndexAngle: 0,
            V1: {
                get: function () {
                    return this._V1;
                },
                set: function (value) {
                    this._V1 = value;
                }
            },
            V2: {
                get: function () {
                    return this._V2;
                },
                set: function (value) {
                    this._V2 = value;
                }
            },
            Orientation: {
                get: function () {
                    return this._Orientation;
                },
                set: function (value) {
                    this._Orientation = value;

                    this.UpdateStyle();
                }
            },
            Thickness: {
                get: function () {
                    return this._thickness;
                },
                set: function (value) {
                    this._thickness = value;
                }
            },
            Color: {
                get: function () {
                    return this._Color;
                },
                set: function (value) {
                    this._Color = value;
                    this._penColor = this._Color;
                }
            },
            IsSelected: {
                get: function () {
                    return this._IsSelected;
                },
                set: function (value) {
                    if (value === this._IsSelected) {
                        return;
                    }

                    this._IsSelected = value;

                    this.Color = this._IsSelected ? new GraphicsLayer.ARGB.ctor(50, 205, 50) : new GraphicsLayer.ARGB.ctor(0, 0, 0);
                }
            },
            Multiplicity: {
                get: function () {
                    return this._Multiplicity;
                },
                set: function (value) {
                    this._Multiplicity = Math.max(1, value);
                }
            },
            Style: {
                get: function () {
                    return this._style;
                },
                set: function (value) {
                    if (value == null) {
                        return;
                    }

                    var style = value;
                    if (System.String.contains(style,"~~|~|~~")) {
                        var parts = System.String.split(style, System.Array.init(["~~|~|~~"], System.String), null, 0);
                        if (parts.length >= 2) {
                            style = parts[System.Array.index(0, parts)];
                            this.Label = parts[System.Array.index(1, parts)];
                        }
                    }

                    if (System.String.startsWith(style, "+") && !System.String.isNullOrEmpty(this._style)) {
                        this._style = System.String.concat(this._style, (System.String.concat(", ", System.String.trimStart(style, [43]))));
                    } else {
                        this._style = System.String.trimStart(style, [43]);
                    }
                }
            },
            Label: null
        },
        alias: [
            "Paint", "GraphicsLayer$IPaintable$Paint",
            "Hit", "Graphs$IHittable$Hit"
        ],
        ctors: {
            init: function () {
                this._thickness = 4;
                this._Color = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                this._penColor = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                this._showIndex = false;
            },
            $ctor1: function (v1, v2) {
                Graphs.Edge.$ctor2.call(this, v1, v2, Graphs.Edge.Orientations.None);
            },
            $ctor2: function (v1, v2, orientation) {
                this.$initialize();
                this._V1 = v1;
                this._V2 = v2;
                this._Orientation = orientation;
                this._Multiplicity = 1;
            },
            ctor: function (e, vertices) {
                this.$initialize();
                this.V1 = vertices.getItem(e.IndexV1);
                this.V2 = vertices.getItem(e.IndexV2);
                this.Orientation = e.Orientation;
                this.Thickness = e.Thickness;
                this.Multiplicity = e.Multiplicity;
                this.Style = e.Style;
                this.Label = e.Label;
            }
        },
        methods: {
            Paint: function (g, width, height) {
                if (Bridge.referenceEquals(this._V1, this._V2)) {
                    // Draw self loop.
                } else {
                    var maxRadius1 = Math.max(this._V1.LocalBounds.Width, this._V1.LocalBounds.Height) / 2;
                    var maxRadius2 = Math.max(this._V2.LocalBounds.Width, this._V2.LocalBounds.Height) / 2;

                    var cos = (this._V2.X - this._V1.X) / Math.sqrt((this._V2.X - this._V1.X) * (this._V2.X - this._V1.X) + (this._V2.Y - this._V1.Y) * (this._V2.Y - this._V1.Y));
                    cos = Math.min(Math.max(cos, -1), 1);

                    var sin = (this._V2.Y - this._V1.Y) / Math.sqrt((this._V2.X - this._V1.X) * (this._V2.X - this._V1.X) + (this._V2.Y - this._V1.Y) * (this._V2.Y - this._V1.Y));
                    sin = Math.min(Math.max(sin, -1), 1);

                    var angle = Math.acos(cos);
                    if (this._V1.Y > this._V2.Y) {
                        angle = -angle;
                    }

                    if (isNaN(angle)) {
                        return;
                    }

                    var angleStep = 1.5707963267948966 / this._Multiplicity;
                    var evenModifier = (this._Multiplicity % 2 === 0) ? 0.5 : 0;

                    var topStart = new GraphicsLayer.Box.ctor(0, 0);
                    var topFinish = new GraphicsLayer.Box.ctor(0, 0);
                    var first = true;
                    for (var i = (Bridge.Int.div(((-(((this._Multiplicity - 1) | 0))) | 0), 2)) | 0; i < Math.ceil((((this._Multiplicity + 1) | 0)) / 2.0); i = (i + 1) | 0) {
                        var startAngle = angle + angleStep * (i - evenModifier);
                        var finishAngle = angle - angleStep * (i - evenModifier);

                        var start = this.LocalToGlobal(Graphs.Vector.op_Addition(this._V1.Location, Graphs.Utility.PolarToRectangular(maxRadius1 + 0.01, startAngle)), width, height);
                        var finish = this.LocalToGlobal(Graphs.Vector.op_Subtraction(this._V2.Location, Graphs.Utility.PolarToRectangular(maxRadius2 + 0.01, finishAngle)), width, height);


                        if (first) {
                            first = false;
                            topStart = start;
                            topFinish = finish;
                        }

                        g.GraphicsLayer$IGraphics$DrawLine(this._penColor, start, finish, this._thickness);
                    }

                    if (this._Orientation !== Graphs.Edge.Orientations.None) {
                        var points = System.Array.init(3, null, GraphicsLayer.Box);
                        if (this._Orientation === Graphs.Edge.Orientations.Forward) {
                            var sweep = Graphs.Vector.op_Subtraction(this._V2.Location, Graphs.Utility.PolarToRectangular(maxRadius2 + 0.025, angle));

                            points[System.Array.index(0, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep, this._V2.Location, 0.17453292519943295), width, height);
                            points[System.Array.index(1, points)] = this.LocalToGlobal(Graphs.Vector.op_Subtraction(this._V2.Location, Graphs.Utility.PolarToRectangular(maxRadius2 + 0.005, angle)), width, height);
                            points[System.Array.index(2, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep, this._V2.Location, -0.17453292519943295), width, height);
                        } else if (this._Orientation === Graphs.Edge.Orientations.Backward) {
                            var sweep1 = Graphs.Vector.op_Addition(this._V1.Location, Graphs.Utility.PolarToRectangular(maxRadius1 + 0.025, angle));

                            points[System.Array.index(0, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep1, this._V1.Location, 0.17453292519943295), width, height);
                            points[System.Array.index(1, points)] = this.LocalToGlobal(Graphs.Vector.op_Addition(this._V1.Location, Graphs.Utility.PolarToRectangular(maxRadius1 + 0.005, angle)), width, height);
                            points[System.Array.index(2, points)] = this.LocalToGlobal(Graphs.Utility.RotateAroundPoint$1(sweep1, this._V1.Location, -0.17453292519943295), width, height);
                        }

                        g.GraphicsLayer$IGraphics$FillPolygon(new GraphicsLayer.ARGB.ctor(0, 0, 0), points);
                    }

                    var label = this.Label;
                    if (!System.String.isNullOrEmpty(label)) {
                        var box = g.GraphicsLayer$IGraphics$MeasureString(label, Graphs.Edge.LabelFont);
                        var bounds = new GraphicsLayer.Box.$ctor1(topStart.X + (topFinish.X - topStart.X) / 2 - box.Width / 2 - 0.75 * box.Width * sin, topStart.Y + (topFinish.Y - topStart.Y) / 2 - box.Height / 2 + 0.75 * box.Height * cos, box.Width, box.Height);
                        g.GraphicsLayer$IGraphics$DrawString(label, Graphs.Edge.LabelFont, Graphs.Edge.LabelBrushColor, bounds);
                    }

                    if (this._showIndex) {
                        var bounds1 = new GraphicsLayer.Box.$ctor1(topStart.X + (topFinish.X - topStart.X) / 2, topStart.Y + (topFinish.Y - topStart.Y) / 2, 10, 10);
                        var cx = (bounds1.Left + bounds1.Right) / 2;
                        var cy = (bounds1.Bottom + bounds1.Top) / 2;
                        var r = Math.max(bounds1.Width, bounds1.Height) / 2 + 5;
                        var bb = new GraphicsLayer.Box.$ctor1(cx + r * Math.cos(this.IndexAngle) - 5, cy + r * Math.sin(this.IndexAngle) - 5, 10, 10);
                        g.GraphicsLayer$IGraphics$DrawString(this.ParentIndex.toString(), Graphs.Edge.IndexFont, Graphs.Edge.IndexBrushColor, bb);
                    }
                }
            },
            LocalToGlobal: function (local, width, height) {
                return new GraphicsLayer.Box.ctor(width * local.X, height * local.Y);
            },
            Hit: function (x, y) {
                return false;
            },
            Meets: function (other) {
                return Bridge.referenceEquals(this._V1, other.V1) || Bridge.referenceEquals(this._V2, other.V1) || Bridge.referenceEquals(this._V1, other.V2) || Bridge.referenceEquals(this._V2, other.V2);
            },
            UpdateStyle: function () {
                if (this.Style == null) {
                    this.Style = "";
                }

                var sb = new System.Text.StringBuilder();
                this.Style = sb.toString();
            },
            ToggleIndex: function () {
                this._showIndex = !this._showIndex;
            },
            RotateIndex: function () {
                this.IndexAngle += 0.19634954084936207;
                if (this.IndexAngle >= 6.2831853071795862) {
                    this.IndexAngle = 0;
                }
            }
        }
    });

    Bridge.define("Graphs.Graph", {
        inherits: [GraphicsLayer.IPaintable],
        statics: {
            fields: {
                GraphExtension: null,
                EdgeWeightExtension: null
            },
            ctors: {
                init: function () {
                    this.GraphExtension = ".graph";
                    this.EdgeWeightExtension = ".edge weight";
                }
            }
        },
        fields: {
            _vertices: null,
            _edges: null,
            _ModifyListsToken: null,
            _FileName: null,
            _showVertexIndices: false,
            _showEdgeIndices: false
        },
        props: {
            IsDirected: {
                get: function () {
                    return System.Linq.Enumerable.from(this._edges).any($asm.$.Graphs.Graph.f1);
                }
            },
            SelectedItems: {
                get: function () {
                    var $t, $t1;
                    this._ModifyListsToken;
                    {
                        var selectedItems = new (System.Collections.Generic.List$1(Graphs.IHittable))();
                        $t = Bridge.getEnumerator(this.SelectedVertices);
                        try {
                            while ($t.moveNext()) {
                                var i = $t.Current;
                                selectedItems.add(i);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }$t1 = Bridge.getEnumerator(this.SelectedEdges);
                        try {
                            while ($t1.moveNext()) {
                                var i1 = $t1.Current;
                                selectedItems.add(i1);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        return selectedItems;
                    }
                }
            },
            SelectedVertices: {
                get: function () {
                    this._ModifyListsToken;
                    return System.Linq.Enumerable.from(this._vertices).where($asm.$.Graphs.Graph.f2).toList(Graphs.Vertex);
                }
            },
            SelectedEdges: {
                get: function () {
                    this._ModifyListsToken;
                    return System.Linq.Enumerable.from(this._edges).where($asm.$.Graphs.Graph.f3).toList(Graphs.Edge);
                }
            },
            BoundingRectangle: {
                get: function () {
                    var $t;
                    this._ModifyListsToken;
                    {
                        var left = System.Double.max;
                        var right = System.Double.min;
                        var top = System.Double.max;
                        var bottom = System.Double.min;

                        $t = Bridge.getEnumerator(this._vertices);
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                left = Math.min(left, v.LocalBounds.Left);
                                right = Math.max(right, v.LocalBounds.Right);
                                top = Math.min(top, v.LocalBounds.Top);
                                bottom = Math.max(bottom, v.LocalBounds.Bottom);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        return new GraphicsLayer.Box.$ctor1(left, top, right - left, bottom - top);
                    }
                }
            },
            SelectedBoundingRectangle: {
                get: function () {
                    var $t;
                    var sv = System.Linq.Enumerable.from(this.SelectedVertices).toList(Graphs.Vertex);
                    if (sv.Count <= 0) {
                        return this.BoundingRectangle;
                    }

                    this._ModifyListsToken;
                    {
                        var left = System.Double.max;
                        var right = System.Double.min;
                        var top = System.Double.max;
                        var bottom = System.Double.min;

                        $t = Bridge.getEnumerator(sv);
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                left = Math.min(left, v.LocalBounds.Left);
                                right = Math.max(right, v.LocalBounds.Right);
                                top = Math.min(top, v.LocalBounds.Top);
                                bottom = Math.max(bottom, v.LocalBounds.Bottom);
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        return new GraphicsLayer.Box.$ctor1(left, top, right - left, bottom - top);
                    }
                }
            },
            Name: {
                get: function () {
                    return this._FileName;
                },
                set: function (value) {
                    this._FileName = value;
                }
            },
            Vertices: {
                get: function () {
                    return this._vertices;
                }
            },
            Edges: {
                get: function () {
                    return this._edges;
                }
            },
            ParametersDirty: false
        },
        alias: ["Paint", "GraphicsLayer$IPaintable$Paint"],
        ctors: {
            init: function () {
                this._vertices = new (System.Collections.Generic.List$1(Graphs.Vertex))();
                this._edges = new (System.Collections.Generic.List$1(Graphs.Edge))();
                this._ModifyListsToken = {  };
            },
            ctor: function () {
                this.$initialize();
                this.ParametersDirty = true;
            },
            $ctor2: function (g) {
                Graphs.Graph.ctor.call(this);
                this._vertices = System.Linq.Enumerable.from(g.Vertices).select($asm.$.Graphs.Graph.f4).toList(Graphs.Vertex);
                this._edges = System.Linq.Enumerable.from(g.Edges).select(Bridge.fn.bind(this, $asm.$.Graphs.Graph.f5)).toList(Graphs.Edge);
                this.Name = g.Name;
            },
            $ctor3: function (vertices, edges) {
                this.$initialize();
                this._vertices = System.Linq.Enumerable.from(vertices).toList(Graphs.Vertex);
                this._edges = System.Linq.Enumerable.from(edges).toList(Graphs.Edge);
            },
            $ctor1: function (g, position, directed) {
                if (directed === void 0) { directed = true; }

                Graphs.Graph.ctor.call(this);
                if (g.VertexWeight != null && g.VertexWeight.Count === g.N) {
                    this._vertices = System.Linq.Enumerable.from(g.Vertices).select(function (v) {
                            return new Graphs.Vertex.$ctor4(position.getItem(v).X, position.getItem(v).Y, g.VertexWeight.getItem(v).toString());
                        }).toList(Graphs.Vertex);
                } else {
                    this._vertices = System.Linq.Enumerable.from(g.Vertices).select(function (v) {
                            return new Graphs.Vertex.$ctor3(position.getItem(v).X, position.getItem(v).Y);
                        }).toList(Graphs.Vertex);
                }
                this._edges = new (System.Collections.Generic.List$1(Graphs.Edge))();

                for (var i = 0; i < g.N; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < g.N; j = (j + 1) | 0) {
                        if (directed) {
                            if (g.Directed.get([i, j])) {
                                this._edges.add(new Graphs.Edge.$ctor2(this._vertices.getItem(i), this._vertices.getItem(j), Graphs.Edge.Orientations.Forward));
                            } else {
                                if (g.Adjacent.get([i, j])) {
                                    this._edges.add(new Graphs.Edge.$ctor2(this._vertices.getItem(j), this._vertices.getItem(i), Graphs.Edge.Orientations.Forward));
                                }
                            }
                        } else if (g.Adjacent.get([i, j])) {
                            this._edges.add(new Graphs.Edge.$ctor2(this._vertices.getItem(i), this._vertices.getItem(j), Graphs.Edge.Orientations.None));
                        }
                    }
                }
            }
        },
        methods: {
            Paint: function (g, width, height) {
                var $t, $t1;
                this._ModifyListsToken;
                {
                    if (this.ParametersDirty) {
                        var graph = new Algorithms.Graph.$ctor1(this.GetEdgeWeights());
                        var n = this.Vertices.Count;

                        for (var i = 0; i < this.Vertices.Count; i = (i + 1) | 0) {
                            this.Vertices.getItem(i).IsUniversal = graph.Degree(i) === ((n - 1) | 0);
                        }

                        this.ParametersDirty = false;
                    }

                    var jj = 0;
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            v.ParentIndex = Bridge.identity(jj, (jj = (jj + 1) | 0));
                            v.Paint(g, width, height);
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    jj = 0;
                    $t1 = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t1.moveNext()) {
                            var e = $t1.Current;
                            e.ParentIndex = Bridge.identity(jj, (jj = (jj + 1) | 0));
                            e.Paint(g, width, height);
                        }
                    } finally {
                        if (Bridge.is($t1, System.IDisposable)) {
                            $t1.System$IDisposable$dispose();
                        }
                    }}
            },
            GetEdgeWeights: function () {
                var weights = new (System.Collections.Generic.List$1(System.Int32))();

                for (var i = 0; i < this._vertices.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this._vertices.Count; j = (j + 1) | 0) {
                        var e = { };
                        if (this.EdgeExists$1(this._vertices.getItem(i), this._vertices.getItem(j), e)) {
                            weights.add(1);
                        } else {
                            if (this.EdgeExists$1(this._vertices.getItem(j), this._vertices.getItem(i), e)) {
                                if (e.v.Orientation === Graphs.Edge.Orientations.None) {
                                    weights.add(1);
                                } else {
                                    weights.add(-1);
                                }
                            } else {
                                weights.add(0);
                            }
                        }
                    }
                }

                return weights;
            },
            ModifyOrientation: function (edgeWeights) {
                var k = 0;
                for (var i = 0; i < this._vertices.Count; i = (i + 1) | 0) {
                    for (var j = (i + 1) | 0; j < this._vertices.Count; j = (j + 1) | 0) {
                        var w = edgeWeights.getItem(k);

                        if (w !== 0) {
                            var e = this.GetEdge(this._vertices.getItem(i), this._vertices.getItem(j));

                            if (Bridge.referenceEquals(e.V1, this._vertices.getItem(i)) && Bridge.referenceEquals(e.V2, this._vertices.getItem(j))) {
                                if (w < 0) {
                                    e.Orientation = Graphs.Edge.Orientations.Backward;
                                } else {
                                    e.Orientation = Graphs.Edge.Orientations.Forward;
                                }
                            } else {
                                if (w < 0) {
                                    e.Orientation = Graphs.Edge.Orientations.Forward;
                                } else {
                                    e.Orientation = Graphs.Edge.Orientations.Backward;
                                }
                            }
                        }

                        k = (k + 1) | 0;
                    }
                }

                this.ParametersDirty = true;
            },
            Clone: function () {
                var s = GraphsCore.CompactSerializer.Serialize(this);
                var g = GraphsCore.CompactSerializer.Deserialize(s);
                if (g != null) {
                    g.ParametersDirty = true;
                } else {
                    System.Console.WriteLine("clone is null");
                }
                return g;
            },
            HitTest: function (x, y) {
                var $t, $t1;
                $t = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        if (v.Hit(x, y)) {
                            return v;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(this._edges);
                try {
                    while ($t1.moveNext()) {
                        var e = $t1.Current;
                        if (e.Hit(x, y)) {
                            return e;
                        }
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                return null;
            },
            UnselectAll: function () {
                this.UnselectAllVertices();
                this.UnselectAllEdges();
            },
            UnselectAllVertices: function () {
                var $t;
                $t = Bridge.getEnumerator(this._vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        v.IsSelected = false;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            UnselectAllEdges: function () {
                var $t;
                $t = Bridge.getEnumerator(this._edges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        e.IsSelected = false;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            SelectEdges: function (edges, symmetricDifference) {
                var $t;
                this.UnselectAllVertices();
                if (!symmetricDifference) {
                    this.UnselectAllEdges();
                }

                $t = Bridge.getEnumerator(edges, Graphs.Edge);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        e.IsSelected = symmetricDifference ? !e.IsSelected : true;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            SelectVertices: function (vertices, symmetricDifference) {
                var $t;
                this.UnselectAllEdges();
                if (!symmetricDifference) {
                    this.UnselectAllVertices();
                }

                $t = Bridge.getEnumerator(vertices, Graphs.Vertex);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        v.IsSelected = symmetricDifference ? !v.IsSelected : true;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            SelectObjects: function (selectionPoints, symmetricDifference) {
                try {
                    var bounds = new Graphs.PolygonContainer(selectionPoints.toArray());

                    var verticesInPolygon = System.Linq.Enumerable.from(this._vertices).where(function (v) {
                            return bounds.Contains(new GraphicsLayer.Box.ctor(v.X, v.Y));
                        }).toList(Graphs.Vertex);

                    if (verticesInPolygon.Count > 0) {
                        this.SelectVertices(verticesInPolygon, symmetricDifference);
                    } else {
                        var edgesHittingPolygon = System.Linq.Enumerable.from(this._edges).where(function (e) {
                                for (var i = 0; i < selectionPoints.Count; i = (i + 1) | 0) {
                                    var start = selectionPoints.getItem(i);
                                    var end = selectionPoints.getItem((((i + 1) | 0)) % selectionPoints.Count);

                                    if (Graphs.Utility.HaveIntersection(start, end, Graphs.Vector.op_Implicit(e.V1.Location), Graphs.Vector.op_Implicit(e.V2.Location))) {
                                        return true;
                                    }
                                }

                                return false;
                            }).toList(Graphs.Edge);

                        this.SelectEdges(edgesHittingPolygon, symmetricDifference);
                    }
                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
            },
            AddVertex: function (v) {
                if (this._showVertexIndices) {
                    v.ToggleIndex();
                }
                this._ModifyListsToken;
                this._vertices.add(v);

                this.ParametersDirty = true;
                return true;
            },
            RemoveVertex: function (v) {
                var $t;
                var neighbors = this.FindNeighbors(v);
                $t = Bridge.getEnumerator(neighbors);
                try {
                    while ($t.moveNext()) {
                        var x = $t.Current;
                        this.RemoveEdge(v, x);
                        this.RemoveEdge(x, v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this._ModifyListsToken;
                this._vertices.remove(v);

                this.ParametersDirty = neighbors.Count > 0;

                return neighbors.Count > 0;
            },
            AddEdge$1: function (v1, v2, multiplicity) {
                if (multiplicity === void 0) { multiplicity = 1; }
                return this.AddEdge(v1, v2, Graphs.Edge.Orientations.None, multiplicity);
            },
            AddEdge: function (v1, v2, orientation, multiplicity, thickness, style, label) {
                if (multiplicity === void 0) { multiplicity = 1; }
                if (thickness === void 0) { thickness = 3.0; }
                if (style === void 0) { style = ""; }
                if (label === void 0) { label = ""; }
                if (Bridge.referenceEquals(v1, v2)) {
                    // Not allowing self-loops for now.
                    return false;
                }

                if (!this.EdgeExists(v1, v2) && !this.EdgeExists(v2, v1)) {
                    this._ModifyListsToken;
                    {
                        var edge = new Graphs.Edge.$ctor2(v1, v2, orientation);
                        edge.Multiplicity = multiplicity;
                        edge.Thickness = thickness;
                        edge.Style = style;
                        edge.Label = label;
                        if (this._showEdgeIndices) {
                            edge.ToggleIndex();
                        }
                        this._edges.add(edge);
                        this.ParametersDirty = true;

                        return true;
                    }
                }

                return false;
            },
            AddEdge$2: function (e) {
                this.AddEdge(e.V1, e.V2, e.Orientation, Math.max(1, e.Multiplicity), e.Thickness, e.Style, e.Label);
            },
            RemoveEdge: function (v1, v2) {
                var $t;
                var toRemove;

                this._ModifyListsToken;
                {
                    toRemove = System.Linq.Enumerable.from(this._edges).where(function (e) {
                            return Bridge.referenceEquals(e.V1, v1) && Bridge.referenceEquals(e.V2, v2);
                        }).toList(Graphs.Edge);
                }

                $t = Bridge.getEnumerator(toRemove);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        this._edges.remove(e);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.ParametersDirty = toRemove.Count > 0;
                return toRemove.Count > 0;
            },
            EdgeExists: function (v1, v2) {
                var edge = { };
                return this.EdgeExists$1(v1, v2, edge);
            },
            EdgeExists$1: function (v1, v2, edge) {
                var $t;
                edge.v = null;

                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            edge.v = e;
                            if (Bridge.referenceEquals(e.V1, v1) && Bridge.referenceEquals(e.V2, v2) && (e.Orientation === Graphs.Edge.Orientations.None || e.Orientation === Graphs.Edge.Orientations.Forward)) {
                                return true;
                            }

                            if (Bridge.referenceEquals(e.V1, v2) && Bridge.referenceEquals(e.V2, v1) && e.Orientation === Graphs.Edge.Orientations.Backward) {
                                return true;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return false;
            },
            GetEdge: function (v1, v2) {
                var $t;
                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            if (Bridge.referenceEquals(e.V1, v1) && Bridge.referenceEquals(e.V2, v2) || Bridge.referenceEquals(e.V1, v2) && Bridge.referenceEquals(e.V2, v1)) {
                                return e;
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return null;
            },
            InducedSubgraph: function (vertices) {
                var $t, $t1, $t2;
                var induced = new Graphs.Graph.ctor();
                $t = Bridge.getEnumerator(vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        induced.AddVertex(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(induced.Vertices);
                try {
                    while ($t1.moveNext()) {
                        var v1 = $t1.Current;
                        $t2 = Bridge.getEnumerator(induced.Vertices);
                        try {
                            while ($t2.moveNext()) {
                                var v2 = $t2.Current;
                                var e = { };
                                if (this.EdgeExists$1(v1, v2, e)) {
                                    induced.AddEdge(v1, v2, e.v.Orientation !== Graphs.Edge.Orientations.None ? Graphs.Edge.Orientations.Forward : Graphs.Edge.Orientations.None, e.v.Multiplicity, e.v.Thickness, e.v.Style, e.v.Label);
                                }
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }
                return induced.Clone();
            },
            DisjointUnion: function (g) {
                var $t, $t1;
                $t = Bridge.getEnumerator(g.Vertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        this.AddVertex(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                $t1 = Bridge.getEnumerator(g.Edges);
                try {
                    while ($t1.moveNext()) {
                        var e = $t1.Current;
                        this.AddEdge$2(e);
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }},
            FindNeighbors: function (v) {
                var $t;
                var neighbors = new (System.Collections.Generic.List$1(Graphs.Vertex))();

                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._edges);
                    try {
                        while ($t.moveNext()) {
                            var e = $t.Current;
                            if (Bridge.referenceEquals(e.V1, v)) {
                                neighbors.add(e.V2);
                            }
                            if (Bridge.referenceEquals(e.V2, v)) {
                                neighbors.add(e.V1);
                            }
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}

                return neighbors;
            },
            Translate: function (offset) {
                var $t;
                this._ModifyListsToken;
                {
                    $t = Bridge.getEnumerator(this._vertices);
                    try {
                        while ($t.moveNext()) {
                            var v = $t.Current;
                            v.X += offset.X;
                            v.Y += offset.Y;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }}
            },
            ToggleEdgeIndices: function () {
                var $t;
                this._showEdgeIndices = !this._showEdgeIndices;
                $t = Bridge.getEnumerator(this.Edges);
                try {
                    while ($t.moveNext()) {
                        var a = $t.Current;
                        a.ToggleIndex();
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }},
            ToggleVertexIndices: function () {
                var $t;
                this._showVertexIndices = !this._showVertexIndices;
                $t = Bridge.getEnumerator(this.Vertices);
                try {
                    while ($t.moveNext()) {
                        var a = $t.Current;
                        a.ToggleIndex();
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}
        }
    });

    Bridge.ns("Graphs.Graph", $asm.$);

    Bridge.apply($asm.$.Graphs.Graph, {
        f1: function (e) {
            return e.Orientation !== Graphs.Edge.Orientations.None;
        },
        f2: function (v) {
            return v.IsSelected;
        },
        f3: function (e) {
            return e.IsSelected;
        },
        f4: function (v) {
            return new Graphs.Vertex.ctor(v);
        },
        f5: function (e) {
            return new Graphs.Edge.ctor(e, this._vertices);
        }
    });

    Bridge.define("Graphs.GraphCanvas", {
        inherits: [GraphicsLayer.IPaintable],
        statics: {
            fields: {
                DefaultBaseViewScale: 0,
                MaxZoomScale: 0,
                _gridStep: 0,
                SelectionPenColor: null,
                GridPenColor: null,
                BackgroundColor: null
            },
            ctors: {
                init: function () {
                    this.DefaultBaseViewScale = 800;
                    this.MaxZoomScale = 6000;
                    this._gridStep = 0.04;
                    this.SelectionPenColor = new GraphicsLayer.ARGB.ctor(0, 0, 255);
                    this.GridPenColor = new GraphicsLayer.ARGB.$ctor1(75, 0, 10, 0);
                    this.BackgroundColor = new GraphicsLayer.ARGB.ctor(247, 247, 247);
                }
            }
        },
        fields: {
            BaseViewScale: 0,
            ZoomDelta: 0,
            MinZoom: 0,
            _zoomFitNextPaint: false,
            _snapToGrid: false,
            _drawGrid: false,
            _graph: null,
            _DraggedVertex: null,
            _selectionPoints: null,
            _SelectionPointsToken: null,
            _controlWasDown: false,
            _canvas: null,
            _state: 0,
            _viewScale: 0,
            _Zoom: 0,
            _secondaryConverter: null,
            _history: null,
            _historyIndex: 0
        },
        events: {
            GraphModified: null,
            NameModified: null
        },
        props: {
            SnapToGrid: {
                get: function () {
                    return this._snapToGrid;
                },
                set: function (value) {
                    var needRedraw = value && !this._snapToGrid;
                    this._snapToGrid = value;
                    if (needRedraw) {
                        this.Invalidate();
                    }
                }
            },
            GridStep: {
                get: function () {
                    return Graphs.GraphCanvas._gridStep;
                },
                set: function (value) {
                    var needRedraw = this.SnapToGrid && value !== Graphs.GraphCanvas._gridStep;
                    Graphs.GraphCanvas._gridStep = value;
                    if (needRedraw) {
                        this.Invalidate();
                    }
                }
            },
            DrawGrid: {
                get: function () {
                    return this._drawGrid;
                },
                set: function (value) {
                    var needRedraw = this._drawGrid !== value;
                    this._drawGrid = value;
                    if (needRedraw) {
                        this.Invalidate();
                    }
                }
            },
            HasPainted: false,
            Width: 0,
            Height: 0,
            Graph: {
                get: function () {
                    return this._graph;
                }
            },
            Canvas: {
                get: function () {
                    return this._canvas;
                },
                set: function (value) {
                    this._canvas = value;

                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseMoved(Bridge.fn.cacheBind(this, this.OnMouseMove));
                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseButtonDown(Bridge.fn.cacheBind(this, this.OnMouseDown));
                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseButtonUp(Bridge.fn.cacheBind(this, this.OnMouseUp));
                    this._canvas.GraphicsLayer$IProduceMouseEvents$addMouseButtonDoubleClicked(Bridge.fn.cacheBind(this, this.OnMouseDoubleClick));
                }
            },
            Zoom: {
                set: function (value) {
                    if (value === this._Zoom) {
                        return;
                    }

                    this._Zoom = value;
                    var scale = Bridge.Int.clip32(this._Zoom * this.BaseViewScale);
                    if (scale > Graphs.GraphCanvas.MaxZoomScale) {
                        scale = Graphs.GraphCanvas.MaxZoomScale;
                        this._Zoom = (Bridge.Int.div(scale, this.BaseViewScale)) | 0;
                    }

                    this.ViewScale = scale;
                }
            },
            ViewScale: {
                get: function () {
                    return this._viewScale;
                },
                set: function (value) {
                    if (value === this._viewScale) {
                        return;
                    }

                    this._viewScale = value;
                }
            },
            IsEmpty: {
                get: function () {
                    return this._graph.Vertices.Count <= 0;
                }
            }
        },
        alias: ["Paint", "GraphicsLayer$IPaintable$Paint"],
        ctors: {
            init: function () {
                this.BaseViewScale = Graphs.GraphCanvas.DefaultBaseViewScale;
                this.ZoomDelta = 0.15;
                this.MinZoom = 0.15;
                this._snapToGrid = true;
                this._drawGrid = true;
                this._selectionPoints = new (System.Collections.Generic.List$1(GraphicsLayer.Box))();
                this._SelectionPointsToken = {  };
                this._state = Graphs.GraphCanvas.States.Idle;
                this._viewScale = Graphs.GraphCanvas.DefaultBaseViewScale;
                this._Zoom = 1.0;
                this._history = new (System.Collections.Generic.List$1(Graphs.GraphCanvas.HistoricalGraph))();
                this._historyIndex = 0;
            },
            ctor: function (graph, secondaryConverter) {
                if (secondaryConverter === void 0) { secondaryConverter = null; }

                this.$initialize();                var $t;

                this._graph = graph != null ? graph : new Graphs.Graph.ctor();
                this._secondaryConverter = secondaryConverter;
                this._history.add(($t = new Graphs.GraphCanvas.HistoricalGraph(), $t.Graph = this._graph.Clone(), $t.Zoom = this._Zoom, $t.ViewScale = this._viewScale, $t));
        }
    },
    methods: {
        SetZoomDelta: function (d) {
            this.ZoomDelta = d;
            this.MinZoom = d;
        },
        Invalidate: function () {
            if (this.Canvas != null) {
                this.Canvas.GraphicsLayer$ICanvas$Invalidate();
            }
        },
        GraphChanged: function () {
            var $t;
            if (((((this._history.Count - this._historyIndex) | 0) - 1) | 0) > 0) {
                this._history.removeRange(((this._historyIndex + 1) | 0), ((((this._history.Count - this._historyIndex) | 0) - 1) | 0));
            }

            this._history.add(($t = new Graphs.GraphCanvas.HistoricalGraph(), $t.Graph = this._graph.Clone(), $t.Zoom = this._Zoom, $t.ViewScale = this._viewScale, $t));
            this._historyIndex = (this._history.Count - 1) | 0;

            if (!Bridge.staticEquals(this.GraphModified, null)) {
                this.GraphModified(this.Graph);
            }
        },
        DoUndo: function () {
            if (this._historyIndex <= 0) {
                return false;
            }

            this._historyIndex = (this._historyIndex - 1) | 0;
            this.ObeyHistory();

            return this._historyIndex > 0;
        },
        DoRedo: function () {
            if (this._historyIndex >= ((this._history.Count - 1) | 0)) {
                return false;
            }

            this._historyIndex = (this._historyIndex + 1) | 0;
            this.ObeyHistory();

            return this._historyIndex < ((this._history.Count - 1) | 0);
        },
        ObeyHistory: function () {
            this._graph = this._history.getItem(this._historyIndex).Graph.Clone();
            this.ViewScale = this._history.getItem(this._historyIndex).ViewScale;
            this.Zoom = this._history.getItem(this._historyIndex).Zoom;
            this._graph.ParametersDirty = true;

            if (!Bridge.staticEquals(this.GraphModified, null)) {
                this.GraphModified(this.Graph);
            }

            this.Invalidate();
        },
        Save: function (name) {
            this._graph.Name = name;
            return ""; // _graph.Serialize();
        },
        DoZoom: function (amount, location) {
            var width = this.Width;
            var height = this.Height;

            var oldCenter = new Graphs.Vector(width / this._viewScale * location.X, height / this._viewScale * location.Y);

            this.Zoom = Math.max(this.MinZoom, this._Zoom + this.ZoomDelta * amount);

            var center = new Graphs.Vector(width / this._viewScale * location.X, height / this._viewScale * location.Y);

            this._graph.Translate(Graphs.Vector.op_Subtraction(center, oldCenter));

            this.Invalidate();
        },
        DoZoomFit: function () {
            if (this._graph.Vertices.Count <= 0) {
                this.Zoom = 1;
                this.Invalidate();
                return;
            }

            var width = this.Width;
            var height = this.Height;
            var bounds = this._graph.SelectedBoundingRectangle;
            var c = new Graphs.Vector(bounds.Left + bounds.Width / 2, bounds.Top + bounds.Height / 2);

            var actual = Math.min(width, height);
            this.Zoom = 0.9 * actual / Math.max(bounds.Width, bounds.Height) / this.BaseViewScale;

            var center = new Graphs.Vector(width / this._viewScale * 0.5, height / this._viewScale * 0.5);
            this._graph.Translate(Graphs.Vector.op_Subtraction(center, c));

            this.Invalidate();
        },
        DoDelete: function () {
            var $t, $t1;
            if (this._graph.SelectedVertices.Count > 0) {
                $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        this._graph.RemoveVertex(v);
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }}

            if (this._graph.SelectedEdges.Count > 0) {
                $t1 = Bridge.getEnumerator(this._graph.SelectedEdges);
                try {
                    while ($t1.moveNext()) {
                        var e = $t1.Current;
                        this._graph.RemoveEdge(e.V1, e.V2);
                    }
                } finally {
                    if (Bridge.is($t1, System.IDisposable)) {
                        $t1.System$IDisposable$dispose();
                    }
                }}

            this.Invalidate();
            this.GraphChanged();
        },
        DoReverseSelectedEdges: function () {
            var $t;
            if (this._graph.SelectedEdges.Count > 0) {
                $t = Bridge.getEnumerator(this._graph.SelectedEdges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        var oo = e.Orientation;
                        if (oo === Graphs.Edge.Orientations.Forward) {
                            oo = Graphs.Edge.Orientations.Backward;
                        } else {
                            if (oo === Graphs.Edge.Orientations.Backward) {
                                oo = Graphs.Edge.Orientations.Forward;
                            }
                        }

                        e.Orientation = oo;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Invalidate();
                this.GraphChanged();
            }
        },
        DoRotateSelectedEdges: function () {
            var $t;
            if (this._graph.SelectedEdges.Count > 0) {
                $t = Bridge.getEnumerator(this._graph.SelectedEdges);
                try {
                    while ($t.moveNext()) {
                        var e = $t.Current;
                        var oo = e.Orientation;
                        if (oo === Graphs.Edge.Orientations.Forward) {
                            oo = Graphs.Edge.Orientations.Backward;
                        } else {
                            if (oo === Graphs.Edge.Orientations.Backward) {
                                oo = Graphs.Edge.Orientations.None;
                            } else {
                                if (oo === Graphs.Edge.Orientations.None) {
                                    oo = Graphs.Edge.Orientations.Forward;
                                }
                            }
                        }

                        e.Orientation = oo;
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                this.Invalidate();
                this.GraphChanged();
            }
        },
        DoCut: function () {
            this.DoCopy();
            this.DoDelete();
        },
        DoCopy: function (verbose) {
            if (verbose === void 0) { verbose = false; }
            var h = this._graph.InducedSubgraph(this._graph.SelectedVertices);
            return GraphsCore.CompactSerializer.Serialize(h);
        },
        DoPaste: function (s) {
            var g = null;
            if (System.String.contains(s,"tikzpicture")) {
                //g = TeXConverter.FromTikz(s);
            } else if (GraphsCore.CompactSerializer.LooksLikeASerializedGraph(s)) {
                g = GraphsCore.CompactSerializer.Deserialize(s);
            } else {
                //g = Graph.Deserialize(s);
            }

            if (g != null) {
                this._graph.DisjointUnion(g);

                this.Invalidate();
                this.GraphChanged();
            } else if (System.Linq.Enumerable.from(System.String.split(s.trim(), [32].map(function(i) {{ return String.fromCharCode(i); }}))).all($asm.$.Graphs.GraphCanvas.f1)) {
                try {
                    //g = GraphIO.GraphFromEdgeWeightString(s);
                    if (g != null) {
                        this._graph.DisjointUnion(g);

                        this.Invalidate();
                        this.GraphChanged();
                    }

                }
                catch ($e1) {
                    $e1 = System.Exception.create($e1);
                }
            } else {
                try {
                    //g = GraphIO.GraphFromGraph6(s.Trim());

                    if (g != null) {
                        var empty = this._graph.Vertices.Count <= 0;
                        this._graph.DisjointUnion(g);

                        if (empty) {
                            this.NameModified(g.Name);
                        }

                        this.Invalidate();
                        this.GraphChanged();
                    }
                }
                catch ($e2) {
                    $e2 = System.Exception.create($e2);
                }
            }
        },
        DoComplement: function () {
            for (var i = 0; i < this._graph.SelectedVertices.Count; i = (i + 1) | 0) {
                for (var j = (i + 1) | 0; j < this._graph.SelectedVertices.Count; j = (j + 1) | 0) {
                    var v1 = this._graph.SelectedVertices.getItem(i);
                    var v2 = this._graph.SelectedVertices.getItem(j);

                    var edgeExists = this._graph.EdgeExists(v1, v2) || this._graph.EdgeExists(v2, v1);

                    if (edgeExists) {
                        this._graph.RemoveEdge(v1, v2);
                        this._graph.RemoveEdge(v2, v1);
                    } else {
                        this._graph.AddEdge$1(v1, v2);
                    }
                }
            }

            this.Invalidate();

            this.GraphChanged();
        },
        DoSquare: function () {
            var $t, $t1;
            var g = new Graphs.Graph.ctor();

            var vertexMap = new (System.Collections.Generic.Dictionary$2(Graphs.Vertex,Graphs.Vertex))();
            $t = Bridge.getEnumerator(this._graph.Vertices);
            try {
                while ($t.moveNext()) {
                    var v = $t.Current;
                    var w = new Graphs.Vertex.$ctor4(v.X, v.Y, v.Label);
                    g.AddVertex(w);

                    vertexMap.set(v, w);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            $t1 = Bridge.getEnumerator(this._graph.Vertices);
            try {
                while ($t1.moveNext()) {
                    var v1 = $t1.Current;
                    var q = System.Linq.Enumerable.from(this._graph.FindNeighbors(v1)).union(System.Array.init([v1], Graphs.Vertex)).toList(Graphs.Vertex);

                    for (var i = 0; i < q.Count; i = (i + 1) | 0) {
                        for (var j = (i + 1) | 0; j < q.Count; j = (j + 1) | 0) {
                            g.AddEdge$1(vertexMap.get(q.getItem(i)), vertexMap.get(q.getItem(j)));
                        }
                    }
                }
            } finally {
                if (Bridge.is($t1, System.IDisposable)) {
                    $t1.System$IDisposable$dispose();
                }
            }

            return g;
        },
        DoLineGraph: function () {
            var $t, $t1, $t2, $t3;
            var g = new Graphs.Graph.ctor();

            var edgeToCliqueMap = new (System.Collections.Generic.Dictionary$2(Graphs.Edge,System.Collections.Generic.List$1(Graphs.Vertex)))();
            $t = Bridge.getEnumerator(this._graph.Edges);
            try {
                while ($t.moveNext()) {
                    var e = $t.Current;
                    var clique = new (System.Collections.Generic.List$1(Graphs.Vertex))();

                    for (var i = 0; i < e.Multiplicity; i = (i + 1) | 0) {
                        var v = new Graphs.Vertex.$ctor3((e.V1.X + e.V2.X) / 2, (e.V1.Y + e.V2.Y) / 2);
                        g.AddVertex(v);
                        v.Label = e.Label;

                        $t1 = Bridge.getEnumerator(clique);
                        try {
                            while ($t1.moveNext()) {
                                var other = $t1.Current;
                                g.AddEdge$1(other, v);
                            }
                        } finally {
                            if (Bridge.is($t1, System.IDisposable)) {
                                $t1.System$IDisposable$dispose();
                            }
                        }
                        clique.add(v);
                    }

                    edgeToCliqueMap.set(e, clique);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            for (var i1 = 0; i1 < this._graph.Edges.Count; i1 = (i1 + 1) | 0) {
                for (var j = (i1 + 1) | 0; j < this._graph.Edges.Count; j = (j + 1) | 0) {
                    if (this._graph.Edges.getItem(i1).Meets(this._graph.Edges.getItem(j))) {
                        $t2 = Bridge.getEnumerator(edgeToCliqueMap.get(this._graph.Edges.getItem(i1)));
                        try {
                            while ($t2.moveNext()) {
                                var v1 = $t2.Current;
                                $t3 = Bridge.getEnumerator(edgeToCliqueMap.get(this._graph.Edges.getItem(j)));
                                try {
                                    while ($t3.moveNext()) {
                                        var v2 = $t3.Current;
                                        g.AddEdge$1(v1, v2);
                                    }
                                } finally {
                                    if (Bridge.is($t3, System.IDisposable)) {
                                        $t3.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t2, System.IDisposable)) {
                                $t2.System$IDisposable$dispose();
                            }
                        }}
                }
            }

            return g;
        },
        DoContractSelectedSubgraph: function () {
            var $t, $t1;
            var selected = this._graph.SelectedVertices;
            if (selected.Count <= 0) {
                return;
            }

            var x = System.Linq.Enumerable.from(selected).average($asm.$.Graphs.GraphCanvas.f2);
            var y = System.Linq.Enumerable.from(selected).average($asm.$.Graphs.GraphCanvas.f3);

            var contractedVertex = new Graphs.Vertex.$ctor3(x, y);
            this._graph.AddVertex(contractedVertex);

            var neighbors = System.Linq.Enumerable.from(selected).selectMany(Bridge.fn.bind(this, $asm.$.Graphs.GraphCanvas.f4)).distinct();

            $t = Bridge.getEnumerator(neighbors);
            try {
                while ($t.moveNext()) {
                    var neighbor = $t.Current;
                    this._graph.AddEdge$1(contractedVertex, neighbor);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            $t1 = Bridge.getEnumerator(selected);
            try {
                while ($t1.moveNext()) {
                    var v = $t1.Current;
                    this._graph.RemoveVertex(v);
                }
            } finally {
                if (Bridge.is($t1, System.IDisposable)) {
                    $t1.System$IDisposable$dispose();
                }
            }
            this.Invalidate();

            this.GraphChanged();
        },
        DoIndexLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = i.toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoDegreeLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = g.Degree(i).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoInDegreeLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = g.InDegree(i).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoOutDegreeLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = g.OutDegree(i).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoOutDegreePlusOneLabeling: function () {
            var g = new Algorithms.Graph.$ctor1(this._graph.GetEdgeWeights());

            for (var i = 0; i < this._graph.Vertices.Count; i = (i + 1) | 0) {
                this._graph.Vertices.getItem(i).Label = (((g.OutDegree(i) + 1) | 0)).toString();
            }

            this.Invalidate();
            this.GraphChanged();
        },
        DoClearLabels: function (s, vertices) {
            var $t;
            if (s === void 0) { s = ""; }
            if (vertices === void 0) { vertices = null; }
            if (vertices == null || System.Linq.Enumerable.from(vertices).count() <= 0) {
                vertices = System.Linq.Enumerable.range(0, this._graph.Vertices.Count);
            }

            $t = Bridge.getEnumerator(vertices, System.Int32);
            try {
                while ($t.moveNext()) {
                    var v = $t.Current;
                    this._graph.Vertices.getItem(v).Label = s;
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            this.Invalidate();
            this.GraphChanged();
        },
        DoSnapToGrid: function () {
            var $t;
            if (this.GridStep <= 0) {
                return;
            }

            $t = Bridge.getEnumerator(this._graph.Vertices);
            try {
                while ($t.moveNext()) {
                    var v = $t.Current;
                    v.X = Graphs.GraphCanvas._gridStep * Bridge.Math.round(v.X / Graphs.GraphCanvas._gridStep, 0, 6);
                    v.Y = Graphs.GraphCanvas._gridStep * Bridge.Math.round(v.Y / Graphs.GraphCanvas._gridStep, 0, 6);
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }},
        PaintGrid: function (g) {
            if (!this.DrawGrid || this.GridStep <= 0) {
                return;
            }

            var x = 0.0;
            while (x <= this.Width) {
                g.GraphicsLayer$IGraphics$DrawLine$1(Graphs.GraphCanvas.GridPenColor, x, 0, x, this.Height, 1.0);
                x += this.GridStep * this._viewScale;
            }

            var y = 0.0;
            while (y <= this.Height) {
                g.GraphicsLayer$IGraphics$DrawLine$1(Graphs.GraphCanvas.GridPenColor, 0, y, this.Width, y, 1.0);
                y += this.GridStep * this._viewScale;
            }
        },
        GetHit: function (x, y) {
            return this._graph.HitTest(x, y);
        },
        Paint: function (g, width, height) {
            var $t;
            if (width === 0 || height === 0) {
                return;
            }

            try {
                this.Width = width;
                this.Height = height;

                if (this.SnapToGrid) {
                    this.DoSnapToGrid();
                }

                g.GraphicsLayer$IGraphics$Clear(Graphs.GraphCanvas.BackgroundColor);
                this.PaintGrid(g);

                this._graph.Paint(g, this._viewScale, this._viewScale);

                switch (this._state) {
                    case Graphs.GraphCanvas.States.Idle: 
                        break;
                    case Graphs.GraphCanvas.States.DraggingVertex: 
                        break;
                    case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                        {
                            var selectionPoints;
                            this._SelectionPointsToken;
                            {
                                selectionPoints = new (System.Collections.Generic.List$1(GraphicsLayer.Box))(this._selectionPoints.Count);
                                $t = Bridge.getEnumerator(this._selectionPoints);
                                try {
                                    while ($t.moveNext()) {
                                        var p = $t.Current;
                                        selectionPoints.add(new GraphicsLayer.Box.ctor(p.X * this._viewScale, p.Y * this._viewScale));
                                    }
                                } finally {
                                    if (Bridge.is($t, System.IDisposable)) {
                                        $t.System$IDisposable$dispose();
                                    }
                                }}

                            if (selectionPoints.Count > 1) {
                                g.GraphicsLayer$IGraphics$DrawLines(Graphs.GraphCanvas.SelectionPenColor, selectionPoints, 1.0);
                            }

                            break;
                        }
                }
            }
            catch ($e1) {
                $e1 = System.Exception.create($e1);
            }

            this.HasPainted = true;

            if (this._zoomFitNextPaint) {
                this._zoomFitNextPaint = false;
                this.DoZoomFit();
                this.DoZoom(4, new GraphicsLayer.Box.ctor(0.5, 0.5));
            }
        },
        OnMouseMove: function (X, Y) {
            var $t;
            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            switch (this._state) {
                case Graphs.GraphCanvas.States.Idle: 
                    break;
                case Graphs.GraphCanvas.States.DraggingVertex: 
                    {
                        this._DraggedVertex.X = this._DraggedVertex.DragOffset.X + x;
                        this._DraggedVertex.Y = this._DraggedVertex.DragOffset.Y + y;

                        this.Invalidate();
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                    {
                        this._SelectionPointsToken;
                        {
                            this._selectionPoints.add(new GraphicsLayer.Box.ctor(x, y));

                            this.Invalidate();
                        }
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectedVertices: 
                    {
                        $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                        try {
                            while ($t.moveNext()) {
                                var v = $t.Current;
                                v.X = v.DragOffset.X + x;
                                v.Y = v.DragOffset.Y + y;
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }
                        this.Invalidate();
                        break;
                    }
            }
        },
        ToggleEdgeIndices: function () {
            this._graph.ToggleEdgeIndices();

            this.Invalidate();
        },
        RotateVertexIndices: function () {
            var $t;
            var x = this._graph.SelectedVertices;
            if (x.Count <= 0) {
                x = this._graph.Vertices;
            }

            $t = Bridge.getEnumerator(x);
            try {
                while ($t.moveNext()) {
                    var a = $t.Current;
                    a.RotateIndex();
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            this.Invalidate();
        },
        RotateEdgeIndices: function () {
            var $t;
            var x = this._graph.SelectedEdges;
            if (x.Count <= 0) {
                x = this._graph.Edges;
            }

            $t = Bridge.getEnumerator(x);
            try {
                while ($t.moveNext()) {
                    var a = $t.Current;
                    a.RotateIndex();
                }
            } finally {
                if (Bridge.is($t, System.IDisposable)) {
                    $t.System$IDisposable$dispose();
                }
            }
            this.Invalidate();
        },
        SetIndex: function (n) {
            var x = this._graph.SelectedVertices;
            if (x.Count === 1) {
                var v = x.getItem(0);
                var i = this._graph.Vertices.indexOf(v);
                if (i !== n) {
                    this._graph.Vertices.remove(v);
                    if (n >= this._graph.Vertices.Count) {
                        this._graph.Vertices.add(v);
                    } else if (n < i) {
                        this._graph.Vertices.insert(n, v);
                    } else {
                        this._graph.Vertices.insert(n, v);
                    }
                }
            } else {
                var y = this._graph.SelectedEdges;
                if (y.Count === 1) {
                    var v1 = y.getItem(0);
                    var i1 = this._graph.Edges.indexOf(v1);
                    if (i1 !== n) {
                        this._graph.Edges.remove(v1);
                        if (n >= this._graph.Edges.Count) {
                            this._graph.Edges.add(v1);
                        } else if (n < i1) {
                            this._graph.Edges.insert(n, v1);
                        } else {
                            this._graph.Edges.insert(n, v1);
                        }
                    }
                }
            }

            this.Invalidate();
        },
        ToggleVertexIndices: function () {
            this._graph.ToggleVertexIndices();

            this.Invalidate();
        },
        OnMouseDown: function (X, Y, button) {
            var $t;
            this._controlWasDown = this.Canvas.GraphicsLayer$ICanvas$IsControlKeyDown;

            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            var o = this.GetHit(x, y);

            switch (this._state) {
                case Graphs.GraphCanvas.States.Idle: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            if (o == null) {
                                this._selectionPoints.clear();
                                this._selectionPoints.add(new GraphicsLayer.Box.ctor(x, y));
                                this._state = Graphs.GraphCanvas.States.DraggingSelectionRegion;
                            } else if (Bridge.is(o, Graphs.Vertex)) {
                                if (Bridge.cast(o, Graphs.Vertex).IsSelected) {
                                    $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                                    try {
                                        while ($t.moveNext()) {
                                            var v = $t.Current;
                                            v.DragOffset = new GraphicsLayer.Box.ctor(v.X - x, v.Y - y);
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    this._state = Graphs.GraphCanvas.States.DraggingSelectedVertices;
                                } else {
                                    this._DraggedVertex = Bridge.cast(o, Graphs.Vertex);
                                    this._DraggedVertex.DragOffset = new GraphicsLayer.Box.ctor(this._DraggedVertex.X - x, this._DraggedVertex.Y - y);
                                    this._state = Graphs.GraphCanvas.States.DraggingVertex;
                                }
                            } else if (Bridge.is(o, Graphs.Edge)) {
                            }
                        } else if (button === GraphicsLayer.MouseButton.Right) {
                            if (o == null) {
                            } else if (Bridge.is(o, Graphs.Vertex)) {
                            } else if (Bridge.is(o, Graphs.Edge)) {
                            }
                        }

                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingVertex: 
                    break;
                case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                    break;
            }
        },
        OnMouseUp: function (X, Y, button) {
            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            var o = this.GetHit(x, y);

            switch (this._state) {
                case Graphs.GraphCanvas.States.Idle: 
                    {
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingVertex: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            this._state = Graphs.GraphCanvas.States.Idle;

                            if (this.SnapToGrid) {
                                this.DoSnapToGrid();
                            }

                            this.GraphChanged();
                        }
                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectionRegion: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            this._state = Graphs.GraphCanvas.States.Idle;

                            var selectionPoints;
                            this._SelectionPointsToken;
                            {
                                selectionPoints = new (System.Collections.Generic.List$1(GraphicsLayer.Box))(this._selectionPoints);

                                if (selectionPoints.Count > 2) {
                                    this._graph.SelectObjects(selectionPoints, this._controlWasDown);
                                }

                                this.Canvas.GraphicsLayer$ICanvas$SelectedObjects = System.Linq.Enumerable.from(this._graph.SelectedItems).select(function(x) { return Bridge.cast(x, System.Object); });
                                this.Invalidate();
                            }
                        }

                        break;
                    }
                case Graphs.GraphCanvas.States.DraggingSelectedVertices: 
                    {
                        if (button === GraphicsLayer.MouseButton.Left) {
                            this._state = Graphs.GraphCanvas.States.Idle;
                            this.GraphChanged();
                        }
                        break;
                    }
            }

            this.Invalidate();
        },
        OnMouseDoubleClick: function (X, Y, button) {
            var $t;
            var x = X / this._viewScale;
            var y = Y / this._viewScale;

            var o = this.GetHit(x, y);

            var graphChanged = false;
            if (this._state === Graphs.GraphCanvas.States.Idle && !this.Canvas.GraphicsLayer$ICanvas$IsControlKeyDown) {
                if (button === GraphicsLayer.MouseButton.Left) {
                    if (o == null) {
                        var v = new Graphs.Vertex.$ctor3(x, y);
                        if (this._graph.AddVertex(v)) {
                            graphChanged = true;
                        }
                    } else if (Bridge.is(o, Graphs.Vertex)) {
                        var endVertex = Bridge.cast(o, Graphs.Vertex);
                        $t = Bridge.getEnumerator(this._graph.SelectedVertices);
                        try {
                            while ($t.moveNext()) {
                                var v1 = $t.Current;
                                if (this._graph.AddEdge$1(v1, endVertex)) {
                                    graphChanged = true;
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                } else if (button === GraphicsLayer.MouseButton.Right) {
                    if (Bridge.is(o, Graphs.Vertex)) {
                        if (this._graph.RemoveVertex(Bridge.cast(o, Graphs.Vertex))) {
                            graphChanged = true;
                        }
                    }
                }
            }

            this.Invalidate();

            if (graphChanged) {
                this.GraphChanged();
            }
        },
        ZoomFitNextPaint: function () {
            this._zoomFitNextPaint = true;
            this.Invalidate();
        }
    }
    });

    Bridge.ns("Graphs.GraphCanvas", $asm.$);

    Bridge.apply($asm.$.Graphs.GraphCanvas, {
        f1: function (x) {
            var d = { };
            return System.String.startsWith(x, "[") || System.Int32.tryParse(x, d);
        },
        f2: function (z) {
            return z.X;
        },
        f3: function (z) {
            return z.Y;
        },
        f4: function (v) {
            return this._graph.FindNeighbors(v);
        }
    });

    Bridge.define("Graphs.Vertex", {
        inherits: [GraphicsLayer.IPaintable,Graphs.IHittable],
        statics: {
            fields: {
                LabelFont: null,
                IndexFont: null,
                LabelBrushColor: null,
                IndexBrushColor: null,
                BoundaryPenColor: null,
                BoundarySelectedPenColor: null,
                BoundarySelectedPenWidth: 0,
                DefaultFillBrushColor: null,
                UniversalVertexFillBrushColor: null,
                SelectedFillBrushColor: null
            },
            ctors: {
                init: function () {
                    this.LabelFont = new GraphicsLayer.Font("Times New Roman", 12);
                    this.IndexFont = new GraphicsLayer.Font("System", 8);
                    this.LabelBrushColor = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                    this.IndexBrushColor = new GraphicsLayer.ARGB.$ctor1(200, 200, 0, 0);
                    this.BoundaryPenColor = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                    this.BoundarySelectedPenColor = new GraphicsLayer.ARGB.$ctor1(255, 0, 255, 0);
                    this.BoundarySelectedPenWidth = 2;
                    this.DefaultFillBrushColor = new GraphicsLayer.ARGB.$ctor1(120, 0, 0, 0);
                    this.UniversalVertexFillBrushColor = new GraphicsLayer.ARGB.$ctor1(120, 0, 0, 255);
                    this.SelectedFillBrushColor = new GraphicsLayer.ARGB.$ctor1(255, 0, 255, 127);
                }
            }
        },
        fields: {
            _Location: null,
            _DragOffset: null,
            _label: null,
            _Style: null,
            _IsSelected: false,
            _padding: 0,
            _LocalBounds: null,
            _showIndex: false
        },
        props: {
            ParentIndex: 0,
            IndexAngle: 0,
            Color: null,
            Modifier: 0,
            X: {
                get: function () {
                    return this._Location.X;
                },
                set: function (value) {
                    this._Location.X = value;
                }
            },
            Y: {
                get: function () {
                    return this._Location.Y;
                },
                set: function (value) {
                    this._Location.Y = value;
                }
            },
            Location: {
                get: function () {
                    return this._Location;
                },
                set: function (value) {
                    this._Location = value;
                }
            },
            Label: {
                get: function () {
                    return this._label;
                },
                set: function (value) {
                    if (Bridge.referenceEquals(value, this._label)) {
                        return;
                    }

                    this._label = value;
                }
            },
            Padding: {
                get: function () {
                    return this._padding;
                },
                set: function (value) {
                    if (value === this._padding) {
                        return;
                    }

                    this._padding = value;
                }
            },
            LocalBounds: {
                get: function () {
                    return this._LocalBounds;
                }
            },
            IsSelected: {
                get: function () {
                    return this._IsSelected;
                },
                set: function (value) {
                    if (value === this._IsSelected) {
                        return;
                    }

                    this._IsSelected = value;
                }
            },
            DragOffset: {
                get: function () {
                    return this._DragOffset;
                },
                set: function (value) {
                    this._DragOffset = value;
                }
            },
            Style: {
                get: function () {
                    return this._Style;
                },
                set: function (value) {
                    if (System.String.startsWith(value, "+") && !System.String.isNullOrEmpty(this._Style)) {
                        this._Style = System.String.concat(this._Style, (System.String.concat(", ", System.String.trimStart(value, [43]))));
                    } else {
                        this._Style = System.String.trimStart(value, [43]);
                    }
                }
            },
            IsUniversal: false
        },
        alias: [
            "Paint", "GraphicsLayer$IPaintable$Paint",
            "Hit", "Graphs$IHittable$Hit"
        ],
        ctors: {
            init: function () {
                this._DragOffset = GraphicsLayer.Box.Empty;
                this._padding = 0.02;
                this._LocalBounds = GraphicsLayer.Box.Empty;
                this._showIndex = false;
            },
            $ctor3: function (x, y) {
                Graphs.Vertex.$ctor4.call(this, x, y, "");
            },
            $ctor1: function (v) {
                Graphs.Vertex.$ctor2.call(this, v, "");
            },
            $ctor2: function (v, label) {
                Graphs.Vertex.$ctor4.call(this, v.X, v.Y, label);
            },
            $ctor4: function (x, y, label) {
                this.$initialize();
                this._Location = new Graphs.Vector(x, y);
                this._label = label;
            },
            ctor: function (v) {
                this.$initialize();
                this.Location = new Graphs.Vector(v.Location.X, v.Location.Y);
                this.Label = v.Label;
                this.Padding = v.Padding;
                this.Style = v.Style;
            }
        },
        methods: {
            Paint: function (g, width, height) {
                var bounds = this.ComputeBounds(g, width, height);

                if (!System.String.isNullOrEmpty(this._label)) {
                    if (Bridge.equals(this.Color, null)) {
                        if (this.IsUniversal) {
                            g.GraphicsLayer$IGraphics$FillEllipse(Graphs.Vertex.UniversalVertexFillBrushColor, bounds);
                        }
                    } else {
                        g.GraphicsLayer$IGraphics$FillEllipse(this.Color, bounds);
                    }

                    g.GraphicsLayer$IGraphics$DrawEllipse(this._IsSelected ? Graphs.Vertex.BoundarySelectedPenColor : Graphs.Vertex.BoundaryPenColor, bounds, this._IsSelected ? Graphs.Vertex.BoundarySelectedPenWidth : 1);
                    g.GraphicsLayer$IGraphics$DrawString(this._label, Graphs.Vertex.LabelFont, Graphs.Vertex.LabelBrushColor, bounds);
                } else {
                    if (Bridge.equals(this.Color, null)) {
                        g.GraphicsLayer$IGraphics$FillEllipse(this.IsUniversal ? Graphs.Vertex.UniversalVertexFillBrushColor : Graphs.Vertex.DefaultFillBrushColor, bounds);
                    } else {
                        g.GraphicsLayer$IGraphics$FillEllipse(this.Color, bounds);
                    }


                    g.GraphicsLayer$IGraphics$DrawEllipse(this._IsSelected ? Graphs.Vertex.BoundarySelectedPenColor : Graphs.Vertex.BoundaryPenColor, bounds, this._IsSelected ? Graphs.Vertex.BoundarySelectedPenWidth : 1);
                }

                if (this._showIndex) {
                    var cx = (bounds.Left + bounds.Right) / 2;
                    var cy = (bounds.Bottom + bounds.Top) / 2;
                    var r = Math.max(bounds.Width, bounds.Height) / 2 + 5;
                    var bb = new GraphicsLayer.Box.$ctor1(cx + r * Math.cos(this.IndexAngle) - 5, cy + r * Math.sin(this.IndexAngle) - 5, 10, 10);
                    g.GraphicsLayer$IGraphics$DrawString(this.ParentIndex.toString(), Graphs.Vertex.IndexFont, Graphs.Vertex.IndexBrushColor, bb);
                }
            },
            Hit: function (x, y) {
                var hit = this._LocalBounds.Contains$1(x, y);
                return hit;
            },
            ComputeBounds: function (g, width, height) {
                var bounds;

                if (!System.String.isNullOrEmpty(this._label)) {
                    var size = g.GraphicsLayer$IGraphics$MeasureString(this._label, Graphs.Vertex.LabelFont);

                    bounds = new GraphicsLayer.Box.$ctor1(this.X * width - size.Width / 2, this.Y * height - size.Height / 2, size.Width, size.Height);
                } else {
                    bounds = new GraphicsLayer.Box.$ctor1(this.X * width, this.Y * height, 0, 0);
                }

                bounds.Inflate(this._padding * width, this._padding * height);

                this._LocalBounds = new GraphicsLayer.Box.$ctor1(bounds.X / width, bounds.Y / height, bounds.Width / width, bounds.Height / height);

                return bounds;
            },
            RotateIndex: function () {
                this.IndexAngle += 0.19634954084936207;
                if (this.IndexAngle >= 6.2831853071795862) {
                    this.IndexAngle = 0;
                }
            },
            ToggleIndex: function () {
                this._showIndex = !this._showIndex;
            }
        }
    });

    Bridge.define("Test.Graphics", {
        inherits: [GraphicsLayer.IGraphics],
        fields: {
            _canvas: null,
            _context: null
        },
        alias: [
            "Clear", "GraphicsLayer$IGraphics$Clear",
            "DrawLine", "GraphicsLayer$IGraphics$DrawLine",
            "DrawLine$1", "GraphicsLayer$IGraphics$DrawLine$1",
            "DrawLines", "GraphicsLayer$IGraphics$DrawLines",
            "FillPolygon", "GraphicsLayer$IGraphics$FillPolygon",
            "DrawEllipse", "GraphicsLayer$IGraphics$DrawEllipse",
            "FillEllipse", "GraphicsLayer$IGraphics$FillEllipse",
            "DrawString", "GraphicsLayer$IGraphics$DrawString",
            "MeasureString", "GraphicsLayer$IGraphics$MeasureString"
        ],
        ctors: {
            ctor: function (canvas) {
                this.$initialize();
                this._canvas = canvas;
                this._context = canvas.getContext("2d");
            }
        },
        methods: {
            Clear: function (argb) {
                this._context.fillStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.clearRect(0, 0, this._canvas.width, this._canvas.height);
                this._context.fillRect(0, 0, this._canvas.width, this._canvas.height);
            },
            DrawLine: function (argb, p1, p2, width) {
                if (width === void 0) { width = 1.0; }
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.lineWidth = width;
                this._context.globalAlpha = Math.min(1.0, Math.max(0.0, argb.A / 255.0));
                this._context.beginPath();
                this._context.moveTo(p1.X, p1.Y);
                this._context.lineTo(p2.X, p2.Y);
                this._context.stroke();
            },
            DrawLine$1: function (argb, x1, y1, x2, y2, width) {
                if (width === void 0) { width = 1.0; }
                this.DrawLine(argb, new GraphicsLayer.Box.ctor(x1, y1), new GraphicsLayer.Box.ctor(x2, y2), width);
            },
            DrawLines: function (argb, points, width) {
                var $t;
                if (width === void 0) { width = 1.0; }
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.lineWidth = width;
                this._context.beginPath();
                var first = true;
                $t = Bridge.getEnumerator(points, GraphicsLayer.Box);
                try {
                    while ($t.moveNext()) {
                        var b = $t.Current;
                        if (first) {
                            this._context.moveTo(b.X, b.Y);
                            first = false;
                        } else {
                            this._context.lineTo(b.X, b.Y);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }this._context.stroke();
            },
            FillPolygon: function (argb, points) {
                var $t;
                this._context.fillStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.beginPath();
                var first = true;
                $t = Bridge.getEnumerator(points, GraphicsLayer.Box);
                try {
                    while ($t.moveNext()) {
                        var b = $t.Current;
                        if (first) {
                            this._context.moveTo(b.X, b.Y);
                            first = false;
                        } else {
                            this._context.lineTo(b.X, b.Y);
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }this._context.fill();
            },
            DrawEllipse: function (argb, bounds, width) {
                if (width === void 0) { width = 1.0; }
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.beginPath();
                this._context.arc(bounds.Left + bounds.Width / 2, bounds.Top + bounds.Height / 2, bounds.Width / 2, 0, 6.2831853071795862);
                this._context.stroke();
            },
            FillEllipse: function (argb, bounds) {
                this._context.beginPath();
                this._context.fillStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.arc(bounds.Left + bounds.Width / 2, bounds.Top + bounds.Height / 2, bounds.Width / 2, 0, 6.2831853071795862);
                this._context.fill();
            },
            DrawString: function (s, font, argb, bounds) {
                this._context.font = System.String.concat(font.Name, " ", font.Size, "px");
                this._context.strokeStyle = Test.HelperExtensions.ToColor(argb);
                this._context.globalAlpha = argb.A / 255.0;
                this._context.strokeText(s, bounds.X, bounds.Y);
            },
            MeasureString: function (s, font) {
                this._context.font = System.String.concat(font.Name, " ", font.Size, "px");
                var metrics = this._context.measureText(s);

                return new GraphicsLayer.Box.$ctor1(0, 0, metrics.width, metrics.emHeightAscent + metrics.emHeightDescent);
            }
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer],
        props: {
            ChildReason: {
                get: function () {
                    return "goodness increased";
                }
            }
        },
        ctors: {
            ctor: function (findCleanestWin) {
                if (findCleanestWin === void 0) { findCleanestWin = true; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.SwapAnalyzer.ctor.call(this, findCleanestWin);
            }
        },
        methods: {
            IsChildBoardBetter: function (knowledge, board, childBoard) {
                var x = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(childBoard.Stacks, childBoard.Pot)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f1).toList(System.Int32);
                var y = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(board.Stacks, board.Pot)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f1).toList(System.Int32);

                return this.StandardDeviation(x) < this.StandardDeviation(y);
            },
            Mean: function (x) {
                return ((Bridge.Int.div(System.Linq.Enumerable.from(x).sum(), x.Count)) | 0);
            },
            Median: function (x) {
                return System.Linq.Enumerable.from(x).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f2).elementAt(((Bridge.Int.div(x.Count, 2)) | 0));
            },
            StandardDeviation: function (x) {
                var mu = this.Mean(x);

                return Math.sqrt(System.Linq.Enumerable.from(x).sum(function (a) {
                        return (a - mu) * (a - mu);
                    }) / x.Count);
            },
            AbsoluteDeviation: function (x) {
                var mu = this.Median(x);

                return System.Linq.Enumerable.from(x).sum(function (a) {
                        return Math.abs(mu - a);
                    });
            },
            PushLeftOrdering: function (knowledge, board, childBoard) {
                var x = this.GetVectors(childBoard);
                var y = this.GetVectors(board);

                for (var i = 0; i < Math.min(x.Count, y.Count); i = (i + 1) | 0) {
                    var c = this.CompareVectors(x.getItem(i), y.getItem(i));

                    if (c > 0) {
                        return true;
                    }
                    if (c < 0) {
                        return false;
                    }
                }

                return x.Count < y.Count;
            },
            GetVectors: function (b) {
                return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.MetaKnowledge.GetColorGraphs(b.Stacks, b.Pot)).orderByDescending($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer.f1).toList(System.Collections.Generic.List$1(System.Int32));
            },
            CompareVectors: function (x, y) {
                if (x.Count > y.Count) {
                    return -1;
                }
                if (x.Count < y.Count) {
                    return 1;
                }

                for (var i = 0; i < x.Count; i = (i + 1) | 0) {
                    if (x.getItem(i) < y.getItem(i)) {
                        return 1;
                    }
                    if (x.getItem(i) > y.getItem(i)) {
                        return -1;
                    }
                }

                return 0;
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.GoodnessAnalyzer, {
        f1: function (c) {
            return c.Count;
        },
        f2: function (a) {
            return a;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder],
        statics: {
            methods: {
                BeginProof: function (sb) {
                    sb.appendLine("\\begin{proof}");
                },
                EndProof: function (sb) {
                    sb.appendLine("\\end{proof}");
                }
            }
        },
        fields: {
            _figureTikz: null,
            _maxPot: 0,
            _activeIndices: null,
            _activeListSizes: null,
            _possibleListIndices: null,
            _possibleLists: null,
            _allBoards: null,
            _sequenceComparer: null,
            _sequenceGeneralizer: null,
            _orderFilter: null,
            _isWin: false
        },
        props: {
            UseWildCards: false
        },
        ctors: {
            init: function () {
                this._orderFilter = new (System.Collections.Generic.Dictionary$2(System.String,System.String))();
            },
            ctor: function (mind, figureTikz, usePermutations) {
                if (figureTikz === void 0) { figureTikz = ""; }
                if (usePermutations === void 0) { usePermutations = false; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.ctor.call(this, mind, usePermutations);
                this._figureTikz = figureTikz;
                this._maxPot = mind.MaxPot;
                this.UseWildCards = true;
            }
        },
        methods: {
            WriteProof: function () {
                var $t, $t1, $t2, $t3;
                var sb = new System.Text.StringBuilder();

                this._isWin = System.Linq.Enumerable.from(this.Cases).all($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f1);

                this.AddFigure(sb);
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.BeginProof(sb);
                this.GeneratePossibleLists();
                this.GeneralizeAllBoards(sb);

                var wonBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                for (var caseNumber = 1; caseNumber <= this.Cases.Count; caseNumber = (caseNumber + 1) | 0) {
                    var c = this.Cases.getItem(((caseNumber - 1) | 0));
                    var boards = System.Linq.Enumerable.from(c.Boards).orderBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f2)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);

                    var thisClaimBoards;
                    if (caseNumber > 1 && !c.BreakerWin) {
                        thisClaimBoards = System.Linq.Enumerable.from(boards).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f4)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                    } else {
                        thisClaimBoards = boards;
                    }

                    if (!c.BreakerWin) {
                        wonBoards.addRange(thisClaimBoards);
                    }

                    var thisClaimBoardsTex = this.GeneralizeBoards(thisClaimBoards);

                    sb.appendLine();
                    sb.appendLine("\\bigskip");
                    sb.appendLine(System.String.format(System.String.concat("\\case{{{0}}}{{$B$ is one of the {1} following boards:\n ", thisClaimBoardsTex, ".}}"), Bridge.box(caseNumber, System.Int32), Bridge.box(thisClaimBoards.Count, System.Int32)));
                    sb.appendLine();
                    sb.appendLine("\\bigskip");

                    if (c.BreakerWin) {
                        sb.appendLine();

                        if (c.Superabundant) {
                            sb.appendLine("No single Kempe exchange gets from these boards to a previous case.");
                        } else {
                            sb.appendLine("These boards are not superabundant.");
                        }
                    } else if (caseNumber === 1) {
                        sb.appendLine();
                        sb.appendLine("In all these cases, $H$ is immediately colorable from the lists.");
                    } else {
                        sb.appendLine();

                        var swapCountGroups = System.Linq.Enumerable.from(boards).groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f6)).toList(System.Linq.Grouping$2);
                        $t = Bridge.getEnumerator(swapCountGroups);
                        try {
                            while ($t.moveNext()) {
                                var swapCountGroup = $t.Current;
                                if (swapCountGroup.key() === 1) {
                                    sb.appendLine("Each of the following boards can be handled by a single Kempe change that has an endpoint at infinity.");

                                    $t1 = Bridge.getEnumerator(swapCountGroup);
                                    try {
                                        while ($t1.moveNext()) {
                                            var b = $t1.Current;
                                            var pp = { };
                                            var listString = b.ToListStringInLexOrder(pp);

                                            var treeInfo = this.Mind.GetWinTreeInfo(b);
                                            var alpha = Math.min(pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Alpha), pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Beta));
                                            var beta = Math.max(pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Alpha), pp.v.getItem(System.Linq.Enumerable.from(treeInfo).first().Beta));
                                            var groups = System.Linq.Enumerable.from(treeInfo).groupBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f7);

                                            if (!this.CheckPermutationGoodNess(alpha, beta, listString, System.Linq.Enumerable.from(treeInfo).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f7).distinct().toList(System.Int32))) {
                                                sb.appendLine();
                                                sb.appendLine("there is badness here");
                                                sb.appendLine();
                                            }

                                            sb.append(System.String.concat("$\\K_{" + alpha + "" + beta + ",\\infty}(", listString, ",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f8).select(Bridge.fn.bind(this, function (gg) {
                                                return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.GetActiveListIndex(gg.key(), b, this._maxPot) + 1) | 0);
                                            })), null), ")"));
                                            sb.appendLine(System.String.concat("\\Rightarrow $ ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f8).select(Bridge.fn.bind(this, function (gg) {
                                                return System.String.concat("$", this.GetChildBoardName(b, gg.first()), "$ (Case ", this.GetHandledCaseNumber(b, gg.first()), ")");
                                            })), null), "."));
                                            sb.appendLine();

                                            if (this._permutationLinked.get(b).Count > 0) {
                                                sb.appendLine();
                                                sb.appendLine();
                                                sb.appendLine(System.String.concat("Free by vertex permutation: ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f9)))));
                                                sb.appendLine();
                                                sb.appendLine();
                                            }

                                            sb.appendLine("\\bigskip");
                                            sb.appendLine();
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }} else if (swapCountGroup.key() === 2) {
                                    sb.appendLine("\\bigskip");
                                    sb.appendLine();
                                    sb.appendLine("Each of the following boards can be handled by a single Kempe change.");
                                    $t2 = Bridge.getEnumerator(swapCountGroup);
                                    try {
                                        while ($t2.moveNext()) {
                                            var b1 = $t2.Current;
                                            var pp1 = { };
                                            var listString1 = b1.ToListStringInLexOrder(pp1);

                                            var treeInfo1 = this.Mind.GetWinTreeInfo(b1);
                                            var alpha1 = Math.min(pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Alpha), pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Beta));
                                            var beta1 = Math.max(pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Alpha), pp1.v.getItem(System.Linq.Enumerable.from(treeInfo1).first().Beta));
                                            var leftover = { v : System.Linq.Enumerable.from(treeInfo1).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo) };

                                            if (!this.CheckPermutationGoodNess(alpha1, beta1, listString1, System.Linq.Enumerable.from(treeInfo1).selectMany($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f10).distinct().toList(System.Int32))) {
                                                sb.appendLine();
                                                sb.appendLine("there is badness here");
                                                sb.appendLine();
                                            }

                                            while (leftover.v.Count > 0) {
                                                var commonestSwapper = { v : Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.MaxIndex(System.Int32, System.Linq.Enumerable.range(0, b1._stackCount), (function ($me, leftover) {
                                                    return function (v) {
                                                        return System.Linq.Enumerable.from(leftover.v).count(function (bc) {
                                                                return bc.SwapVertices.contains(v);
                                                            });
                                                    };
                                                })(this, leftover)) };
                                                var handledAll = System.Linq.Enumerable.from(leftover.v).where((function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return bc.SwapVertices.contains(commonestSwapper.v);
                                                        };
                                                    })(this, commonestSwapper)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);
                                                var handled = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Distinct(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo, System.Int32, handledAll, (function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                        };
                                                    })(this, commonestSwapper))).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);

                                                sb.append(System.String.concat("$\\K_{" + alpha1 + "" + beta1 + "," + (((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.GetActiveListIndex(commonestSwapper.v, b1, this._maxPot) + 1) | 0)) + "}(", listString1));

                                                var single = System.Linq.Enumerable.from(handled).firstOrDefault($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f11, null);
                                                if (single != null) {
                                                    sb.append(",\\infty");
                                                }

                                                if (System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f12).count() > 0) {
                                                    sb.append(System.String.concat(",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f12).orderBy((function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                        };
                                                    })(this, commonestSwapper)).select((function ($me, commonestSwapper) {
                                                        return Bridge.fn.bind($me, function (bc) {
                                                            return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.GetActiveListIndex(System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first(), b1, this._maxPot) + 1) | 0);
                                                        });
                                                    })(this, commonestSwapper)), null)));
                                                }
                                                sb.append(")");

                                                sb.appendLine(System.String.concat("\\Rightarrow $ ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(handled).orderBy((function ($me, commonestSwapper) {
                                                        return function (bc) {
                                                            return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                        };
                                                    })(this, commonestSwapper)).select(Bridge.fn.bind(this, function (bc) {
                                                    return System.String.concat("$", this.GetChildBoardName(b1, bc), "$ (Case ", this.GetHandledCaseNumber(b1, bc), ")");
                                                })), null), "."));
                                                sb.appendLine();

                                                $t3 = Bridge.getEnumerator(handledAll);
                                                try {
                                                    while ($t3.moveNext()) {
                                                        var bc = $t3.Current;
                                                        leftover.v.remove(bc);
                                                    }
                                                } finally {
                                                    if (Bridge.is($t3, System.IDisposable)) {
                                                        $t3.System$IDisposable$dispose();
                                                    }
                                                }}

                                            if (this._permutationLinked.get(b1).Count > 0) {
                                                sb.appendLine();
                                                sb.appendLine();
                                                sb.appendLine(System.String.concat("Free by vertex permutation: ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b1)).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f9)))));
                                                sb.appendLine();
                                                sb.appendLine();
                                            }

                                            sb.appendLine();
                                            sb.appendLine("\\bigskip");
                                            sb.appendLine();
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }}
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}
                }

                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.EndProof(sb);

                return sb.toString();
            },
            CheckPermutationGoodNess: function (alpha, beta, stacksString, swapVertices) {
                var $t;
                var stacks = System.Linq.Enumerable.from(System.String.split(stacksString, [124].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f14).toList(System.Collections.Generic.List$1(System.Int32));

                var colors = function (_o6) {
                        _o6.add(alpha);
                        _o6.add(beta);
                        return _o6;
                    }(new (System.Collections.Generic.List$1(System.Int32))());
                $t = Bridge.getEnumerator(swapVertices);
                try {
                    while ($t.moveNext()) {
                        var v = $t.Current;
                        if (Algorithms.Utility.ListUtility.IntersectionCount(System.Int32, colors, stacks.getItem(v)) !== 1) {
                            debugger;
                            return false;
                        }
                    }
                } finally {
                    if (Bridge.is($t, System.IDisposable)) {
                        $t.System$IDisposable$dispose();
                    }
                }
                return true;
            },
            GetChildBoardName: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                return childBoard.ToListStringInLexOrder$1(this._maxPot);
            },
            GeneralizeAllBoards: function (sb) {
                this._allBoards = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.Union$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, Algorithms.Utility.ListUtility.Union$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this.Mind.ColorableBoards, this.Mind.NonColorableBoards), this.Mind.BreakerWonBoards)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                this._sequenceComparer = new (Algorithms.Utility.SequenceGeneralizer$1.VectorComparer(System.Int32))();
                this._sequenceGeneralizer = new (Algorithms.Utility.SequenceGeneralizer$1(System.Int32))(this._activeIndices.Count, this._possibleListIndices);

                var allBoardsTex = this.GeneralizeBoards(this._allBoards);

                if (this.Mind.OnlyConsiderNearlyColorableBoards) {
                    sb.appendLine(System.String.concat("We need to handle all boards that are nearly colorable for edge $e$ up to permutation of colors, so it will suffice to handle the following " + this._allBoards.Count + " boards: ", allBoardsTex, "."));
                } else {
                    sb.appendLine(System.String.concat("We need to handle all boards up to permutation of colors, so it will suffice to handle the following " + this._allBoards.Count + " boards: ", allBoardsTex, "."));
                }

                if (this.Mind.BreakerWonBoards.Count > 0) {
                    sb.appendLine(System.String.concat("Unfortunately, the following " + this.Mind.BreakerWonBoards.Count + " boards cannot be handled: ", this.GeneralizeBoards(this.Mind.BreakerWonBoards), "."));
                }

                sb.appendLine();
            },
            GeneralizeBoards: function (boards) {
                if (this.UseWildCards) {
                    var examples = System.Linq.Enumerable.from(boards).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f15)).toList(System.Collections.Generic.List$1(System.Int32));
                    var nonExamples = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct$1(System.Int32, System.Linq.Enumerable.repeat(this._possibleListIndices, this._activeIndices.Count))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f16).except(System.Linq.Enumerable.from(examples).distinct(this._sequenceComparer), this._sequenceComparer).toList(System.Collections.Generic.List$1(System.Int32));

                    var generalized = this._sequenceGeneralizer.Generalize(examples, nonExamples, false);
                    return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(generalized).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f18)), "and");
                }

                return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(boards).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f2)).orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f19).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f20), "and");
            },
            ToListIndices: function (b) {
                var stacks = System.Linq.Enumerable.from(b.Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f21).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f22)).toList(System.Collections.Generic.List$1(System.Int32));
                return System.Linq.Enumerable.from(stacks).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f23)).toList(System.Int32);
            },
            GeneratePossibleLists: function () {
                var stacks = System.Linq.Enumerable.from(this.Mind.ColorableBoards.getItem(0).Stacks.Value).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f21).toList(System.Collections.Generic.List$1(System.Int32));
                this._activeIndices = System.Linq.Enumerable.from(Algorithms.GenericExtensions.IndicesWhere(System.Collections.Generic.List$1(System.Int32), stacks, Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f22))).toList(System.Int32);
                this._activeListSizes = System.Linq.Enumerable.from(stacks).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f24).where(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f25)).toList(System.Int32);

                var pot = System.Linq.Enumerable.range(0, this._maxPot).toList(System.Int32);
                this._possibleLists = System.Linq.Enumerable.from(System.Linq.Enumerable.from(this._activeListSizes).distinct().orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f26).toList(System.Int32)).selectMany(function (c) {
                        return Algorithms.Utility.ListUtility.EnumerateSublists$1(System.Int32, pot, c);
                    }).toList(System.Collections.Generic.List$1(System.Int32));
                this._possibleListIndices = System.Linq.Enumerable.range(0, this._possibleLists.Count).toList(System.Int32);
            },
            AddFigure: function (sb) {
                var figureID = System.String.concat("fig:", System.Guid.newGuid().toString());

                sb.appendLine("\\begin{figure}");
                sb.appendLine("\\centering");
                sb.appendLine(this._figureTikz);
                sb.appendLine(System.String.concat("\\caption{Vertices are ordered as labeled.}\\label{", figureID, "}"));
                sb.appendLine("\\end{figure}");

                sb.appendLine("\\begin{lem}");
                if (this._isWin) {
                    sb.appendLine(System.String.concat("The graph in Figure \\ref{", figureID, "} is reducible."));
                } else {
                    sb.appendLine(System.String.concat("The graph in Figure \\ref{", figureID, "} is not reducible."));
                }
                sb.appendLine("\\end{lem}");
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder, {
        f1: function (c) {
            return !c.BreakerWin;
        },
        f2: function (b) {
            return b.ToListStringInLexOrder$1(this._maxPot);
        },
        f3: function (tup) {
            return tup.item2;
        },
        f4: function (b) {
            return System.Linq.Enumerable.from(System.Array.init([b], Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).union(System.Linq.Enumerable.from(this._permutationLinked.get(b)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f3));
        },
        f5: function (ti) {
            return ti.SwapVertices.Count;
        },
        f6: function (b) {
            return System.Linq.Enumerable.from(this.Mind.GetWinTreeInfo(b)).max($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f5);
        },
        f7: function (ss) {
            return ss.SwapVertices.getItem(0);
        },
        f8: function (gg) {
            return gg.key();
        },
        f9: function (ppp) {
            return System.String.concat("$", ppp.item1, "\\Rightarrow ", ppp.item2.ToListStringInLexOrder$1(this._maxPot), "$");
        },
        f10: function (ss) {
            return ss.SwapVertices;
        },
        f11: function (bc) {
            return bc.SwapVertices.Count === 1;
        },
        f12: function (bc) {
            return bc.SwapVertices.Count > 1;
        },
        f13: function (c) {
            return System.Int32.parse(String.fromCharCode(c));
        },
        f14: function (s) {
            return System.Linq.Enumerable.from(System.String.toCharArray(s, 0, s.length)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f13).toList(System.Int32);
        },
        f15: function (b) {
            return this.ToListIndices(b);
        },
        f16: function (ll) {
            return System.Linq.Enumerable.from(ll).toList(System.Int32);
        },
        f17: function (_, i) {
            return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryMaxDegree.Extensions.ToTex(_, this._possibleLists, this._activeListSizes.getItem(i));
        },
        f18: function (gg) {
            return System.String.concat("$", Bridge.toArray(System.Linq.Enumerable.from(gg).select(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.ArbitraryDegreeProofBuilder.f17))).join("|"), "$");
        },
        f19: function (x) {
            return x;
        },
        f20: function (s) {
            return System.String.concat("$", s, "$");
        },
        f21: function (l) {
            return Algorithms.Int64Usage.ToSet(l);
        },
        f22: function (s) {
            return s.Count < this._maxPot;
        },
        f23: function (s) {
            return Algorithms.GenericExtensions.FirstIndex(System.Collections.Generic.List$1(System.Int32), this._possibleLists, function (ss) {
                return System.Linq.Enumerable.from(ss).sequenceEqual(s);
            });
        },
        f24: function (s) {
            return s.Count;
        },
        f25: function (c) {
            return c < this._maxPot;
        },
        f26: function (c) {
            return c;
        }
    });

    Bridge.define("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder", {
        inherits: [Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder],
        fields: {
            _figureTikz: null
        },
        ctors: {
            ctor: function (mind, figureTikz) {
                if (figureTikz === void 0) { figureTikz = ""; }

                this.$initialize();
                Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.PermutationAwareProofBuilder.ctor.call(this, mind);
                this._figureTikz = figureTikz;
            }
        },
        methods: {
            WriteProof: function () {
                var $t, $t1, $t2, $t3, $t4;
                var length = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(this.Mind.ColorableBoards.getItem(0)).length;
                var allBoards = System.Linq.Enumerable.from(Algorithms.Utility.ListUtility.Union$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard, this.Mind.ColorableBoards, this.Mind.NonColorableBoards)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);

                var comparer = new (Algorithms.Utility.SequenceGeneralizer$1.VectorComparer(System.Int32))();
                var sg = new (Algorithms.Utility.SequenceGeneralizer$1(System.Int32))(length, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f1(new (System.Collections.Generic.List$1(System.Int32))()));

                var zot2 = System.Linq.Enumerable.from(allBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));
                var examples2 = System.Linq.Enumerable.from(allBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));

                var nonExamples2 = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Int32, System.Linq.Enumerable.repeat(System.Linq.Enumerable.range(0, 3), length))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f3).except(System.Linq.Enumerable.from(zot2).distinct(comparer), comparer).toList(System.Collections.Generic.List$1(System.Int32));

                var generalized2 = sg.Generalize(examples2, nonExamples2, false);
                var allBoardsXYZ = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(generalized2).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f5), "or");

                var sb = new System.Text.StringBuilder();
                var figureID = System.String.concat("fig:", System.Guid.newGuid().toString());

                sb.appendLine("\\begin{figure}");
                sb.appendLine("\\centering");
                sb.appendLine(this._figureTikz);
                sb.appendLine(System.String.concat("\\caption{Solid vertices have lists of size 3 and the labeled vertices have lists of size 2.}\\label{", figureID, "}"));
                sb.appendLine("\\end{figure}");

                sb.appendLine("\\begin{lem}");
                sb.appendLine(System.String.concat("The graph in Figure \\ref{", figureID, "} is reducible."));
                sb.appendLine("\\end{lem}");

                var letters = $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f6(new (System.Collections.Generic.List$1(System.String))());
                var stringLength = System.Linq.Enumerable.from(this.Mind.ColorableBoards.getItem(0).Stacks.Value).count($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f7);
                var rng = new System.Random.$ctor1(System.DateTime.getMillisecond(System.DateTime.getNow()));
                var randomString = "";
                for (var i = 0; i < stringLength; i = (i + 1) | 0) {
                    randomString = System.String.concat(randomString, letters.getItem(rng.next$1(3)));
                }

                var randomString2 = "";
                for (var i1 = 0; i1 < stringLength; i1 = (i1 + 1) | 0) {
                    randomString2 = System.String.concat(randomString2, letters.getItem(rng.next$1(3)));
                }

                var randomString3 = "";
                for (var i2 = 0; i2 < stringLength; i2 = (i2 + 1) | 0) {
                    randomString3 = System.String.concat(randomString3, letters.getItem(rng.next$1(3)));
                }

                sb.append("\\begin{proof}");
                sb.appendLine(System.String.concat("Let $X = \\{0,1\\}$, $Y = \\{0,2\\}$ and $Z = \\{1,2\\}$. Then with the vertex ordering in Figure \\ref{", figureID, "}, a string such as ", randomString, ", "));
                sb.appendLine("represents a possible list assignment on $V(H)$ arising from a $3$-edge-coloring of $G-E(H)$.");
                sb.appendLine("By an $X$-Kempe change, we mean flipping colors $0$ and $1$ on a two-colored path in $G-E(H)$.  We call such a path an $X$-path. ");
                sb.appendLine("Any endpoint of an $X$-path in $H$ must end at a $Y$ or $Z$ vertex.  The meanings of $Y$-Kempe change, $Z$-Kempe change, $Y$-path and $Z$-path are analogous.");
                sb.appendLine("Note that if there are an odd number of $Y$'s and $Z$'s, then at least one $X$-path has only one endpoint in $H$.");
                sb.appendLine(System.String.concat("We use shorthand notation like $\\K_{X, 2}(", randomString, ",5,6) \\Rightarrow ", randomString2, ",", randomString3, "$ (Case 1)."));
                sb.appendLine(System.String.concat("This means the $X$-Kempe change on ", randomString, " starting at the second vertex and ending at the fifth and sixth result in boards ", randomString2, " and ", randomString3, " respectively and these are handled by Case 1."));
                sb.appendLine("The $\\infty$ symbol means starting (or ending) outside $H$.");
                sb.appendLine();

                if (this.Mind.OnlyConsiderNearlyColorableBoards) {
                    sb.appendLine(System.String.concat("We need to handle all boards that are nearly colorable for edge $e$ up to permutations of $\\{X,Y,Z\\}$, so it will suffice to handle all boards of the form ", allBoardsXYZ, "."));
                } else {
                    sb.appendLine(System.String.concat("We need to handle all boards up to permutations of $\\{X,Y,Z\\}$, so it will suffice to handle all boards of the form ", allBoardsXYZ, "."));
                }

                sb.appendLine();
                var wonBoards = new (System.Collections.Generic.List$1(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard))();
                for (var caseNumber = 1; caseNumber <= this.Cases.Count; caseNumber = (caseNumber + 1) | 0) {
                    var c = this.Cases.getItem(((caseNumber - 1) | 0));

                    var boards = c.Boards;
                    var thisClaimBoards;
                    if (caseNumber > 1) {
                        thisClaimBoards = System.Linq.Enumerable.from(boards).selectMany(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f9)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard);
                    } else {
                        thisClaimBoards = boards;
                    }

                    wonBoards.addRange(thisClaimBoards);

                    var zot = System.Linq.Enumerable.from(thisClaimBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));
                    var examples = System.Linq.Enumerable.from(thisClaimBoards).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f2).toList(System.Collections.Generic.List$1(System.Int32));
                    var nonExamples = System.Linq.Enumerable.from(Algorithms.Utility.LinqExtensions.CartesianProduct(System.Int32, System.Linq.Enumerable.repeat(System.Linq.Enumerable.range(0, 3), length))).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f3).except(System.Linq.Enumerable.from(zot).distinct(comparer), comparer).toList(System.Collections.Generic.List$1(System.Int32));

                    var generalized = sg.Generalize(examples, nonExamples);
                    var boardsXYZ = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(generalized).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f5), "or");

                    sb.appendLine();
                    sb.appendLine("\\bigskip");
                    sb.appendLine(System.String.format(System.String.concat("\\case{{{0}}}{{$B$ is one of ", boardsXYZ, ".}}"), Bridge.box(caseNumber, System.Int32)));
                    sb.appendLine();
                    sb.appendLine("\\bigskip");
                    if (caseNumber === 1) {
                        sb.appendLine();
                        sb.appendLine("In all these cases, $H$ is immediately colorable from the lists.");
                    } else {
                        sb.appendLine();
                        var fixGroups = System.Linq.Enumerable.from(boards).groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f10));

                        $t = Bridge.getEnumerator(fixGroups);
                        try {
                            while ($t.moveNext()) {
                                var fixGroup = $t.Current;
                                var others = System.Linq.Enumerable.from(letters).toList(System.String);
                                others.remove(fixGroup.key());

                                var swapCountGroups = fixGroup.groupBy(Bridge.fn.bind(this, $asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f12)).toList(System.Linq.Grouping$2);
                                $t1 = Bridge.getEnumerator(swapCountGroups);
                                try {
                                    while ($t1.moveNext()) {
                                        var swapCountGroup = $t1.Current;
                                        if (swapCountGroup.key() === 1) {
                                            $t2 = Bridge.getEnumerator(swapCountGroup);
                                            try {
                                                while ($t2.moveNext()) {
                                                    var b = $t2.Current;
                                                    var treeInfo = this.Mind.GetWinTreeInfo(b);
                                                    var groups = System.Linq.Enumerable.from(treeInfo).groupBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f13);

                                                    sb.append(System.String.concat("$\\K_{", fixGroup.key(), ",\\infty}(", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(b), ",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f14).select(function (gg) {
                                                        return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.GetXYZIndex(gg.key(), b) + 1) | 0);
                                                    }), null), ")"));
                                                    sb.appendLine(System.String.concat("\\Rightarrow $", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, groups.orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f14).select(Bridge.fn.bind(this, function (gg) {
                                                        return System.String.concat("$", this.GetChildBoardName(b, gg.first()), "$");
                                                    })), null), "( Case ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(treeInfo).select(Bridge.fn.bind(this, function (bc) {
                                                            return this.GetHandledCaseNumber(b, bc);
                                                        })).distinct().orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f15)), ")."));
                                                    sb.appendLine();

                                                    if (this._permutationLinked.get(b).Count > 0) {
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                        sb.appendLine(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f16)));
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t2, System.IDisposable)) {
                                                    $t2.System$IDisposable$dispose();
                                                }
                                            }} else if (swapCountGroup.key() === 2) {
                                            $t3 = Bridge.getEnumerator(swapCountGroup);
                                            try {
                                                while ($t3.moveNext()) {
                                                    var b1 = $t3.Current;
                                                    var treeInfo1 = this.Mind.GetWinTreeInfo(b1);
                                                    var leftover = { v : System.Linq.Enumerable.from(treeInfo1).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo) };

                                                    while (leftover.v.Count > 0) {
                                                        var commonestSwapper = { v : Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.MaxIndex(System.Int32, System.Linq.Enumerable.range(0, b1._stackCount), (function ($me, leftover) {
                                                            return function (v) {
                                                                return System.Linq.Enumerable.from(leftover.v).count(function (bc) {
                                                                        return bc.SwapVertices.contains(v);
                                                                    });
                                                            };
                                                        })(this, leftover)) };
                                                        var handledAll = System.Linq.Enumerable.from(leftover.v).where((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return bc.SwapVertices.contains(commonestSwapper.v);
                                                                };
                                                            })(this, commonestSwapper)).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);
                                                        var handled = System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Distinct(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo, System.Int32, handledAll, (function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                                };
                                                            })(this, commonestSwapper))).toList(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.BreakerChoiceInfo);

                                                        sb.append(System.String.concat("$\\K_{", fixGroup.key(), ",", (((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.GetXYZIndex(commonestSwapper.v, b1) + 1) | 0)), "}(", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(b1)));

                                                        var single = System.Linq.Enumerable.from(handled).firstOrDefault($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f17, null);
                                                        if (single != null) {
                                                            sb.append(",\\infty");
                                                        }

                                                        if (System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f18).count() > 0) {
                                                            sb.append(System.String.concat(",", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(handled).where($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f18).orderBy((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                                };
                                                            })(this, commonestSwapper)).select((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return ((Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.GetXYZIndex(System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first(), b1) + 1) | 0);
                                                                };
                                                            })(this, commonestSwapper)), null)));
                                                        }
                                                        sb.append(")");

                                                        sb.appendLine(System.String.concat("\\Rightarrow $", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(handled).orderBy((function ($me, commonestSwapper) {
                                                                return function (bc) {
                                                                    return bc.SwapVertices.Count === 1 ? -1 : System.Linq.Enumerable.from(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Except(System.Int32, bc.SwapVertices, commonestSwapper.v)).first();
                                                                };
                                                            })(this, commonestSwapper)).select(Bridge.fn.bind(this, function (bc) {
                                                            return System.String.concat("$", this.GetChildBoardName(b1, bc), "$");
                                                        })), null), "(Case ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.Int32, System.Linq.Enumerable.from(handled).select(Bridge.fn.bind(this, function (bc) {
                                                                return this.GetHandledCaseNumber(b1, bc);
                                                            })).distinct().orderBy($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f15)), ")."));
                                                        sb.appendLine();

                                                        $t4 = Bridge.getEnumerator(handledAll);
                                                        try {
                                                            while ($t4.moveNext()) {
                                                                var bc = $t4.Current;
                                                                leftover.v.remove(bc);
                                                            }
                                                        } finally {
                                                            if (Bridge.is($t4, System.IDisposable)) {
                                                                $t4.System$IDisposable$dispose();
                                                            }
                                                        }}

                                                    if (this._permutationLinked.get(b1).Count > 0) {
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                        sb.appendLine(Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.Extensions.Listify(System.String, System.Linq.Enumerable.from(this._permutationLinked.get(b1)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f16)));
                                                        sb.appendLine();
                                                        sb.appendLine();
                                                    }
                                                }
                                            } finally {
                                                if (Bridge.is($t3, System.IDisposable)) {
                                                    $t3.System$IDisposable$dispose();
                                                }
                                            }}
                                    }
                                } finally {
                                    if (Bridge.is($t1, System.IDisposable)) {
                                        $t1.System$IDisposable$dispose();
                                    }
                                }
                            }
                        } finally {
                            if (Bridge.is($t, System.IDisposable)) {
                                $t.System$IDisposable$dispose();
                            }
                        }}

                    sb.appendLine();
                }

                sb.appendLine("\\end{proof}");
                return sb.toString();
            },
            GetChildBoardName: function (b, bc) {
                var childBoard = new Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard.$ctor1(b._trace, bc.Alpha, bc.Beta, bc.Response, b._stackCount);
                return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(childBoard);
            }
        }
    });

    Bridge.ns("Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder", $asm.$);

    Bridge.apply($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder, {
        f1: function (_o7) {
            _o7.add(0);
            _o7.add(1);
            _o7.add(2);
            return _o7;
        },
        f2: function (b) {
            return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.To012(b);
        },
        f3: function (ll) {
            return System.Linq.Enumerable.from(ll).toList(System.Int32);
        },
        f4: function (_) {
            return Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToTex(_);
        },
        f5: function (gg) {
            return System.String.concat("$", Bridge.toArray(System.Linq.Enumerable.from(gg).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f4)).join(""), "$");
        },
        f6: function (_o8) {
            _o8.add("X");
            _o8.add("Y");
            _o8.add("Z");
            return _o8;
        },
        f7: function (ss) {
            return Algorithms.Int64Usage.PopulationCount(ss) === 2;
        },
        f8: function (tup) {
            return tup.item2;
        },
        f9: function (b) {
            return System.Linq.Enumerable.from(System.Array.init([b], Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.SuperSlimBoard)).union(System.Linq.Enumerable.from(this._permutationLinked.get(b)).select($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f8));
        },
        f10: function (b) {
            var treeInfo = this.Mind.GetWinTreeInfo(b);
            var fixLetter = Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ$1(System.Int64((1 << System.Linq.Enumerable.from(treeInfo).first().Alpha) | (1 << System.Linq.Enumerable.from(treeInfo).first().Beta)));

            return fixLetter;
        },
        f11: function (ti) {
            return ti.SwapVertices.Count;
        },
        f12: function (b) {
            return System.Linq.Enumerable.from(this.Mind.GetWinTreeInfo(b)).max($asm.$.Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaximumDegreeThreeProofBuilder.f11);
        },
        f13: function (ss) {
            return ss.SwapVertices.getItem(0);
        },
        f14: function (gg) {
            return gg.key();
        },
        f15: function (xx) {
            return xx;
        },
        f16: function (ppp) {
            return System.String.concat("$", ppp.item1, "\\Rightarrow ", Algorithms.FixerBreaker.KnowledgeEngine.Slim.Super.Proofs.MaxDegreeThree.Extensions.ToXYZ(ppp.item2), "$");
        },
        f17: function (bc) {
            return bc.SwapVertices.Count === 1;
        },
        f18: function (bc) {
            return bc.SwapVertices.Count > 1;
        }
    });

    Bridge.define("Test.TabCanvas", {
        inherits: [GraphicsLayer.ICanvas],
        statics: {
            fields: {
                Colors: null
            },
            ctors: {
                init: function () {
                    this.Colors = $asm.$.Test.TabCanvas.f1(new (System.Collections.Generic.List$1(GraphicsLayer.ARGB))());
                }
            },
            methods: {
                SageLoadNamedGraph: function (name) {
                    var $step = 0,
                        $task1, 
                        $taskResult1, 
                        $task2, 
                        $taskResult2, 
                        $jumpFromFinally, 
                        a, 
                        layout, 
                        positions, 
                        adj, 
                        g, 
                        $asyncBody = Bridge.fn.bind(this, function () {
                            for (;;) {
                                $step = System.Array.min([0,1,2], $step);
                                switch ($step) {
                                    case 0: {
                                        $task1 = Test.App.AskSageAsync$1(System.String.concat("G = graphs.", name, "()", '\n', "G.adjacency_matrix().str()"));
                                        $step = 1;
                                        $task1.continueWith($asyncBody, true);
                                        return;
                                    }
                                    case 1: {
                                        $taskResult1 = $task1.getAwaitedResult();
                                        a = $taskResult1;
                                        $task2 = Test.App.AskSageAsync$1(System.String.concat("G = graphs.", name, "()", '\n', "G.layout()"));
                                        $step = 2;
                                        $task2.continueWith($asyncBody, true);
                                        return;
                                    }
                                    case 2: {
                                        $taskResult2 = $task2.getAwaitedResult();
                                        layout = $taskResult2;
                                        positions = Test.TabCanvas.Scale(Test.TabCanvas.ExtractPoints(layout));
                                        adj = Test.TabCanvas.ParseAdjacencyMatrix(a);

                                        g = new Algorithms.Graph.ctor(adj);

                                        Test.App.NewTab(name, new Graphs.Graph.$ctor1(g, positions, false));
                                        return;
                                    }
                                    default: {
                                        return;
                                    }
                                }
                            }
                        }, arguments);

                    $asyncBody();
                },
                Scale: function (positions) {
                    var l = System.Linq.Enumerable.from(positions).toList(Graphs.Vector);
                    var minX = System.Linq.Enumerable.from(l).min($asm.$.Test.TabCanvas.f2);
                    var minY = System.Linq.Enumerable.from(l).min($asm.$.Test.TabCanvas.f3);
                    var maxX = System.Linq.Enumerable.from(l).max($asm.$.Test.TabCanvas.f2);
                    var maxY = System.Linq.Enumerable.from(l).max($asm.$.Test.TabCanvas.f3);

                    var w = maxX - minX;
                    var h = maxY - minY;

                    return System.Linq.Enumerable.from(positions).select(function (p) {
                            return new Graphs.Vector(0.1 + 0.8 * (p.X - minX) / w, 0.1 + 0.8 * (p.Y - minY) / h);
                        }).toList(Graphs.Vector);
                },
                ExtractPoints: function (x) {
                    return new (Bridge.GeneratorEnumerable$1(Graphs.Vector))(Bridge.fn.bind(this, function (x) {
                        var $step = 0,
                            $jumpFromFinally,
                            $returnValue,
                            i,
                            j,
                            p,
                            $async_e;

                        var $enumerator = new (Bridge.GeneratorEnumerator$1(Graphs.Vector))(Bridge.fn.bind(this, function () {
                            try {
                                for (;;) {
                                    switch ($step) {
                                        case 0: {
                                            i = 0;
                                                
                                            $step = 1;
                                            continue;
                                        }
                                        case 1: {
                                            if ( true ) {
                                                    $step = 2;
                                                    continue;
                                                } 
                                                $step = 4;
                                                continue;
                                        }
                                        case 2: {
                                            j = System.String.indexOf(x, "[", i);
                                                if (j < 0) {
                                                    j = System.String.indexOf(x, "(", i);
                                                    if (j < 0) {
                                                        $step = 4;
                                                        continue;
                                                    }
                                                }
                                                i = j;

                                                j = System.String.indexOf(x, "]", i);
                                                if (j < 0) {
                                                    j = System.String.indexOf(x, ")", i);
                                                    if (j < 0) {
                                                        $step = 4;
                                                        continue;
                                                    }
                                                }
                                                p = System.String.split(x.substr(i, ((j - i) | 0)), [44].map(function(i) {{ return String.fromCharCode(i); }}));
                                                $enumerator.current = new Graphs.Vector(System.Double.parse(System.String.trim(p[System.Array.index(0, p)], [91, 93, 40, 41])), System.Double.parse(System.String.trim(p[System.Array.index(1, p)], [91, 93, 40, 41])));
                                                $step = 3;
                                                return true;
                                        }
                                        case 3: {
                                            i = j;

                                                $step = 1;
                                                continue;
                                        }
                                        case 4: {

                                        }
                                        default: {
                                            return false;
                                        }
                                    }
                                }
                            } catch($async_e1) {
                                $async_e = System.Exception.create($async_e1);
                                throw $async_e;
                            }
                        }));
                        return $enumerator;
                    }, arguments));
                },
                ParseAdjacencyMatrix: function (a) {
                    var $t;
                    var bits = System.String.split(System.String.replaceAll(a, "'", ""), System.Array.init([",", "\\\\n", "[", "]", " "], System.String), null, 1);
                    var n = Bridge.Int.clip32(Math.sqrt(bits.length));
                    var adj = System.Array.create(false, null, System.Boolean, n, n);

                    var i = 0;
                    $t = Bridge.getEnumerator(bits);
                    try {
                        while ($t.moveNext()) {
                            var b = $t.Current;
                            adj.set([((Bridge.Int.div(i, n)) | 0), i % n], Bridge.referenceEquals(b, "1"));
                            i = (i + 1) | 0;
                        }
                    } finally {
                        if (Bridge.is($t, System.IDisposable)) {
                            $t.System$IDisposable$dispose();
                        }
                    }
                    return adj;
                }
            }
        },
        fields: {
            _ctrlDown: false,
            _title: null
        },
        events: {
            MouseMoved: null,
            MouseButtonUp: null,
            MouseButtonDown: null,
            MouseButtonDoubleClicked: null
        },
        props: {
            Canvas: null,
            GraphCanvas: null,
            IsControlKeyDown: {
                get: function () {
                    return this._ctrlDown;
                }
            },
            SelectedObjects: {
                set: function (value) { }
            },
            Title: {
                get: function () {
                    return this._title;
                },
                set: function (value) {
                    this._title = value;
                    this.Invalidate();
                }
            }
        },
        alias: [
            "SetClipboardText", "GraphicsLayer$ICanvas$SetClipboardText",
            "GetClipboardText", "GraphicsLayer$ICanvas$GetClipboardText",
            "IsControlKeyDown", "GraphicsLayer$ICanvas$IsControlKeyDown",
            "SelectedObjects", "GraphicsLayer$ICanvas$SelectedObjects",
            "Invalidate", "GraphicsLayer$ICanvas$Invalidate",
            "Title", "GraphicsLayer$ICanvas$Title",
            "addMouseMoved", "GraphicsLayer$IProduceMouseEvents$addMouseMoved",
            "removeMouseMoved", "GraphicsLayer$IProduceMouseEvents$removeMouseMoved",
            "addMouseButtonUp", "GraphicsLayer$IProduceMouseEvents$addMouseButtonUp",
            "removeMouseButtonUp", "GraphicsLayer$IProduceMouseEvents$removeMouseButtonUp",
            "addMouseButtonDown", "GraphicsLayer$IProduceMouseEvents$addMouseButtonDown",
            "removeMouseButtonDown", "GraphicsLayer$IProduceMouseEvents$removeMouseButtonDown",
            "addMouseButtonDoubleClicked", "GraphicsLayer$IProduceMouseEvents$addMouseButtonDoubleClicked",
            "removeMouseButtonDoubleClicked", "GraphicsLayer$IProduceMouseEvents$removeMouseButtonDoubleClicked"
        ],
        ctors: {
            ctor: function (canvas, graphCanvas) {
                this.$initialize();
                this.GraphCanvas = graphCanvas;
                this.Canvas = canvas;
                this.GraphCanvas.Canvas = this;

                this.Canvas.ondblclick = Bridge.fn.combine(this.Canvas.ondblclick, Bridge.fn.cacheBind(this, this.OnMouseDoubleClick));
                this.Canvas.onmousedown = Bridge.fn.combine(this.Canvas.onmousedown, Bridge.fn.cacheBind(this, this.OnMouseButtonDown));
                this.Canvas.onmouseup = Bridge.fn.combine(this.Canvas.onmouseup, Bridge.fn.cacheBind(this, this.OnMouseButtonUp));
                this.Canvas.onmousemove = Bridge.fn.combine(this.Canvas.onmousemove, Bridge.fn.cacheBind(this, this.OnMouseMove));

                this.Canvas.ontouchcancel = Bridge.fn.combine(this.Canvas.ontouchcancel, Bridge.fn.cacheBind(this, this.OnTouchCancel));
                this.Canvas.ontouchend = Bridge.fn.combine(this.Canvas.ontouchend, Bridge.fn.cacheBind(this, this.OnTouchEnd));
                this.Canvas.ontouchenter = Bridge.fn.combine(this.Canvas.ontouchenter, Bridge.fn.cacheBind(this, this.OnTouchEnter));
                this.Canvas.ontouchleave = Bridge.fn.combine(this.Canvas.ontouchleave, Bridge.fn.cacheBind(this, this.OnTouchLeave));
                this.Canvas.ontouchmove = Bridge.fn.combine(this.Canvas.ontouchmove, Bridge.fn.cacheBind(this, this.OnTouchMove));
                this.Canvas.ontouchstart = Bridge.fn.combine(this.Canvas.ontouchstart, Bridge.fn.cacheBind(this, this.OnTouchStart));

                this.Canvas.onload = Bridge.fn.cacheBind(this, this.OnLoad);

                this.GraphCanvas.addGraphModified(Bridge.fn.cacheBind(this, this.OnGraphModified));
                this.GraphCanvas.addNameModified(Bridge.fn.cacheBind(this, this.OnNameModified));
            }
        },
        methods: {
            OnLayoutChange: function () {
                this.Canvas.width = window.innerWidth;
                this.Canvas.height = window.innerHeight;
                this.Invalidate();
            },
            OnNameModified: function (name) {
                this.Title = name;
            },
            OnTouchCancel: function (e) { },
            OnTouchEnd: function (e) {
                if (!Bridge.staticEquals(this.MouseButtonUp, null)) {
                    this.MouseButtonUp(e.layerX, e.layerY, GraphicsLayer.MouseButton.Left);
                }
            },
            OnTouchEnter: function (e) { },
            OnTouchLeave: function (e) { },
            OnTouchMove: function (e) {
                if (!Bridge.staticEquals(this.MouseMoved, null)) {
                    this.MouseMoved(e.layerX, e.layerY);
                }
            },
            OnTouchStart: function (e) {
                if (!Bridge.staticEquals(this.MouseButtonDown, null)) {
                    this.MouseButtonDown(e.layerX, e.layerY, GraphicsLayer.MouseButton.Left);
                }
            },
            SageManual: function () {
                Test.App.AskSage(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n'));
            },
            SageChromaticPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_polynomial()"));
            },
            SageGraph6: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graph6_string()"));
            },
            SageSparse6: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.sparse6_string()"));
            },
            SageChromaticNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_number()"));
            },
            SageChromaticQuasisymmetricFunction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_quasisymmetric_function()"));
            },
            SageChromaticSymmetricFunction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.chromatic_symmetric_function()"));
            },
            SageColoring: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    coloring, 
                    cc, 
                    i, 
                    $t, 
                    v, 
                    c, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.coloring()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    coloring = $taskResult1;
                                    cc = System.Linq.Enumerable.from(System.String.split(coloring, System.Array.init(["],"], System.String), null, 1)).select($asm.$.Test.TabCanvas.f5).toList(System.Collections.Generic.List$1(System.Int32));

                                    i = 0;
                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            c = Algorithms.GenericExtensions.FirstIndex(System.Collections.Generic.List$1(System.Int32), cc, function (l) {
                                                return l.contains(i);
                                            });
                                            v.Color = Test.TabCanvas.Colors.getItem(c % Test.TabCanvas.Colors.Count);
                                            i = (i + 1) | 0;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageConvexityProperties: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.convexity_properties()"));
            },
            SageHasHomomorphismTo: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_homomorphism_to()"));
            },
            SageIndependentSet: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    coloring, 
                    cc, 
                    $t, 
                    v, 
                    $t1, 
                    v1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.independent_set()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    coloring = $taskResult1;
                                    cc = System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(coloring, "[", ""), "]", ""), " ", ""), '\n', ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f4).toList(System.Int32);

                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            v.Color = Graphs.Vertex.DefaultFillBrushColor;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    $t1 = Bridge.getEnumerator(cc);
                                    try {
                                        while ($t1.moveNext()) {
                                            v1 = $t1.Current;
                                            this.GraphCanvas.Graph.Vertices.getItem(v1).Color = Test.TabCanvas.Colors.getItem(1);
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageIndependentSetOfRepresentatives: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.independent_set_of_representatives()"));
            },
            SageIsPerfect: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_perfect()"));
            },
            SageMatchingPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.matching_polynomial()"));
            },
            SageMinor: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.minor()"));
            },
            SagePathwidth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.pathwidth()"));
            },
            SageRankDecomposition: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.rank_decomposition()"));
            },
            SageTopologicalMinor: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.topological_minor()"));
            },
            SageTreewidth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.treewidth()"));
            },
            SageTuttePolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.tutte_polynomial()"));
            },
            SageVertexCover: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    coloring, 
                    cc, 
                    $t, 
                    v, 
                    $t1, 
                    v1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.vertex_cover()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    coloring = $taskResult1;
                                    cc = System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(coloring, "[", ""), "]", ""), " ", ""), '\n', ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f4).toList(System.Int32);

                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            v.Color = Graphs.Vertex.DefaultFillBrushColor;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    $t1 = Bridge.getEnumerator(cc);
                                    try {
                                        while ($t1.moveNext()) {
                                            v1 = $t1.Current;
                                            this.GraphCanvas.Graph.Vertices.getItem(v1).Color = Test.TabCanvas.Colors.getItem(1);
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageBipartiteColor: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bipartite_color()"));
            },
            SageBipartiteSets: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bipartite_sets()"));
            },
            SageGraph6String: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graph6_string()"));
            },
            SageIsDirected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_directed()"));
            },
            SageJoin: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.join()"));
            },
            SageSparse6String: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.sparse6_string()"));
            },
            SageToDirected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_directed()"));
            },
            SageToUndirected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_undirected()"));
            },
            SageWriteToEps: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.write_to_eps()"));
            },
            SageCliqueComplex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clique_complex()"));
            },
            SageCliqueMaximum: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    coloring, 
                    cc, 
                    $t, 
                    v, 
                    $t1, 
                    v1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.clique_maximum()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    coloring = $taskResult1;
                                    cc = System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(coloring, "[", ""), "]", ""), " ", ""), '\n', ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f4).toList(System.Int32);

                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            v.Color = Graphs.Vertex.DefaultFillBrushColor;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    $t1 = Bridge.getEnumerator(cc);
                                    try {
                                        while ($t1.moveNext()) {
                                            v1 = $t1.Current;
                                            this.GraphCanvas.Graph.Vertices.getItem(v1).Color = Test.TabCanvas.Colors.getItem(1);
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageCliqueNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clique_number()"));
            },
            SageCliquePolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clique_polynomial()"));
            },
            SageCliquesContainingVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_containing_vertex()"));
            },
            SageCliquesGetCliqueBipartite: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_get_clique_bipartite()"));
            },
            SageCliquesGetMaxCliqueGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_get_max_clique_graph()"));
            },
            SageCliquesMaximal: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_maximal()"));
            },
            SageCliquesMaximum: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_maximum()"));
            },
            SageCliquesNumberOf: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_number_of()"));
            },
            SageCliquesVertexCliqueNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cliques_vertex_clique_number()"));
            },
            SageBoundedOutdegreeOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bounded_outdegree_orientation()"));
            },
            SageBridges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.bridges()"));
            },
            SageDegreeConstrainedSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_constrained_subgraph()"));
            },
            SageGomoryHuTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.gomory_hu_tree().plot()"));
            },
            SageMinimumOutdegreeOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.minimum_outdegree_orientation()"));
            },
            SageOrientations: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.orientations()"));
            },
            SageRandomSpanningTree: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    edges, 
                    ee, 
                    $t, 
                    v, 
                    $t1, 
                    e, 
                    $t2, 
                    e1, 
                    v1, 
                    v2, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.random_spanning_tree()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    edges = $taskResult1;
                                    ee = System.Linq.Enumerable.from(System.String.split(edges, System.Array.init(["),"], System.String), null, 1)).select($asm.$.Test.TabCanvas.f6).toList(System.Collections.Generic.List$1(System.Int32));

                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            v.Color = Graphs.Vertex.DefaultFillBrushColor;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    $t1 = Bridge.getEnumerator(this.GraphCanvas.Graph.Edges);
                                    try {
                                        while ($t1.moveNext()) {
                                            e = $t1.Current;
                                            e.Color = new GraphicsLayer.ARGB.ctor(0, 0, 0);
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }
                                    $t2 = Bridge.getEnumerator(ee);
                                    try {
                                        while ($t2.moveNext()) {
                                            e1 = $t2.Current;
                                            v1 = { v : this.GraphCanvas.Graph.Vertices.getItem(e1.getItem(0)) };
                                            v2 = { v : this.GraphCanvas.Graph.Vertices.getItem(e1.getItem(1)) };
                                            System.Linq.Enumerable.from(this.GraphCanvas.Graph.Edges).first((function ($me, v1, v2) {
                                                return function (x) {
                                                    return Bridge.referenceEquals(x.V1, v1.v) && Bridge.referenceEquals(x.V2, v2.v) || Bridge.referenceEquals(x.V1, v2.v) && Bridge.referenceEquals(x.V2, v1.v);
                                                };
                                            })(this, v1, v2)).Color = Test.TabCanvas.Colors.getItem(1);
                                        }
                                    } finally {
                                        if (Bridge.is($t2, System.IDisposable)) {
                                            $t2.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageSpanningTrees: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.spanning_trees()"));
            },
            SageStrongOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.strong_orientation()"));
            },
            SageApexVertices: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $jumpFromFinally, 
                    coloring, 
                    cc, 
                    $t, 
                    v, 
                    $t1, 
                    v1, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.apex_vertices()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    coloring = $taskResult1;
                                    cc = System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(coloring, "[", ""), "]", ""), " ", ""), '\n', ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f4).toList(System.Int32);

                                    $t = Bridge.getEnumerator(this.GraphCanvas.Graph.Vertices);
                                    try {
                                        while ($t.moveNext()) {
                                            v = $t.Current;
                                            v.Color = Graphs.Vertex.DefaultFillBrushColor;
                                        }
                                    } finally {
                                        if (Bridge.is($t, System.IDisposable)) {
                                            $t.System$IDisposable$dispose();
                                        }
                                    }
                                    $t1 = Bridge.getEnumerator(cc);
                                    try {
                                        while ($t1.moveNext()) {
                                            v1 = $t1.Current;
                                            this.GraphCanvas.Graph.Vertices.getItem(v1).Color = Test.TabCanvas.Colors.getItem(1);
                                        }
                                    } finally {
                                        if (Bridge.is($t1, System.IDisposable)) {
                                            $t1.System$IDisposable$dispose();
                                        }
                                    }
                                    this.Invalidate();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageIsApex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_apex()"));
            },
            SageIsArcTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_arc_transitive()"));
            },
            SageIsAsteroidalTripleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_asteroidal_triple_free()"));
            },
            SageIsBiconnected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_biconnected()"));
            },
            SageIsBipartite: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_bipartite()"));
            },
            SageIsBlockGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_block_graph()"));
            },
            SageIsCartesianProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cartesian_product()"));
            },
            SageIsDistanceRegular: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_distance_regular()"));
            },
            SageIsEdgeTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_edge_transitive()"));
            },
            SageIsEvenHoleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_even_hole_free()"));
            },
            SageIsForest: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_forest()"));
            },
            SageIsHalfTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_half_transitive()"));
            },
            SageIsLineGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_line_graph()"));
            },
            SageIsLongAntiholeFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_long_antihole_free()"));
            },
            SageIsLongHoleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_long_hole_free()"));
            },
            SageIsOddHoleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_odd_hole_free()"));
            },
            SageIsOverfull: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_overfull()"));
            },
            SageIsPartialCube: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_partial_cube()"));
            },
            SageIsPrime: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_prime()"));
            },
            SageIsSemiSymmetric: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_semi_symmetric()"));
            },
            SageIsSplit: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_split()"));
            },
            SageIsStronglyRegular: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_strongly_regular()"));
            },
            SageIsTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_tree()"));
            },
            SageIsTriangleFree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_triangle_free()"));
            },
            SageIsWeaklyChordal: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_weakly_chordal()"));
            },
            SageOddGirth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.odd_girth()"));
            },
            SageCores: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cores()"));
            },
            SageFractionalChromaticIndex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.fractional_chromatic_index()"));
            },
            SageHasPerfectMatching: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_perfect_matching()"));
            },
            SageIharaZetaFunctionInverse: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.ihara_zeta_function_inverse()"));
            },
            SageKirchhoffSymanzikPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.kirchhoff_symanzik_polynomial()"));
            },
            SageLovaszTheta: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.lovasz_theta()"));
            },
            SageMagnitudeFunction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.magnitude_function()"));
            },
            SageMatching: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.matching()"));
            },
            SageMaximumAverageDegree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.maximum_average_degree()"));
            },
            SageModularDecomposition: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.modular_decomposition()"));
            },
            SagePerfectMatchings: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.perfect_matchings()"));
            },
            SageSeidelAdjacencyMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.seidel_adjacency_matrix()"));
            },
            SageNetworkxGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.networkx_graph()"));
            },
            SageIgraphGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.igraph_graph()"));
            },
            SageToDictionary: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_dictionary()"));
            },
            SageCopy: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.copy()"));
            },
            SageExportToFile: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.export_to_file()"));
            },
            SageAdjacencyMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.adjacency_matrix()"));
            },
            SageIncidenceMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.incidence_matrix()"));
            },
            SageDistanceMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance_matrix()"));
            },
            SageWeightedAdjacencyMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.weighted_adjacency_matrix()"));
            },
            SageKirchhoffMatrix: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.kirchhoff_matrix()"));
            },
            SageHasLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_loops()"));
            },
            SageAllowsLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allows_loops()"));
            },
            SageAllowLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allow_loops()"));
            },
            SageLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.loops()"));
            },
            SageLoopEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.loop_edges()"));
            },
            SageNumberOfLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.number_of_loops()"));
            },
            SageLoopVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.loop_vertices()"));
            },
            SageRemoveLoops: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.remove_loops()"));
            },
            SageHasMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_multiple_edges()"));
            },
            SageAllowsMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allows_multiple_edges()"));
            },
            SageAllowMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.allow_multiple_edges()"));
            },
            SageMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.multiple_edges()"));
            },
            SageName: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.name()"));
            },
            SageIsImmutable: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_immutable()"));
            },
            SageWeighted: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.weighted()"));
            },
            SageAntisymmetric: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.antisymmetric()"));
            },
            SageDensity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.density()"));
            },
            SageOrder: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.order()"));
            },
            SageSize: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.size()"));
            },
            SageAddVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_vertex()"));
            },
            SageAddVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_vertices()"));
            },
            SageDeleteVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_vertex()"));
            },
            SageDeleteVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_vertices()"));
            },
            SageHasVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_vertex()"));
            },
            SageRandomVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_vertex()"));
            },
            SageRandomVertexIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_vertex_iterator()"));
            },
            SageRandomEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_edge()"));
            },
            SageRandomEdgeIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_edge_iterator()"));
            },
            SageVertexBoundary: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_boundary()"));
            },
            SageSetVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_vertices()"));
            },
            SageSetVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_vertex()"));
            },
            SageGetVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_vertex()"));
            },
            SageGetVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_vertices()"));
            },
            SageVertexIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_iterator()"));
            },
            SageNeighborIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.neighbor_iterator()"));
            },
            SageVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertices()"));
            },
            SageNeighbors: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.neighbors()"));
            },
            SageMergeVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.merge_vertices()"));
            },
            SageAddEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_edge()"));
            },
            SageAddEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_edges()"));
            },
            SageSubdivideEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subdivide_edge()"));
            },
            SageSubdivideEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subdivide_edges()"));
            },
            SageDeleteEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_edge()"));
            },
            SageDeleteEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_edges()"));
            },
            SageDeleteMultiedge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.delete_multiedge()"));
            },
            SageSetEdgeLabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_edge_label()"));
            },
            SageHasEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.has_edge()"));
            },
            SageEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edges()"));
            },
            SageEdgeBoundary: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_boundary()"));
            },
            SageEdgeIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_iterator()"));
            },
            SageEdgesIncident: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edges_incident()"));
            },
            SageEdgeLabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_label()"));
            },
            SageEdgeLabels: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_labels()"));
            },
            SageRemoveMultipleEdges: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.remove_multiple_edges()"));
            },
            SageClear: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clear()"));
            },
            SageDegree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree()"));
            },
            SageAverageDegree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.average_degree()"));
            },
            SageDegreeHistogram: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_histogram()"));
            },
            SageDegreeIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_iterator()"));
            },
            SageDegreeSequence: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_sequence()"));
            },
            SageRandomSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.random_subgraph()"));
            },
            SageAddClique: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_clique()"));
            },
            SageAddCycle: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_cycle()"));
            },
            SageAddPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.add_path()"));
            },
            SageComplement: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.complement()"));
            },
            SageLineGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.line_graph()"));
            },
            SageToSimple: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.to_simple()"));
            },
            SageDisjointUnion: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.disjoint_union()"));
            },
            SageUnion: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.union()"));
            },
            SageRelabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.relabel()"));
            },
            SageDegreeToCell: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.degree_to_cell()"));
            },
            SageSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph()"));
            },
            SageIsSubgraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_subgraph()"));
            },
            SageCartesianProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cartesian_product()"));
            },
            SageTensorProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.tensor_product()"));
            },
            SageLexicographicProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.lexicographic_product()"));
            },
            SageStrongProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.strong_product()"));
            },
            SageDisjunctiveProduct: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.disjunctive_product()"));
            },
            SageEulerianOrientation: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eulerian_orientation()"));
            },
            SageEulerianCircuit: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eulerian_circuit()"));
            },
            SageCycleBasis: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cycle_basis()"));
            },
            SageAllPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.all_paths()"));
            },
            SageTrianglesCount: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.triangles_count()"));
            },
            SageSpectrum: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.spectrum()"));
            },
            SageEigenvectors: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eigenvectors()"));
            },
            SageEigenspaces: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eigenspaces()"));
            },
            SageClusterTriangles: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cluster_triangles()"));
            },
            SageClusteringAverage: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clustering_average()"));
            },
            SageClusteringCoeff: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.clustering_coeff()"));
            },
            SageClusterTransitivity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.cluster_transitivity()"));
            },
            SageSzegedIndex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.szeged_index()"));
            },
            SageCoarsestEquitableRefinement: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.coarsest_equitable_refinement()"));
            },
            SageAutomorphismGroup: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.automorphism_group()"));
            },
            SageIsVertexTransitive: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_vertex_transitive()"));
            },
            SageIsIsomorphic: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_isomorphic()"));
            },
            SageCanonicalLabel: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.canonical_label().plot()"));
            },
            SageIsCayley: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cayley()"));
            },
            SageIsEulerian: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_eulerian()"));
            },
            SageIsPlanar: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_planar()"));
            },
            SageIsCircularPlanar: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_circular_planar()"));
            },
            SageIsRegular: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_regular()"));
            },
            SageIsChordal: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_chordal()"));
            },
            SageIsCirculant: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_circulant()"));
            },
            SageIsInterval: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_interval()"));
            },
            SageIsGallaiTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_gallai_tree()"));
            },
            SageIsClique: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_clique()"));
            },
            SageIsCycle: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cycle()"));
            },
            SageIsIndependentSet: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_independent_set()"));
            },
            SageIsTransitivelyReduced: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_transitively_reduced()"));
            },
            SageIsEquitable: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_equitable()"));
            },
            SageBreadthFirstSearch: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.breadth_first_search()"));
            },
            SageDepthFirstSearch: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.depth_first_search()"));
            },
            SageLexBFS: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.lex_BFS()"));
            },
            SageCentralityBetweenness: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.centrality_betweenness()"));
            },
            SageCentralityCloseness: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.centrality_closeness()"));
            },
            SageDistance: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance()"));
            },
            SageDistanceAllPairs: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance_all_pairs()"));
            },
            SageDistancesDistribution: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distances_distribution()"));
            },
            SageEccentricity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.eccentricity()"));
            },
            SageRadius: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.radius()"));
            },
            SageCenter: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.center()"));
            },
            SageDiameter: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.diameter()"));
            },
            SageDistanceGraph: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.distance_graph()"));
            },
            SageGirth: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.girth()"));
            },
            SagePeriphery: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.periphery()"));
            },
            SageShortestPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path()"));
            },
            SageShortestPathLength: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path_length()"));
            },
            SageShortestPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_paths()"));
            },
            SageShortestPathLengths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path_lengths()"));
            },
            SageShortestPathAllPairs: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.shortest_path_all_pairs()"));
            },
            SageWienerIndex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.wiener_index()"));
            },
            SageAverageDistance: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.average_distance()"));
            },
            SageIsConnected: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_connected()"));
            },
            SageConnectedComponents: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components()"));
            },
            SageConnectedComponentsNumber: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components_number()"));
            },
            SageConnectedComponentsSubgraphs: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components_subgraphs()"));
            },
            SageConnectedComponentContainingVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_component_containing_vertex()"));
            },
            SageConnectedComponentsSizes: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.connected_components_sizes()"));
            },
            SageBlocksAndCutVertices: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.blocks_and_cut_vertices()"));
            },
            SageBlocksAndCutsTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.blocks_and_cuts_tree()"));
            },
            SageIsCutEdge: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cut_edge()"));
            },
            SageIsCutVertex: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_cut_vertex()"));
            },
            SageEdgeCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_cut()"));
            },
            SageVertexCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_cut()"));
            },
            SageFlow: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.flow()"));
            },
            SageEdgeDisjointPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_disjoint_paths()"));
            },
            SageVertexDisjointPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_disjoint_paths()"));
            },
            SageEdgeConnectivity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_connectivity()"));
            },
            SageVertexConnectivity: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.vertex_connectivity()"));
            },
            SageTransitiveClosure: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.transitive_closure()"));
            },
            SageTransitiveReduction: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.transitive_reduction()"));
            },
            SageMinSpanningTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.min_spanning_tree()"));
            },
            SageSpanningTreesCount: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.spanning_trees_count()"));
            },
            SageDominatorTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.dominator_tree()"));
            },
            SageSetEmbedding: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_embedding()"));
            },
            SageGetEmbedding: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_embedding()"));
            },
            SageFaces: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.faces()"));
            },
            SageGetPos: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.get_pos()"));
            },
            SageSetPos: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_pos()"));
            },
            SageSetPlanarPositions: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_planar_positions()"));
            },
            SageIsDrawnFreeOfEdgeCrossings: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_drawn_free_of_edge_crossings()"));
            },
            SageLatexOptions: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.latex_options()"));
            },
            SageSetLatexOptions: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.set_latex_options()"));
            },
            SageLayout: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.layout()"));
            },
            SageGraphplot: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graphplot()"));
            },
            SagePlot: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.plot()"));
            },
            SageShow: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.show()"));
            },
            SagePlot3d: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.plot3d()"));
            },
            SageShow3d: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.show3d()"));
            },
            SageGraphvizString: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graphviz_string()"));
            },
            SageGraphvizToFileNamed: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.graphviz_to_file_named()"));
            },
            SageSteinerTree: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.steiner_tree()"));
            },
            SageEdgeDisjointSpanningTrees: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.edge_disjoint_spanning_trees()"));
            },
            SageFeedbackVertexSet: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.feedback_vertex_set()"));
            },
            SageMultiwayCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.multiway_cut()"));
            },
            SageMaxCut: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.max_cut()"));
            },
            SageLongestPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.longest_path()"));
            },
            SageTravelingSalesmanProblem: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.traveling_salesman_problem()"));
            },
            SageIsHamiltonian: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.is_hamiltonian()"));
            },
            SageHamiltonianCycle: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.hamiltonian_cycle()"));
            },
            SageHamiltonianPath: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.hamiltonian_path()"));
            },
            SageMulticommodityFlow: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.multicommodity_flow()"));
            },
            SageDisjointRoutedPaths: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.disjoint_routed_paths()"));
            },
            SageDominatingSet: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.dominating_set()"));
            },
            SageSubgraphSearch: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph_search()"));
            },
            SageSubgraphSearchCount: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph_search_count()"));
            },
            SageSubgraphSearchIterator: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.subgraph_search_iterator()"));
            },
            SageCharacteristicPolynomial: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.characteristic_polynomial()"));
            },
            SageGenus: function () {
                Test.App.AskSageAuto(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')", '\n', "G.genus()"));
            },
            SageLayoutSpring: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_spring()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = Test.TabCanvas.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutRanked: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_ranked()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = Test.TabCanvas.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutExtendRandomly: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_extend_randomly()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = Test.TabCanvas.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutCircular: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_circular()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = Test.TabCanvas.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutTree: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_tree()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = Test.TabCanvas.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutGraphviz: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_graphviz()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = Test.TabCanvas.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            SageLayoutPlanar: function () {
                var $step = 0,
                    $task1, 
                    $taskResult1, 
                    $task2, 
                    $jumpFromFinally, 
                    layout, 
                    positions, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        for (;;) {
                            $step = System.Array.min([0,1,2], $step);
                            switch ($step) {
                                case 0: {
                                    $task1 = Test.App.AskSageAsync(this.GraphCanvas.Graph, "G.layout_planar()");
                                    $step = 1;
                                    $task1.continueWith($asyncBody, true);
                                    return;
                                }
                                case 1: {
                                    $taskResult1 = $task1.getAwaitedResult();
                                    layout = $taskResult1;
                                    positions = Test.TabCanvas.Scale(Test.TabCanvas.ExtractPoints(layout));
                                    $task2 = this.LayoutGraph(positions);
                                    $step = 2;
                                    $task2.continueWith($asyncBody, true);
                                    return;
                                }
                                case 2: {
                                    $task2.getAwaitedResult();
                                    return;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                    }, arguments);

                $asyncBody();
            },
            LayoutGraph: function (positions) {
                var $step = 0,
                    $task1, 
                    $jumpFromFinally, 
                    $tcs = new System.Threading.Tasks.TaskCompletionSource(), 
                    $returnValue, 
                    a, 
                    $async_e, 
                    $asyncBody = Bridge.fn.bind(this, function () {
                        try {
                            for (;;) {
                                $step = System.Array.min([0,1], $step);
                                switch ($step) {
                                    case 0: {
                                        this.SnapPositionsToGrid(positions);
                                        a = new Test.LayoutAnimation(Bridge.fn.bind(this, $asm.$.Test.TabCanvas.f7), Bridge.fn.bind(this, $asm.$.Test.TabCanvas.f8), positions, this.GraphCanvas.Graph);

                                        this.GraphCanvas.SnapToGrid = false;
                                        $task1 = a.Animate();
                                        $step = 1;
                                        $task1.continueWith($asyncBody);
                                        return;
                                    }
                                    case 1: {
                                        $task1.getAwaitedResult();
                                        this.GraphCanvas.SnapToGrid = true;
                                        $tcs.setResult(null);
                                        return;
                                    }
                                    default: {
                                        $tcs.setResult(null);
                                        return;
                                    }
                                }
                            }
                        } catch($async_e1) {
                            $async_e = System.Exception.create($async_e1);
                            $tcs.setException($async_e);
                        }
                    }, arguments);

                $asyncBody();
                return $tcs.task;
            },
            SnapPositionsToGrid: function (positions) {
                for (var i = 0; i < positions.Count; i = (i + 1) | 0) {
                    positions.getItem(i).X = Graphs.GraphCanvas._gridStep * Bridge.Math.round(positions.getItem(i).X / Graphs.GraphCanvas._gridStep, 0, 6);
                    positions.getItem(i).Y = Graphs.GraphCanvas._gridStep * Bridge.Math.round(positions.getItem(i).Y / Graphs.GraphCanvas._gridStep, 0, 6);
                }
            },
            OnGraphModified: function (g) {
                this.Invalidate();
            },
            OnLoad: function (e) {
                this.Invalidate();
            },
            OnMouseMove: function (e) {
                this._ctrlDown = e.ctrlKey;
                if (!Bridge.staticEquals(this.MouseMoved, null)) {
                    this.MouseMoved(e.layerX, e.layerY);
                }
            },
            OnMouseButtonDown: function (e) {
                this._ctrlDown = e.ctrlKey;
                // Canvas.SetCapture(true);  // chrome does not seem to support this, what?

                if (e.shiftKey) {
                    if (!Bridge.staticEquals(this.MouseButtonDoubleClicked, null)) {
                        this.MouseButtonDoubleClicked(e.layerX, e.layerY, e.button === 0 ? GraphicsLayer.MouseButton.Left : GraphicsLayer.MouseButton.Right);
                    }
                } else {
                    if (!Bridge.staticEquals(this.MouseButtonDown, null)) {
                        this.MouseButtonDown(e.layerX, e.layerY, e.button === 0 ? GraphicsLayer.MouseButton.Left : GraphicsLayer.MouseButton.Right);
                    }
                }
            },
            OnMouseButtonUp: function (e) {
                this._ctrlDown = e.ctrlKey;
                // Canvas.SetCapture(false);
                if (e.shiftKey) {
                    return;
                }


                if (!Bridge.staticEquals(this.MouseButtonUp, null)) {
                    this.MouseButtonUp(e.layerX, e.layerY, e.button === 0 ? GraphicsLayer.MouseButton.Left : GraphicsLayer.MouseButton.Right);
                }

                if (e.ctrlKey && e.altKey) {
                    Test.App.AskSage(System.String.concat("G = Graph('", GraphsCore.GraphIO.ToGraph6$1(this.GraphCanvas.Graph.GetEdgeWeights()), "')"));
                }
            },
            OnMouseDoubleClick: function (e) { },
            SetClipboardText: function (text) { },
            GetClipboardText: function () {
                return "";
            },
            Invalidate: function () {
                var graphics = new Test.Graphics(this.Canvas);
                this.GraphCanvas.Paint(graphics, this.Canvas.width, this.Canvas.height);
            }
        }
    });

    Bridge.ns("Test.TabCanvas", $asm.$);

    Bridge.apply($asm.$.Test.TabCanvas, {
        f1: function (_o24) {
            _o24.add(new GraphicsLayer.ARGB.ctor(255, 0, 0));
            _o24.add(new GraphicsLayer.ARGB.ctor(0, 0, 255));
            _o24.add(new GraphicsLayer.ARGB.ctor(0, 255, 0));
            _o24.add(new GraphicsLayer.ARGB.ctor(255, 255, 0));
            _o24.add(new GraphicsLayer.ARGB.ctor(95, 158, 160));
            _o24.add(new GraphicsLayer.ARGB.ctor(139, 69, 19));
            _o24.add(new GraphicsLayer.ARGB.ctor(30, 144, 255));
            _o24.add(new GraphicsLayer.ARGB.ctor(64, 224, 208));
            _o24.add(new GraphicsLayer.ARGB.ctor(218, 112, 214));
            return _o24;
        },
        f2: function (p) {
            return p.X;
        },
        f3: function (p) {
            return p.Y;
        },
        f4: function (x) {
        return System.Int32.parse(x);
    },
        f5: function (s) {
        return System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(s, "[", ""), "]", ""), " ", ""), '\n', ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f4).toList(System.Int32);
    },
        f6: function (s) {
        return System.Linq.Enumerable.from(System.String.split(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(s, "[", ""), "]", ""), "(", ""), ")", ""), " ", ""), '\n', ""), "\\n", ""), "\\n", ""), [44].map(function(i) {{ return String.fromCharCode(i); }}))).select($asm.$.Test.TabCanvas.f4).toList(System.Int32);
    },
        f7: function () {
        this.GraphCanvas.Invalidate();

    },
        f8: function () {
        this.GraphCanvas.Invalidate();
    }
    });
});

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICJTYWdlR3JhcGhVSS5qcyIsCiAgInNvdXJjZVJvb3QiOiAiIiwKICAic291cmNlcyI6IFsiQWxnb3JpdGhtcy9Bc3NpZ25tZW50RW51bWVyYXRvci5jcyIsIkFsZ29yaXRobXMvQ2hvb3NhYmlsaXR5UmVzdWx0LmNzIiwiQWxnb3JpdGhtcy9Db3VudGluZy5jcyIsIkFsZ29yaXRobXMvRGF0YVN0cnVjdHVyZXMvQmlqZWN0aW9uLmNzIiwiQWxnb3JpdGhtcy9EYXRhU3RydWN0dXJlcy9VbmlvbkZpbmQuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Cb2FyZC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0Nocm9uaWNsZS9CcmFuY2hHZW5lcmF0b3IuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvQm9hcmRLbm93bGVkZ2UuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvR3JhcGhLbm93bGVkZ2UuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvS25vd2xlZGdlLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvVHJlZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9NZXRhS25vd2xlZGdlLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL01pbmQuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvUG90S25vd2xlZGdlLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU2xpbVN3YXBBbmFseXplci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1NvcnRlZEludExpc3QuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9Cb2FyZExleGlmaWVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvSGFzaGluZy5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1Byb29mcy9Qcm9vZkJ1aWxkZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9Qcm9vZnMvRXh0ZW5zaW9ucy5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1Byb29mcy9Qcm9vZkNhc2UuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9TdXBlclNsaW1Cb2FyZC5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1N1cGVyU2xpbUNvbG9yaW5nQW5hbHl6ZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9TdXBlclNsaW1Td2FwQW5hbHl6ZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvVGVtcGxhdGUuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvVGVtcGxhdGVLbm93bGVkZ2UuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9TbG93Qm9hcmQuY3MiLCJBbGdvcml0aG1zL0dlbmVyaWNFeHRlbnNpb25zLmNzIiwiQWxnb3JpdGhtcy9HcmFwaC5jcyIsIkFsZ29yaXRobXMvR3JhcGhzLmNzIiwiQWxnb3JpdGhtcy9IYXNoR3JhcGguY3MiLCJBbGdvcml0aG1zL0hlcmVkaXRhcnlDbGFzc0VudW1lcmF0aW9uLmNzIiwiQWxnb3JpdGhtcy9IeXBlcmdyYXBoLmNzIiwiQWxnb3JpdGhtcy9JbmRlcGVuZGVuY2VSYXRpby9NaW5vckZpbmRlci5jcyIsIkFsZ29yaXRobXMvSW50MzJVc2FnZS5jcyIsIkFsZ29yaXRobXMvSW50NjRVc2FnZS5jcyIsIkFsZ29yaXRobXMvTGF6eS5jcyIsIkFsZ29yaXRobXMvT25lRmFjdG9yaXphdGlvbnNPZkNvbXBsZXRlR3JhcGguY3MiLCJBbGdvcml0aG1zL09uRmFjdG9yaXphdGlvbnNPZkNvbXBsZXRlR3JhcGguY3MiLCJBbGdvcml0aG1zL09ubGluZUNob2ljZUhhc2hHcmFwaC5jcyIsIkFsZ29yaXRobXMvT3JpZW50YXRpb25IYXNoR3JhcGguY3MiLCJBbGdvcml0aG1zL1BvbHlub21pYWxzL0ZhY3RvcmVkUmF0aW9uYWwuY3MiLCJBbGdvcml0aG1zL1BvbHlub21pYWxzL0dyYXBoUG9seW5vbWlhbC5jcyIsIkFsZ29yaXRobXMvUG9seW5vbWlhbHMvTm9ybWFsaXplci5jcyIsIkFsZ29yaXRobXMvUG9seW5vbWlhbHMvUHJpbWVOdW1iZXJzLmNzIiwiQWxnb3JpdGhtcy9Qb2x5bm9taWFscy9TaWduTG9va3VwLmNzIiwiQWxnb3JpdGhtcy9TdWJzZXRFbnVtZXJhdG9yLmNzIiwiQWxnb3JpdGhtcy9UcmFuc2l0aXZlUGFydGl0aW9uLmNzIiwiQWxnb3JpdGhtcy9VbnBlcm11dGVkQXNzaWdubWVudEVudW1lcmF0b3IuY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvRXF1aXZhbGVuY2VSZWxhdGlvbi5jcyIsIkFsZ29yaXRobXMvVXRpbGl0eS9GYWN0b3JhZGljLmNzIiwiQWxnb3JpdGhtcy9VdGlsaXR5L0Zsb3dzLmNzIiwiQWxnb3JpdGhtcy9VdGlsaXR5L0xpbnFFeHRlbnNpb25zLmNzIiwiQWxnb3JpdGhtcy9VdGlsaXR5L0xpc3RVdGlsaXR5LmNzIiwiQWxnb3JpdGhtcy9VdGlsaXR5L1BhcnRpYWxPcmRlcnMuY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvUGVybXV0YXRpb24uY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvU2FmZUNvbGxlY3Rpb24uY3MiLCJBbGdvcml0aG1zL1V0aWxpdHkvU2VxdWVuY2VHZW5lcmFsaXplci5jcyIsIkFsZ29yaXRobXMvV29yZEdhbWUvQWNjZXNzaWJpbGl0eUNoZWNrZXIuY3MiLCJBbGdvcml0aG1zL1dvcmRHYW1lL0JveGlmaWNhdGlvbi5jcyIsIkFsZ29yaXRobXMvV29yZEdhbWUvT3B0aW1pemVkL0Zhc3RBY2Nlc3NpYmlsaXR5Q2hlY2tlci5jcyIsIkFsZ29yaXRobXMvV29yZEdhbWUvVGFycGl0RW51bWVyYXRvci5jcyIsIkFsZ29yaXRobXMvV29yZEdhbWUvT3B0aW1pemVkL0Zhc3RXb3JkLmNzIiwiQWxnb3JpdGhtcy9Xb3JkR2FtZS9PcHRpbWl6ZWQvRmFzdFdvcmRHZW5lcmF0b3IuY3MiLCJBbGdvcml0aG1zL1dvcmRHYW1lL1dvcmRFbnVtZXJhdG9yLmNzIiwiQml0TGV2ZWxHZW5lcmF0aW9uL0Fzc2lnbm1lbnRzX3R5cGUuY3MiLCJCaXRMZXZlbEdlbmVyYXRpb24vQml0T3BlcmF0aW9ucy5jcyIsIkJpdExldmVsR2VuZXJhdGlvbi9CaXRWZWN0b3JzLmNzIiwiQml0TGV2ZWxHZW5lcmF0aW9uL0dyYXBoQ2hvb3NhYmlsaXR5LmNzIiwiQml0TGV2ZWxHZW5lcmF0aW9uL0hhc2hlZEFzc2lnbm1lbnQuY3MiLCJCaXRMZXZlbEdlbmVyYXRpb24vTWF4aW1hbG5kZXBlbmRlbnRTZXRTZWFyY2hpbmcuY3MiLCJHcmFwaGljc0xheWVyL0FSR0IuY3MiLCJHcmFwaGljc0xheWVyL0JveC5jcyIsIkdyYXBoaWNzTGF5ZXIvRm9udC5jcyIsIkdyYXBoc0NvcmUvQXNjaWk4NS5jcyIsIkdyYXBoc0NvcmUvUG9seWdvbkNvbnRhaW5lci5jcyIsIkdyYXBoc0NvcmUvU2VyaWFsaXphdGlvbkNsYXNzZXMuY3MiLCJHcmFwaHNDb3JlL1V0aWxpdHkuY3MiLCJHcmFwaHNDb3JlL1ZlY3Rvci5jcyIsIkdyYXBoc0NvcmUvQ29tcGFjdFNlcmlhbGl6ZXIuY3MiLCJHcmFwaHNDb3JlL0dyYXBoSU8uY3MiLCJHcmFwaHNDb3JlL0JhdGNoLmNzIiwiR3JhcGhzQ29yZS9RdWlja0xaLmNzIiwiQXBwLmNzIiwiSGVscGVyRXh0ZW5zaW9ucy5jcyIsIkxheW91dEFuaW1hdGlvbi5jcyIsIkFsZ29yaXRobXMvRGF0YVN0cnVjdHVyZXMvVW5pb25GaW5kVHJhY2tlZFJvb3RzLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvQ2hyb25pY2xlL0Nocm9uaWNsZWRCcmFuY2guY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvQ29sb3JpbmdBbmFseXplci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9Db21tb25Db2xvckFuYWx5emVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1N3YXBBbmFseXplci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9LaWVyc3RlYWRBbmFseXplci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9Lbm93bGVkZ2VUcmVlLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1JlZHVjdGlvbkFuYWx5emVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU2xpbU1pbmQuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9HYW1lVHJlZS5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL0dhbWVUcmVlSW5mby5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL0dyZWVkeVdpbkZpbHRlci5jcyIsIkFsZ29yaXRobXMvRml4ZXJCcmVha2VyL0tub3dsZWRnZUVuZ2luZS9TbGltL1N1cGVyL1Byb29mcy9QZXJtdXRhdGlvbkF3YXJlUHJvb2ZCdWlsZGVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvU21hcnRGaWx0ZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9TdXBlclNsaW1NaW5kLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1N1YlRlbXBsYXRlQW5hbHl6ZXIuY3MiLCJBbGdvcml0aG1zL1dvcmRHYW1lL09wdGltaXplZC9GYXN0VGFycGl0RW51bWVyYXRvci5jcyIsIkFsZ29yaXRobXMvV29yZEdhbWUvUmVmZXJlbmNlVGFycGl0RW51bWVyYXRvci5jcyIsIkJpdExldmVsR2VuZXJhdGlvbi9CaXRHcmFwaF90eXBlLmNzIiwiR3JhcGhzQ29yZS9FZGdlLmNzIiwiR3JhcGhzQ29yZS9HcmFwaC5jcyIsIkdyYXBoc0NvcmUvR3JhcGhDYW52YXMuY3MiLCJHcmFwaHNDb3JlL1ZlcnRleC5jcyIsIkdyYXBoaWNzLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL0dvb2RuZXNzQW5hbHl6ZXIuY3MiLCJBbGdvcml0aG1zL0ZpeGVyQnJlYWtlci9Lbm93bGVkZ2VFbmdpbmUvU2xpbS9TdXBlci9Qcm9vZnMvQXJiaXRyYXJ5RGVncmVlUHJvb2ZCdWlsZGVyLmNzIiwiQWxnb3JpdGhtcy9GaXhlckJyZWFrZXIvS25vd2xlZGdlRW5naW5lL1NsaW0vU3VwZXIvUHJvb2ZzL01heGltdW1EZWdyZWVUaHJlZVByb29mQnVpbGRlci5jcyIsIlRhYkNhbnZhcy5jcyJdLAogICJuYW1lcyI6IFsiIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NEJBZW9DQSxhQUFpQkEsR0FBa0JBLFNBQWFBLE9BQWVBOzs7OztnQkFFdkZBLG9CQUFlQTtnQkFDZkEsVUFBS0E7Z0JBQ0xBLGdCQUFXQTtnQkFDWEEsY0FBU0E7Z0JBQ1RBLGFBQVFBOzs7OztnQkFPUkEs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Q0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUt2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFLdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxxQkFBZ0JBLG9DQUFnQkEsOEVBQXVEQTs7O2dCQUl2RkEscUJBQWdCQSxvQ0FBZ0JBLDhFQUF1REE7OztnQkFJdkZBLHFCQUFnQkEsb0NBQWdCQSw4RUFBdURBOzs7Z0JBSXZGQSxx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RUEsSUFBSUEsYUFBYUE7b0JBRWJBLGlCQUFZQSxvQ0FBZ0JBOzs7MENBSVpBO3dDQUlLQTs7Z0JBTXpCQTs7O2dCQWlCQUEsZUFBZUEsSUFBSUEsY0FBU0E7Z0JBQzVCQSx1QkFBa0JBLFVBQVVBLG1CQUFjQTs7Ozs7Ozs7c0JBejdDcUJBO1lBQVFBLFNBQVNBLElBQUlBO1lBQWlCQSxTQUFTQSxJQUFJQTtZQUFpQkEsU0FBU0EsSUFBSUE7WUFBaUJBLFNBQVNBLElBQUlBO1lBQW1CQSxTQUFTQSxJQUFJQTtZQUFvQkEsU0FBU0EsSUFBSUE7WUFBbUJBLFNBQVNBLElBQUlBO1lBQW9CQSxTQUFTQSxJQUFJQTtZQUFvQkEsU0FBU0EsSUFBSUE7WUFBcUJBLE9BQU9BOzs7bUJBeTBDcFBBOzs7bUJBQ0FBOzs7ZUF6dUNnVUEsbUJBQVVBOzs7ZUFBaE5BLDRCQUEwQ0Esa0xBQTZEQSwyRkFBdURBLEFBQW1DQTs7O2VBc01wTUEsNEJBQTBDQSxpUkFBOEZBLHVHQUF5RUEsQUFBbUNBOzs7UUFpakNoZUE7Ozs7UUFFS0EiLAogICJzb3VyY2VzQ29udGVudCI6IFsidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEFzc2lnbm1lbnRFbnVtZXJhdG9yOiBJRW51bWVyYWJsZTxMaXN0PEludDY0Pj5cclxuICAgIHtcclxuICAgICAgICBpbnQgX3ZlcnRleENvdW50O1xyXG4gICAgICAgIEZ1bmM8aW50LCBpbnQ+IF9mO1xyXG4gICAgICAgIGludCBfcG90U2l6ZTtcclxuICAgICAgICBpbnQgX3N0YXJ0O1xyXG4gICAgICAgIGludCBfc3RlcDtcclxuXHJcbiAgICAgICAgcHVibGljIEFzc2lnbm1lbnRFbnVtZXJhdG9yKGludCB2ZXJ0ZXhDb3VudCwgRnVuYzxpbnQsIGludD4gZiwgaW50IHBvdFNpemUsIGludCBzdGFydCA9IDAsIGludCBzdGVwID0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF92ZXJ0ZXhDb3VudCA9IHZlcnRleENvdW50O1xyXG4gICAgICAgICAgICBfZiA9IGY7XHJcbiAgICAgICAgICAgIF9wb3RTaXplID0gcG90U2l6ZTtcclxuICAgICAgICAgICAgX3N0YXJ0ID0gc3RhcnQ7XHJcbiAgICAgICAgICAgIF9zdGVwID0gc3RlcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNyZWdpb24gSUVudW1lcmFibGU8bG9uZ1tdPiBNZW1iZXJzXHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYXRvcjxMaXN0PEludDY0Pj4gR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEVudW1lcmF0b3IoX3ZlcnRleENvdW50LCBfZiwgX3BvdFNpemUsIF9zdGFydCwgX3N0ZXApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIElFbnVtZXJhYmxlIE1lbWJlcnNcclxuXHJcbiAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhdG9yIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYWJsZS5HZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG5cclxuICAgICAgICBjbGFzcyBFbnVtZXJhdG9yIDogSUVudW1lcmF0b3I8TGlzdDxJbnQ2ND4+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PElFbnVtZXJhdG9yPEludDY0Pj4gX2VudW1lcmF0b3JzO1xyXG4gICAgICAgICAgICBMaXN0PEludDY0PiBfY3VycmVudDtcclxuICAgICAgICAgICAgaW50IF9zdGVwO1xyXG5cclxuICAgICAgICAgICAgcHVibGljIEVudW1lcmF0b3IoaW50IHZlcnRleENvdW50LCBGdW5jPGludCwgaW50PiBmLCBpbnQgcG90U2l6ZSwgaW50IHN0YXJ0ID0gMCwgaW50IHN0ZXAgPSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfZW51bWVyYXRvcnMgPSBuZXcgTGlzdDxJRW51bWVyYXRvcjxJbnQ2ND4+KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IEVudW1lcmFibGUuUmFuZ2UoMCwgZigwKSkuVG9JbnQ2NCgpO1xyXG4gICAgICAgICAgICAgICAgX2VudW1lcmF0b3JzLkFkZChCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8SW50NjQ+KCksKF9vMSk9PntfbzEuQWRkKGZpcnN0KTtyZXR1cm4gX28xO30pLkdldEVudW1lcmF0b3IoKSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IHZlcnRleENvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgX2VudW1lcmF0b3JzLkFkZChuZXcgU3Vic2V0RW51bWVyYXRvci5FbnVtZXJhdG9yKHBvdFNpemUsIGYoaSkpKTtcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgX3N0ZXAgPSBzdGVwO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3RhcnQ7IGkrKykgaWYgKCFNb3ZlTmV4dEludGVybmFsKCkpIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAjcmVnaW9uIElFbnVtZXJhdG9yPGxvbmdbXT4gTWVtYmVyc1xyXG5cclxuICAgICAgICAgICAgcHVibGljIExpc3Q8SW50NjQ+IEN1cnJlbnRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9jdXJyZW50OyB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgICAgICNyZWdpb24gSURpc3Bvc2FibGUgTWVtYmVyc1xyXG5cclxuICAgICAgICAgICAgcHVibGljIHZvaWQgRGlzcG9zZSgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAgICAgI3JlZ2lvbiBJRW51bWVyYXRvciBNZW1iZXJzXHJcblxyXG4gICAgICAgICAgICBvYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhdG9yLkN1cnJlbnRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIEN1cnJlbnQ7IH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIGJvb2wgTW92ZU5leHQoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IF9zdGVwOyBqKyspIGlmICghTW92ZU5leHRJbnRlcm5hbCgpKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJvb2wgTW92ZU5leHRJbnRlcm5hbCgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChfY3VycmVudCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jdXJyZW50ID0gbmV3IExpc3Q8SW50NjQ+KF9lbnVtZXJhdG9ycy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIGVudW1lcmF0b3IgaW4gX2VudW1lcmF0b3JzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYXRvci5Nb3ZlTmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY3VycmVudC5BZGQoZW51bWVyYXRvci5DdXJyZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGludCBpID0gX2VudW1lcmF0b3JzLkNvdW50IC0gMTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChpID49IDEpXHJcbiAgICAgICAgICAgICAgICB7IFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfZW51bWVyYXRvcnNbaV0uTW92ZU5leHQoKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jdXJyZW50W2ldID0gX2VudW1lcmF0b3JzW2ldLkN1cnJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2VudW1lcmF0b3JzW2ldLlJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2VudW1lcmF0b3JzW2ldLk1vdmVOZXh0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9jdXJyZW50W2ldID0gX2VudW1lcmF0b3JzW2ldLkN1cnJlbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGktLTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaSA+PSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2b2lkIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvci5SZXNldCgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDaG9vc2FiaWxpdHlSZXN1bHRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IEJhZEFzc2lnbm1lbnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldDtcclxuICAgICAgICAgICAgcHJpdmF0ZSBzZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDYW5jZWxlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0O1xyXG4gICAgICAgICAgICBwcml2YXRlIHNldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQ2hvb3NhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gQmFkQXNzaWdubWVudCA9PSBudWxsOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQ2hvb3NhYmlsaXR5UmVzdWx0KExpc3Q8TGlzdDxpbnQ+PiBiYWRBc3NpZ25tZW50LCBib29sIGNhbmNlbGVkID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBCYWRBc3NpZ25tZW50ID0gYmFkQXNzaWdubWVudDtcclxuICAgICAgICAgICAgQ2FuY2VsZWQgPSBjYW5jZWxlZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsYXNzIE9yaWVudGF0aW9uUmVzdWx0XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIEdyYXBoIEdyYXBoIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IEV2ZW4geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgT2RkIHsgZ2V0OyBzZXQ7IH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIENvdW50aW5nXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIEJpbm9taWFsQ29lZmZpY2llbnQobG9uZyBuLCBsb25nIGspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoayA8IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsb25nIG1heCA9IE1hdGguTWF4KGssIG4gLSBrKTtcclxuICAgICAgICAgICAgbG9uZyBtaW4gPSBNYXRoLk1pbihrLCBuIC0gayk7XHJcblxyXG4gICAgICAgICAgICBsb25nIHJlc3VsdCA9IDE7XHJcbiAgICAgICAgICAgIHdoaWxlIChuID4gbWF4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKj0gbjtcclxuICAgICAgICAgICAgICAgIG4tLTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgd2hpbGUgKG1pbiA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCAvPSBtaW47XHJcblxyXG4gICAgICAgICAgICAgICAgbWluLS07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgRmFjdG9yaWFsKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyB0b3RhbCA9IDE7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDw9IG47IGkrKylcclxuICAgICAgICAgICAgICAgIHRvdGFsICo9IGk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkRhdGFTdHJ1Y3R1cmVzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBCaWplY3Rpb248RCwgQz5cclxuICAgIHtcclxuICAgICAgICBEaWN0aW9uYXJ5PEQsIEM+IF9mID0gbmV3IERpY3Rpb25hcnk8RCwgQz4oKTtcclxuICAgICAgICBEaWN0aW9uYXJ5PEMsIEQ+IF9maW52ZXJzZSA9IG5ldyBEaWN0aW9uYXJ5PEMsIEQ+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBDIHRoaXNbRCBkXVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9mW2RdOyB9XHJcbiAgICAgICAgICAgIHNldCBcclxuICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAgIF9mW2RdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBfZmludmVyc2VbdmFsdWVdID0gZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEQgdGhpc1tDIGNdXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2ZpbnZlcnNlW2NdOyB9XHJcbiAgICAgICAgICAgIHNldCBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2ZbdmFsdWVdID0gYztcclxuICAgICAgICAgICAgICAgIF9maW52ZXJzZVtjXSA9IHZhbHVlOyBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPEM+IEFwcGx5KElFbnVtZXJhYmxlPEQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8RCxDPihlLChnbG9iYWw6OlN5c3RlbS5GdW5jPEQsIEM+KShkID0+IHRoaXNbZF0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxEPiBBcHBseShJRW51bWVyYWJsZTxDPiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PEMsRD4oZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxDLCBEPikoYyA9PiB0aGlzW2NdKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQmlqZWN0aW9uRXh0ZW5zaW9uc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQmlqZWN0aW9uPGludCwgVD4gTnVtYmVyT2JqZWN0czxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IG9iamVjdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbnVtYmVyaW5nID0gbmV3IEJpamVjdGlvbjxpbnQsIFQ+KCk7XHJcblxyXG4gICAgICAgICAgICBpbnQgaSA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBvIGluIG9iamVjdHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG51bWJlcmluZ1tpXSA9IG87XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudW1iZXJpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkRhdGFTdHJ1Y3R1cmVzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBVbmlvbkZpbmQ8VD5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTm9kZSBNYWtlU2V0KFQgdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gbmV3IE5vZGUoKTtcclxuICAgICAgICAgICAgbm9kZS5QYXJlbnQgPSBub2RlO1xyXG4gICAgICAgICAgICBub2RlLlJhbmsgPSAwO1xyXG4gICAgICAgICAgICBub2RlLlQgPSB0O1xyXG5cclxuICAgICAgICAgICAgUm9vdEFkZGVkKG5vZGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFVuaW9uKE5vZGUgbngsIE5vZGUgbnkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeFJvb3QgPSBGaW5kKG54KTtcclxuICAgICAgICAgICAgdmFyIHlSb290ID0gRmluZChueSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoeFJvb3QgPT0geVJvb3QpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZiAoeFJvb3QuUmFuayA8IHlSb290LlJhbmspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHhSb290LlBhcmVudCA9IHlSb290O1xyXG4gICAgICAgICAgICAgICAgUm9vdFJlbW92ZWQoeFJvb3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHhSb290LlJhbmsgPiB5Um9vdC5SYW5rKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB5Um9vdC5QYXJlbnQgPSB4Um9vdDtcclxuICAgICAgICAgICAgICAgIFJvb3RSZW1vdmVkKHlSb290KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHlSb290LlBhcmVudCA9IHhSb290O1xyXG4gICAgICAgICAgICAgICAgeFJvb3QuUmFuaysrO1xyXG4gICAgICAgICAgICAgICAgUm9vdFJlbW92ZWQoeVJvb3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTm9kZSBGaW5kKE5vZGUgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChuLlBhcmVudCAhPSBuKVxyXG4gICAgICAgICAgICAgICAgbi5QYXJlbnQgPSBGaW5kKG4uUGFyZW50KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuLlBhcmVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGFzcyBOb2RlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgTm9kZSBQYXJlbnQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IFJhbmsgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgICAgICBwdWJsaWMgVCBUIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgUm9vdEFkZGVkKE5vZGUgbikgeyB9XHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBSb290UmVtb3ZlZChOb2RlIG4pIHsgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmU7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEJvYXJkIDogSUVudW1lcmFibGU8bG9uZz5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgU3RvcmVQZXJtdXRhdGlvbkluZm87XHJcblxyXG4jaWYgREVCVUdcclxuICAgICAgICBwdWJsaWMgTGlzdDxzdHJpbmc+IFN0YWNrU3RyaW5ncyB7IGdldCB7IHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLHN0cmluZz4oU3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIHN0cmluZz4pKHMgPT4gcy5Ub1NldFN0cmluZygpKSkuVG9MaXN0KCk7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUG90U3RyaW5nIHsgZ2V0IHsgcmV0dXJuIFBvdC5Ub1NldFN0cmluZygpOyB9IH1cclxuI2VuZGlmXHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGxvbmc+IFN0YWNrcztcclxuICAgICAgICBpbnQgX2hhc2hDb2RlO1xyXG4gICAgICAgIExpc3Q8aW50PiBQb3RTZXQ7XHJcbiAgICAgICAgTGlzdDxJbnQ2ND4gVHJhY2VzO1xyXG4gICAgICAgIExpc3Q8VHVwbGU8aW50LCBJbnQ2ND4+IFRyYWNlc0ZvclBlcm11dGF0aW9uSW5mbztcclxuICAgICAgICBMaXN0PGludD4gVHJhY2VDaGFuZ2VJbmRpY2VzO1xyXG4gICAgICAgIHB1YmxpYyBMYXp5PFRlbXBsYXRlPiBUZW1wbGF0ZTtcclxuXHJcbiAgICAgICAgcHVibGljIGxvbmcgUG90O1xyXG4gICAgICAgIHB1YmxpYyBpbnQgQ29sb3JDb3VudDtcclxuXHJcbiAgICAgICAgcHVibGljIFR1cm4gVHVybjtcclxuICAgICAgICBwdWJsaWMgaW50IE47XHJcbiAgICAgICAgcHVibGljIE1vdmUgTGFzdE1vdmU7XHJcbiAgICAgICAgcHVibGljIGxvbmcgdGhpc1tpbnQgeF0geyBnZXQgeyByZXR1cm4gU3RhY2tzW3hdOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIEJvYXJkKExpc3Q8bG9uZz4gc3RhY2tzLCBsb25nIHBvdCwgYm9vbCBjb21wdXRlSGFzaCA9IHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTdGFja3MgPSBzdGFja3M7XHJcbiAgICAgICAgICAgIFBvdCA9IHBvdDtcclxuICAgICAgICAgICAgVHVybiA9IFR1cm4uRml4ZXI7XHJcbiAgICAgICAgICAgIE4gPSBTdGFja3MuQ291bnQ7XHJcbiAgICAgICAgICAgIFRlbXBsYXRlID0gbmV3IExhenk8VGVtcGxhdGU+KCgpID0+IG5ldyBUZW1wbGF0ZShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLGludD4oU3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGludD4pKHMgPT4gcy5Qb3B1bGF0aW9uQ291bnQoKSkpLlRvTGlzdCgpKSk7XHJcbiAgICAgICAgICAgIFBvdFNldCA9IFBvdC5Ub1NldCgpO1xyXG4gICAgICAgICAgICBDb2xvckNvdW50ID0gUG90U2V0LkNvdW50O1xyXG4gICAgICAgICAgICBUcmFjZXMgPSBuZXcgTGlzdDxJbnQ2ND4oQ29sb3JDb3VudCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoU3RvcmVQZXJtdXRhdGlvbkluZm8pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRyYWNlc0ZvclBlcm11dGF0aW9uSW5mbyA9IG5ldyBMaXN0PFR1cGxlPGludCwgSW50NjQ+PihDb2xvckNvdW50KTtcclxuICAgICAgICAgICAgICAgIFRyYWNlQ2hhbmdlSW5kaWNlcyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGNvbXB1dGVIYXNoKVxyXG4gICAgICAgICAgICAgICAgQ29tcHV0ZUhhc2hDb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIENvbXB1dGVIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSAoaW50KShOKTtcclxuICAgICAgICAgICAgVXBkYXRlSGFzaChyZWYgX2hhc2hDb2RlLCAobG9uZykoVHVybikpO1xyXG5cclxuICAgICAgICAgICAgVHJhY2VzLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjIGluIFBvdFNldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSBHZXRUcmFjZShjKTtcclxuICAgICAgICAgICAgICAgIGlmICh0ID4gMClcclxuICAgICAgICAgICAgICAgICAgICBUcmFjZXMuQWRkKHQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBUcmFjZXMuU29ydCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gVHJhY2VzKVxyXG4gICAgICAgICAgICAgICAgVXBkYXRlSGFzaChyZWYgX2hhc2hDb2RlLCB0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChTdG9yZVBlcm11dGF0aW9uSW5mbylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvLkNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICBUcmFjZUNoYW5nZUluZGljZXMuQ2xlYXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYyBpbiBQb3RTZXQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBHZXRUcmFjZShjKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRyYWNlc0ZvclBlcm11dGF0aW9uSW5mby5BZGQobmV3IFR1cGxlPGludCwgSW50NjQ+KGMsIHQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBUcmFjZXNGb3JQZXJtdXRhdGlvbkluZm8uU29ydCgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGxvbmc+LCBnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGxvbmc+LCBpbnQ+KSgoeCwgeSkgPT4geC5JdGVtMi5Db21wYXJlVG8oeS5JdGVtMikpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBJbnQ2NCBwcmV2aW91c1RyYWNlID0gLTE7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IFRyYWNlc0ZvclBlcm11dGF0aW9uSW5mby5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodC5JdGVtMiAhPSBwcmV2aW91c1RyYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVHJhY2VDaGFuZ2VJbmRpY2VzLkFkZChpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNUcmFjZSA9IHQuSXRlbTI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIFRyYWNlQ2hhbmdlSW5kaWNlcy5BZGQoVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvLkNvdW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgVXBkYXRlSGFzaChyZWYgaW50IGhhc2gsIGxvbmcgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBoYXNoID0gKGludCkoMzcgKiBoYXNoICsgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSW50NjQgR2V0VHJhY2UoaW50IGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgayA9IDFMIDw8IGM7XHJcbiAgICAgICAgICAgIEludDY0IHRyYWNlID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICgoU3RhY2tzW2ldICYgaykgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICB0cmFjZSB8PSAoMUwgPDwgaSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cmFjZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE1ha2VNb3ZlKE1vdmUgbW92ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExhc3RNb3ZlID0gbW92ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtb3ZlLlN0YWNrID49IDApXHJcbiAgICAgICAgICAgICAgICBTdGFja3NbbW92ZS5TdGFja10gPSBTdGFja3NbbW92ZS5TdGFja10uRmxpcEJpdHMobW92ZS5BZGRlZCwgbW92ZS5SZW1vdmVkKTtcclxuXHJcbiAgICAgICAgICAgIFR1cm4gPSBPdGhlclR1cm4oVHVybik7XHJcblxyXG4gICAgICAgICAgICBDb21wdXRlSGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvTW92ZUNvbWJpbmF0aW9uKElFbnVtZXJhYmxlPE1vdmU+IG1vdmVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG1vdmUgaW4gbW92ZXMpXHJcbiAgICAgICAgICAgICAgICBTdGFja3NbbW92ZS5TdGFja10gPSBTdGFja3NbbW92ZS5TdGFja10uRmxpcEJpdHMobW92ZS5BZGRlZCwgbW92ZS5SZW1vdmVkKTtcclxuXHJcbiAgICAgICAgICAgIENvbXB1dGVIYXNoQ29kZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEJvYXJkIENsb25lKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjbG9uZSA9IG5ldyBCb2FyZChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxsb25nPihTdGFja3MpLCBQb3QpO1xyXG4gICAgICAgICAgICBjbG9uZS5UdXJuID0gVHVybjtcclxuICAgICAgICAgICAgY2xvbmUuTGFzdE1vdmUgPSBMYXN0TW92ZTtcclxuICAgICAgICAgICAgY2xvbmUuX2hhc2hDb2RlID0gX2hhc2hDb2RlO1xyXG5cclxuICAgICAgICAgICAgY2xvbmUuQ29tcHV0ZUhhc2hDb2RlKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQm9hcmQgRG9Nb3ZlQ29tYmluYXRpb25PbkNsb25lKElFbnVtZXJhYmxlPE1vdmU+IHN3YXApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2xvbmUgPSBuZXcgQm9hcmQoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8bG9uZz4oU3RhY2tzKSwgUG90LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGNsb25lLlR1cm4gPSBUdXJuO1xyXG4gICAgICAgICAgICBjbG9uZS5MYXN0TW92ZSA9IExhc3RNb3ZlO1xyXG5cclxuICAgICAgICAgICAgY2xvbmUuRG9Nb3ZlQ29tYmluYXRpb24oc3dhcCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFcXVhbHMob2JqIGFzIEJvYXJkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhCb2FyZCBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoVHVybiAhPSBvdGhlci5UdXJuKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoTiAhPSBvdGhlci5OKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxsb25nPihUcmFjZXMsb3RoZXIuVHJhY2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gRmluZFBlcm11dGF0aW9uKEJvYXJkIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFTdG9yZVBlcm11dGF0aW9uSW5mbylcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJub3Qgc3RvcmluZyBwZXJtdXRhdGlvbiBpbmZvXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGxvbmc+LGxvbmc+KFRyYWNlc0ZvclBlcm11dGF0aW9uSW5mbywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGxvbmc+LCBsb25nPikodCA9PiB0Lkl0ZW0yKSkuU2VxdWVuY2VFcXVhbChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGxvbmc+LGxvbmc+KG90aGVyLlRyYWNlc0ZvclBlcm11dGF0aW9uSW5mbywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGxvbmc+LCBsb25nPikodCA9PiB0Lkl0ZW0yKSkpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWFwcGluZ1BhaXJzID0gbmV3IExpc3Q8VHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IFRyYWNlQ2hhbmdlSW5kaWNlcy5Db3VudCAtIDE7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvbWFpbiA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIHZhciBjb2RvbWFpbiA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gVHJhY2VDaGFuZ2VJbmRpY2VzW2ldOyBqIDwgVHJhY2VDaGFuZ2VJbmRpY2VzW2kgKyAxXTsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvbWFpbi5BZGQoVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvW2pdLkl0ZW0xKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2RvbWFpbi5BZGQob3RoZXIuVHJhY2VzRm9yUGVybXV0YXRpb25JbmZvW2pdLkl0ZW0xKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBtYXBwaW5nUGFpcnMuQWRkKG5ldyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4oZG9tYWluLCBjb2RvbWFpbikpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PixnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LGdsb2JhbDo6U3lzdGVtLkxpbnEuRW51bWVyYWJsZUluc3RhbmNlPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+PihtYXBwaW5nUGFpcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PiwgZ2xvYmFsOjpTeXN0ZW0uTGlucS5FbnVtZXJhYmxlSW5zdGFuY2U8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4+KShtcCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbixnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PihQZXJtdXRhdGlvbi5FbnVtZXJhdGVBbGwobXAuSXRlbTIuQ291bnQpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PikocCA9PiBuZXcgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+KG1wLkl0ZW0xLCBwLkFwcGx5PGludD4obXAuSXRlbTIpKSkpKSlcclxuKVxyXG4sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PiwgZ2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4pKG1hcHBpbmcgPT4gRmxhdHRlbk1hcHBpbmcobWFwcGluZykpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLkZpcnN0T3JEZWZhdWx0KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sIGJvb2w+KShtYXBwaW5nID0+IFNlcXVlbmNlRXF1YWxQZXJtdXRlZChtYXBwaW5nLCBvdGhlcikpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBGbGF0dGVuTWFwcGluZyhJRW51bWVyYWJsZTxUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4+IG1hcHBpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PixpbnQ+KG1hcHBpbmcsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+PikoeCA9PiB4Lkl0ZW0xKSkuVG9MaXN0KCksIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LGludD4obWFwcGluZywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KSh4ID0+IHguSXRlbTIpKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIFNlcXVlbmNlRXF1YWxQZXJtdXRlZChUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gbWFwcGluZywgQm9hcmQgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IFN0YWNrcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGVybXV0ZWRTdGFjayA9IEFwcGx5TWFwcGluZyhtYXBwaW5nLCBTdGFja3NbaV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBlcm11dGVkU3RhY2sgIT0gb3RoZXIuU3RhY2tzW2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKFR1cm4gPT0gRml4ZXJCcmVha2VyLlR1cm4uRml4ZXIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChMYXN0TW92ZS5TdGFjayAhPSBvdGhlci5MYXN0TW92ZS5TdGFjaylcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvdXJzID0gbmV3W10geyBMYXN0TW92ZS5BZGRlZCwgTGFzdE1vdmUuUmVtb3ZlZCB9O1xyXG4gICAgICAgICAgICB2YXIgdGhlaXJzID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGludD4oKSwoX28yKT0+e19vMi5BZGQob3RoZXIuTGFzdE1vdmUuQWRkZWQpO19vMi5BZGQob3RoZXIuTGFzdE1vdmUuUmVtb3ZlZCk7cmV0dXJuIF9vMjt9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRXF1YWw8aW50PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEFwcGx5TWFwcGluZyhtYXBwaW5nLCBvdXJzKSksdGhlaXJzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBsb25nIEFwcGx5TWFwcGluZyhUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gbWFwcGluZywgbG9uZyBzdGFjaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBcHBseU1hcHBpbmcobWFwcGluZywgc3RhY2suVG9TZXQoKSkuVG9JbnQ2NCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEFwcGx5TWFwcGluZyhUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gbWFwcGluZywgSUVudW1lcmFibGU8aW50PiBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oc2V0LChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoYyA9PiBtYXBwaW5nLkl0ZW0yW21hcHBpbmcuSXRlbTEuSW5kZXhPZihjKV0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEFwcGx5SW52ZXJzZU1hcHBpbmcoVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IG1hcHBpbmcsIElFbnVtZXJhYmxlPGludD4gc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHNldCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGMgPT4gbWFwcGluZy5JdGVtMVttYXBwaW5nLkl0ZW0yLkluZGV4T2YoYyldKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFR1cm4gT3RoZXJUdXJuKFR1cm4gdHVybilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAxIC0gdHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYXRvcjxsb25nPiBHZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTdGFja3MuR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhdG9yIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYWJsZS5HZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcInxcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxzdHJpbmc+KFN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBzdHJpbmc+KSh4ID0+IHguVG9TZXRTdHJpbmdTbWFsbCgpKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUb1RleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxzdHJpbmc+KFN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBpbnQsIHN0cmluZz4pKChzdGFjaywgaSkgPT4gXCIkTCh2X1wiICsgKGkgKyAxKSArIFwiKSA9IFwiICsgc3RhY2suVG9TZXRTdHJpbmcoKS5SZXBsYWNlKFwie1wiLCBcIlxcXFx7XCIpLlJlcGxhY2UoXCJ9XCIsIFwiXFxcXH1cIikgKyBcIiRcIikpLkpvaW5QcmV0dHkoXCIsIFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQ2hyb25pY2xlXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQnJhbmNoR2VuZXJhdG9yXHJcbiAgICB7XHJcbiAgICAgICAgc3RhdGljIERpY3Rpb25hcnk8aW50LCBMaXN0PExpc3Q8TGlzdDxpbnQ+Pj4+IFBhcnRpdGlvbnNDYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PGludCwgTGlzdDxMaXN0PExpc3Q8aW50Pj4+PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxMaXN0PGludD4+PiBHZXRQYXJ0aXRpb25zKGludCBjb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8TGlzdDxMaXN0PGludD4+PiBwYXJ0aXRpb25zO1xyXG4gICAgICAgICAgICBpZiAoIVBhcnRpdGlvbnNDYWNoZS5UcnlHZXRWYWx1ZShjb3VudCwgb3V0IHBhcnRpdGlvbnMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0aXRpb25zID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4oRW51bWVyYXRlUGFydGl0aW9ucyhjb3VudCkpO1xyXG4gICAgICAgICAgICAgICAgUGFydGl0aW9uc0NhY2hlW2NvdW50XSA9IHBhcnRpdGlvbnM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwYXJ0aXRpb25zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPENocm9uaWNsZWRCcmFuY2g+IEVudW1lcmF0ZUJyYW5jaGVzKEJvYXJkIGJvYXJkLCBUdXBsZTxpbnQsIGludD4gY29sb3JQYWlyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIFMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEVudW1lcmF0ZUV4YWN0bHlPbmVJbnRlcnNlY3RlcnMoYm9hcmQsIGNvbG9yUGFpcikpO1xyXG4gICAgICAgICAgICB2YXIgcGFydGl0aW9ucyA9IEdldFBhcnRpdGlvbnMoUy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PixnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkNocm9uaWNsZS5DaHJvbmljbGVkQnJhbmNoPihwYXJ0aXRpb25zLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQ2hyb25pY2xlLkNocm9uaWNsZWRCcmFuY2g+KShwYXJ0aXRpb24gPT4gbmV3IENocm9uaWNsZWRCcmFuY2goUywgY29sb3JQYWlyLkl0ZW0xLCBjb2xvclBhaXIuSXRlbTIsIHBhcnRpdGlvbikpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PExpc3Q8aW50Pj4+IEVudW1lcmF0ZVBhcnRpdGlvbnMoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobiAlIDIgPT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnRpdGlvbiBpbiBFbnVtZXJhdGVQYXJ0aXRpb25zKEVudW1lcmFibGUuUmFuZ2UoMCwgbikuVG9MaXN0KCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBwYXJ0aXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydGl0aW9uIGluIEVudW1lcmF0ZVBhcnRpdGlvbnMoRW51bWVyYWJsZS5SYW5nZSgwLCBuKS5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShqID0+IGogIT0gaSkpLlRvTGlzdCgpKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpdGlvbi5JbnNlcnQoMCwgQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGludD4oKSwoX28zKT0+e19vMy5BZGQoaSk7cmV0dXJuIF9vMzt9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBwYXJ0aXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxMaXN0PGludD4+PiBFbnVtZXJhdGVQYXJ0aXRpb25zKExpc3Q8aW50PiBpbmRpY2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGluZGljZXMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gaW5kaWNlc1swXTtcclxuICAgICAgICAgICAgICAgIGluZGljZXMuUmVtb3ZlQXQoMCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGluZGljZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydCA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vNCk9PntfbzQuQWRkKGZpcnN0KTtfbzQuQWRkKGluZGljZXNbaV0pO3JldHVybiBfbzQ7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kaWNlcy5SZW1vdmVBdChpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnRpdGlvbiBpbiBFbnVtZXJhdGVQYXJ0aXRpb25zKGluZGljZXMpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydGl0aW9uLkFkZChwYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHBhcnRpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGluZGljZXMuSW5zZXJ0KGksIHBhcnRbMV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGluZGljZXMuSW5zZXJ0KDAsIGZpcnN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEVudW1lcmF0ZUV4YWN0bHlPbmVJbnRlcnNlY3RlcnMoQm9hcmQgYm9hcmQsIFR1cGxlPGludCwgaW50PiBjb2xvclBhaXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYWJsZS5SYW5nZSgwLCBib2FyZC5TdGFja3MuQ291bnQpLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGkgPT4gYm9hcmQuU3RhY2tzW2ldLklzQml0U2V0KGNvbG9yUGFpci5JdGVtMSkgXiBib2FyZC5TdGFja3NbaV0uSXNCaXRTZXQoY29sb3JQYWlyLkl0ZW0yKSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBCb2FyZEtub3dsZWRnZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBCb2FyZCBCb2FyZCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFJlYXNvbiB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBEZXB0aCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIFR1cGxlPGludCwgaW50PiBDb2xvclBhaXIgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPj4gU3dhcHMgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQm9hcmRLbm93bGVkZ2UoQm9hcmQgYm9hcmQsIHN0cmluZyByZWFzb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBCb2FyZCA9IGJvYXJkO1xyXG4gICAgICAgICAgICBSZWFzb24gPSByZWFzb247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdyYXBoS25vd2xlZGdlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIEdyYXBoIEdyYXBoIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBMaW5lR3JhcGggeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8VHVwbGU8aW50LCBpbnQ+PiBFZGdlcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IEVkZ2VJbmRpY2VzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gTGVhdmVzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMYXp5PERpY3Rpb25hcnk8VHVwbGU8aW50LCBpbnQ+LCBMaXN0PExpc3Q8aW50Pj4+PiBDb25uZWN0ZWRPcmRlcmluZ3MgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaEtub3dsZWRnZShHcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgR3JhcGggPSBnO1xyXG4gICAgICAgICAgICBMZWF2ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGludD4oR3JhcGguVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiBHcmFwaC5EZWdyZWUodikgPT0gMSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBCdWlsZExpbmVHcmFwaCgpO1xyXG5cclxuICAgICAgICAgICAgQ29ubmVjdGVkT3JkZXJpbmdzID0gbmV3IExhenk8RGljdGlvbmFyeTxUdXBsZTxpbnQsIGludD4sIExpc3Q8TGlzdDxpbnQ+Pj4+KCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjbyA9IG5ldyBEaWN0aW9uYXJ5PFR1cGxlPGludCwgaW50PiwgTGlzdDxMaXN0PGludD4+PigpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gRWRnZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgY29bZV0gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oR3JhcGguRW51bWVyYXRlQ29ubmVjdGVkT3JkZXJpbmdzKEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vNSk9PntfbzUuQWRkKGUuSXRlbTEpO19vNS5BZGQoZS5JdGVtMik7cmV0dXJuIF9vNTt9KSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBjbztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEJ1aWxkTGluZUdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhZGphY2VudCA9IEdyYXBoLkFkamFjZW50O1xyXG4gICAgICAgICAgICBpbnQgbiA9IGFkamFjZW50LkdldFVwcGVyQm91bmQoMCkgKyAxO1xyXG5cclxuICAgICAgICAgICAgRWRnZXMgPSBuZXcgTGlzdDxUdXBsZTxpbnQsIGludD4+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgbjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgRWRnZXMuQWRkKG5ldyBUdXBsZTxpbnQsIGludD4oaSwgaikpO1xyXG5cclxuICAgICAgICAgICAgRWRnZUluZGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIEVkZ2VzLkNvdW50KS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtZWV0cyA9IG5ldyBib29sW0VkZ2VzLkNvdW50LCBFZGdlcy5Db3VudF07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgRWRnZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IEVkZ2VzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEVkZ2VzW2ldLkl0ZW0xID09IEVkZ2VzW2pdLkl0ZW0xIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkZ2VzW2ldLkl0ZW0xID09IEVkZ2VzW2pdLkl0ZW0yIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkZ2VzW2ldLkl0ZW0yID09IEVkZ2VzW2pdLkl0ZW0xIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkZ2VzW2ldLkl0ZW0yID09IEVkZ2VzW2pdLkl0ZW0yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZWV0c1tpLCBqXSA9IG1lZXRzW2osIGldID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIExpbmVHcmFwaCA9IG5ldyBHcmFwaChtZWV0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEtub3dsZWRnZVxyXG4gICAge1xyXG4gICAgICAgIERpY3Rpb25hcnk8VGVtcGxhdGUsIFRlbXBsYXRlS25vd2xlZGdlPiBfdGVtcGxhdGVMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxUZW1wbGF0ZSwgVGVtcGxhdGVLbm93bGVkZ2U+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaEtub3dsZWRnZSBHcmFwaEtub3dsZWRnZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgVGVtcGxhdGVLbm93bGVkZ2UgdGhpc1tUZW1wbGF0ZSB0ZW1wbGF0ZV1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUZW1wbGF0ZUtub3dsZWRnZSBwO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFfdGVtcGxhdGVMb29rdXAuVHJ5R2V0VmFsdWUodGVtcGxhdGUsIG91dCBwKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwID0gbmV3IFRlbXBsYXRlS25vd2xlZGdlKHRlbXBsYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBfdGVtcGxhdGVMb29rdXBbdGVtcGxhdGVdID0gcDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgS25vd2xlZGdlKEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHcmFwaEtub3dsZWRnZSA9IG5ldyBHcmFwaEtub3dsZWRnZShnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBsb25nIEdldEVkZ2VDb2xvckxpc3QoQm9hcmQgYm9hcmQsIGludCBlZGdlSW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gYm9hcmRbR3JhcGhLbm93bGVkZ2UuRWRnZXNbZWRnZUluZGV4XS5JdGVtMV0gJiBib2FyZFtHcmFwaEtub3dsZWRnZS5FZGdlc1tlZGdlSW5kZXhdLkl0ZW0yXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGxvbmcgR2V0RWRnZUNvbG9yTGlzdChMaXN0PGxvbmc+IHN0YWNrcywgaW50IGVkZ2VJbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdGFja3NbR3JhcGhLbm93bGVkZ2UuRWRnZXNbZWRnZUluZGV4XS5JdGVtMV0gJiBzdGFja3NbR3JhcGhLbm93bGVkZ2UuRWRnZXNbZWRnZUluZGV4XS5JdGVtMl07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVHJlZTxUPiAgd2hlcmUgVCA6IFRyZWU8VD5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgVCBQYXJlbnQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgVCBUaGlzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxUPiBDaGlsZHJlbiB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFRyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGhpcyA9IChUKXRoaXM7XHJcbiAgICAgICAgICAgIENoaWxkcmVuID0gbmV3IExpc3Q8VD4oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJlbW92ZUNoaWxkKFQgY2hpbGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDaGlsZHJlbi5SZW1vdmUoY2hpbGQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZvaWQgQWRkQ2hpbGQoVCBjaGlsZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNoaWxkLlBhcmVudCA9IFRoaXM7XHJcbiAgICAgICAgICAgIENoaWxkcmVuLkFkZChjaGlsZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEdldERlcHRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkZXB0aCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjaGlsZCBpbiBDaGlsZHJlbilcclxuICAgICAgICAgICAgICAgIGRlcHRoID0gTWF0aC5NYXgoZGVwdGgsIGNoaWxkLkdldERlcHRoKCkgKyAxKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkZXB0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2b2lkIFRyYXZlcnNlKEFjdGlvbjxULCBUPiBvbkRlc2NlbnQsIGludCBtYXhEZXB0aCA9IGludC5NYXhWYWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRyYXZlcnNlSW50ZXJuYWwoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxULCBUPilvbkRlc2NlbnQsIG1heERlcHRoLCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgVHJhdmVyc2VJbnRlcm5hbChBY3Rpb248VCwgVD4gb25EZXNjZW50LCBpbnQgbWF4RGVwdGgsIGludCBkZXB0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkZXB0aCA+PSBtYXhEZXB0aCAtIDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY2hpbGQgaW4gQ2hpbGRyZW4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG9uRGVzY2VudChUaGlzLCBjaGlsZCk7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5UcmF2ZXJzZUludGVybmFsKChnbG9iYWw6OlN5c3RlbS5BY3Rpb248VCwgVD4pb25EZXNjZW50LCBtYXhEZXB0aCwgZGVwdGggKyAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFR1cGxlPEdyYXBoLCBEaWN0aW9uYXJ5PGludCwgVD4+IEJ1aWxkR3JhcGgoaW50IG1heERlcHRoID0gaW50Lk1heFZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHZlcnRpY2VzID0gMDtcclxuICAgICAgICAgICAgdmFyIHZlcnRleExvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PFQsIGludD4oKTtcclxuICAgICAgICAgICAgdmFyIHRyZWVMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxpbnQsIFQ+KCk7XHJcbiAgICAgICAgICAgIHZhciBlZGdlcyA9IG5ldyBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PigpO1xyXG5cclxuICAgICAgICAgICAgVHJhdmVyc2UoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxULCBUPikoKHBhcmVudCwgY2hpbGQpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBwO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF2ZXJ0ZXhMb29rdXAuVHJ5R2V0VmFsdWUocGFyZW50LCBvdXQgcCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcCA9IHZlcnRpY2VzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4TG9va3VwW3BhcmVudF0gPSBwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVMb29rdXBbcF0gPSBwYXJlbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVkZ2VzW3BdID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGludCBjO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF2ZXJ0ZXhMb29rdXAuVHJ5R2V0VmFsdWUoY2hpbGQsIG91dCBjKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjID0gdmVydGljZXMrKztcclxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhMb29rdXBbY2hpbGRdID0gYztcclxuICAgICAgICAgICAgICAgICAgICB0cmVlTG9va3VwW2NdID0gY2hpbGQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVkZ2VzW2NdID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGVkZ2VzW3BdLkFkZChjKTtcclxuICAgICAgICAgICAgfSksIG1heERlcHRoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh2ZXJ0aWNlcyA9PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0cmVlTG9va3VwWzBdID0gKFQpdGhpcztcclxuICAgICAgICAgICAgICAgIGVkZ2VzWzBdID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZWRnZVdlaWdodHMgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdmVydGljZXM7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgdmVydGljZXM7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWRnZXNbaV0uQ29udGFpbnMoaikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VXZWlnaHRzLkFkZCgxKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlZGdlc1tqXS5Db250YWlucyhpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRnZVdlaWdodHMuQWRkKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VXZWlnaHRzLkFkZCgwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUdXBsZTxHcmFwaCwgRGljdGlvbmFyeTxpbnQsIFQ+PihuZXcgR3JhcGgoZWRnZVdlaWdodHMpLCB0cmVlTG9va3VwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgTWV0YUtub3dsZWRnZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaW50IEluZmluaXR5ID0gaW50Lk1heFZhbHVlO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgRXhpc3RzKHRoaXMgb2JqZWN0IG8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbyAhPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IE5hdHVyYWxzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhYmxlLlJhbmdlKDAsIEluZmluaXR5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBJbnRlcnZhbChpbnQgZmlyc3QsIGludCBsYXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmFibGUuUmFuZ2UoZmlyc3QsIGxhc3QgLSBmaXJzdCArIDEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQ/IFRyeVBhcnNlSW50KHRoaXMgc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgeDtcclxuICAgICAgICAgICAgaWYgKGludC5UcnlQYXJzZShzLCBvdXQgeCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4geDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGRvdWJsZT8gVHJ5UGFyc2VEb3VibGUodGhpcyBzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGRvdWJsZSB4O1xyXG4gICAgICAgICAgICBpZiAoZG91YmxlLlRyeVBhcnNlKHMsIG91dCB4KSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB4O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIERlZ3JlZUNvbmRpdGlvbih0aGlzIEdyYXBoIGcsIEJvYXJkIGIsIEZ1bmM8TGlzdDxpbnQ+LCBpbnQ+IG1pc3NpbmdFZGdlcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRGVncmVlQ29uZGl0aW9uKGcsIGIuU3RhY2tzLCBiLlBvdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgRGVncmVlQ29uZGl0aW9uKHRoaXMgR3JhcGggZywgTGlzdDxsb25nPiBzdGFja3MsIGxvbmcgcG90LCBGdW5jPExpc3Q8aW50PiwgaW50PiBtaXNzaW5nRWRnZXMgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG1pc3NpbmdFZGdlcyA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgbWlzc2luZ0VkZ2VzID0gWSA9PiAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9yR3JhcGhzID0gR2V0Q29sb3JHcmFwaHMoc3RhY2tzLCBwb3QpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIFggaW4gTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50PihnLlZlcnRpY2VzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBnLkVkZ2VzT24oWCkgLSBtaXNzaW5nRWRnZXMoWCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGUgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlN1bTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oY29sb3JHcmFwaHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGludD4pKGNnID0+IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb25Db3VudDxpbnQ+KGNnLFgpIC8gMikpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IGUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PGludD4+IEdldENvbG9yR3JhcGhzKExpc3Q8bG9uZz4gc3RhY2tzLCBsb25nIHBvdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHBvdC5FbnVtZXJhdGVCaXRzKCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGFscGhhID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oR19hbHBoYShhbHBoYSwgc3RhY2tzKSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBHX2FscGhhKGludCBhbHBoYSwgTGlzdDxsb25nPiBzdGFja3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5JbmRpY2VzV2hlcmU8bG9uZz4oc3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGJvb2w+KShzdGFjayA9PiBzdGFjay5Jc0JpdFNldChhbHBoYSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IGRfSChpbnQgYWxwaGEsIElFbnVtZXJhYmxlPGxvbmc+IHN0YWNrc0luSClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGxvbmc+KHN0YWNrc0luSCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBib29sPikoc3RhY2sgPT4gc3RhY2suSXNCaXRTZXQoYWxwaGEpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBTdXJwbHVzKHRoaXMgQm9hcmQgYm9hcmQsIEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TdW08Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEdldENvbG9yR3JhcGhzKGJvYXJkLlN0YWNrcywgYm9hcmQuUG90KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikoY2cgPT4gY2cuQ291bnQgLyAyKSkgLSBnLkU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBTdXJwbHVzKHRoaXMgQm9hcmQgYm9hcmQsIEdyYXBoIGcsIExpc3Q8aW50PiB2ZXJ0aWNlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlN1bTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oR2V0Q29sb3JHcmFwaHMoYm9hcmQuU3RhY2tzLCBib2FyZC5Qb3QpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShjZyA9PiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uQ291bnQ8aW50PihjZyx2ZXJ0aWNlcykgLyAyKSkgLSBnLkVkZ2VzT24odmVydGljZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIFRvQ29uc29sZSh0aGlzIHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTW92ZSBNYXBNb3ZlKFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBmLCBNb3ZlIG1vdmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWFwcGVkTW92ZSA9IG5ldyBNb3ZlKCkgeyBTdGFjayA9IG1vdmUuU3RhY2sgfTtcclxuICAgICAgICAgICAgdmFyIG0gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEJvYXJkLkFwcGx5TWFwcGluZyhmLCBuZXdbXSB7IG1vdmUuQWRkZWQsIG1vdmUuUmVtb3ZlZCB9KSk7XHJcblxyXG4gICAgICAgICAgICBtYXBwZWRNb3ZlLkFkZGVkID0gbVswXTtcclxuICAgICAgICAgICAgbWFwcGVkTW92ZS5SZW1vdmVkID0gbVsxXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYXBwZWRNb3ZlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5DaHJvbmljbGU7XHJcbnVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG51c2luZyBBbGdvcml0aG1zO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgTWluZFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBib29sIFN0b3BBbmFseXNpc09uQnJlYWtlcldpbiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgRmluZENsZWFuZXN0V2luIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBOZWFybHlDb2xvcmFibGVPbmx5IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBTdXBlcmFidW5kYW50T25seSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBNaW5Qb3QgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWF4UG90IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgQm9hcmQgQnJlYWtlcldvbkJvYXJkIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBUb3RhbFBvc2l0aW9ucyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgTGlzdDxJQm9hcmRBbmFseXplcj4gQm9hcmRBbmFseXNpc1BpcGVsaW5lIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBLbm93bGVkZ2UgS25vd2xlZGdlIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIE1pbmQoR3JhcGggZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEZpbmRDbGVhbmVzdFdpbiA9IHRydWU7XHJcbiAgICAgICAgICAgIFN1cGVyYWJ1bmRhbnRPbmx5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgTmVhcmx5Q29sb3JhYmxlT25seSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBNYXhQb3QgPSBNZXRhS25vd2xlZGdlLkluZmluaXR5O1xyXG4gICAgICAgICAgICBLbm93bGVkZ2UgPSBuZXcgS25vd2xlZGdlKGcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgQm9hcmRBbmFseXNpc1BpcGVsaW5lID0gbmV3IExpc3Q8SUJvYXJkQW5hbHl6ZXI+KCk7XHJcbiAgICAgICAgICAgIEJvYXJkQW5hbHlzaXNQaXBlbGluZS5BZGQobmV3IENvbG9yaW5nQW5hbHl6ZXIoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBBZGRCb2FyZEFuYWx5emVyKElCb2FyZEFuYWx5emVyIGFuYWx5emVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQm9hcmRBbmFseXNpc1BpcGVsaW5lLkFkZChhbmFseXplcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKFRlbXBsYXRlIHRlbXBsYXRlLCBBY3Rpb248VGhvdWdodFByb2dyZXNzPiBwcm9ncmVzcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUb3RhbFBvc2l0aW9ucyA9IDA7XHJcbiAgICAgICAgICAgIEZpeGVyV29uQWxsTmVhcmx5Q29sb3JhYmxlQm9hcmRzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIEVuc3VyZVN3YXBBbmFseXplckV4aXN0ZW5jZSgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1pbmltdW1Db2xvckNvdW50ID0gTWF0aC5NYXgoTWluUG90LCB0ZW1wbGF0ZS5TaXplcy5NYXgoKSk7XHJcbiAgICAgICAgICAgIHZhciBtYXhpbXVtQ29sb3JDb3VudCA9IE1hdGguTWluKE1heFBvdCwgdGVtcGxhdGUuU2l6ZXMuU3VtKCkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZvdW5kQXRMZWFzdE9uZUJvYXJkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2xvckNvdW50IGluIE1ldGFLbm93bGVkZ2UuSW50ZXJ2YWwobWluaW11bUNvbG9yQ291bnQsIG1heGltdW1Db2xvckNvdW50KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFRob3VnaHRQcm9ncmVzcygpIHsgSXNJbml0aWFsVGhvdWdodCA9IHRydWUgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KEdlbmVyYXRlQWxsQm9hcmRzKHRlbXBsYXRlLCBjb2xvckNvdW50LCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlRob3VnaHRQcm9ncmVzcz4pcHJvZ3Jlc3MpKTtcclxuICAgICAgICAgICAgICAgIGlmIChmb3VuZEF0TGVhc3RPbmVCb2FyZCAmJiBib2FyZHMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBUb3RhbFBvc2l0aW9ucyArPSBib2FyZHMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3VuZEF0TGVhc3RPbmVCb2FyZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJyZWFrZXJXaW4gPSAhQW5hbHl6ZShib2FyZHMsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuVGhvdWdodFByb2dyZXNzPilwcm9ncmVzcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnJlYWtlcldpbiAmJiBTdG9wQW5hbHlzaXNPbkJyZWFrZXJXaW4pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIEtub3dsZWRnZVt0ZW1wbGF0ZV0uUHJvbW90ZShjb2xvckNvdW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oS25vd2xlZGdlW3RlbXBsYXRlXS5Mb3N0Qm9hcmRzKSA8PSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBBbmFseXplKExpc3Q8Qm9hcmQ+IGJvYXJkcywgQWN0aW9uPFRob3VnaHRQcm9ncmVzcz4gcHJvZ3Jlc3MgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHdpbkxlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYW5hbHl6ZXIgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5JQm9hcmRBbmFseXplcj4oQm9hcmRBbmFseXNpc1BpcGVsaW5lLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLklCb2FyZEFuYWx5emVyLCBib29sPikoYSA9PiAhYS5Jc0tub3dsZWRnZURlcGVuZGVudCkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2h1bmsgPSBuZXcgTGlzdDxCb2FyZD4oKTtcclxuQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oICAgICAgICAgICAgICAgIGJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkLCBib29sPikoYiA9PiBhbmFseXplci5BbmFseXplKEtub3dsZWRnZSwgYikpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KSgocmVtb3ZlZCkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjaHVuay5BZGQocmVtb3ZlZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaHVuay5Db3VudCA+IDEwMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFRob3VnaHRQcm9ncmVzcygpIHsgQm9hcmRzUmVtb3ZlZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KGNodW5rKSwgV2luTGVuZ3RoID0gd2luTGVuZ3RoIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuQ2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNodW5rLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFRob3VnaHRQcm9ncmVzcygpIHsgQm9hcmRzUmVtb3ZlZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KGNodW5rKSwgV2luTGVuZ3RoID0gd2luTGVuZ3RoIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIga25vd2xlZGdlRGVwZW5kZW50QW5hbHl6ZXJzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5JQm9hcmRBbmFseXplcj4oQm9hcmRBbmFseXNpc1BpcGVsaW5lLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLklCb2FyZEFuYWx5emVyLCBib29sPikoYSA9PiBhLklzS25vd2xlZGdlRGVwZW5kZW50KSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoYm9hcmRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2luTGVuZ3RoKys7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYm9hcmRzLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhbmFseXplciBpbiBrbm93bGVkZ2VEZXBlbmRlbnRBbmFseXplcnMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbkFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KCAgICAgICAgICAgICAgICAgICAgYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQsIGJvb2w+KShiID0+IGFuYWx5emVyLkFuYWx5emUoS25vd2xlZGdlLCBiKSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4pKChyZW1vdmVkKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVGhvdWdodFByb2dyZXNzKCkgeyBCb2FyZHNSZW1vdmVkID0gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5Fbkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4ocmVtb3ZlZCksIFdpbkxlbmd0aCA9IHdpbkxlbmd0aCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChib2FyZHMuQ291bnQgPT0gY291bnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGIgaW4gYm9hcmRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBLbm93bGVkZ2VbYi5UZW1wbGF0ZS5WYWx1ZV1bYi5Db2xvckNvdW50XS5BZGRMb3NzKGIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IEtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5HcmFwaDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5lYXJseUNvbG9yYWJsZSA9IEVudW1lcmFibGUuUmFuZ2UoMCwgS25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkxpbmVHcmFwaC5OKS5BbGwoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoZSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZCwgYm9vbD4pKGIgPT4gQ29sb3JpbmdBbmFseXplci5Db2xvcmFibGVXaXRob3V0RWRnZShLbm93bGVkZ2UsIGIsIGUpKSkpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmVhcmx5Q29sb3JhYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdE9yRGVmYXVsdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZCwgYm9vbD4pKGIgPT4gZy5EZWdyZWVDb25kaXRpb24oYikgJiYgQ29sb3JpbmdBbmFseXplci5Db2xvcmFibGVXaXRob3V0RWRnZShLbm93bGVkZ2UsIGIsIDApKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChCcmVha2VyV29uQm9hcmQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQsIGJvb2w+KShiID0+IENvbG9yaW5nQW5hbHl6ZXIuQ29sb3JhYmxlV2l0aG91dEVkZ2UoS25vd2xlZGdlLCBiLCAwKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgRW5zdXJlU3dhcEFuYWx5emVyRXhpc3RlbmNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuSUJvYXJkQW5hbHl6ZXI+KEJvYXJkQW5hbHlzaXNQaXBlbGluZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5JQm9hcmRBbmFseXplciwgYm9vbD4pKGEgPT4gYSBpcyBTd2FwQW5hbHl6ZXIpKSlcclxuICAgICAgICAgICAgICAgIEJvYXJkQW5hbHlzaXNQaXBlbGluZS5BZGQobmV3IFN3YXBBbmFseXplcihGaW5kQ2xlYW5lc3RXaW4sIGZhbHNlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBIYXNoU2V0PEJvYXJkPiBHZW5lcmF0ZUFsbEJvYXJkcyhUZW1wbGF0ZSB0ZW1wbGF0ZSwgaW50IGNvbG9yQ291bnQsIEFjdGlvbjxUaG91Z2h0UHJvZ3Jlc3M+IHByb2dyZXNzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBib2FyZHMgPSBuZXcgSGFzaFNldDxCb2FyZD4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB2ZXJ0aWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgdGVtcGxhdGUuU2l6ZXMuQ291bnQpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgcG90U2V0ID0gRW51bWVyYWJsZS5SYW5nZSgwLCBjb2xvckNvdW50KS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIHBvdCA9IHBvdFNldC5Ub0ludDY0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZml4ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PGludCxpbnQ+KHZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodiA9PiBNYXRoLkFicyh0ZW1wbGF0ZS5TaXplc1t2XSAtIGNvbG9yQ291bnQgLyAyKSkpLkZpcnN0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYm9hcmRzQ2h1bmsgPSBuZXcgTGlzdDxCb2FyZD4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGFzc2lnbm1lbnRTZXRzIGluIEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KHZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KSh2ID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2ID09IGZpeClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5Fbkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxpbnQ+KHBvdFNldCx0ZW1wbGF0ZS5TaXplc1t2XSkuVG9MaXN0KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KHBvdFNldCwgdGVtcGxhdGUuU2l6ZXNbdl0pO1xyXG4gICAgICAgICAgICB9KSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2V0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pihhc3NpZ25tZW50U2V0cyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG90YWxDb2xvcnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4saW50PihzZXRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KShzZXQgPT4gc2V0KSkuRGlzdGluY3QoKS5Db3VudCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRvdGFsQ29sb3JzIDwgY29sb3JDb3VudClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhY2tzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sbG9uZz4oc2V0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgbG9uZz4pKGxpc3QgPT4gbGlzdC5Ub0ludDY0KCkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3VwZXJBYnVuZGFudCA9IEtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5HcmFwaC5EZWdyZWVDb25kaXRpb24oc3RhY2tzLCBwb3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvYXJkID0gbmV3IEJvYXJkKHN0YWNrcywgcG90KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoU3VwZXJhYnVuZGFudE9ubHkgJiYgIXN1cGVyQWJ1bmRhbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgYm9hcmRzLkFkZChib2FyZCk7XHJcbiAgICAgICAgICAgICAgICBib2FyZHNDaHVuay5BZGQoYm9hcmQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChib2FyZHNDaHVuay5Db3VudCA+IDEwMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFRob3VnaHRQcm9ncmVzcygpIHsgQm9hcmRzQWRkZWQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPihib2FyZHNDaHVuayksIFdpbkxlbmd0aCA9IC0xIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBib2FyZHNDaHVuay5DbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoYm9hcmRzQ2h1bmsuQ291bnQgPiAwICYmIHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVGhvdWdodFByb2dyZXNzKCkgeyBCb2FyZHNBZGRlZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KGJvYXJkc0NodW5rKSwgV2luTGVuZ3RoID0gLTEgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYm9hcmRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGludCBUcmVlTm9kZU51bWJlciA9IDE7XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPEtub3dsZWRnZVRyZWU+IEVudW1lcmF0ZUtub3dsZWRnZVRyZWVzKFRlbXBsYXRlIHRlbXBsYXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlS25vd2xlZGdlID0gS25vd2xlZGdlW3RlbXBsYXRlXTtcclxuICAgICAgICAgICAgdmFyIGNvbG9yQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oTWV0YUtub3dsZWRnZS5OYXR1cmFscygpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKG4gPT4gdGVtcGxhdGVLbm93bGVkZ2UuS25vd2xlZGdlRXhpc3RzKG4pICYmICF0ZW1wbGF0ZUtub3dsZWRnZS5Lbm93bGVkZ2VFeGlzdHMobiArIDEpKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuQm9hcmRLbm93bGVkZ2U+LGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLktub3dsZWRnZVRyZWU+KHRlbXBsYXRlS25vd2xlZGdlW2NvbG9yQ291bnRdLkVudW1lcmF0ZUJvYXJkS25vd2xlZGdlKCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuQm9hcmRLbm93bGVkZ2U+LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5Lbm93bGVkZ2VUcmVlPikoa3ZwID0+IEdlbmVyYXRlS25vd2xlZGdlVHJlZShrdnAuS2V5KSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgS25vd2xlZGdlVHJlZSBHZW5lcmF0ZUtub3dsZWRnZVRyZWUoQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUcmVlTm9kZU51bWJlciA9IDE7XHJcbiAgICAgICAgICAgIHZhciBzZWVuQ2FjaGUgPSBuZXcgRGljdGlvbmFyeTxCb2FyZCwgVHVwbGU8aW50LCBCb2FyZD4+KCk7XHJcbiAgICAgICAgICAgIHZhciBrbm93bGVkZ2VUcmVlID0gbmV3IEtub3dsZWRnZVRyZWUoKTtcclxuICAgICAgICAgICAgRmlsbEtub3dsZWRnZVRyZWUoa25vd2xlZGdlVHJlZSwgYm9hcmQsIHNlZW5DYWNoZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ga25vd2xlZGdlVHJlZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdm9pZCBGaWxsS25vd2xlZGdlVHJlZShLbm93bGVkZ2VUcmVlIGtub3dsZWRnZVRyZWUsIEJvYXJkIGJvYXJkLCBEaWN0aW9uYXJ5PEJvYXJkLCBUdXBsZTxpbnQsIEJvYXJkPj4gc2VlbkNhY2hlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAga25vd2xlZGdlVHJlZS5Cb2FyZCA9IGJvYXJkLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGtub3dsZWRnZVRyZWUuTnVtYmVyID0gVHJlZU5vZGVOdW1iZXIrKztcclxuXHJcbiAgICAgICAgICAgIHZhciBrbm93bGVkZ2UgPSBLbm93bGVkZ2VbYm9hcmQuVGVtcGxhdGUuVmFsdWVdW2JvYXJkLkNvbG9yQ291bnRdW2JvYXJkXTtcclxuICAgICAgICAgICAgaWYgKGtub3dsZWRnZS5FeGlzdHMoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtub3dsZWRnZS5SZWFzb24gIT0gXCJnb29kIHN3YXBcIilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBrbm93bGVkZ2VUcmVlLk5vdGUgPSBrbm93bGVkZ2UuUmVhc29uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFR1cGxlPGludCwgQm9hcmQ+IHNlZW5Cb2FyZDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VlbkNhY2hlLlRyeUdldFZhbHVlKGJvYXJkLCBvdXQgc2VlbkJvYXJkKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtub3dsZWRnZVRyZWUuTm90ZSA9IFwic2FtZSBhcyAjXCIgKyBzZWVuQm9hcmQuSXRlbTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0ga25vd2xlZGdlLkJvYXJkLkZpbmRQZXJtdXRhdGlvbihib2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9ycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oQm9hcmQuQXBwbHlNYXBwaW5nKGYsIG5ld1tdIHsga25vd2xlZGdlLkNvbG9yUGFpci5JdGVtMSwga25vd2xlZGdlLkNvbG9yUGFpci5JdGVtMiB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yUGFpciA9IG5ldyBUdXBsZTxpbnQsIGludD4oY29sb3JzWzBdLCBjb2xvcnNbMV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgc3dhcCBpbiBrbm93bGVkZ2UuU3dhcHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcEJvYXJkID0gYm9hcmQuQ2xvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vdmVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlLGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZT4oc3dhcC5JdGVtMiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLk1vdmUsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZT4pKG0gPT4gTWV0YUtub3dsZWRnZS5NYXBNb3ZlKGYsIG0pKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBCb2FyZC5Eb01vdmVDb21iaW5hdGlvbihtb3Zlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRLbm93bGVkZ2VUcmVlID0ga25vd2xlZGdlVHJlZS5BZGRDaGlsZChzd2FwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRLbm93bGVkZ2VUcmVlLkNvbG9yUGFpciA9IGNvbG9yUGFpcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRmlsbEtub3dsZWRnZVRyZWUoY2hpbGRLbm93bGVkZ2VUcmVlLCB0ZW1wQm9hcmQsIHNlZW5DYWNoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcInNvbWV0aGluZyB3ZW50IHdyb25nIGluIGJ1aWxkaW5nIHNlYXJjaCB0cmVlXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZWVuQ2FjaGVbYm9hcmRdID0gbmV3IFR1cGxlPGludCwgQm9hcmQ+KGtub3dsZWRnZVRyZWUuTnVtYmVyLCBib2FyZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVHVwbGU8R3JhcGgsIERpY3Rpb25hcnk8aW50LCBLZXlWYWx1ZVBhaXI8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPj4sIERpY3Rpb25hcnk8VHVwbGU8aW50LCBpbnQ+LCBUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4+PiBHZW5lcmF0ZVRlbXBsYXRlS25vd2xlZGdlR3JhcGgoVGVtcGxhdGUgdGVtcGxhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVLbm93bGVkZ2UgPSBLbm93bGVkZ2VbdGVtcGxhdGVdO1xyXG4gICAgICAgICAgICB2YXIgY29sb3JDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihNZXRhS25vd2xlZGdlLk5hdHVyYWxzKCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikobiA9PiB0ZW1wbGF0ZUtub3dsZWRnZS5Lbm93bGVkZ2VFeGlzdHMobikgJiYgIXRlbXBsYXRlS25vd2xlZGdlLktub3dsZWRnZUV4aXN0cyhuICsgMSkpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBuZXh0VmVydGV4SUQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgdmVydGV4TG9va3VwID0gbmV3IERpY3Rpb25hcnk8Qm9hcmQsIGludD4oKTtcclxuICAgICAgICAgICAgdmFyIHN3YXBMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxUdXBsZTxpbnQsIGludD4sIFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPj4oKTtcclxuICAgICAgICAgICAgdmFyIGJvYXJkTG9va3VwID0gbmV3IERpY3Rpb25hcnk8aW50LCBLZXlWYWx1ZVBhaXI8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPj4oKTtcclxuICAgICAgICAgICAgdmFyIG91dEVkZ2VzID0gbmV3IERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIga3ZwIGluIHRlbXBsYXRlS25vd2xlZGdlW2NvbG9yQ291bnRdLkVudW1lcmF0ZUJvYXJkS25vd2xlZGdlKCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZlcnRleExvb2t1cFtrdnAuS2V5XSA9IG5leHRWZXJ0ZXhJRDtcclxuICAgICAgICAgICAgICAgIGJvYXJkTG9va3VwW25leHRWZXJ0ZXhJRF0gPSBrdnA7XHJcbiAgICAgICAgICAgICAgICBvdXRFZGdlc1tuZXh0VmVydGV4SURdID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgbmV4dFZlcnRleElEKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIHRlbXBsYXRlS25vd2xlZGdlLkxvc3RCb2FyZHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZlcnRleExvb2t1cFtiXSA9IG5leHRWZXJ0ZXhJRDtcclxuICAgICAgICAgICAgICAgIGJvYXJkTG9va3VwW25leHRWZXJ0ZXhJRF0gPSBuZXcgS2V5VmFsdWVQYWlyPEJvYXJkLCBCb2FyZEtub3dsZWRnZT4oYiwgbmV3IEJvYXJkS25vd2xlZGdlKGIsIFwiYnJlYWtlciB3aW5zXCIpKTtcclxuICAgICAgICAgICAgICAgIG91dEVkZ2VzW25leHRWZXJ0ZXhJRF0gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICBuZXh0VmVydGV4SUQrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGt2cCBpbiB0ZW1wbGF0ZUtub3dsZWRnZVtjb2xvckNvdW50XS5FbnVtZXJhdGVCb2FyZEtub3dsZWRnZSgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoa3ZwLlZhbHVlLlJlYXNvbiA9PSBcImdvb2Qgc3dhcFwiKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gdmVydGV4TG9va3VwW2t2cC5LZXldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGt2cC5WYWx1ZS5Cb2FyZC5GaW5kUGVybXV0YXRpb24oa3ZwLktleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9ycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oQm9hcmQuQXBwbHlNYXBwaW5nKGYsIG5ld1tdIHsga3ZwLlZhbHVlLkNvbG9yUGFpci5JdGVtMSwga3ZwLlZhbHVlLkNvbG9yUGFpci5JdGVtMiB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yUGFpciA9IG5ldyBUdXBsZTxpbnQsIGludD4oY29sb3JzWzBdLCBjb2xvcnNbMV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgc3dhcCBpbiBrdnAuVmFsdWUuU3dhcHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcEJvYXJkID0ga3ZwLktleS5DbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW92ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLk1vdmUsZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlPihzd2FwLkl0ZW0yLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZSwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlPikobSA9PiBNZXRhS25vd2xlZGdlLk1hcE1vdmUoZiwgbSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcEJvYXJkLkRvTW92ZUNvbWJpbmF0aW9uKG1vdmVzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ID0gdmVydGV4TG9va3VwW3RlbXBCb2FyZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dEVkZ2VzW3ZdLkFkZCh3KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3YXBMb29rdXBbbmV3IFR1cGxlPGludCwgaW50Pih2LCB3KV0gPSBzd2FwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVkZ2VXZWlnaHRzID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG5leHRWZXJ0ZXhJRDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBuZXh0VmVydGV4SUQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3V0RWRnZXNbaV0uQ29udGFpbnMoaikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VXZWlnaHRzLkFkZCgxKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvdXRFZGdlc1tqXS5Db250YWlucyhpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRnZVdlaWdodHMuQWRkKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VXZWlnaHRzLkFkZCgwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUdXBsZTxHcmFwaCwgRGljdGlvbmFyeTxpbnQsIEtleVZhbHVlUGFpcjxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+PiwgRGljdGlvbmFyeTxUdXBsZTxpbnQsIGludD4sIFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPj4+KG5ldyBHcmFwaChlZGdlV2VpZ2h0cyksIGJvYXJkTG9va3VwLCBzd2FwTG9va3VwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgUG90S25vd2xlZGdlXHJcbiAgICB7XHJcbiAgICAgICAgRGljdGlvbmFyeTxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+IF9ib2FyZExvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PEJvYXJkLCBCb2FyZEtub3dsZWRnZT4oKTtcclxuICAgICAgICBEaWN0aW9uYXJ5PHN0cmluZywgRGljdGlvbmFyeTxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+PiBfaW1wcm92ZW1lbnRMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIERpY3Rpb25hcnk8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPj4oKTtcclxuICAgICAgICBIYXNoU2V0PEJvYXJkPiBfbG9zdEJvYXJkcyA9IG5ldyBIYXNoU2V0PEJvYXJkPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50IENvbG9yQ291bnQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFR1cGxlPGludCwgaW50Pj4gQ29sb3JQYWlycyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8Qm9hcmQ+IExvc3RCb2FyZHMgeyBnZXQgeyByZXR1cm4gX2xvc3RCb2FyZHM7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgQm9hcmRLbm93bGVkZ2UgdGhpc1tCb2FyZCBib2FyZF0gXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgICAgZ2V0IFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBCb2FyZEtub3dsZWRnZSBiO1xyXG4gICAgICAgICAgICAgICAgX2JvYXJkTG9va3VwLlRyeUdldFZhbHVlKGJvYXJkLCBvdXQgYik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYjtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIERpY3Rpb25hcnk8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPiBJbXByb3ZlbWVudExvb2t1cChzdHJpbmcgcmVhc29uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRGljdGlvbmFyeTxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+IGxvb2t1cDtcclxuICAgICAgICAgICAgaWYgKCFfaW1wcm92ZW1lbnRMb29rdXAuVHJ5R2V0VmFsdWUocmVhc29uLCBvdXQgbG9va3VwKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9va3VwID0gbmV3IERpY3Rpb25hcnk8Qm9hcmQsIEJvYXJkS25vd2xlZGdlPigpO1xyXG4gICAgICAgICAgICAgICAgX2ltcHJvdmVtZW50TG9va3VwW3JlYXNvbl0gPSBsb29rdXA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsb29rdXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBCb2FyZEtub3dsZWRnZSB0aGlzW3N0cmluZyByZWFzb24sIEJvYXJkIGJvYXJkXVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEJvYXJkS25vd2xlZGdlIGI7XHJcbiAgICAgICAgICAgICAgICBJbXByb3ZlbWVudExvb2t1cChyZWFzb24pLlRyeUdldFZhbHVlKGJvYXJkLCBvdXQgYik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgSW1wcm92ZW1lbnRMb29rdXAocmVhc29uKVtib2FyZF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFBvdEtub3dsZWRnZShpbnQgY29sb3JDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvbG9yQ291bnQgPSBjb2xvckNvdW50O1xyXG4gICAgICAgICAgICBTZXR1cENvbG9yUGFpcnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBCb2FyZEtub3dsZWRnZSBBZGRXaW4oQm9hcmQgYm9hcmQsIHN0cmluZyByZWFzb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIga25vd2xlZGdlID0gbmV3IEJvYXJkS25vd2xlZGdlKGJvYXJkLCByZWFzb24pO1xyXG4gICAgICAgICAgICBfYm9hcmRMb29rdXBbYm9hcmRdID0ga25vd2xlZGdlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGtub3dsZWRnZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBCb2FyZEtub3dsZWRnZSBBZGRXaW4oQm9hcmQgYm9hcmQsIHN0cmluZyByZWFzb24sIGludCB3aW5EZXB0aCwgVHVwbGU8aW50LCBpbnQ+IGNvbG9yUGFpciwgTGlzdDxUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4+IGdvb2RTd2FwcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBrbm93bGVkZ2UgPSBuZXcgQm9hcmRLbm93bGVkZ2UoYm9hcmQsIHJlYXNvbikgeyBEZXB0aCA9IHdpbkRlcHRoLCBDb2xvclBhaXIgPSBjb2xvclBhaXIsIFN3YXBzID0gZ29vZFN3YXBzIH07XHJcbiAgICAgICAgICAgIF9ib2FyZExvb2t1cFtib2FyZF0gPSBrbm93bGVkZ2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ga25vd2xlZGdlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEJvYXJkS25vd2xlZGdlIEFkZEltcHJvdmVtZW50KEJvYXJkIGJvYXJkLCBzdHJpbmcgcmVhc29uLCBpbnQgd2luRGVwdGgsIFR1cGxlPGludCwgaW50PiBjb2xvclBhaXIsIExpc3Q8VHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+PiBnb29kU3dhcHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIga25vd2xlZGdlID0gbmV3IEJvYXJkS25vd2xlZGdlKGJvYXJkLCByZWFzb24pIHsgRGVwdGggPSB3aW5EZXB0aCwgQ29sb3JQYWlyID0gY29sb3JQYWlyLCBTd2FwcyA9IGdvb2RTd2FwcyB9O1xyXG4gICAgICAgICAgICB0aGlzW3JlYXNvbiwgYm9hcmRdID0ga25vd2xlZGdlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGtub3dsZWRnZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZExvc3MoQm9hcmQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9sb3N0Qm9hcmRzLkFkZChiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgU2V0dXBDb2xvclBhaXJzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENvbG9yUGFpcnMgPSBuZXcgTGlzdDxUdXBsZTxpbnQsIGludD4+KCk7XHJcbiAgICAgICAgICAgIHZhciBjb2xvcnMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIENvbG9yQ291bnQpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xvcnMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IGNvbG9ycy5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIENvbG9yUGFpcnMuQWRkKG5ldyBUdXBsZTxpbnQsIGludD4oY29sb3JzW2ldLCBjb2xvcnNbal0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENvcHlJbnRvKFBvdEtub3dsZWRnZSBwb3RLbm93bGVkZ2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIga3ZwIGluIF9ib2FyZExvb2t1cClcclxuICAgICAgICAgICAgICAgIHBvdEtub3dsZWRnZS5BZGRXaW4oa3ZwLktleSwga3ZwLlZhbHVlLlJlYXNvbiwga3ZwLlZhbHVlLkRlcHRoLCBrdnAuVmFsdWUuQ29sb3JQYWlyLCBrdnAuVmFsdWUuU3dhcHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPEtleVZhbHVlUGFpcjxCb2FyZCwgQm9hcmRLbm93bGVkZ2U+PiBFbnVtZXJhdGVCb2FyZEtub3dsZWRnZSgpXHJcbiAgICAgICAgeyBcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeURlc2NlbmRpbmc8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5LZXlWYWx1ZVBhaXI8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuQm9hcmRLbm93bGVkZ2U+LGludD4oX2JvYXJkTG9va3VwLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLkJvYXJkS25vd2xlZGdlPiwgaW50PikoeCA9PiB4LlZhbHVlLkRlcHRoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTbGltU3dhcEFuYWx5emVyXHJcbiAgICB7XHJcbiAgICAgICAgS25vd2xlZGdlIF9rbm93bGVkZ2U7XHJcbiAgICAgICAgRGljdGlvbmFyeTxpbnQsIEJvYXJkPiBfYm9hcmRMb29rdXA7XHJcbiAgICAgICAgRGljdGlvbmFyeTxCb2FyZCwgaW50PiBfYm9hcmRJRExvb2t1cDtcclxuICAgICAgICBEaWN0aW9uYXJ5PGludCwgTGlzdDxMaXN0PFNvcnRlZEludExpc3Q+Pj4gX3NocnVicyA9IG5ldyBEaWN0aW9uYXJ5PGludCwgTGlzdDxMaXN0PFNvcnRlZEludExpc3Q+Pj4oKTtcclxuICAgICAgICBib29sIF91c2VTaHJ1YnM7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTbGltU3dhcEFuYWx5emVyKEtub3dsZWRnZSBrbm93bGVkZ2UsIERpY3Rpb25hcnk8aW50LCBCb2FyZD4gYm9hcmRMb29rdXAsIERpY3Rpb25hcnk8Qm9hcmQsIGludD4gYm9hcmRJRExvb2t1cCwgYm9vbCB1c2VTaHJ1YnMgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9rbm93bGVkZ2UgPSBrbm93bGVkZ2U7XHJcbiAgICAgICAgICAgIF9ib2FyZExvb2t1cCA9IGJvYXJkTG9va3VwO1xyXG4gICAgICAgICAgICBfYm9hcmRJRExvb2t1cCA9IGJvYXJkSURMb29rdXA7XHJcbiAgICAgICAgICAgIF91c2VTaHJ1YnMgPSB1c2VTaHJ1YnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKGludCBib2FyZElELCBTb3J0ZWRJbnRMaXN0IHdvbkJvYXJkSURzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFfdXNlU2hydWJzKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFuYWx5emVTaHJ1YkZyZWUoYm9hcmRJRCwgd29uQm9hcmRJRHMpO1xyXG5cclxuICAgICAgICAgICAgTGlzdDxMaXN0PFNvcnRlZEludExpc3Q+PiBzaHJ1YjtcclxuICAgICAgICAgICAgaWYgKCFfc2hydWJzLlRyeUdldFZhbHVlKGJvYXJkSUQsIG91dCBzaHJ1YikpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gSW5pdGlhbGl6ZVNocnVicyhib2FyZElELCB3b25Cb2FyZElEcyk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY29sb3JQYWlyTGlzdCBpbiBzaHJ1YilcclxuICAgICAgICAgICAge1xyXG5BbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlNvcnRlZEludExpc3Q+KCAgICAgICAgICAgICAgICBjb2xvclBhaXJMaXN0LChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU29ydGVkSW50TGlzdCwgYm9vbD4pKGJyYW5jaExpc3QgPT4gYnJhbmNoTGlzdC5JbnRlcnNlY3RzKHdvbkJvYXJkSURzKSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5Tb3J0ZWRJbnRMaXN0PikoKHgpID0+IHsgfSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbG9yUGFpckxpc3QuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBBbmFseXplU2hydWJGcmVlKGludCBib2FyZElELCBTb3J0ZWRJbnRMaXN0IHdvbkJvYXJkSURzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJvYXJkID0gX2JvYXJkTG9va3VwW2JvYXJkSURdO1xyXG4gICAgICAgICAgICB2YXIgcG90S25vd2xlZGdlID0gX2tub3dsZWRnZVtib2FyZC5UZW1wbGF0ZS5WYWx1ZV1bYm9hcmQuQ29sb3JDb3VudF07XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY29sb3JQYWlyIGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeURlc2NlbmRpbmc8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LGludD4ocG90S25vd2xlZGdlLkNvbG9yUGFpcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LCBpbnQ+KShwYWlyID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihDaHJvbmljbGUuQnJhbmNoR2VuZXJhdG9yLkVudW1lcmF0ZUV4YWN0bHlPbmVJbnRlcnNlY3RlcnMoYm9hcmQsIHBhaXIpKSAlIDIpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBicmFuY2ggaW4gQ2hyb25pY2xlLkJyYW5jaEdlbmVyYXRvci5FbnVtZXJhdGVCcmFuY2hlcyhib2FyZCwgY29sb3JQYWlyKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgd2lubmluZ1N3YXBFeGlzdHMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHN3YXAgaW4gYnJhbmNoKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9hcmQuRG9Nb3ZlQ29tYmluYXRpb24oc3dhcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZElEID0gX2JvYXJkSURMb29rdXBbYm9hcmRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2FyZC5Eb01vdmVDb21iaW5hdGlvbihzd2FwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b25Cb2FyZElEcy5Db250YWlucyhjaGlsZElEKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghd2lubmluZ1N3YXBFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIEluaXRpYWxpemVTaHJ1YnMoaW50IGJvYXJkSUQsIFNvcnRlZEludExpc3Qgd29uQm9hcmRJRHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2hydWIgPSBuZXcgTGlzdDxMaXN0PFNvcnRlZEludExpc3Q+PigpO1xyXG4gICAgICAgICAgICBfc2hydWJzW2JvYXJkSURdID0gc2hydWI7XHJcblxyXG4gICAgICAgICAgICB2YXIgYm9hcmQgPSBfYm9hcmRMb29rdXBbYm9hcmRJRF07XHJcbiAgICAgICAgICAgIHZhciBwb3RLbm93bGVkZ2UgPSBfa25vd2xlZGdlW2JvYXJkLlRlbXBsYXRlLlZhbHVlXVtib2FyZC5Db2xvckNvdW50XTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2xvclBhaXIgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5RGVzY2VuZGluZzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4saW50Pihwb3RLbm93bGVkZ2UuQ29sb3JQYWlycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4sIGludD4pKHBhaXIgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KENocm9uaWNsZS5CcmFuY2hHZW5lcmF0b3IuRW51bWVyYXRlRXhhY3RseU9uZUludGVyc2VjdGVycyhib2FyZCwgcGFpcikpICUgMikpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sb3JQYWlyTGlzdCA9IG5ldyBMaXN0PFNvcnRlZEludExpc3Q+KCk7XHJcbiAgICAgICAgICAgICAgICBzaHJ1Yi5BZGQoY29sb3JQYWlyTGlzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBicmFuY2ggaW4gQ2hyb25pY2xlLkJyYW5jaEdlbmVyYXRvci5FbnVtZXJhdGVCcmFuY2hlcyhib2FyZCwgY29sb3JQYWlyKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYnJhbmNoTGlzdCA9IG5ldyBTb3J0ZWRJbnRMaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwRXhpc3RzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzd2FwIGluIGJyYW5jaClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvYXJkLkRvTW92ZUNvbWJpbmF0aW9uKHN3YXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRJRCA9IF9ib2FyZElETG9va3VwW2JvYXJkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9hcmQuRG9Nb3ZlQ29tYmluYXRpb24oc3dhcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod29uQm9hcmRJRHMuQ29udGFpbnMoY2hpbGRJRCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmFuY2hMaXN0LkFkZChjaGlsZElEKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghd2lubmluZ1N3YXBFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvclBhaXJMaXN0LkFkZChicmFuY2hMaXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBBbHdheXNFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU29ydGVkSW50TGlzdFxyXG4gICAge1xyXG4gICAgICAgIGludFtdIF9kYXRhO1xyXG4gICAgICAgIGludCBfbGVuZ3RoO1xyXG5cclxuICAgICAgICBwdWJsaWMgU29ydGVkSW50TGlzdChpbnQgaW5pdGlhbENhcGFjaXR5ID0gMTYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZGF0YSA9IG5ldyBpbnRbaW5pdGlhbENhcGFjaXR5XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZChpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gQXJyYXkuQmluYXJ5U2VhcmNoPGludD4oX2RhdGEsIDAsIF9sZW5ndGgsIHgpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgRW5zdXJlQ2FwYWNpdHkoKTtcclxuXHJcbiAgICAgICAgICAgIGkgPSB+aTtcclxuICAgICAgICAgICAgaWYgKGkgPCBfbGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgQXJyYXkuQ29weShfZGF0YSwgaSwgX2RhdGEsIGkgKyAxLCBfbGVuZ3RoIC0gaSk7XHJcblxyXG4gICAgICAgICAgICBfZGF0YVtpXSA9IHg7XHJcbiAgICAgICAgICAgIF9sZW5ndGgrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbnRhaW5zKGludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFycmF5LkJpbmFyeVNlYXJjaDxpbnQ+KF9kYXRhLCAwLCBfbGVuZ3RoLCB4KSA+PSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSW50ZXJzZWN0cyhTb3J0ZWRJbnRMaXN0IG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGogPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGsgPSBBcnJheS5CaW5hcnlTZWFyY2g8aW50PihvdGhlci5fZGF0YSwgaiwgb3RoZXIuX2xlbmd0aCAtIGosIF9kYXRhW2ldKTtcclxuICAgICAgICAgICAgICAgIGlmIChrID49IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICBqID0gfms7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBFbnN1cmVDYXBhY2l0eSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX2xlbmd0aCA+PSBfZGF0YS5MZW5ndGgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbmV3IGludFsyICogX2RhdGEuTGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIEFycmF5LkNvcHkoX2RhdGEsIGRhdGEsIF9kYXRhLkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICBfZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXJcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCb2FyZExleGlmaWVyXHJcbiAgICB7XHJcbiAgICAgICAgc3RhdGljIERpY3Rpb25hcnk8c3RyaW5nLCBUdXBsZTxzdHJpbmcsIFBlcm11dGF0aW9uPj4gX2xvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgVHVwbGU8c3RyaW5nLCBQZXJtdXRhdGlvbj4+KCk7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihsb25nW10gc3MsIG91dCBQZXJtdXRhdGlvbiBwcCwgaW50IG1heFBvdCA9IC0xKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxpc3RzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oc3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShsID0+IGwuVG9TZXQoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgcG90ID0gbWF4UG90O1xyXG4gICAgICAgICAgICBpZiAocG90IDw9IDApXHJcbiAgICAgICAgICAgICAgICBwb3QgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4saW50PihsaXN0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+PikobCA9PiBsKSkuRGlzdGluY3QoKS5Db3VudCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHN0YWNrcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGxpc3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikocyA9PiBzLkNvdW50IDw9IHBvdCkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gVG9MZXhPcmRlcihzdHJpbmcuSm9pbihcInxcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sc3RyaW5nPihzdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIHN0cmluZz4pKHMgPT4gc3RyaW5nLkpvaW48aW50PihcIlwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8aW50LGludD4ocywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHggPT4geCkpKSkpKSwgb3V0IHBwLCBtYXhQb3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHN0cmluZyBUb0xleE9yZGVyKHN0cmluZyBzdGFja3NTdHJpbmcsIG91dCBQZXJtdXRhdGlvbiBwcCwgaW50IG1heFBvdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBzdGFja3NTdHJpbmcgKyBcIjtcIiArIG1heFBvdDtcclxuICAgICAgICAgICAgVHVwbGU8c3RyaW5nLCBQZXJtdXRhdGlvbj4gdHVwO1xyXG4gICAgICAgICAgICBpZiAoX2xvb2t1cC5UcnlHZXRWYWx1ZShrZXksIG91dCB0dXApKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwcCA9IHR1cC5JdGVtMjtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0dXAuSXRlbTE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHBwID0gbnVsbDtcclxuICAgICAgICAgICAgc3RyaW5nIGxleFNtYWxsZXN0O1xyXG4gICAgICAgICAgICB2YXIgc3RhY2tzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8c3RyaW5nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihzdGFja3NTdHJpbmcuU3BsaXQoJ3wnKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikocyA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxjaGFyLGludD4ocy5Ub0NoYXJBcnJheSgpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGNoYXIsIGludD4pKGMgPT4gaW50LlBhcnNlKGMuVG9TdHJpbmcoKSkpKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBsZXhTbWFsbGVzdCA9IHN0YWNrc1N0cmluZztcclxuXHJcbiAgICAgICAgICAgIHZhciBwb3QgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4saW50PihzdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4pKGwgPT4gbCkpLkRpc3RpbmN0KCkuQ291bnQoKTtcclxuICAgICAgICAgICAgaWYgKG1heFBvdCA+IDApXHJcbiAgICAgICAgICAgICAgICBwb3QgPSBtYXhQb3Q7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgcCBpbiBQZXJtdXRhdGlvbi5FbnVtZXJhdGVBbGwocG90KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBlcm11dGVkU3RyaW5nID0gc3RyaW5nLkpvaW4oXCJ8XCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LHN0cmluZz4oc3RhY2tzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBzdHJpbmc+KShzID0+IHN0cmluZy5Kb2luPGludD4oXCJcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4ocywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGEgPT4gcFthXSkpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHggPT4geCkpKSkpKTtcclxuICAgICAgICAgICAgICAgIGlmIChwZXJtdXRlZFN0cmluZy5Db21wYXJlVG8obGV4U21hbGxlc3QpIDw9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV4U21hbGxlc3QgPSBwZXJtdXRlZFN0cmluZztcclxuICAgICAgICAgICAgICAgICAgICBwcCA9IHA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF9sb29rdXBba2V5XSA9IG5ldyBUdXBsZTxzdHJpbmcsIFBlcm11dGF0aW9uPihsZXhTbWFsbGVzdCwgcHApO1xyXG4gICAgICAgICAgICByZXR1cm4gbGV4U21hbGxlc3Q7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlclxyXG57XHJcbiAgICBzdGF0aWMgY2xhc3MgSGFzaGluZ1xyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGludCBNYXhMZW5ndGggPSAzMjtcclxuICAgICAgICBzdGF0aWMgTGlzdDx1bG9uZz4gX207XHJcblxyXG4gICAgICAgIHN0YXRpYyBIYXNoaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9tID0gbmV3IExpc3Q8dWxvbmc+KE1heExlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgUk5HID0gbmV3IFJhbmRvbShEYXRlVGltZS5Ob3cuTWlsbGlzZWNvbmQpO1xyXG4gICAgICAgICAgICB2YXIgYiA9IG5ldyBieXRlWzhdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBNYXhMZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUk5HLk5leHRCeXRlcyhiKTtcclxuICAgICAgICAgICAgICAgIF9tLkFkZChCaXRDb252ZXJ0ZXIuVG9VSW50NjQoYiwgMCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBIYXNoKHVsb25nW10gbGlzdCwgaW50IGxlbmd0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIGhhc2ggPSBsaXN0WzBdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGhhc2ggKz0gX21baSAtIDFdICogbGlzdFtpXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KShoYXNoID4+IDMyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mc1xyXG57XHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgY2xhc3MgUHJvb2ZCdWlsZGVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbU1pbmQgTWluZCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxQcm9vZkNhc2U+IENhc2VzIHsgZ2V0OyBwcm90ZWN0ZWQgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgVXNlUGVybXV0YXRpb25zIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFByb29mQnVpbGRlcihTdXBlclNsaW1NaW5kIG1pbmQsIGJvb2wgdXNlUGVybXV0YXRpb25zID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNaW5kID0gbWluZDtcclxuICAgICAgICAgICAgVXNlUGVybXV0YXRpb25zID0gdXNlUGVybXV0YXRpb25zO1xyXG4gICAgICAgICAgICBFeHRyYWN0Q2FzZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgRXh0cmFjdENhc2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENhc2VzID0gbmV3IExpc3Q8UHJvb2ZDYXNlPigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNhc2VOdW1iZXIgPSAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9yYWJsZUNhc2UgPSBuZXcgUHJvb2ZDYXNlKE1pbmQsIDAsIE1pbmQuQ29sb3JhYmxlQm9hcmRzKTtcclxuICAgICAgICAgICAgQ2FzZXMuQWRkKGNvbG9yYWJsZUNhc2UpO1xyXG4gICAgICAgICAgICBjYXNlTnVtYmVyKys7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVtYWluaW5nQm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oTWluZC5Ob25Db2xvcmFibGVCb2FyZHMpO1xyXG4gICAgICAgICAgICB2YXIgd29uQm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oTWluZC5Db2xvcmFibGVCb2FyZHMpO1xyXG4gICAgICAgICAgICB3aGlsZSAocmVtYWluaW5nQm9hcmRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb29mQ2FzZSA9IG5ldyBQcm9vZkNhc2UoTWluZCwgY2FzZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICBDYXNlcy5BZGQocHJvb2ZDYXNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYWRkZWRCb2FyZHMgPSBuZXcgTGlzdDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBib2FyZCBpbiByZW1haW5pbmdCb2FyZHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWVJbmZvID0gTWluZC5HZXRXaW5UcmVlSW5mbyhib2FyZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gd29uQm9hcmRzLkNvbnRhaW5zKG5ldyBTdXBlclNsaW1Cb2FyZChib2FyZC5fdHJhY2UsIGJjLkFscGhhLCBiYy5CZXRhLCBiYy5SZXNwb25zZSwgYm9hcmQuX3N0YWNrQ291bnQpKSkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRlZEJvYXJkcy5BZGQoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBib2FyZCBpbiBhZGRlZEJvYXJkcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9vZkNhc2UuQWRkQm9hcmQoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdvbkJvYXJkcy5BZGQoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbWFpbmluZ0JvYXJkcy5SZW1vdmUoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNhc2VOdW1iZXIrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgaW50IEdldEhhbmRsZWRDYXNlTnVtYmVyKFN1cGVyU2xpbUJvYXJkIGIsIEJyZWFrZXJDaG9pY2VJbmZvIGJjKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkQm9hcmQgPSBuZXcgU3VwZXJTbGltQm9hcmQoYi5fdHJhY2UsIGJjLkFscGhhLCBiYy5CZXRhLCBiYy5SZXNwb25zZSwgYi5fc3RhY2tDb3VudCk7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5JbmRpY2VzV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuUHJvb2ZDYXNlPihDYXNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5Qcm9vZkNhc2UsIGJvb2w+KShjYyA9PiBjYy5Cb2FyZHMuQ29udGFpbnMoY2hpbGRCb2FyZCkpKSkgKyAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IHN0cmluZyBXcml0ZVByb29mKCk7XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgRXh0ZW5zaW9uc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIEdldEFydGljbGUodGhpcyBzdHJpbmcgbGV0dGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3dpdGNoIChsZXR0ZXIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJYXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYW5cIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJZXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiYVwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIlpcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgTGlzdGlmeTxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IHN0cmluZ3MsIHN0cmluZyBjb25uZWN0b3IgPSBcImFuZFwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxsID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8VD4oc3RyaW5ncyk7XHJcbiAgICAgICAgICAgIGlmIChsbC5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgICAgIGlmIChsbC5Db3VudCA9PSAxKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxsWzBdLlRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29ubmVjdG9yICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW48VD4oXCIsIFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8VD4obGwsbGwuQ291bnQgLSAxKSkgKyBcIiBcIiArIGNvbm5lY3RvciArIFwiIFwiICsgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5MYXN0PFQ+KGxsKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbjxUPihcIiwgXCIsIGxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFdvcmRpZnkodGhpcyBpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAobilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImZpcnN0XCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic2Vjb25kXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidGhpcmRcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJmb3VydGhcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJmaWZ0aFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInNpeHRoXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic2V2ZW50aFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImVpZ2h0aFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm5pbnRoXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidGVudGhcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTA6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZWxldmVudGhcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChuICsgMSkgKyBcIi10aFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxUPiBFeGNlcHQ8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBsaXN0LCBUIHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8VD4obGlzdCxuZXdbXSB7IHQgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBNYXhJbmRleDxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IGxpc3QsIEZ1bmM8VCwgaW50PiB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtYXhJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICB2YXIgbWF4ID0gaW50Lk1pblZhbHVlO1xyXG4gICAgICAgICAgICBpbnQgaSA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIGxpc3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB2ID0gdmFsdWUodCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodiA+IG1heClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXggPSB2O1xyXG4gICAgICAgICAgICAgICAgICAgIG1heEluZGV4ID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYXhJbmRleDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8VD4gRGlzdGluY3Q8VCwgUz4odGhpcyBJRW51bWVyYWJsZTxUPiBsaXN0LCBGdW5jPFQsIFM+IHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGRpc3RpbmN0ID0gbmV3IExpc3Q8VD4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gbGlzdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxUPihkaXN0aW5jdCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxULCBib29sPikodHQgPT4gdmFsdWUodHQpLkVxdWFscyh2YWx1ZSh0KSkpKSlcclxuICAgICAgICAgICAgICAgICAgICBkaXN0aW5jdC5BZGQodCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkaXN0aW5jdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuQXJiaXRyYXJ5TWF4RGVncmVlXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgRXh0ZW5zaW9uc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvVGV4KHRoaXMgU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXIgbWF0Y2hlciwgTGlzdDxMaXN0PGludD4+IGxpc3RzLCBpbnQgbGlzdFNpemUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobWF0Y2hlci5OYW1lID09IFwiKlwiKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwiXCIsIEVudW1lcmFibGUuUmVwZWF0PHN0cmluZz4oXCJcXFxcd2lsZFwiLCBsaXN0U2l6ZSkpICsgXCIgXCI7XHJcblxyXG4gICAgICAgICAgICBpbnQgaTtcclxuICAgICAgICAgICAgaWYgKCFpbnQuVHJ5UGFyc2UobWF0Y2hlci5OYW1lLCBvdXQgaSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI/XCI7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW48aW50PihcIlwiLCBsaXN0c1tpXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBHZXRBY3RpdmVMaXN0SW5kZXgodGhpcyBpbnQgaSwgU3VwZXJTbGltQm9hcmQgYiwgaW50IG1heFBvdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8bG9uZz4oYi5TdGFja3MuVmFsdWUsaSArIDEpLkNvdW50KChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGJvb2w+KShzcyA9PiBzcy5Qb3B1bGF0aW9uQ291bnQoKSA8IG1heFBvdCkpIC0gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuTWF4RGVncmVlVGhyZWVcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBFeHRlbnNpb25zXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3RyaW5nIEFscGhhYmV0ID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWlwiO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1hZWih0aGlzIFN1cGVyU2xpbUJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwiXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsc3RyaW5nPihib2FyZC5TdGFja3MuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgc3RyaW5nPilUb1hZWikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gVG8wMTIodGhpcyBTdXBlclNsaW1Cb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLGludD4oYm9hcmQuU3RhY2tzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGludD4pVG8wMTIpLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHggPT4geCA+PSAwKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb0NvbXBhY3RlZFBhcnRpdGlvbklkKHRoaXMgU3VwZXJTbGltQm9hcmQgYm9hcmQsIExpc3Q8TGlzdDxpbnQ+PiBwYXJ0aXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeHl6ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxzdHJpbmc+KGJvYXJkLlN0YWNrcy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBzdHJpbmc+KVRvWFlaKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHh5ei5Ub1BhcnRpdGlvbklkKHBhcnRpdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1BhcnRpdGlvbklkKHRoaXMgU3VwZXJTbGltQm9hcmQgYm9hcmQsIExpc3Q8TGlzdDxpbnQ+PiBwYXJ0aXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeHl6ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxzdHJpbmc+KGJvYXJkLlN0YWNrcy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBzdHJpbmc+KShzdGFjayA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gc3RhY2suVG9YWVooKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocy5MZW5ndGggPD0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiKlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgICAgICAgICAgfSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHh5ei5Ub1BhcnRpdGlvbklkKHBhcnRpdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1BhcnRpdGlvbklkKHRoaXMgTGlzdDxzdHJpbmc+IHh5eiwgTGlzdDxMaXN0PGludD4+IHBhcnRpdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwcCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KHBhcnRpdGlvbiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikocGFydCA9PiBwYXJ0Lk1pbigpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcHAuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGwgPSBBbHBoYWJldFtpXS5Ub1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGogaW4gcHBbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgeHl6W2pdID0gbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwiXCIsIHh5eik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1hZWih0aGlzIGxvbmcgc3RhY2spXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHN0YWNrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiWFwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIllcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJaXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgVG8wMTIodGhpcyBsb25nIHN0YWNrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHN0YWNrID4gNilcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgcmV0dXJuICgoaW50KXN0YWNrIC8gMikgLSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgR2V0WFlaSW5kZXgodGhpcyBpbnQgaSwgU3VwZXJTbGltQm9hcmQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8bG9uZz4oYi5TdGFja3MuVmFsdWUsaSArIDEpLkNvdW50KChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGJvb2w+KShzcyA9PiBzcy5Qb3B1bGF0aW9uQ291bnQoKSA9PSAyKSkgLSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9UZXgodGhpcyBTZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlciBtYXRjaGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3dpdGNoIChtYXRjaGVyLk5hbWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIqXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXFxcXHdpbGQgXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiMFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlhcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIxXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiWVwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIjJcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJaXCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiITBcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJcXFxcYmFye3tYfX1cIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIhMVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlxcXFxiYXJ7e1l9fVwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIiEyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXFxcXGJhcnt7Wn19XCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBcIj9cIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgUHJvb2ZDYXNlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbU1pbmQgTWluZCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxTdXBlclNsaW1Cb2FyZD4gQm9hcmRzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEJyZWFrZXJXaW4geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ2FzZU51bWJlciB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBTdXBlcmFidW5kYW50IHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFByb29mQ2FzZShTdXBlclNsaW1NaW5kIG1pbmQsIGludCBjYXNlTnVtYmVyLCBMaXN0PFN1cGVyU2xpbUJvYXJkPiBib2FyZHMgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTWluZCA9IG1pbmQ7XHJcbiAgICAgICAgICAgIENhc2VOdW1iZXIgPSBjYXNlTnVtYmVyO1xyXG4gICAgICAgICAgICBCb2FyZHMgPSBib2FyZHM7XHJcbiAgICAgICAgICAgIGlmIChCb2FyZHMgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIEJvYXJkcyA9IG5ldyBMaXN0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkQm9hcmQoU3VwZXJTbGltQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBCb2FyZHMuQWRkKGJvYXJkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQWxnb3JpdGhtcy5EYXRhU3RydWN0dXJlcztcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFN1cGVyU2xpbUJvYXJkXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIExhenk8bG9uZ1tdPiBTdGFja3MgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIHVsb25nW10gX3RyYWNlO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgX2xlbmd0aDtcclxuICAgICAgICBwdWJsaWMgaW50IF9zdGFja0NvdW50O1xyXG4gICAgICAgIGludCBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVHVwbGU8U3VwZXJTbGltQm9hcmQsIEJpamVjdGlvbjxpbnQsIFQ+PiBDcmVhdGU8VD4oTGlzdDxMaXN0PFQ+PiBsaXN0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwb3QgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LFQ+KGxpc3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPj4pKGwgPT4gbCkpLkRpc3RpbmN0KCkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBudW1iZXJpbmcgPSBBbGdvcml0aG1zLkRhdGFTdHJ1Y3R1cmVzLkJpamVjdGlvbkV4dGVuc2lvbnMuTnVtYmVyT2JqZWN0czxUPihwb3QpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGludExpc3RzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihsaXN0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikobCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KG51bWJlcmluZy5BcHBseShsKSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIHRyYWNlID0gbmV3IHVsb25nW3BvdC5Db3VudF07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgdHJhY2VbaV0gPSBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkluZGljZXNXaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oaW50TGlzdHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShsbCA9PiBsbC5Db250YWlucyhpKSkpLlRvVUludDY0KCk7XHJcblxyXG4gICAgICAgICAgICBwb3QgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8VCx1bG9uZz4ocG90LChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIHVsb25nPikoYyA9PiB0cmFjZVtwb3QuSW5kZXhPZihjKV0pKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgbnVtYmVyaW5nID0gQWxnb3JpdGhtcy5EYXRhU3RydWN0dXJlcy5CaWplY3Rpb25FeHRlbnNpb25zLk51bWJlck9iamVjdHM8VD4ocG90KTtcclxuXHJcbiAgICAgICAgICAgIEFycmF5LlNvcnQ8dWxvbmc+KHRyYWNlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUdXBsZTxTdXBlclNsaW1Cb2FyZCwgQmlqZWN0aW9uPGludCwgVD4+KG5ldyBTdXBlclNsaW1Cb2FyZCh0cmFjZSwgbGlzdHMuQ291bnQpLCBudW1iZXJpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBTdXBlclNsaW1Cb2FyZCBGcm9tTGlzdHMoTGlzdDxMaXN0PGludD4+IGxpc3RzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHBvdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KGxpc3RzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KShsID0+IGwpKS5EaXN0aW5jdCgpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgdHJhY2UgPSBuZXcgdWxvbmdbcG90LkNvdW50XTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB0cmFjZVtpXSA9IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuSW5kaWNlc1doZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihsaXN0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKGxsID0+IGxsLkNvbnRhaW5zKGkpKSkuVG9VSW50NjQoKTtcclxuXHJcbiAgICAgICAgICAgIEFycmF5LlNvcnQ8dWxvbmc+KHRyYWNlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdXBlclNsaW1Cb2FyZCh0cmFjZSwgbGlzdHMuQ291bnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUb0xpc3RTdHJpbmdJbkxleE9yZGVyKGludCBtYXhQb3QgPSAtMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFBlcm11dGF0aW9uIHBwO1xyXG4gICAgICAgICAgICByZXR1cm4gVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihvdXQgcHAsIG1heFBvdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFRvTGlzdFN0cmluZ0luTGV4T3JkZXIob3V0IFBlcm11dGF0aW9uIHBwLCBpbnQgbWF4UG90ID0gLTEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQm9hcmRMZXhpZmllci5Ub0xpc3RTdHJpbmdJbkxleE9yZGVyKFN0YWNrcy5WYWx1ZSwgb3V0IHBwLCBtYXhQb3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbUJvYXJkKHVsb25nW10gdHJhY2UsIGludCBzdGFja0NvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3RyYWNlID0gdHJhY2U7XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSBfdHJhY2UuTGVuZ3RoO1xyXG4gICAgICAgICAgICBfc3RhY2tDb3VudCA9IHN0YWNrQ291bnQ7XHJcbiAgICAgICAgICAgIF9oYXNoQ29kZSA9IEhhc2hpbmcuSGFzaChfdHJhY2UsIF9sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgTWFrZUxhenlTdGFja3MoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTdXBlclNsaW1Cb2FyZCh1bG9uZ1tdIHRyYWNlLCBpbnQgaSwgaW50IGosIHVsb25nIHN3YXAsIGludCBzdGFja0NvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3RyYWNlID0gbmV3IHVsb25nW3RyYWNlLkxlbmd0aF07XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBrID0gMDsgayA8IHRyYWNlLkxlbmd0aDsgaysrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1bG9uZyB2ID0gMDtcclxuICAgICAgICAgICAgICAgIGlmIChrID09IGkgfHwgayA9PSBqKVxyXG4gICAgICAgICAgICAgICAgICAgIHYgPSB0cmFjZVtrXSBeIHN3YXA7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IHRyYWNlW2tdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh2ID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgcSA9IF9sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHEgPiAwICYmIF90cmFjZVtxIC0gMV0gPiB2KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxLS07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChxIDwgX2xlbmd0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuQ29weShfdHJhY2UsIHEgPDwgMywgX3RyYWNlLCAocSArIDEpIDw8IDMsIChfbGVuZ3RoIC0gcSkgPDwgMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RyYWNlW3FdID0gdjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2xlbmd0aCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBfc3RhY2tDb3VudCA9IHN0YWNrQ291bnQ7XHJcbiAgICAgICAgICAgIE1ha2VMYXp5U3RhY2tzKCk7XHJcblxyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSBIYXNoaW5nLkhhc2goX3RyYWNlLCBfbGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBQZXJtdXRhdGlvbiBHZXRQZXJtdXRhdGlvbihpbnQgaSwgaW50IGosIHVsb25nIHN3YXApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PHVsb25nPihfdHJhY2UpO1xyXG5cclxuICAgICAgICAgICAgdFtpXSA9IHRbaV0gXiBzd2FwO1xyXG4gICAgICAgICAgICB0W2pdID0gdFtqXSBeIHN3YXA7XHJcblxyXG4gICAgICAgICAgICBpZiAodFtpXSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgdFtpXSA9IGludC5NYXhWYWx1ZTtcclxuICAgICAgICAgICAgaWYgKHRbal0gPT0gMClcclxuICAgICAgICAgICAgICAgIHRbal0gPSBpbnQuTWF4VmFsdWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2VxdWVuY2UgPSB0LlppcChFbnVtZXJhYmxlLlJhbmdlKDAsIHQuQ291bnQpLCAodHIsIGlpKSA9PiBuZXcgeyBUID0gdHIsIEkgPSBpaSB9KS5PcmRlckJ5PHVsb25nPih2ID0+IHYuVCkuU2VsZWN0PGludD4odiA9PiB2LkkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZXJtdXRhdGlvbihzZXF1ZW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3VwZXJTbGltQm9hcmQgUGVybXV0ZShQZXJtdXRhdGlvbiBwLCBMaXN0PGludD4gaW5kaWNlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0cmFjZSA9IG5ldyB1bG9uZ1tfdHJhY2UuTGVuZ3RoXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwZXJtdXRlZEluZGljZXMgPSBwLkFwcGx5PGludD4oaW5kaWNlcyk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX3RyYWNlLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbiA9IF90cmFjZVtpXTtcclxuICAgICAgICAgICAgICAgIHZhciBtID0gX3RyYWNlW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgaW5kaWNlcy5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIG0gJj0gfigxVUwgPDwgaW5kaWNlc1tqXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBpbmRpY2VzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChuICYgKDFVTCA8PCBpbmRpY2VzW2pdKSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSB8PSAoMVVMIDw8IHBlcm11dGVkSW5kaWNlc1tqXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdHJhY2VbaV0gPSBtO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBBcnJheS5Tb3J0PHVsb25nPih0cmFjZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFN1cGVyU2xpbUJvYXJkKHRyYWNlLCBfc3RhY2tDb3VudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE1ha2VMYXp5U3RhY2tzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFN0YWNrcyA9IG5ldyBMYXp5PGxvbmdbXT4oKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHMgPSBuZXcgbG9uZ1tfc3RhY2tDb3VudF07XHJcbiAgICAgICAgICAgICAgICB2YXIgdHJhY2VCaXRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KF90cmFjZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzx1bG9uZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KSh0ID0+IHQuVG9TZXQoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgYyA9IDA7IGMgPCB0cmFjZUJpdHMuQ291bnQ7IGMrKylcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiB0cmFjZUJpdHNbY10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNbaV0gfD0gMUwgPDwgYztcclxuICAgICAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVxdWFscyhvYmogYXMgU3VwZXJTbGltQm9hcmQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKFN1cGVyU2xpbUJvYXJkIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwgfHwgX2xlbmd0aCAhPSBvdGhlci5fbGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBpZiAoX3RyYWNlW2ldICE9IG90aGVyLl90cmFjZVtpXSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9oYXNoQ29kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwifFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLHN0cmluZz4oU3RhY2tzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIHN0cmluZz4pKGwgPT4gc3RyaW5nLkpvaW48aW50PihcIlwiLCBsLlRvU2V0KCkpKSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBCaXRMZXZlbEdlbmVyYXRpb247XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU3VwZXJTbGltQ29sb3JpbmdBbmFseXplclxyXG4gICAge1xyXG4gICAgICAgIEdyYXBoIF9saW5lR3JhcGg7XHJcbiAgICAgICAgRnVuYzxTdXBlclNsaW1Cb2FyZCwgaW50LCBsb25nPiBfZ2V0RWRnZUNvbG9yTGlzdDtcclxuXHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbUNvbG9yaW5nQW5hbHl6ZXIoR3JhcGggbGluZUdyYXBoLCBGdW5jPFN1cGVyU2xpbUJvYXJkLCBpbnQsIGxvbmc+IGdldEVkZ2VDb2xvckxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfbGluZUdyYXBoID0gbGluZUdyYXBoO1xyXG4gICAgICAgICAgICBfZ2V0RWRnZUNvbG9yTGlzdCA9IGdldEVkZ2VDb2xvckxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKFN1cGVyU2xpbUJvYXJkIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2xpbmVHcmFwaC5Jc0Nob29zYWJsZShFbnVtZXJhYmxlLlJhbmdlKDAsIF9saW5lR3JhcGguTikuU2VsZWN0PGxvbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgbG9uZz4pKGUgPT4gX2dldEVkZ2VDb2xvckxpc3QoYiwgZSkpKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICBcclxuICAgICAgICBwdWJsaWMgYm9vbCBDb2xvcmFibGVXaXRob3V0RWRnZShTdXBlclNsaW1Cb2FyZCBiLCBpbnQgZWRnZUluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9saW5lR3JhcGguSXNDaG9vc2FibGUoRW51bWVyYWJsZS5SYW5nZSgwLCBfbGluZUdyYXBoLk4pLlNlbGVjdDxsb25nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGxvbmc+KShlID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChlID09IGVkZ2VJbmRleClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9nZXRFZGdlQ29sb3JMaXN0KGIsIGUpO1xyXG4gICAgICAgICAgICB9KSkuVG9MaXN0KCkpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoU3VwZXJTbGltQm9hcmQgYiwgb3V0IERpY3Rpb25hcnk8aW50LCBsb25nPiBjb2xvcmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBJc0Nob29zYWJsZShFbnVtZXJhYmxlLlJhbmdlKDAsIF9saW5lR3JhcGguTikuU2VsZWN0PGxvbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgbG9uZz4pKGUgPT4gX2dldEVkZ2VDb2xvckxpc3QoYiwgZSkpKS5Ub0xpc3QoKSwgb3V0IGNvbG9yaW5nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emVXaXRob3V0RWRnZShTdXBlclNsaW1Cb2FyZCBiLCBvdXQgRGljdGlvbmFyeTxpbnQsIGxvbmc+IGNvbG9yaW5nLCBpbnQgZWRnZUluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIElzQ2hvb3NhYmxlKEVudW1lcmFibGUuUmFuZ2UoMCwgX2xpbmVHcmFwaC5OKS5TZWxlY3Q8bG9uZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBsb25nPikoZSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZSA9PSBlZGdlSW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBfZ2V0RWRnZUNvbG9yTGlzdChiLCBlKTtcclxuICAgICAgICAgICAgfSkpLlRvTGlzdCgpLCBvdXQgY29sb3JpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNDaG9vc2FibGUoTGlzdDxsb25nPiBhc3NpZ25tZW50LCBvdXQgRGljdGlvbmFyeTxpbnQsIGxvbmc+IGNvbG9yaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29sb3JpbmcgPSBuZXcgRGljdGlvbmFyeTxpbnQsIGxvbmc+KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBJc0Nob29zYWJsZShhc3NpZ25tZW50LCAwLCBjb2xvcmluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJvb2wgSXNDaG9vc2FibGUoTGlzdDxsb25nPiBhc3NpZ25tZW50LCBpbnQgdiwgRGljdGlvbmFyeTxpbnQsIGxvbmc+IGNvbG9yaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHYgPj0gX2xpbmVHcmFwaC5OKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9ycyA9IGFzc2lnbm1lbnRbdl07XHJcbiAgICAgICAgICAgIHdoaWxlIChjb2xvcnMgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gY29sb3JzICYgLWNvbG9ycztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgTGlzdDxsb25nPihhc3NpZ25tZW50KTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBuZWlnaGJvciBpbiBfbGluZUdyYXBoLl9sYXRlck5laWdoYm9ycy5WYWx1ZVt2XSlcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50Q29weVtuZWlnaGJvcl0gJj0gfmNvbG9yO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChJc0Nob29zYWJsZShhc3NpZ25tZW50Q29weSwgdiArIDEsIGNvbG9yaW5nKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcmluZ1t2XSA9IGNvbG9yO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbG9ycyBePSBjb2xvcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFN1cGVyU2xpbVN3YXBBbmFseXplclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBpbnQgTGFzdFdpbkNoaWxkQ291bnQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgYm9vbCBQcm9vZkZpbmRpbmdNb2RlIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBib29sIFdlYWtseUZpeGFibGUgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBEaWN0aW9uYXJ5PFN1cGVyU2xpbUJvYXJkLCBHYW1lVHJlZUluZm8+IFdpblRyZWVJbmZvIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBEaWN0aW9uYXJ5PFN1cGVyU2xpbUJvYXJkLCBHYW1lVHJlZUluZm8+IExvc3NUcmVlSW5mbyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgdWxvbmdbXSBfZml4ZXJSZXNwb25zZXM7XHJcbiAgICAgICAgaW50IF9maXhlclJlc3BvbnNlQ291bnQ7XHJcbiAgICAgICAgRGljdGlvbmFyeTx1bG9uZywgTGlzdDxMaXN0PHVsb25nPj4+IF9icmVha2VyQ2hvaWNlc0NhY2hlID0gbmV3IERpY3Rpb25hcnk8dWxvbmcsIExpc3Q8TGlzdDx1bG9uZz4+PigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgU3VwZXJTbGltU3dhcEFuYWx5emVyKGludCBuLCBib29sIHByb29mRmluZGluZ01vZGUgPSBmYWxzZSwgYm9vbCB3ZWFrbHlGaXhhYmxlID0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZml4ZXJSZXNwb25zZXMgPSBuZXcgdWxvbmdbODE5Ml07XHJcbiAgICAgICAgICAgIFByb29mRmluZGluZ01vZGUgPSBwcm9vZkZpbmRpbmdNb2RlO1xyXG4gICAgICAgICAgICBXZWFrbHlGaXhhYmxlID0gd2Vha2x5Rml4YWJsZTtcclxuICAgICAgICAgICAgaWYgKFByb29mRmluZGluZ01vZGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFdpblRyZWVJbmZvID0gbmV3IERpY3Rpb25hcnk8U3VwZXJTbGltQm9hcmQsIEdhbWVUcmVlSW5mbz4oKTtcclxuICAgICAgICAgICAgICAgIExvc3NUcmVlSW5mbyA9IG5ldyBEaWN0aW9uYXJ5PFN1cGVyU2xpbUJvYXJkLCBHYW1lVHJlZUluZm8+KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoU3VwZXJTbGltQm9hcmQgYm9hcmQsIEhhc2hTZXQ8U3VwZXJTbGltQm9hcmQ+IHdvbkJvYXJkcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChQcm9vZkZpbmRpbmdNb2RlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFuYWx5emVGb3JQcm9vZkludGVybmFsKGJvYXJkLCB3b25Cb2FyZHMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEFuYWx5emVJbnRlcm5hbChib2FyZCwgd29uQm9hcmRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICBcclxuICAgICAgICBib29sIEFuYWx5emVJbnRlcm5hbChTdXBlclNsaW1Cb2FyZCBib2FyZCwgSGFzaFNldDxTdXBlclNsaW1Cb2FyZD4gd29uQm9hcmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBib2FyZC5fbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IGJvYXJkLl9sZW5ndGg7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGJvYXJkLl90cmFjZVtpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IGJvYXJkLl90cmFjZVtqXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3dhcHBhYmxlID0geCBeIHk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYnJlYWtlckNob2ljZSBpbiBHZXRCcmVha2VyQ2hvaWNlcyhzd2FwcGFibGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwRXhpc3RzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBHZXRGaXhlclJlc3BvbnNlcyhicmVha2VyQ2hvaWNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgayA9IDE7IGsgPCBfZml4ZXJSZXNwb25zZUNvdW50OyBrKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChXZWFrbHlGaXhhYmxlICYmIF9maXhlclJlc3BvbnNlc1trXS5Qb3B1bGF0aW9uQ291bnQoKSA+IDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkQm9hcmQgPSBuZXcgU3VwZXJTbGltQm9hcmQoYm9hcmQuX3RyYWNlLCBpLCBqLCBfZml4ZXJSZXNwb25zZXNba10sIGJvYXJkLl9zdGFja0NvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b25Cb2FyZHMuQ29udGFpbnMoY2hpbGRCb2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbm5pbmdTd2FwRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgQW5hbHl6ZUZvclByb29mSW50ZXJuYWwoU3VwZXJTbGltQm9hcmQgYm9hcmQsIEhhc2hTZXQ8U3VwZXJTbGltQm9hcmQ+IHdvbkJvYXJkcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB3aW5JbmZvID0gbmV3IEdhbWVUcmVlSW5mbygpO1xyXG4gICAgICAgICAgICBXaW5UcmVlSW5mb1tib2FyZF0gPSB3aW5JbmZvO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxvc3NJbmZvID0gbmV3IEdhbWVUcmVlSW5mbygpO1xyXG4gICAgICAgICAgICBMb3NzVHJlZUluZm9bYm9hcmRdID0gbG9zc0luZm87XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3JQYWlycyA9IG5ldyBMaXN0PFR1cGxlPGludCwgaW50Pj4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBib2FyZC5fbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBib2FyZC5fbGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JQYWlycy5BZGQobmV3IFR1cGxlPGludCwgaW50PihpLCBqKSk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY3AgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PixpbnQ+KGNvbG9yUGFpcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LCBpbnQ+KShjcCA9PiAoYm9hcmQuX3RyYWNlW2NwLkl0ZW0xXSBeIGJvYXJkLl90cmFjZVtjcC5JdGVtMl0pLlBvcHVsYXRpb25Db3VudCgpKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBpID0gY3AuSXRlbTE7XHJcbiAgICAgICAgICAgICAgICB2YXIgaiA9IGNwLkl0ZW0yO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB4ID0gYm9hcmQuX3RyYWNlW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSBib2FyZC5fdHJhY2Vbal07XHJcbiAgICAgICAgICAgICAgICB2YXIgc3dhcHBhYmxlID0geCBeIHk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBicmVha2VyQ2hvaWNlIGluIEdldEJyZWFrZXJDaG9pY2VzKHN3YXBwYWJsZSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwRXhpc3RzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIEdldEZpeGVyUmVzcG9uc2VzKGJyZWFrZXJDaG9pY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDEsIF9maXhlclJlc3BvbnNlQ291bnQgLSAxKS5TZWxlY3Q8dWxvbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgdWxvbmc+KShrID0+IF9maXhlclJlc3BvbnNlc1trXSkpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzx1bG9uZywgaW50PikoZnIgPT4gZnIuUG9wdWxhdGlvbkNvdW50KCkpKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcmVzcG9uc2UgaW4gcmVzcG9uc2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFdlYWtseUZpeGFibGUgJiYgcmVzcG9uc2UuUG9wdWxhdGlvbkNvdW50KCkgPiAyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRCb2FyZCA9IG5ldyBTdXBlclNsaW1Cb2FyZChib2FyZC5fdHJhY2UsIGksIGosIHJlc3BvbnNlLCBib2FyZC5fc3RhY2tDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b25Cb2FyZHMuQ29udGFpbnMoY2hpbGRCb2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbkluZm8uQWRkKGJyZWFrZXJDaG9pY2UsIGksIGosIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9zc0luZm8uQWRkKGJyZWFrZXJDaG9pY2UsIGksIGosIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5uaW5nU3dhcEV4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbkluZm8uQ2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBBbHdheXNFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBMYXN0V2luQ2hpbGRDb3VudCA9IHN3YXBwYWJsZS5Qb3B1bGF0aW9uQ291bnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBHZXRGaXhlclJlc3BvbnNlcyhMaXN0PHVsb25nPiBwb3NzaWJsZU1vdmVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VDb3VudCA9IDEgPDwgcG9zc2libGVNb3Zlcy5Db3VudDtcclxuICAgICAgICAgICAgdmFyIHRhYmxlTGVuZ3RoID0gX2ZpeGVyUmVzcG9uc2VzLkxlbmd0aDtcclxuICAgICAgICAgICAgd2hpbGUgKHRhYmxlTGVuZ3RoIDw9IF9maXhlclJlc3BvbnNlQ291bnQpXHJcbiAgICAgICAgICAgICAgICB0YWJsZUxlbmd0aCAqPSAyO1xyXG4gICAgICAgICAgICBpZiAodGFibGVMZW5ndGggPiBfZml4ZXJSZXNwb25zZXMuTGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VzID0gbmV3IHVsb25nW3RhYmxlTGVuZ3RoXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdWJzZXQgPSAxO1xyXG4gICAgICAgICAgICB3aGlsZSAoc3Vic2V0IDwgX2ZpeGVyUmVzcG9uc2VDb3VudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gMFVMO1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBzdWJzZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSB8PSBwb3NzaWJsZU1vdmVzW0ludDMyVXNhZ2UuR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiB4KV07XHJcblxyXG4gICAgICAgICAgICAgICAgX2ZpeGVyUmVzcG9uc2VzW3N1YnNldF0gPSByZXNwb25zZTtcclxuICAgICAgICAgICAgICAgIHN1YnNldCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBMaXN0PExpc3Q8dWxvbmc+PiBHZXRCcmVha2VyQ2hvaWNlcyh1bG9uZyBzd2FwcGFibGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PExpc3Q8dWxvbmc+PiBjaG9pY2VzO1xyXG4gICAgICAgICAgICBpZiAoIV9icmVha2VyQ2hvaWNlc0NhY2hlLlRyeUdldFZhbHVlKHN3YXBwYWJsZSwgb3V0IGNob2ljZXMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0cyA9IHN3YXBwYWJsZS5HZXRCaXRzKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydGl0aW9ucyA9IEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkNocm9uaWNsZS5CcmFuY2hHZW5lcmF0b3IuR2V0UGFydGl0aW9ucyhiaXRzLkNvdW50KTtcclxuICAgICAgICAgICAgICAgIGNob2ljZXMgPSBuZXcgTGlzdDxMaXN0PHVsb25nPj4ocGFydGl0aW9ucy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnRpdGlvbiBpbiBwYXJ0aXRpb25zKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaG9pY2UgPSBuZXcgTGlzdDx1bG9uZz4ocGFydGl0aW9uLkNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICBjaG9pY2VzLkFkZChjaG9pY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydCBpbiBwYXJ0aXRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IDBVTDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gcGFydClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggfD0gYml0c1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZS5BZGQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF9icmVha2VyQ2hvaWNlc0NhY2hlW3N3YXBwYWJsZV0gPSBjaG9pY2VzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2hvaWNlcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGV4dC5SZWd1bGFyRXhwcmVzc2lvbnM7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBUZW1wbGF0ZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gU2l6ZXMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBUZW1wbGF0ZShMaXN0PGludD4gc2l6ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTaXplcyA9IHNpemVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFRlbXBsYXRlKHN0cmluZyBzLCBHcmFwaCBnKVxyXG4gICAgICAgIHsgfVxyXG4gICAgICAgIC8vcHVibGljIFRlbXBsYXRlKHN0cmluZyBzLCBHcmFwaCBnKVxyXG4gICAgICAgIC8vICAgIDogdGhpcyhSZWdleC5TcGxpdChzID8/IFwiXCIsIEBcIlxcVytcIikuU2VsZWN0KCh4LCB2KSA9PlxyXG4gICAgICAgIC8vICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICB2YXIgeHggPSB4LlRvTG93ZXIoKTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgICAgICBpZiAoeHguU3RhcnRzV2l0aChcImRcIikpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgcmV0dXJuIGcuRGVncmVlKHYpICsgKHguTGVuZ3RoID4gMSA/IHh4LlN1YnN0cmluZygxKS5UcnlQYXJzZUludCgpLlZhbHVlIDogMCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICBpZiAoeHguU3RhcnRzV2l0aChcInBcIikpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgcmV0dXJuIGcuRGVncmVlKHYpIC0gKHguTGVuZ3RoID4gMSA/IHh4LlN1YnN0cmluZygxKS5UcnlQYXJzZUludCgpLlZhbHVlIDogMCk7XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgICAgcmV0dXJuIHh4LlRyeVBhcnNlSW50KCkuVmFsdWU7XHJcbiAgICAgICAgLy8gICAgICAgIH0pLlRvTGlzdCgpKVxyXG4gICAgICAgIC8ve1xyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRXF1YWxzKG8gYXMgVGVtcGxhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKFRlbXBsYXRlIHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIXQuRXhpc3RzKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGludD4oU2l6ZXMsdC5TaXplcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTxpbnQsaW50PihTaXplcyxTaXplcy5Db3VudCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQsIGludD4pKCh0LCBzKSA9PiAzMSAqIHQgKyBzKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbjxpbnQ+KFwiLFwiLCBTaXplcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGltcGxpY2l0IG9wZXJhdG9yIFRlbXBsYXRlKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUZW1wbGF0ZShzLCBudWxsKTtcclxuICAgICAgICAgICAgLy9yZXR1cm4gbmV3IFRlbXBsYXRlKFJlZ2V4LlNwbGl0KHMgPz8gXCJcIiwgQFwiXFxEK1wiKS5TZWxlY3QoTWV0YUtub3dsZWRnZS5UcnlQYXJzZUludCkuV2hlcmUoeCA9PiB4Lkhhc1ZhbHVlKS5TZWxlY3QoeCA9PiB4LlZhbHVlKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRlbXBsYXRlS25vd2xlZGdlXHJcbiAgICB7XHJcbiAgICAgICAgRGljdGlvbmFyeTxpbnQsIFBvdEtub3dsZWRnZT4gX3BvdExvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PGludCwgUG90S25vd2xlZGdlPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgVGVtcGxhdGUgVGVtcGxhdGUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPEJvYXJkPiBMb3N0Qm9hcmRzIHsgZ2V0IHsgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5Qb3RLbm93bGVkZ2UsZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4oX3BvdExvb2t1cC5WYWx1ZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuUG90S25vd2xlZGdlLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+PikocGsgPT4gcGsuTG9zdEJvYXJkcykpLkRpc3RpbmN0KCk7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgUG90S25vd2xlZGdlIHRoaXNbaW50IGNvbG9yQ291bnRdXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgUG90S25vd2xlZGdlIHA7XHJcbiAgICAgICAgICAgICAgICBpZiAoIV9wb3RMb29rdXAuVHJ5R2V0VmFsdWUoY29sb3JDb3VudCwgb3V0IHApKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHAgPSBuZXcgUG90S25vd2xlZGdlKGNvbG9yQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9wb3RMb29rdXBbY29sb3JDb3VudF0gPSBwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVGVtcGxhdGVLbm93bGVkZ2UoVGVtcGxhdGUgdGVtcGxhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUHJvbW90ZShpbnQgY29sb3JDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXNbY29sb3JDb3VudF0uQ29weUludG8odGhpc1tjb2xvckNvdW50ICsgMV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBLbm93bGVkZ2VFeGlzdHMoaW50IGNvbG9yQ291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX3BvdExvb2t1cC5Db250YWluc0tleShjb2xvckNvdW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZTtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU2xvd0JvYXJkIDogSUVudW1lcmFibGU8bG9uZz5cclxuICAgIHtcclxuI2lmIERFQlVHXHJcbiAgICAgICAgcHVibGljIExpc3Q8c3RyaW5nPiBTdGFja1N0cmluZ3MgeyBnZXQgeyByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxzdHJpbmc+KFN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBzdHJpbmc+KShzID0+IHMuVG9TZXRTdHJpbmcoKSkpLlRvTGlzdCgpOyB9IH1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFBvdFN0cmluZyB7IGdldCB7IHJldHVybiBQb3QuVG9TZXRTdHJpbmcoKTsgfSB9XHJcbiNlbmRpZlxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxsb25nPiBTdGFja3MgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgaW50IF9oYXNoQ29kZTtcclxuICAgICAgICBMaXN0PGludD4gUG90U2V0IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBMaXN0PFR1cGxlPGludCwgaW50Pj4gRGVncmVlcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgTGlzdDxpbnQ+IERlZ3JlZUNoYW5nZUluZGljZXMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBUZW1wbGF0ZSBUZW1wbGF0ZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGxvbmcgUG90IHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ29sb3JDb3VudCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFR1cm4gVHVybiB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IE4geyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIE1vdmUgTGFzdE1vdmUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGxvbmcgdGhpc1tpbnQgeF0geyBnZXQgeyByZXR1cm4gU3RhY2tzW3hdOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIFNsb3dCb2FyZChMaXN0PGxvbmc+IHN0YWNrcywgbG9uZyBwb3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTdGFja3MgPSBzdGFja3M7XHJcbiAgICAgICAgICAgIFBvdCA9IHBvdDtcclxuICAgICAgICAgICAgVHVybiA9IFR1cm4uRml4ZXI7XHJcbiAgICAgICAgICAgIE4gPSBTdGFja3MuQ291bnQ7XHJcbiAgICAgICAgICAgIFRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsaW50PihTdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgaW50PikocyA9PiBzLlBvcHVsYXRpb25Db3VudCgpKSkuVG9MaXN0KCkpO1xyXG5cclxuICAgICAgICAgICAgUG90U2V0ID0gUG90LlRvU2V0KCk7XHJcbiAgICAgICAgICAgIENvbG9yQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oUG90U2V0KTtcclxuICAgICAgICAgICAgRGVncmVlcyA9IG5ldyBMaXN0PFR1cGxlPGludCwgaW50Pj4oKTtcclxuICAgICAgICAgICAgRGVncmVlQ2hhbmdlSW5kaWNlcyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgQ29tcHV0ZUhhc2hDb2RlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIENvbXB1dGVIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSAoaW50KShOKTtcclxuICAgICAgICAgICAgVXBkYXRlSGFzaChyZWYgX2hhc2hDb2RlLCAobG9uZykoVHVybikpO1xyXG5cclxuICAgICAgICAgICAgRGVncmVlcy5DbGVhcigpO1xyXG4gICAgICAgICAgICBEZWdyZWVDaGFuZ2VJbmRpY2VzLkNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICBEZWdyZWVzLkFkZFJhbmdlKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4+KFBvdFNldCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50Pj4pKGMgPT4gbmV3IFR1cGxlPGludCwgaW50PihjLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGxvbmc+KFN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBib29sPikocyA9PiBzLklzQml0U2V0KGMpKSkpKSkuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LCBib29sPikoeCA9PiB4Lkl0ZW0yID4gMCkpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4sIGludD4pKHggPT4geC5JdGVtMikpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcmV2aW91c0RlZ3JlZSA9IC0xO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IERlZ3JlZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZ3JlZSA9IERlZ3JlZXNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgVXBkYXRlSGFzaChyZWYgX2hhc2hDb2RlLCBkZWdyZWUuSXRlbTIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkZWdyZWUuSXRlbTIgIT0gcHJldmlvdXNEZWdyZWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgRGVncmVlQ2hhbmdlSW5kaWNlcy5BZGQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNEZWdyZWUgPSBkZWdyZWUuSXRlbTI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIERlZ3JlZUNoYW5nZUluZGljZXMuQWRkKERlZ3JlZXMuQ291bnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgVXBkYXRlSGFzaChyZWYgaW50IGhhc2gsIGxvbmcgdmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBoYXNoID0gKGludCkoMTAwICogaGFzaCArIHZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE1ha2VNb3ZlKE1vdmUgbW92ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExhc3RNb3ZlID0gbW92ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtb3ZlLlN0YWNrID49IDApXHJcbiAgICAgICAgICAgICAgICBTdGFja3NbbW92ZS5TdGFja10gPSBTdGFja3NbbW92ZS5TdGFja10uRmxpcEJpdHMobW92ZS5BZGRlZCwgbW92ZS5SZW1vdmVkKTtcclxuXHJcbiAgICAgICAgICAgIFR1cm4gPSBPdGhlclR1cm4oVHVybik7XHJcblxyXG4gICAgICAgICAgICBDb21wdXRlSGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvTW92ZUNvbWJpbmF0aW9uKElFbnVtZXJhYmxlPE1vdmU+IG1vdmVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIG1vdmUgaW4gbW92ZXMpXHJcbiAgICAgICAgICAgICAgICBTdGFja3NbbW92ZS5TdGFja10gPSBTdGFja3NbbW92ZS5TdGFja10uRmxpcEJpdHMobW92ZS5BZGRlZCwgbW92ZS5SZW1vdmVkKTtcclxuXHJcbiAgICAgICAgICAgIENvbXB1dGVIYXNoQ29kZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFNsb3dCb2FyZCBDbG9uZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2xvbmUgPSBuZXcgU2xvd0JvYXJkKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGxvbmc+KFN0YWNrcyksIFBvdCk7XHJcbiAgICAgICAgICAgIGNsb25lLlR1cm4gPSBUdXJuO1xyXG4gICAgICAgICAgICBjbG9uZS5MYXN0TW92ZSA9IExhc3RNb3ZlO1xyXG4gICAgICAgICAgICBjbG9uZS5faGFzaENvZGUgPSBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgICAgICBjbG9uZS5Db21wdXRlSGFzaENvZGUoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjbG9uZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVxdWFscyhvYmogYXMgU2xvd0JvYXJkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhTbG93Qm9hcmQgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKFR1cm4gIT0gb3RoZXIuVHVybilcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKE4gIT0gb3RoZXIuTilcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8bG9uZz4oU3RhY2tzLG90aGVyLlN0YWNrcykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChUdXJuID09IEZpeGVyQnJlYWtlci5UdXJuLkZpeGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChMYXN0TW92ZS5TdGFjayA9PSBvdGhlci5MYXN0TW92ZS5TdGFjayAmJlxyXG4gICAgICAgICAgICAgICAgICAgKExhc3RNb3ZlLkFkZGVkID09IG90aGVyLkxhc3RNb3ZlLkFkZGVkICYmIExhc3RNb3ZlLlJlbW92ZWQgPT0gb3RoZXIuTGFzdE1vdmUuUmVtb3ZlZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgIExhc3RNb3ZlLkFkZGVkID09IG90aGVyLkxhc3RNb3ZlLlJlbW92ZWQgJiYgTGFzdE1vdmUuUmVtb3ZlZCA9PSBvdGhlci5MYXN0TW92ZS5BZGRlZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRmluZFBlcm11dGF0aW9uKG90aGVyKSAhPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBGaW5kUGVybXV0YXRpb24oU2xvd0JvYXJkIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4saW50PihEZWdyZWVzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgaW50PikoeCA9PiB4Lkl0ZW0yKSkuU2VxdWVuY2VFcXVhbChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4saW50PihvdGhlci5EZWdyZWVzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50PiwgaW50PikoeCA9PiB4Lkl0ZW0yKSkpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWFwcGluZ1BhaXJzID0gbmV3IExpc3Q8VHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IERlZ3JlZUNoYW5nZUluZGljZXMuQ291bnQgLSAxOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBkb21haW4gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29kb21haW4gPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IERlZ3JlZUNoYW5nZUluZGljZXNbaV07IGogPCBEZWdyZWVDaGFuZ2VJbmRpY2VzW2kgKyAxXTsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvbWFpbi5BZGQoRGVncmVlc1tqXS5JdGVtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29kb21haW4uQWRkKG90aGVyLkRlZ3JlZXNbal0uSXRlbTEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG1hcHBpbmdQYWlycy5BZGQobmV3IFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+Pihkb21haW4sIGNvZG9tYWluKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+LGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sZ2xvYmFsOjpTeXN0ZW0uTGlucS5FbnVtZXJhYmxlSW5zdGFuY2U8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4+KG1hcHBpbmdQYWlycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBnbG9iYWw6OlN5c3RlbS5MaW5xLkVudW1lcmFibGVJbnN0YW5jZTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+Pj4pKG1wID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KFBlcm11dGF0aW9uLkVudW1lcmF0ZUFsbChtcC5JdGVtMi5Db3VudCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KShwID0+IG5ldyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4obXAuSXRlbTEsIHAuQXBwbHk8aW50PihtcC5JdGVtMikpKSkpKVxyXG4pXHJcbiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+LCBnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PikobWFwcGluZyA9PiBGbGF0dGVuTWFwcGluZyhtYXBwaW5nKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuRmlyc3RPckRlZmF1bHQoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PiwgYm9vbD4pKG1hcHBpbmcgPT4gU2VxdWVuY2VFcXVhbFBlcm11dGVkKG1hcHBpbmcsIG90aGVyKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IEZsYXR0ZW5NYXBwaW5nKElFbnVtZXJhYmxlPFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+Pj4gbWFwcGluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LGludD4obWFwcGluZywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4+KSh4ID0+IHguSXRlbTEpKS5Ub0xpc3QoKSwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4saW50PihtYXBwaW5nLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4pKHggPT4geC5JdGVtMikpLlRvTGlzdCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgU2VxdWVuY2VFcXVhbFBlcm11dGVkKFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PiBtYXBwaW5nLCBTbG93Qm9hcmQgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IFN0YWNrcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGVybXV0ZWRTdGFjayA9IEFwcGx5TWFwcGluZyhtYXBwaW5nLCBTdGFja3NbaV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBlcm11dGVkU3RhY2sgIT0gb3RoZXIuU3RhY2tzW2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKFR1cm4gPT0gRml4ZXJCcmVha2VyLlR1cm4uRml4ZXIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChMYXN0TW92ZS5TdGFjayAhPSBvdGhlci5MYXN0TW92ZS5TdGFjaylcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvdXJzID0gbmV3W10geyBMYXN0TW92ZS5BZGRlZCwgTGFzdE1vdmUuUmVtb3ZlZCB9O1xyXG4gICAgICAgICAgICB2YXIgdGhlaXJzID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGludD4oKSwoX285KT0+e19vOS5BZGQob3RoZXIuTGFzdE1vdmUuQWRkZWQpO19vOS5BZGQob3RoZXIuTGFzdE1vdmUuUmVtb3ZlZCk7cmV0dXJuIF9vOTt9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRXF1YWw8aW50PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEFwcGx5TWFwcGluZyhtYXBwaW5nLCBvdXJzKSksdGhlaXJzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBsb25nIEFwcGx5TWFwcGluZyhUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gbWFwcGluZywgbG9uZyBzdGFjaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBcHBseU1hcHBpbmcobWFwcGluZywgc3RhY2suVG9TZXQoKSkuVG9JbnQ2NCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEFwcGx5TWFwcGluZyhUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4gbWFwcGluZywgSUVudW1lcmFibGU8aW50PiBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oc2V0LChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoYyA9PiBtYXBwaW5nLkl0ZW0yW21hcHBpbmcuSXRlbTEuSW5kZXhPZihjKV0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEFwcGx5SW52ZXJzZU1hcHBpbmcoVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+IG1hcHBpbmcsIElFbnVtZXJhYmxlPGludD4gc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHNldCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGMgPT4gbWFwcGluZy5JdGVtMVttYXBwaW5nLkl0ZW0yLkluZGV4T2YoYyldKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFeGFjdGx5RXF1YWwoU2xvd0JvYXJkIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChUdXJuICE9IG90aGVyLlR1cm4pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChOICE9IG90aGVyLk4pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChQb3QgIT0gb3RoZXIuUG90KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxsb25nPihTdGFja3Msb3RoZXIuU3RhY2tzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKFR1cm4gPT0gRml4ZXJCcmVha2VyLlR1cm4uRml4ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKExhc3RNb3ZlLlN0YWNrID09IG90aGVyLkxhc3RNb3ZlLlN0YWNrICYmXHJcbiAgICAgICAgICAgICAgICAgICAoTGFzdE1vdmUuQWRkZWQgPT0gb3RoZXIuTGFzdE1vdmUuQWRkZWQgJiYgTGFzdE1vdmUuUmVtb3ZlZCA9PSBvdGhlci5MYXN0TW92ZS5SZW1vdmVkIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgTGFzdE1vdmUuQWRkZWQgPT0gb3RoZXIuTGFzdE1vdmUuUmVtb3ZlZCAmJiBMYXN0TW92ZS5SZW1vdmVkID09IG90aGVyLkxhc3RNb3ZlLkFkZGVkKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2hhc2hDb2RlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBUdXJuIE90aGVyVHVybihUdXJuIHR1cm4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gMSAtIHR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmF0b3I8bG9uZz4gR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3RhY2tzLkdldEVudW1lcmF0b3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvciBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmFibGUuR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oXCJ8XCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsc3RyaW5nPihTdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgc3RyaW5nPikoeCA9PiB4LlRvU2V0U3RyaW5nU21hbGwoKSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVG9UZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGxvbmcsc3RyaW5nPihTdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgaW50LCBzdHJpbmc+KSgoc3RhY2ssIGkpID0+IFwiJEwodl9cIiArIChpICsgMSkgKyBcIikgPSBcIiArIHN0YWNrLlRvU2V0U3RyaW5nKCkuUmVwbGFjZShcIntcIiwgXCJcXFxce1wiKS5SZXBsYWNlKFwifVwiLCBcIlxcXFx9XCIpICsgXCIkXCIpKS5Kb2luUHJldHR5KFwiLCBcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBHZW5lcmljRXh0ZW5zaW9uc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTaHVmZmxlPFQ+KHRoaXMgSUxpc3Q8VD4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBybmcgPSBuZXcgUmFuZG9tKERhdGVUaW1lLk5vdy5NaWxsaXNlY29uZCk7XHJcbiAgICAgICAgICAgIGludCBuID0gbGlzdC5Db3VudDtcclxuICAgICAgICAgICAgd2hpbGUgKG4gPiAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuLS07XHJcbiAgICAgICAgICAgICAgICBpbnQgayA9IHJuZy5OZXh0KG4gKyAxKTtcclxuICAgICAgICAgICAgICAgIFQgdmFsdWUgPSBsaXN0W2tdO1xyXG4gICAgICAgICAgICAgICAgbGlzdFtrXSA9IGxpc3Rbbl07XHJcbiAgICAgICAgICAgICAgICBsaXN0W25dID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBTaHVmZmxlQWxsKHRoaXMgSUxpc3Q8SUxpc3Q+IGxpc3RzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJuZyA9IG5ldyBSYW5kb20oRGF0ZVRpbWUuTm93Lk1pbGxpc2Vjb25kKTtcclxuICAgICAgICAgICAgaW50IG4gPSBsaXN0c1swXS5Db3VudDtcclxuICAgICAgICAgICAgd2hpbGUgKG4gPiAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBuLS07XHJcbiAgICAgICAgICAgICAgICBpbnQgayA9IHJuZy5OZXh0KG4gKyAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgbGlzdCBpbiBsaXN0cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBsaXN0W2tdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3Rba10gPSBsaXN0W25dO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3Rbbl0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IEVuTGlzdDxUPih0aGlzIFQgdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8VD4oKSwoX28xMCk9PntfbzEwLkFkZCh0KTtyZXR1cm4gX28xMDt9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50PiBJbmRpY2VzV2hlcmU8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBzb3VyY2UsIEZ1bmM8VCwgYm9vbD4gY29uZGl0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoKHZhciB0IGluIHNvdXJjZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmRpdGlvbih0KSlcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gaTtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEZpcnN0SW5kZXg8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBzb3VyY2UsIEZ1bmM8VCwgYm9vbD4gY29uZGl0aW9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBzb3VyY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb24odCkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBKb2luUHJldHR5KHRoaXMgSUVudW1lcmFibGU8c3RyaW5nPiBzb3VyY2UsIHN0cmluZyBzZXBhcmF0b3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PHN0cmluZz4oc291cmNlKTtcclxuICAgICAgICAgICAgaWYgKGNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgaWYgKGNvdW50ID09IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxzdHJpbmc+KHNvdXJjZSk7XHJcbiAgICAgICAgICAgIGlmIChjb3VudCA9PSAyKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRWxlbWVudEF0PHN0cmluZz4oc291cmNlLDApICsgXCIgYW5kIFwiICsgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FbGVtZW50QXQ8c3RyaW5nPihzb3VyY2UsMSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oc2VwYXJhdG9yLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8c3RyaW5nPihzb3VyY2UsY291bnQgLSAxKSkgKyBcIiBhbmQgXCIgKyBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkVsZW1lbnRBdDxzdHJpbmc+KHNvdXJjZSxjb3VudCAtIDEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgUmVtb3ZlQWxsPFQ+KHRoaXMgTGlzdDxUPiBsaXN0LCBGdW5jPFQsIGJvb2w+IHByZWRpY2F0ZSwgQWN0aW9uPFQ+IG9uUmVtb3ZlZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByZW1vdmVkID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGxpc3QuQ291bnQgLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShsaXN0W2ldKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBvblJlbW92ZWQobGlzdFtpXSk7XHJcbiAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdC5SZW1vdmVBdChpKTtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVkKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZW1vdmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7XHJcbnVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXI7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR3JhcGhcclxuICAgIHtcclxuICAgICAgICBzdGF0aWMgUmFuZG9tIFJORyA9IG5ldyBSYW5kb20oRGF0ZVRpbWUuTm93Lk1pbGxpc2Vjb25kKTtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgQ2FjaGVIaXRzO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBOb2Rlc1Zpc2l0ZWQ7XHJcblxyXG4gICAgICAgIGJvb2xbLF0gX2FkamFjZW50O1xyXG4gICAgICAgIExhenk8TGlzdDxMaXN0PGludD4+PiBfbmVpZ2hib3JzO1xyXG4gICAgICAgIExhenk8TGlzdDxMaXN0PGludD4+PiBfY29tcGxlbWVudE5laWdoYm9ycztcclxuICAgICAgICBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4gX291dE5laWdoYm9ycztcclxuICAgICAgICBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4gX2luTmVpZ2hib3JzO1xyXG4gICAgICAgIHB1YmxpYyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4gX2xhdGVyTmVpZ2hib3JzO1xyXG4gICAgICAgIExpc3Q8aW50PiBfdmVydGljZXM7XHJcbiAgICAgICAgTGF6eTxMaXN0PExpc3Q8aW50Pj4+IF9pbmRlcGVuZGVudFNldHM7XHJcbiAgICAgICAgTGF6eTxMaXN0PExpc3Q8aW50Pj4+IF9tYXhpbWFsSW5kZXBlbmRlbnRTZXRzO1xyXG4gICAgICAgIExhenk8TGlzdDxMaXN0PGludD4+PiBfaW5kZXBlbmRlbnRUd29TZXRzO1xyXG4gICAgICAgIExhenk8TGlzdDxMaXN0PGludD4+PiBfaW5kZXBlbmRlbnRUaHJlZVNldHM7XHJcbiAgICAgICAgTGF6eTxMaXN0PExpc3Q8aW50Pj4+IF92ZXJ0ZXhTdWJzZXRzO1xyXG4gICAgICAgIExhenk8aW50PiBfZTtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBOIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgRSB7IGdldCB7IHJldHVybiBfZS5WYWx1ZTsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sWyxdIEFkamFjZW50IHsgZ2V0IHsgcmV0dXJuIF9hZGphY2VudDsgfSB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgdGhpc1tpbnQgeCwgaW50IHldXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2FkamFjZW50W3gsIHldOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbFssXSBEaXJlY3RlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0O1xyXG4gICAgICAgICAgICBwcml2YXRlIHNldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gVmVydGV4V2VpZ2h0IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IE5laWdoYm9ycyB7IGdldCB7IHJldHVybiBfbmVpZ2hib3JzLlZhbHVlOyB9IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxMaXN0PGludD4+IENvbXBsZW1lbnROZWlnaGJvcnMgeyBnZXQgeyByZXR1cm4gX2NvbXBsZW1lbnROZWlnaGJvcnMuVmFsdWU7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gT3V0TmVpZ2hib3JzIHsgZ2V0IHsgcmV0dXJuIF9vdXROZWlnaGJvcnMuVmFsdWU7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gSW5OZWlnaGJvcnMgeyBnZXQgeyByZXR1cm4gX2luTmVpZ2hib3JzLlZhbHVlOyB9IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IFZlcnRpY2VzIHsgZ2V0IHsgcmV0dXJuIF92ZXJ0aWNlczsgfSB9XHJcbiAgICAgICAgcHVibGljIExhenk8aW50W10+IERlZ3JlZVNlcXVlbmNlIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMYXp5PGludFtdPiBJbkRlZ3JlZVNlcXVlbmNlIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMYXp5PGludFtdPiBPdXREZWdyZWVTZXF1ZW5jZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGF6eTxpbnRbXT4gTm9kZUludmFyaWFudE9uZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGF6eTxpbnRbXT4gTm9kZUludmFyaWFudFR3byB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBUcmFuc2l0aXZlUGFydGl0aW9uIFRyYW5zaXRpdmVQYXJ0aXRpb24geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gRWRnZVdlaWdodHNXaXRoTXVsdGlwbGljaXR5IHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBJbmRlcGVuZGVudFNldHMgeyBnZXQgeyByZXR1cm4gX2luZGVwZW5kZW50U2V0cy5WYWx1ZTsgfSB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBNYXhpbWFsSW5kZXBlbmRlbnRTZXRzIHsgZ2V0IHsgcmV0dXJuIF9tYXhpbWFsSW5kZXBlbmRlbnRTZXRzLlZhbHVlOyB9IH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoIEZyb21PdXROZWlnaGJvckxpc3RzKERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IG91dE5laWdoYm9ycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBOID0gb3V0TmVpZ2hib3JzLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgdmFyIGVkZ2VXZWlnaHRzID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXROZWlnaGJvcnNbaV0uQ29udGFpbnMoaikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VXZWlnaHRzLkFkZCgxKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvdXROZWlnaGJvcnNbal0uQ29udGFpbnMoaSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VXZWlnaHRzLkFkZCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGdlV2VpZ2h0cy5BZGQoMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGgoZWRnZVdlaWdodHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoKExpc3Q8aW50PiBlZGdlV2VpZ2h0cywgTGlzdDxpbnQ+IHZlcnRleFdlaWdodCA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOID0gKGludCkoKDEgKyBNYXRoLlNxcnQoMSArIDggKiBlZGdlV2VpZ2h0cy5Db3VudCkpIC8gMik7XHJcbiAgICAgICAgICAgIFZlcnRleFdlaWdodCA9IHZlcnRleFdlaWdodDtcclxuXHJcbiAgICAgICAgICAgIF92ZXJ0aWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgTikuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIF9hZGphY2VudCA9IG5ldyBib29sW04sIE5dO1xyXG4gICAgICAgICAgICBEaXJlY3RlZCA9IG5ldyBib29sW04sIE5dO1xyXG5cclxuICAgICAgICAgICAgaW50IGsgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlZGdlV2VpZ2h0c1trXSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2FkamFjZW50W2ksIGpdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2FkamFjZW50W2osIGldID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZGdlV2VpZ2h0c1trXSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3RlZFtpLCBqXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZGdlV2VpZ2h0c1trXSA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3RlZFtqLCBpXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEluaXRpYWxpemUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoKGJvb2xbLF0gYWRqYWNlbnQsIExpc3Q8aW50PiB2ZXJ0ZXhXZWlnaHQgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2FkamFjZW50ID0gYWRqYWNlbnQ7XHJcbiAgICAgICAgICAgIE4gPSBfYWRqYWNlbnQuR2V0VXBwZXJCb3VuZCgwKSArIDE7XHJcbiAgICAgICAgICAgIFZlcnRleFdlaWdodCA9IHZlcnRleFdlaWdodDtcclxuXHJcbiAgICAgICAgICAgIF92ZXJ0aWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgTikuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIERpcmVjdGVkID0gbmV3IGJvb2xbTiwgTl07XHJcblxyXG4gICAgICAgICAgICBJbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEluaXRpYWxpemUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2UgPSBuZXcgTGF6eTxpbnQ+KCgpID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGUgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBTZXR1cE5laWdoYm9ycygpO1xyXG4gICAgICAgICAgICBJbml0aWFsaXplTGF6eUxvYWRlcnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgU2V0dXBOZWlnaGJvcnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX25laWdoYm9ycyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmVpZ2hib3JzID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWlnaGJvcnMuQWRkKG5ldyBMaXN0PGludD4oKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JzW2ldLkFkZChqKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5laWdoYm9ycztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgX2NvbXBsZW1lbnROZWlnaGJvcnMgPSBuZXcgTGF6eTxMaXN0PExpc3Q8aW50Pj4+KCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBubiA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIG5uLkFkZChuZXcgTGlzdDxpbnQ+KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPSBqICYmICFfYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBubltpXS5BZGQoaik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5uO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIF9vdXROZWlnaGJvcnMgPSBuZXcgTGF6eTxMaXN0PExpc3Q8aW50Pj4+KCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZWlnaGJvcnMgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBuZWlnaGJvcnMuQWRkKG5ldyBMaXN0PGludD4oKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbaSwgal0gJiYgRGlyZWN0ZWRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWlnaGJvcnNbaV0uQWRkKGopO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZWlnaGJvcnM7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgX2luTmVpZ2hib3JzID0gbmV3IExhenk8TGlzdDxMaXN0PGludD4+PigoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmVpZ2hib3JzID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JzLkFkZChuZXcgTGlzdDxpbnQ+KCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W2ksIGpdICYmIERpcmVjdGVkW2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JzW2pdLkFkZChpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmVpZ2hib3JzO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIF9sYXRlck5laWdoYm9ycyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGF0ZXIgPSBuZXcgTGlzdDxMaXN0PGludD4+KE5laWdoYm9ycy5Db3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhdGVyLkFkZChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGludD4oTmVpZ2hib3JzW2ldLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKG4gPT4gbiA+IGkpKS5Ub0xpc3QoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXRlcjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgVHJhbnNpdGl2ZVBhcnRpdGlvbiA9IG5ldyBUcmFuc2l0aXZlUGFydGl0aW9uKF92ZXJ0aWNlcyk7XHJcblxyXG4gICAgICAgICAgICBEZWdyZWVTZXF1ZW5jZSA9IG5ldyBMYXp5PGludFtdPigoKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gbmV3IGludFtOXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNbdl0gPSBEZWdyZWUodik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBJbkRlZ3JlZVNlcXVlbmNlID0gbmV3IExhenk8aW50W10+KCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gbmV3IGludFtOXTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICBzW3ZdID0gSW5EZWdyZWUodik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgT3V0RGVncmVlU2VxdWVuY2UgPSBuZXcgTGF6eTxpbnRbXT4oKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHMgPSBuZXcgaW50W05dO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIHNbdl0gPSBPdXREZWdyZWUodik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgTm9kZUludmFyaWFudE9uZSA9IG5ldyBMYXp5PGludFtdPigoKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gbmV3IGludFtOXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3AgPSBuZXcgaW50W05dO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgc1t2XSA9IERlZ3JlZVNlcXVlbmNlLlZhbHVlW3ZdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgayA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBrOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwW3ZdID0gKGludCkoKHNbdl0gPDwgMTMgfCBzW3ZdID4+IDE5KSBeIDB4ZmYwMGZmMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gTmVpZ2hib3JzW3ZdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwW3ZdICs9IHNbd107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNbdl0gPSBzcFt2XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBOb2RlSW52YXJpYW50VHdvID0gbmV3IExhenk8aW50W10+KCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gbmV3IGludFtOXTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzW3ZdID0gRGVncmVlU2VxdWVuY2UuVmFsdWVbdl07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIE5laWdoYm9yc1t2XSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNbdl0gKz0gMyAqIERlZ3JlZVNlcXVlbmNlLlZhbHVlW3ddO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHogaW4gTmVpZ2hib3JzW3ddKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeiAhPSB2KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNbdl0gKz0gNyAqIERlZ3JlZVNlcXVlbmNlLlZhbHVlW3pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdm9pZCBJbml0aWFsaXplTGF6eUxvYWRlcnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2luZGVwZW5kZW50U2V0cyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEluZGVwZW5kZW50U2V0c0luU3ViZ3JhcGgoMCkpLCB0cnVlKTtcclxuICAgICAgICAgICAgX2luZGVwZW5kZW50VHdvU2V0cyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oX2luZGVwZW5kZW50U2V0cy5WYWx1ZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHNldCA9PiBzZXQuQ291bnQgPT0gMikpLlRvTGlzdCgpLCB0cnVlKTtcclxuICAgICAgICAgICAgX2luZGVwZW5kZW50VGhyZWVTZXRzID0gbmV3IExhenk8TGlzdDxMaXN0PGludD4+PigoKSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihfaW5kZXBlbmRlbnRTZXRzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoc2V0ID0+IHNldC5Db3VudCA9PSAzKSkuVG9MaXN0KCksIHRydWUpO1xyXG4gICAgICAgICAgICBfdmVydGV4U3Vic2V0cyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT4gTGlzdFV0aWxpdHkuR2VuZXJhdGVTdWJsaXN0czxpbnQ+KF92ZXJ0aWNlcykpO1xyXG4gICAgICAgICAgICBfbWF4aW1hbEluZGVwZW5kZW50U2V0cyA9IG5ldyBMYXp5PExpc3Q8TGlzdDxpbnQ+Pj4oKCkgPT4gTGlzdFV0aWxpdHkuTWF4aW1hbEVsZW1lbnRzPGludD4oX2luZGVwZW5kZW50U2V0cy5WYWx1ZSksIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBFcXVhbGl0eSBhbmQgSXNvbW9ycGhpc21cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcIiBcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LHN0cmluZz4oR2V0RWRnZVdlaWdodHMoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIHN0cmluZz4pKHggPT4geC5Ub1N0cmluZygpKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBUb1N0cmluZygpLkdldEhhc2hDb2RlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIEggPSBvYmogYXMgR3JhcGg7XHJcbiAgICAgICAgICAgIGlmIChIID09IG51bGwpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChOICE9IEguTikgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoRSAhPSBILkUpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbaSwgal0gIT0gSFtpLCBqXSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgPT0oR3JhcGggQSwgR3JhcGggQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAob2JqZWN0KUEgPT0gbnVsbCAmJiAob2JqZWN0KUIgPT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAgICAgICAgKG9iamVjdClBICE9IG51bGwgJiYgKG9iamVjdClCICE9IG51bGwgJiYgQS5FcXVhbHMoQik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciAhPShHcmFwaCBBLCBHcmFwaCBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICEoQSA9PSBCKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIFBlcm11dGVWZXJ0aWNlcyhQZXJtdXRhdGlvbiBwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGFkamFjZW50ID0gbmV3IGJvb2xbTiwgTl07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGFkamFjZW50W3BbaV0sIHBbal1dID0gX2FkamFjZW50W2ksIGpdO1xyXG5cclxuICAgICAgICAgICAgTGlzdDxpbnQ+IHZlcnRleFdlaWdodCA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChWZXJ0ZXhXZWlnaHQgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmVydGV4V2VpZ2h0ID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBwID0gcC5JbnZlcnNlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRleFdlaWdodC5BZGQoVmVydGV4V2VpZ2h0W3BwW3ZdXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGgoYWRqYWNlbnQsIHZlcnRleFdlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYm9vbCBNYXliZUlzb21vcnBoaWMoR3JhcGggQSwgR3JhcGggQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChBLk4gIT0gQi5OKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChBLkUgIT0gQi5FKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBBLlRyYW5zaXRpdmVQYXJ0aXRpb24uUmVmaW5lKEEuRGVncmVlU2VxdWVuY2UuVmFsdWUsIDEpO1xyXG4gICAgICAgICAgICBCLlRyYW5zaXRpdmVQYXJ0aXRpb24uUmVmaW5lKEIuRGVncmVlU2VxdWVuY2UuVmFsdWUsIDEpO1xyXG5cclxuICAgICAgICAgICAgQS5UcmFuc2l0aXZlUGFydGl0aW9uLlJlZmluZShBLk5vZGVJbnZhcmlhbnRPbmUuVmFsdWUsIDIpO1xyXG4gICAgICAgICAgICBCLlRyYW5zaXRpdmVQYXJ0aXRpb24uUmVmaW5lKEIuTm9kZUludmFyaWFudE9uZS5WYWx1ZSwgMik7XHJcblxyXG4gICAgICAgICAgICBBLlRyYW5zaXRpdmVQYXJ0aXRpb24uUmVmaW5lKEEuTm9kZUludmFyaWFudFR3by5WYWx1ZSwgMyk7XHJcbiAgICAgICAgICAgIEIuVHJhbnNpdGl2ZVBhcnRpdGlvbi5SZWZpbmUoQi5Ob2RlSW52YXJpYW50VHdvLlZhbHVlLCAzKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghQS5UcmFuc2l0aXZlUGFydGl0aW9uLkVxdWFscyhCLlRyYW5zaXRpdmVQYXJ0aXRpb24pKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc29tb3JwaGljKEdyYXBoIEEsIEdyYXBoIEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIU1heWJlSXNvbW9ycGhpYyhBLCBCKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBBLkNvbnRhaW5zKEIsIGluZHVjZWQ6IHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgY2xhc3MgSXNvbW9ycGhpc21Db21wYXJlciA6IElFcXVhbGl0eUNvbXBhcmVyPEdyYXBoPlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKEdyYXBoIHgsIEdyYXBoIHkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBHcmFwaC5Jc29tb3JwaGljKHgsIHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgR2V0SGFzaENvZGUoR3JhcGggZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbnRhaW5zKEdyYXBoIEEsIGJvb2wgaW5kdWNlZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb250YWlucyhBLCBpbmR1Y2VkLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGgsIGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCwgaW50LCBpbnQsIGJvb2w+KSgoXywgX18sIF9fXywgX19fXykgPT4gdHJ1ZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29udGFpbnMoR3JhcGggQSwgYm9vbCBpbmR1Y2VkLCBGdW5jPEdyYXBoLCBHcmFwaCwgaW50LCBpbnQsIGJvb2w+IGNvbmRpdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChOIDwgQS5OKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGF1ID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICByZXR1cm4gQ29udGFpbnMoQSwgaW5kdWNlZCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLCBnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGgsIGludCwgaW50LCBib29sPiljb25kaXRpb24sIG5ldyBpbnRbQS5OXSwgdGF1LCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgQ29udGFpbnMoR3JhcGggQSwgYm9vbCBpbmR1Y2VkLCBGdW5jPEdyYXBoLCBHcmFwaCwgaW50LCBpbnQsIGJvb2w+IGNvbmRpdGlvbiwgaW50W10gdGF1LCBMaXN0PGludD4gcGxhY2VkLCBpbnQgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2ID09IEEuTilcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGltYWdlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHBsYWNlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHUgPT4gdGF1W3VdKSkuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodCA9PiB0KSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciByZXF1aXJlZE5laWdoYm9ycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KEEuTmVpZ2hib3JzW3ZdLkludGVyc2VjdGlvblNvcnRlZChwbGFjZWQpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodSA9PiB0YXVbdV0pKS5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh0ID0+IHQpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxpbnQ+KFZlcnRpY2VzLGltYWdlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh3ID0+IEEuRGVncmVlKHYpIDw9IERlZ3JlZSh3KSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodyA9PiBpbmR1Y2VkID8gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGludD4ocmVxdWlyZWROZWlnaGJvcnMsQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkludGVyc2VjdGlvbjxpbnQ+KE5laWdoYm9yc1t3XSxpbWFnZXMpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHJlcXVpcmVkTmVpZ2hib3JzLlN1YnNldEVxdWFsU29ydGVkKE5laWdoYm9yc1t3XSkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHcgPT4gY29uZGl0aW9uKHRoaXMsIEEsIHcsIHYpKSk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgY2FuZGlkYXRlIGluIGNhbmRpZGF0ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRhdVt2XSA9IGNhbmRpZGF0ZTtcclxuICAgICAgICAgICAgICAgIHBsYWNlZC5BZGQodik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKENvbnRhaW5zKEEsIGluZHVjZWQsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCwgZ2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLCBpbnQsIGludCwgYm9vbD4pY29uZGl0aW9uLCB0YXUsIHBsYWNlZCwgdiArIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHBsYWNlZC5SZW1vdmVBdChwbGFjZWQuQ291bnQgLSAxKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQ29udGFpbnNJbmR1Y2VkKEdyYXBoIEEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29udGFpbnMoQSwgaW5kdWNlZDogdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWluc0luZHVjZWRPbGQoR3JhcGggQSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChOIDwgQS5OKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmVydGV4U2V0cyA9IF92ZXJ0ZXhTdWJzZXRzLlZhbHVlO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHZlcnRpY2VzIGluIHZlcnRleFNldHMpXHJcbiAgICAgICAgICAgICAgICBpZiAoR3JhcGguSXNvbW9ycGhpYyhJbmR1Y2VkU3ViZ3JhcGgodmVydGljZXMpLCBBKSkgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxMaXN0PGludD4+IEVudW1lcmF0ZUNvbm5lY3RlZE9yZGVyaW5ncyhMaXN0PGludD4gaW5pdGlhbFZlcnRpY2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGRvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxpbnQ+KFZlcnRpY2VzLGluaXRpYWxWZXJ0aWNlcykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRvbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmIChEZWdyZWVJblN1YmdyYXBoKHYsIGluaXRpYWxWZXJ0aWNlcykgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxWZXJ0aWNlcy5BZGQodik7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG9yZGVyaW5nIGluIEVudW1lcmF0ZUNvbm5lY3RlZE9yZGVyaW5ncyhpbml0aWFsVmVydGljZXMpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihvcmRlcmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZlcnRpY2VzLlJlbW92ZUF0KGluaXRpYWxWZXJ0aWNlcy5Db3VudCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZG9uZSlcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBpbml0aWFsVmVydGljZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc1NwYW5uaW5nU3ViZ3JhcGhPZihHcmFwaCBBKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKE4gIT0gQS5OKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W2ksIGpdICYmICFBW2ksIGpdKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIEV4cG9ydFxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gR2V0RWRnZVdlaWdodHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldEVkZ2VXZWlnaHRzKG5ldyBpbnRbXSB7IH0sIG5ldyBUdXBsZTxpbnQsIGludD5bXSB7IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoIEluZHVjZWRTdWJncmFwaChMaXN0PGludD4gc3ViZ3JhcGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PGludD4gdmVydGV4V2VpZ2h0ID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKFZlcnRleFdlaWdodCAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhXZWlnaHQgPSBuZXcgTGlzdDxpbnQ+KHN1YmdyYXBoLkNvdW50KTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHN1YmdyYXBoKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZlcnRleFdlaWdodC5BZGQoVmVydGV4V2VpZ2h0W3ZdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaChHZXRFZGdlV2VpZ2h0cyhzdWJncmFwaCksIHZlcnRleFdlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gR2V0RWRnZVdlaWdodHMoTGlzdDxpbnQ+IHN1YmdyYXBoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG4gPSBzdWJncmFwaC5Db3VudDtcclxuICAgICAgICAgICAgdmFyIHcgPSBuZXcgTGlzdDxpbnQ+KG4pO1xyXG5cclxuICAgICAgICAgICAgaW50IGsgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgbjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHcuQWRkKDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W3N1YmdyYXBoW2ldLCBzdWJncmFwaFtqXV0gfHwgX2FkamFjZW50W3N1YmdyYXBoW2pdLCBzdWJncmFwaFtpXV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdba10gPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB3O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBHZXRFZGdlV2VpZ2h0cyhib29sWyxdIGFkamFjZW50LCBib29sWyxdIGRpcmVjdGVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldEVkZ2VXZWlnaHRzKGFkamFjZW50LCBkaXJlY3RlZCwgbmV3IGludFtdIHsgfSwgbmV3IFR1cGxlPGludCwgaW50PltdIHsgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBMaXN0PGludD4gR2V0RWRnZVdlaWdodHMoSUVudW1lcmFibGU8aW50PiByZW1vdmVkVmVydGljZXMsIElFbnVtZXJhYmxlPFR1cGxlPGludCwgaW50Pj4gcmVtb3ZlZEVkZ2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldEVkZ2VXZWlnaHRzKF9hZGphY2VudCwgRGlyZWN0ZWQsIHJlbW92ZWRWZXJ0aWNlcywgcmVtb3ZlZEVkZ2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExpc3Q8aW50PiBHZXRFZGdlV2VpZ2h0cyhib29sWyxdIGFkamFjZW50LCBib29sWyxdIGRpcmVjdGVkLCBJRW51bWVyYWJsZTxpbnQ+IHJlbW92ZWRWZXJ0aWNlcywgSUVudW1lcmFibGU8VHVwbGU8aW50LCBpbnQ+PiByZW1vdmVkRWRnZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdyA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3LkFkZCgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxpbnQ+KHJlbW92ZWRWZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh2ID0+IHYgPT0gaSB8fCB2ID09IGopKSAmJiAhU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+PihyZW1vdmVkRWRnZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LCBib29sPikoZSA9PiBlLkl0ZW0xID09IGkgJiYgZS5JdGVtMiA9PSBqIHx8IGUuSXRlbTEgPT0gaiAmJiBlLkl0ZW0yID09IGkpKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGphY2VudFtpLCBqXSB8fCBhZGphY2VudFtqLCBpXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd1trXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0ZWRbaiwgaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd1trXSA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB3O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IExpc3Q8c3RyaW5nPiBEb3RDb2xvcnMgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8c3RyaW5nPigpLChfbzExKT0+e19vMTEuQWRkKFwiY2FkZXRibHVlXCIpO19vMTEuQWRkKFwiYnJvd25cIik7X28xMS5BZGQoXCJkb2RnZXJibHVlXCIpO19vMTEuQWRkKFwidHVycXVvaXNlXCIpO19vMTEuQWRkKFwib3JjaGlkXCIpO19vMTEuQWRkKFwiYmx1ZVwiKTtfbzExLkFkZChcInJlZFwiKTtfbzExLkFkZChcImdyZWVuXCIpO19vMTEuQWRkKFwieWVsbG93XCIpO19vMTEuQWRkKFwiY3lhblwiKTtfbzExLkFkZChcImxpbWVncmVlblwiKTtfbzExLkFkZChcInBpbmtcIik7X28xMS5BZGQoXCJvcmFuZ2VcIik7X28xMS5BZGQoXCJnb2xkZW5yb2RcIik7X28xMS5BZGQoXCJhcXVhbWFyaW5lXCIpO19vMTEuQWRkKFwiYmxhY2tcIik7cmV0dXJuIF9vMTE7fSk7XHJcblxyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBMaXN0PHN0cmluZz4gVGlrekNvbG9ycyA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxzdHJpbmc+KCksKF9vMTIpPT57X28xMi5BZGQoXCJibHVlXCIpO19vMTIuQWRkKFwicmVkXCIpO19vMTIuQWRkKFwiZ3JlZW5cIik7X28xMi5BZGQoXCJPcmNoaWRcIik7X28xMi5BZGQoXCJ5ZWxsb3dcIik7X28xMi5BZGQoXCJjeWFuXCIpO19vMTIuQWRkKFwiVHVycXVvaXNlXCIpO19vMTIuQWRkKFwiQ2FkZXRCbHVlXCIpO19vMTIuQWRkKFwiTGltZUdyZWVuXCIpO19vMTIuQWRkKFwiYnJvd25cIik7X28xMi5BZGQoXCJwaW5rXCIpO19vMTIuQWRkKFwib3JhbmdlXCIpO19vMTIuQWRkKFwiQ2VydWxlYW5cIik7X28xMi5BZGQoXCJHb2xkZW5yb2RcIik7X28xMi5BZGQoXCJBcXVhbWFyaW5lXCIpO19vMTIuQWRkKFwiYmxhY2tcIik7cmV0dXJuIF9vMTI7fSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgVG9Eb3RXaXRoRmFjdG9ycyhib29sIGxhYmVsRWRnZXMgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZmFjdG9ycyA9IEZhY3RvcigpO1xyXG4gICAgICAgICAgICB2YXIgY29sb3JSYW5nZXMgPSBuZXcgTGlzdDxJRW51bWVyYWJsZTxpbnQ+PigpO1xyXG4gICAgICAgICAgICBpbnQgbGFzdCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBHID0gR3JhcGhzLkVtcHR5O1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZmFjdG9yIGluIGZhY3RvcnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbG9yUmFuZ2VzLkFkZChFbnVtZXJhYmxlLlJhbmdlKGxhc3QsIGZhY3Rvci5OKSk7XHJcbiAgICAgICAgICAgICAgICBsYXN0ICs9IGZhY3Rvci5OO1xyXG5cclxuICAgICAgICAgICAgICAgIEcgKj0gZmFjdG9yO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiZ3JhcGggRyB7XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwib3ZlcmxhcCA9IGZhbHNlO1wiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcInNwbGluZXM9dHJ1ZTtcIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJzZXA9MC4zO1wiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIm5vZGVbZm9udHNpemU9MjAsIHN0eWxlPWJvbGQsIGNvbG9yPWJsYWNrOyBzaGFwZT1jaXJjbGUsIHBlbndpZHRoPTFdO1wiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcImVkZ2Vbc3R5bGU9Ym9sZCwgY29sb3I9YmxhY2ssIHBlbndpZHRoPTJdO1wiKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAoaW50IHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgY29sb3JJbmRleCA9IGNvbG9yUmFuZ2VzLlNlbGVjdCgociwgaSkgPT4gbmV3IHsgcmFuZ2UgPSByLCBpbmRleCA9IGkgfSkuRmlyc3QocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbnRhaW5zPGludD4ocC5yYW5nZSx2KSkuaW5kZXggJSBEb3RDb2xvcnMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSB2LlRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKHN0cmluZy5Gb3JtYXQoQFwiezB9IFtsYWJlbCA9IFwiXCJ7Mn1cIlwiLCBzdHlsZSA9IGZpbGxlZCwgZmlsbGNvbG9yID0gXCJcInsxfVwiXCJdO1wiLCB2LCBEb3RDb2xvcnNbY29sb3JJbmRleF0sIGxhYmVsKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEcuX2FkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhYmVsRWRnZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKHN0cmluZy5Gb3JtYXQoQFwiezB9IC0tIHsxfSBbbGFiZWwgPSBcIlwiezJ9XCJcIl1cIiwgaSwgaiwgaykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKHN0cmluZy5Gb3JtYXQoXCJ7MH0gLS0gezF9XCIsIGksIGopKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJ9XCIpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNiLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFRvRG90Rm9yVGlreigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZhY3RvcnMgPSBGYWN0b3IoKTtcclxuICAgICAgICAgICAgdmFyIGNvbG9yUmFuZ2VzID0gbmV3IExpc3Q8SUVudW1lcmFibGU8aW50Pj4oKTtcclxuICAgICAgICAgICAgaW50IGxhc3QgPSAwO1xyXG4gICAgICAgICAgICB2YXIgRyA9IEdyYXBocy5FbXB0eTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGZhY3RvciBpbiBmYWN0b3JzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb2xvclJhbmdlcy5BZGQoRW51bWVyYWJsZS5SYW5nZShsYXN0LCBmYWN0b3IuTikpO1xyXG4gICAgICAgICAgICAgICAgbGFzdCArPSBmYWN0b3IuTjtcclxuXHJcbiAgICAgICAgICAgICAgICBHICo9IGZhY3RvcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcImdyYXBoIEcge1wiKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAoaW50IHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgY29sb3JJbmRleCA9IGNvbG9yUmFuZ2VzLlNlbGVjdCgociwgaSkgPT4gbmV3IHsgcmFuZ2UgPSByLCBpbmRleCA9IGkgfSkuRmlyc3QocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbnRhaW5zPGludD4ocC5yYW5nZSx2KSkuaW5kZXggJSBUaWt6Q29sb3JzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShzdHJpbmcuRm9ybWF0KEBcInswfSBbbGFiZWwgPSBcIlwiXCJcIiwgc3R5bGUgPSBcIlwiZHJhdywgY2lyY2xlLCBmaWxsPXsxfVwiXCJdO1wiLCB2LCBUaWt6Q29sb3JzW2NvbG9ySW5kZXhdKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChHLl9hZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShzdHJpbmcuRm9ybWF0KFwiezB9IC0tIHsxfVwiLCBpLCBqKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJ9XCIpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNiLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBPcGVyYXRpb25zXHJcbiAgICAgICAgYm9vbCBJc1Byb3BlckZhY3RvcihMaXN0PGludD4gc3Vic2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHN1YnNldC5Db3VudCA8PSAwKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHN1YnNldC5Db3VudCA+PSBOKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVzdCA9IExpc3RVdGlsaXR5LkRpZmZlcmVuY2U8aW50PihfdmVydGljZXMsIHN1YnNldCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcGFpcnMgPSBmcm9tIGkgaW4gc3Vic2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gaiBpbiByZXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdCBuZXcgVHVwbGU8aW50LCBpbnQ+KGksIGopO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhaXIgaW4gcGFpcnMpXHJcbiAgICAgICAgICAgICAgICBpZiAoIV9hZGphY2VudFtwYWlyLkl0ZW0xLCBwYWlyLkl0ZW0yXSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxHcmFwaD4gRmFjdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJGYWN0b3JzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oX3ZlcnRleFN1YnNldHMuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KSh2ZXJ0aWNlcyA9PiBJc1Byb3BlckZhY3Rvcih2ZXJ0aWNlcykpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIG1heGltYWxGYWN0b3IgPSBMaXN0VXRpbGl0eS5NYXhpbWFsRWxlbWVudHM8aW50Pihwcm9wZXJGYWN0b3JzKVswXTtcclxuICAgICAgICAgICAgaWYgKG1heGltYWxGYWN0b3IuQ291bnQgPD0gMCkgcmV0dXJuIEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxHcmFwaD4oKSwoX28xMyk9PntfbzEzLkFkZChDbG9uZSgpKTtyZXR1cm4gX28xMzt9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciByZXN0ID0gTGlzdFV0aWxpdHkuRGlmZmVyZW5jZTxpbnQ+KF92ZXJ0aWNlcywgbWF4aW1hbEZhY3Rvcik7XHJcbiAgICAgICAgICAgIHZhciBtYXhGYWN0b3IgPSBJbmR1Y2VkU3ViZ3JhcGgobWF4aW1hbEZhY3Rvcik7XHJcbiAgICAgICAgICAgIHZhciByZXN0R3JhcGggPSBJbmR1Y2VkU3ViZ3JhcGgocmVzdCk7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbmNhdDxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGg+KG1heEZhY3Rvci5GYWN0b3IoKSxyZXN0R3JhcGguRmFjdG9yKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggQ2xvbmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaChHZXRFZGdlV2VpZ2h0cygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIENvbXBsZW1lbnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGFkamFjZW50ID0gbmV3IGJvb2xbTiwgTl07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gaikgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRbaSwgal0gPSAhX2FkamFjZW50W2ksIGpdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaChhZGphY2VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBSZW1vdmVWZXJ0ZXgoaW50IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc3ViZ3JhcGggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KFZlcnRpY2VzKTtcclxuICAgICAgICAgICAgc3ViZ3JhcGguUmVtb3ZlKHYpO1xyXG4gICAgICAgICAgICByZXR1cm4gSW5kdWNlZFN1YmdyYXBoKHN1YmdyYXBoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIFJlbW92ZUVkZ2UoVHVwbGU8aW50LCBpbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoKEdldEVkZ2VXZWlnaHRzKG5ldyBpbnRbXSB7IH0sIG5ldyBUdXBsZTxpbnQsIGludD5bXSB7IGUgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggUmVtb3ZlRWRnZShpbnQgdjEsIGludCB2MilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBSZW1vdmVFZGdlKG5ldyBUdXBsZTxpbnQsIGludD4odjEsIHYyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBBZGRFZGdlKGludCB2MSwgaW50IHYyLCBib29sIGRpcmVjdGVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGcgPSBDbG9uZSgpO1xyXG4gICAgICAgICAgICBnLl9hZGphY2VudFt2MSwgdjJdID0gZy5fYWRqYWNlbnRbdjIsIHYxXSA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmIChkaXJlY3RlZClcclxuICAgICAgICAgICAgICAgIGcuRGlyZWN0ZWRbdjEsIHYyXSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoKGcuR2V0RWRnZVdlaWdodHMoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFR1cGxlPGludCwgaW50PiBHZXRBcmJpdHJhcnlFZGdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVHVwbGU8aW50LCBpbnQ+KGksIGopO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIExpc3Q8VHVwbGU8aW50LCBpbnQ+PiBHZXRFZGdlVHVwbGVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0dXBsZXMgPSBuZXcgTGlzdDxUdXBsZTxpbnQsIGludD4+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERpcmVjdGVkW2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGVzLkFkZChuZXcgVHVwbGU8aW50LCBpbnQ+KGksIGopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGVzLkFkZChuZXcgVHVwbGU8aW50LCBpbnQ+KGosIGkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHVwbGVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggRGlzam9pbnRVbmlvbihHcmFwaCBIKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IG4gPSBOICsgSC5OO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFkamFjZW50ID0gbmV3IGJvb2xbbiwgbl07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRbaSwgal0gPSBfYWRqYWNlbnRbaSwgal07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IEguTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBILk47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBhZGphY2VudFtOICsgaSwgTiArIGpdID0gSFtpLCBqXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGgoYWRqYWNlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggSm9pbihHcmFwaCBIKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIEcgPSBEaXNqb2ludFVuaW9uKEgpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IEguTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEcuX2FkamFjZW50W2ksIE4gKyBqXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgRy5fYWRqYWNlbnRbTiArIGosIGldID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEcuSW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gRztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIEFkZEVkZ2UoaW50IHgsIGludCB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIEcgPSBDbG9uZSgpO1xyXG4gICAgICAgICAgICBHLl9hZGphY2VudFt4LCB5XSA9IHRydWU7XHJcbiAgICAgICAgICAgIEcuX2FkamFjZW50W3ksIHhdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIEcuSW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gRztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEdyYXBoIEF0dGFjaE5ld1ZlcnRleChwYXJhbXMgaW50W10gbmVpZ2hib3JzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEF0dGFjaE5ld1ZlcnRleCgoSUxpc3Q8aW50PiluZWlnaGJvcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgR3JhcGggQXR0YWNoTmV3VmVydGV4KElMaXN0PGludD4gbmVpZ2hib3JzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGFkamFjZW50ID0gbmV3IGJvb2xbTiArIDEsIE4gKyAxXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRbaSwgal0gPSBfYWRqYWNlbnRbaSwgal07XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgbmVpZ2hib3IgaW4gbmVpZ2hib3JzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhZGphY2VudFtOLCBuZWlnaGJvcl0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYWRqYWNlbnRbbmVpZ2hib3IsIE5dID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaChhZGphY2VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggb3BlcmF0b3IgKyhHcmFwaCBBLCBHcmFwaCBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuRGlzam9pbnRVbmlvbihCKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBvcGVyYXRvciAqKEdyYXBoIEEsIEdyYXBoIEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQS5Kb2luKEIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIG9wZXJhdG9yICooaW50IGssIEdyYXBoIEEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgRyA9IEEuQ2xvbmUoKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBrOyBpKyspXHJcbiAgICAgICAgICAgICAgICBHICs9IEE7XHJcblxyXG4gICAgICAgICAgICBHLkluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIEc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGggU3F1YXJlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnID0gQ2xvbmUoKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gVmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYWlyIGluIEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGludD4oTmVpZ2hib3JzW3ZdLE5laWdoYm9yc1t2XSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhaXIuSXRlbTEgIT0gcGFpci5JdGVtMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgZy5fYWRqYWNlbnRbcGFpci5JdGVtMSwgcGFpci5JdGVtMl0gPSBnLl9hZGphY2VudFtwYWlyLkl0ZW0yLCBwYWlyLkl0ZW0xXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBnLkNsb25lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBFZGdlc1xyXG4gICAgICAgIHB1YmxpYyBpbnQgU2l6ZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHQgKz0gT3V0RGVncmVlKGkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWF4RGVncmVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IG1heCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBtYXggPSBNYXRoLk1heChtYXgsIERlZ3JlZShpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1heDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IE1pbkRlZ3JlZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBtaW4gPSBpbnQuTWF4VmFsdWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBNYXRoLk1pbihtaW4sIERlZ3JlZShpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1pbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IE1heE91dERlZ3JlZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBtYXggPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5NYXgobWF4LCBPdXREZWdyZWUoaSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGludCBNYXhJbkRlZ3JlZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBtYXggPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5NYXgobWF4LCBJbkRlZ3JlZShpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1heDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNSZWd1bGFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChOIDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oTmVpZ2hib3JzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikobiA9PiBuLkNvdW50ID09IE5laWdoYm9yc1swXS5Db3VudCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBEZWdyZWUoaW50IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTmVpZ2hib3JzW3ZdLkNvdW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IE91dERlZ3JlZShpbnQgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBPdXROZWlnaGJvcnNbdl0uQ291bnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgSW5EZWdyZWUoaW50IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSW5OZWlnaGJvcnNbdl0uQ291bnQ7ICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgRGVncmVlSW5TdWJncmFwaChpbnQgdiwgTGlzdDxpbnQ+IHN1YmdyYXBoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIExpc3RVdGlsaXR5LkludGVyc2VjdGlvbkNvdW50U29ydGVkKE5laWdoYm9yc1t2XSwgc3ViZ3JhcGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8aW50PiBOZWlnaGJvcnNJblN1YmdyYXBoKGludCB2LCBMaXN0PGludD4gc3ViZ3JhcGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uU29ydGVkKE5laWdoYm9yc1t2XSwgc3ViZ3JhcGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBTdW1PdmVyU3ViZ3JhcGhOZWlnaGJvcnMoaW50IHYsIExpc3Q8aW50PiBzdWJncmFwaCwgaW50W10gZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlN1bTxpbnQ+KExpc3RVdGlsaXR5LkludGVyc2VjdGlvblNvcnRlZChOZWlnaGJvcnNbdl0sIHN1YmdyYXBoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHcgPT4gZ1t3XSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEZ1bmM8aW50LCBpbnQ+IEdldERlZ3JlZU1pbnVzS0Z1bmMoaW50IGspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdiA9PiBEZWdyZWUodikgLSBrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBFZGdlc09uKExpc3Q8aW50PiBBKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGVkZ2VzID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBBLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBBLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9hZGphY2VudFtBW2ldLCBBW2pdXSkgZWRnZXMrKztcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlZGdlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gRWRnZUluZGljZXNPbihMaXN0PGludD4gQSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBlZGdlSW5kaWNlcyA9IG5ldyBMaXN0PGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEEuQ29udGFpbnMoaSkgJiYgQS5Db250YWlucyhqKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VJbmRpY2VzLkFkZChrKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlZGdlSW5kaWNlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGludCBFZGdlc0JldHdlZW4oTGlzdDxpbnQ+IEEsIExpc3Q8aW50PiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGludGVyc2VjdGlvbiA9IExpc3RVdGlsaXR5LkludGVyc2VjdGlvbjxpbnQ+KEEsIEIpO1xyXG4gICAgICAgICAgICBBID0gTGlzdFV0aWxpdHkuRGlmZmVyZW5jZTxpbnQ+KEEsIEIpO1xyXG5cclxuICAgICAgICAgICAgaW50IGVkZ2VzID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBBLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IEIuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W0FbaV0sIEJbal1dKSBlZGdlcysrO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGVkZ2VzICsgRWRnZXNPbihpbnRlcnNlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gSW5kZXBlbmRlbnQgc2V0c1xyXG4gICAgIFxyXG4gICAgICAgIElFbnVtZXJhYmxlPExpc3Q8aW50Pj4gSW5kZXBlbmRlbnRTZXRzSW5TdWJncmFwaChpbnQgZmlyc3RWZXJ0ZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZmlyc3RWZXJ0ZXggPj0gTikgcmV0dXJuIEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxMaXN0PGludD4+KCksKF9vMTQpPT57X28xNC5BZGQobmV3IExpc3Q8aW50PigpKTtyZXR1cm4gX28xNDt9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdWJncmFwaFNldHMgPSBJbmRlcGVuZGVudFNldHNJblN1YmdyYXBoKGZpcnN0VmVydGV4ICsgMSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5VbmlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oc3ViZ3JhcGhTZXRzLFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHN1YmdyYXBoU2V0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHNldCA9PiBJc0luZGVwZW5kZW50T2YoZmlyc3RWZXJ0ZXgsIHNldCkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pikoc2V0ID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJpZ2dlciA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vMTUpPT57X28xNS5BZGQoZmlyc3RWZXJ0ZXgpO3JldHVybiBfbzE1O30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpZ2dlci5BZGRSYW5nZShzZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiaWdnZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBib29sIElzSW5kZXBlbmRlbnRPZihpbnQgdiwgTGlzdDxpbnQ+IHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIHNldCkgaWYgKHcgPT0gdiB8fCBfYWRqYWNlbnRbdywgdl0pIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0NsaXF1ZShMaXN0PGludD4gc3Vic2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdWJzZXQuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IHN1YnNldC5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghX2FkamFjZW50W3N1YnNldFtpXSwgc3Vic2V0W2pdXSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzSW5kZXBlbmRlbnQoTGlzdDxpbnQ+IHN1YnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3Vic2V0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBzdWJzZXQuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FkamFjZW50W3N1YnNldFtpXSwgc3Vic2V0W2pdXSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQ29tcGxldGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIElzQ2xpcXVlKF92ZXJ0aWNlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQ2xpcXVlTnVtYmVyQXRMZWFzdChpbnQgaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChrID4gX3ZlcnRpY2VzLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgc2V0IGluIExpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4oX3ZlcnRpY2VzLCBrKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKElzQ2xpcXVlKHNldCkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgSW5kZXBlbmRlbmNlTnVtYmVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBJbmRlcGVuZGVuY2VOdW1iZXIoVmVydGljZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IEluZGVwZW5kZW5jZU51bWJlcihJRW51bWVyYWJsZTxpbnQ+IHN1YmdyYXBoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTWF4PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihfaW5kZXBlbmRlbnRTZXRzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShJID0+IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb25Db3VudDxpbnQ+KEksc3ViZ3JhcGgpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gTWF4aW11bUluZGVwZW5kZW50U3Vic2V0KElFbnVtZXJhYmxlPGludD4gc3ViZ3JhcGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IEluZGVwZW5kZW5jZU51bWJlcihzdWJncmFwaCk7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihfaW5kZXBlbmRlbnRTZXRzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoSSA9PiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uQ291bnQ8aW50PihJLHN1YmdyYXBoKSA9PSBpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8TGlzdDxpbnQ+PiBFbnVtZXJhdGVNYXhpbWFsSW5kZXBlbmRlbnRTZXRzKExpc3Q8aW50PiBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlQnJvbktlcmJvc2NoKHNldCwgbmV3IExpc3Q8aW50PigpLCBuZXcgTGlzdDxpbnQ+KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPExpc3Q8aW50Pj4gRW51bWVyYXRlTWF4aW1hbEluZGVwZW5kZW50U2V0cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlQnJvbktlcmJvc2NoKFZlcnRpY2VzLCBuZXcgTGlzdDxpbnQ+KCksIG5ldyBMaXN0PGludD4oKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJRW51bWVyYWJsZTxMaXN0PGludD4+IEVudW1lcmF0ZUJyb25LZXJib3NjaChMaXN0PGludD4gUCwgTGlzdDxpbnQ+IFIsIExpc3Q8aW50PiBYKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFAuQ291bnQgPT0gMCAmJiBYLkNvdW50ID09IDApXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihSKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgUEMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KFApO1xyXG4gICAgICAgICAgICAgICAgdmFyIFhDID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihYKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdSA9IFRvbWl0YVBpdm90KFAsIFgpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8aW50PihQLENvbXBsZW1lbnROZWlnaGJvcnNbdV0pKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFIuQWRkKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzZXQgaW4gRW51bWVyYXRlQnJvbktlcmJvc2NoKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb248aW50PihQQyxDb21wbGVtZW50TmVpZ2hib3JzW3ZdKSwgUiwgQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkludGVyc2VjdGlvbjxpbnQ+KFhDLENvbXBsZW1lbnROZWlnaGJvcnNbdl0pKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHNldDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUi5SZW1vdmUodik7XHJcbiAgICAgICAgICAgICAgICAgICAgUEMuUmVtb3ZlKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIFhDLkFkZCh2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50IFRvbWl0YVBpdm90KExpc3Q8aW50PiBQLCBMaXN0PGludD4gWClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtYXggPSAtMTtcclxuICAgICAgICAgICAgdmFyIGJlc3QgPSAtMTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHUgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db25jYXQ8aW50PihQLFgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbiA9IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5JbnRlcnNlY3Rpb25Db3VudDxpbnQ+KENvbXBsZW1lbnROZWlnaGJvcnNbdV0sUCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobiA+IG1heClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXggPSBuO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlc3QgPSB1O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYmVzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gRmluZENoaUNvbG9yaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IEsgPSAwOyBLIDwgaW50Lk1heFZhbHVlOyBLKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gRmluZEtDb2xvcmluZyhWZXJ0aWNlcywgSyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gRmluZEtDb2xvcmluZyhMaXN0PGludD4gc3ViZ3JhcGgsIGludCBLKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHN1YmdyYXBoLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICBpZiAoSyA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgSSBpbiBFbnVtZXJhdGVNYXhpbWFsSW5kZXBlbmRlbnRTZXRzKHN1YmdyYXBoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBGaW5kS0NvbG9yaW5nKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5EaWZmZXJlbmNlPGludD4oc3ViZ3JhcGgsSSksIEsgLSAxKTtcclxuICAgICAgICAgICAgICAgIGlmIChjICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYy5JbnNlcnQoMCwgSSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIExpc3QgY29sb3JpbmdcclxuXHJcbiAgICAgICAgcHVibGljIGludCBNYXhDb2xvcmFibGVTdWJzZXQoTGlzdDxsb25nPiBhc3NpZ25tZW50LCBMaXN0PGludD4gc3Vic2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1heENvbG9yYWJsZVN1YnNldChhc3NpZ25tZW50LCAwLCBzdWJzZXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50IE1heENvbG9yYWJsZVN1YnNldChMaXN0PGxvbmc+IGFzc2lnbm1lbnQsIGludCB2LCBMaXN0PGludD4gc3Vic2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHYgPj0gc3Vic2V0LkNvdW50KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWF4ID0gTWF4Q29sb3JhYmxlU3Vic2V0KGFzc2lnbm1lbnQsIHYgKyAxLCBzdWJzZXQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9ycyA9IGFzc2lnbm1lbnRbc3Vic2V0W3ZdXTtcclxuICAgICAgICAgICAgd2hpbGUgKGNvbG9ycyAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBjb2xvcnMgJiAtY29sb3JzO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyBMaXN0PGxvbmc+KGFzc2lnbm1lbnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG5laWdoYm9yIGluIF9sYXRlck5laWdoYm9ycy5WYWx1ZVtzdWJzZXRbdl1dKVxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRDb3B5W25laWdoYm9yXSAmPSB+Y29sb3I7XHJcblxyXG4gICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5NYXgobWF4LCAxICsgTWF4Q29sb3JhYmxlU3Vic2V0KGFzc2lnbm1lbnRDb3B5LCB2ICsgMSwgc3Vic2V0KSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF4ID49IHN1YnNldC5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjb2xvcnMgXj0gY29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEdyZWVkeUNvbG9yKExpc3Q8bG9uZz4gYXNzaWdubWVudCwgTGlzdDxpbnQ+IHN1YnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb2xvcmluZyA9IG5ldyBsb25nW05dO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBzdWJzZXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBsb3N0ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BZ2dyZWdhdGU8aW50LGxvbmc+KE5laWdoYm9yc1t2XSwwTCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgaW50LCBsb25nPikoKGwsIHgpID0+IGwgfCBjb2xvcmluZ1t4XSkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbG9ycyA9IGFzc2lnbm1lbnRbdl0gJiB+bG9zdDtcclxuICAgICAgICAgICAgICAgIGNvbG9yaW5nW3ZdID0gY29sb3JzICYgLWNvbG9ycztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8bG9uZz4oY29sb3JpbmcsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgYm9vbD4pKGMgPT4gYyAhPSAwKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0Nob29zYWJsZShMaXN0PGxvbmc+IGFzc2lnbm1lbnQsIExpc3Q8aW50PiBzdWJzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSXNDaG9vc2FibGUoYXNzaWdubWVudCwgMCwgc3Vic2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYm9vbCBJc0Nob29zYWJsZShMaXN0PGxvbmc+IGFzc2lnbm1lbnQsIGludCB2LCBMaXN0PGludD4gc3Vic2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHYgPj0gc3Vic2V0LkNvdW50KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3JzID0gYXNzaWdubWVudFtzdWJzZXRbdl1dO1xyXG4gICAgICAgICAgICB3aGlsZSAoY29sb3JzICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGNvbG9ycyAmIC1jb2xvcnM7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IExpc3Q8bG9uZz4oYXNzaWdubWVudCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgbmVpZ2hib3IgaW4gX2xhdGVyTmVpZ2hib3JzLlZhbHVlW3N1YnNldFt2XV0pXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudENvcHlbbmVpZ2hib3JdICY9IH5jb2xvcjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoSXNDaG9vc2FibGUoYXNzaWdubWVudENvcHksIHYgKyAxLCBzdWJzZXQpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbG9ycyBePSBjb2xvcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0Nob29zYWJsZShMaXN0PGxvbmc+IGFzc2lnbm1lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSXNDaG9vc2FibGUoYXNzaWdubWVudCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJvb2wgSXNDaG9vc2FibGUoTGlzdDxsb25nPiBhc3NpZ25tZW50LCBpbnQgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2ID49IE4pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb2xvcnMgPSBhc3NpZ25tZW50W3ZdO1xyXG4gICAgICAgICAgICB3aGlsZSAoY29sb3JzICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGNvbG9ycyAmIC1jb2xvcnM7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IExpc3Q8bG9uZz4oYXNzaWdubWVudCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgbmVpZ2hib3IgaW4gX2xhdGVyTmVpZ2hib3JzLlZhbHVlW3ZdKVxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRDb3B5W25laWdoYm9yXSAmPSB+Y29sb3I7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKElzQ2hvb3NhYmxlKGFzc2lnbm1lbnRDb3B5LCB2ICsgMSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgY29sb3JzIF49IGNvbG9yO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQ2xpcXVlQ292ZXJpbmcoTGlzdDxsb25nPiBhc3NpZ25tZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNldCBpbiBfaW5kZXBlbmRlbnRUd29TZXRzLlZhbHVlKSBcclxuICAgICAgICAgICAgICAgIGlmICgoYXNzaWdubWVudFtzZXRbMF1dICYgYXNzaWdubWVudFtzZXRbMV1dKSAhPSAwKSBcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gQ2hlY2tGR0Nob29zYWJsZShGdW5jPGludCwgaW50PiBmLCBGdW5jPGludCwgaW50PiBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHBvdCA9IEVudW1lcmFibGUuUmFuZ2UoMCwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TdW08aW50PihWZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHYgPT4gZyh2KSkpIC0gMSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBmaXJzdCA9IEVudW1lcmFibGUuUmFuZ2UoMCwgZigwKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBMIGluIEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvbmNhdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4oKChJRW51bWVyYWJsZTxJRW51bWVyYWJsZTxMaXN0PGludD4+PikobmV3W10geyAobmV3W10geyBmaXJzdCB9KSB9KSksU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ta2lwPGludD4oVmVydGljZXMsMSkuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PikodiA9PiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KHBvdCwgZih2KSkpKSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgTEwgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oTCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUlzR0NvbG9yYWJsZShMTCwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KWcpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBMTDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIElzR0NvbG9yYWJsZShMaXN0PExpc3Q8aW50Pj4gTCwgRnVuYzxpbnQsIGludD4gZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2xvcmluZyBpbiBBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PihWZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PikodiA9PiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KExbdl0sIGcodikpKSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoSXNQcm9wZXJDb2xvcmluZyhTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oY29sb3JpbmcpKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBJc1Byb3BlckNvbG9yaW5nKExpc3Q8TGlzdDxpbnQ+PiBjb2xvcmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IHYgPSAwOyB2IDwgTjsgdisrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCB3ID0gdiArIDE7IHcgPCBOOyB3KyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfYWRqYWNlbnRbdiwgd10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkludGVyc2VjdGlvbkNvdW50PGludD4oY29sb3Jpbmdbdl0sY29sb3Jpbmdbd10pID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IFxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBPbmxpbmUgbGlzdCBjb2xvcmluZ1xyXG4gICAgICAgIHB1YmxpYyBpbnQgTWljKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtaWMgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgc2V0IGluIEVudW1lcmF0ZU1heGltYWxJbmRlcGVuZGVudFNldHMoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlN1bTxpbnQ+KHNldCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHYgPT4gRGVncmVlKHYpKSk7XHJcbiAgICAgICAgICAgICAgICBtaWMgPSBNYXRoLk1heChtaWMsIHQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWljO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc09ubGluZUZDaG9vc2FibGUoRnVuYzxpbnQsIGludD4gZilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5vZGVzVmlzaXRlZCA9IDA7XHJcbiAgICAgICAgICAgIENhY2hlSGl0cyA9IDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgZlRyYWNlID0gbmV3IGludFtOXTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgZlRyYWNlW3ZdID0gZih2KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PE9ubGluZUNob2ljZUhhc2hHcmFwaCwgYm9vbD4oKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBJc09ubGluZUZDaG9vc2FibGUoZlRyYWNlLCBFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KDEsIE4pLlRvQXJyYXkoKSwgY2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBib29sIElzT25saW5lRkNob29zYWJsZShpbnRbXSBmLCBpbnRbXSBnLCBEaWN0aW9uYXJ5PE9ubGluZUNob2ljZUhhc2hHcmFwaCwgYm9vbD4gY2FjaGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOb2Rlc1Zpc2l0ZWQrKztcclxuXHJcbiAgICAgICAgICAgIE9ubGluZUNob2ljZUhhc2hHcmFwaCBrZXkgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGludFtdIGdDbG9uZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGl2ZVZlcnRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oZywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludCwgaW50PikoKHYsIGkpID0+IHYgPiAwID8gaSA6IC0xKSkuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoaSA9PiBpID49IDApKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIGZyZWViaWVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxpbnQ+KGxpdmVWZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh2ID0+IERlZ3JlZUluU3ViZ3JhcGgodiwgbGl2ZVZlcnRpY2VzKSA8IGZbdl0pKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChmcmVlYmllcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChnQ2xvbmUgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBnQ2xvbmUgPSBuZXcgaW50W2cuTGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgICAgICBBcnJheS5Db3B5KGcsIGdDbG9uZSwgZy5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGZyZWViaWVzKVxyXG4gICAgICAgICAgICAgICAgICAgIGdbdl0gPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGxpdmVWZXJ0aWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KGcsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQsIGludD4pKCh2LCBpKSA9PiB2ID4gMCA/IGkgOiAtMSkpLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGkgPT4gaSA+PSAwKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBmcmVlYmllcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8aW50PihsaXZlVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiBEZWdyZWVJblN1YmdyYXBoKHYsIGxpdmVWZXJ0aWNlcykgPCBmW3ZdKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsaXZlVmVydGljZXMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGdvdG8gZG9uZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8aW50PihsaXZlVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiBmW3ZdIDw9IDApKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBnb3RvIGRvbmU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGtleSA9IG5ldyBPbmxpbmVDaG9pY2VIYXNoR3JhcGgoZiwgZyk7XHJcbiAgICAgICAgICAgIGJvb2wgY2FjaGVkUmVzdWx0O1xyXG4gICAgICAgICAgICBpZiAoY2FjaGUuVHJ5R2V0VmFsdWUoa2V5LCBvdXQgY2FjaGVkUmVzdWx0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQ2FjaGVIaXRzKys7XHJcblxyXG4gICAgICAgICAgICAgICAga2V5ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNhY2hlZFJlc3VsdDtcclxuICAgICAgICAgICAgICAgIGdvdG8gZG9uZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGluZGVwZW5kZW50U2V0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KF9pbmRlcGVuZGVudFNldHMuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShzZXQgPT4gc2V0LkNvdW50ID49IDEgJiYgTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWxTb3J0ZWQoc2V0LCBsaXZlVmVydGljZXMpKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgViBpbiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KGxpdmVWZXJ0aWNlcykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChWLkNvdW50IDw9IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihpbmRlcGVuZGVudFNldHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShzcyA9PiBMaXN0VXRpbGl0eS5TdWJzZXRFcXVhbFNvcnRlZChWLCBzcykpKSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBWKVxyXG4gICAgICAgICAgICAgICAgICAgIGZbdl0tLTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWF4aW1hbEluZGVwZW5kZW50U2V0cyA9IExpc3RVdGlsaXR5Lk1heGltYWxFbGVtZW50c1NvcnRlZChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihpbmRlcGVuZGVudFNldHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShzZXQgPT4gTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWxTb3J0ZWQoc2V0LCBWKSkpLlRvTGlzdCgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY2hvb3NhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgQyBpbiBtYXhpbWFsSW5kZXBlbmRlbnRTZXRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIEMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdbdl0tLTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2hvb3NhYmxlID0gSXNPbmxpbmVGQ2hvb3NhYmxlKGYsIGcsIGNhY2hlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gQylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ1t2XSsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hvb3NhYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBWKVxyXG4gICAgICAgICAgICAgICAgICAgIGZbdl0rKztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWNob29zYWJsZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBnb3RvIGRvbmU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgZG9uZTpcclxuXHJcbiAgICAgICAgICAgIGlmIChnQ2xvbmUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIEFycmF5LkNvcHkoZ0Nsb25lLCBnLCBnLkxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoa2V5ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBjYWNoZVtrZXldID0gcmVzdWx0O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgI3JlZ2lvbiBvbmxpbmUgKGY6ZyktY2hvb3NhYmlsaXR5XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNPbmxpbmVGR0Nob29zYWJsZShGdW5jPGludCwgaW50PiBmLCBGdW5jPGludCwgaW50PiBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTm9kZXNWaXNpdGVkID0gMDtcclxuICAgICAgICAgICAgQ2FjaGVIaXRzID0gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBjYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PE9ubGluZUNob2ljZUhhc2hHcmFwaCwgYm9vbD4oKTtcclxuICAgICAgICAgICAgcmV0dXJuIElzT25saW5lRkdDaG9vc2FibGUoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oX3ZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodiA9PiBmKHYpKSkuVG9BcnJheSgpLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihfdmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh2ID0+IGcodikpKS5Ub0FycmF5KCksIGNhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYm9vbCBJc09ubGluZUZHQ2hvb3NhYmxlKGludFtdIGYsIGludFtdIGcsIERpY3Rpb25hcnk8T25saW5lQ2hvaWNlSGFzaEdyYXBoLCBib29sPiBjYWNoZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5vZGVzVmlzaXRlZCsrO1xyXG4gICAgICAgICAgICBPbmxpbmVDaG9pY2VIYXNoR3JhcGgga2V5ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpbnRbXSBnQ2xvbmUgPSBuZXcgaW50W2cuTGVuZ3RoXTtcclxuICAgICAgICAgICAgQXJyYXkuQ29weShnLCBnQ2xvbmUsIGcuTGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdbdl0gPD0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZWVkID0gZ1t2XSArIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU3VtPGludD4oTmVpZ2hib3JzW3ZdLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodyA9PiBnW3ddKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZbdl0gPj0gbmVlZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdbdl0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFjaGFuZ2VkKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbGl2ZVZlcnRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkluZGljZXNXaGVyZTxpbnQ+KGcsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiB2ID4gMCkpKTtcclxuICAgICAgICAgICAgaWYgKGxpdmVWZXJ0aWNlcy5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZ290byBkb25lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxpbnQ+KGxpdmVWZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh2ID0+IGZbdl0gPCBnW3ZdKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZ290byBkb25lO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBrZXkgPSBuZXcgT25saW5lQ2hvaWNlSGFzaEdyYXBoKGYsIGcpO1xyXG4gICAgICAgICAgICBib29sIGNhY2hlZFJlc3VsdDtcclxuICAgICAgICAgICAgaWYgKGNhY2hlLlRyeUdldFZhbHVlKGtleSwgb3V0IGNhY2hlZFJlc3VsdCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIENhY2hlSGl0cysrO1xyXG5cclxuICAgICAgICAgICAgICAgIGtleSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBjYWNoZWRSZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICBnb3RvIGRvbmU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRlcGVuZGVudFNldHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihfaW5kZXBlbmRlbnRTZXRzLlZhbHVlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoc2V0ID0+IHNldC5Db3VudCA+PSAxICYmIExpc3RVdGlsaXR5LlN1YnNldEVxdWFsU29ydGVkKHNldCwgbGl2ZVZlcnRpY2VzKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIFYgaW4gTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50PihsaXZlVmVydGljZXMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoVi5Db3VudCA8PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oaW5kZXBlbmRlbnRTZXRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoc3MgPT4gTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWxTb3J0ZWQoViwgc3MpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gVilcclxuICAgICAgICAgICAgICAgICAgICBmW3ZdLS07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG1heGltYWxJbmRlcGVuZGVudFNldHMgPSBMaXN0VXRpbGl0eS5NYXhpbWFsRWxlbWVudHNTb3J0ZWQoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oaW5kZXBlbmRlbnRTZXRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoc2V0ID0+IExpc3RVdGlsaXR5LlN1YnNldEVxdWFsU29ydGVkKHNldCwgVikpKS5Ub0xpc3QoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNob29zYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIEMgaW4gbWF4aW1hbEluZGVwZW5kZW50U2V0cylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBDKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnW3ZdLS07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNob29zYWJsZSA9IElzT25saW5lRkdDaG9vc2FibGUoZiwgZywgY2FjaGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBDKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnW3ZdKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaG9vc2FibGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIFYpXHJcbiAgICAgICAgICAgICAgICAgICAgZlt2XSsrO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghY2hvb3NhYmxlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGdvdG8gZG9uZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICBkb25lOlxyXG5cclxuICAgICAgICAgICAgaWYgKGdDbG9uZSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgQXJyYXkuQ29weShnQ2xvbmUsIGcsIGcuTGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChrZXkgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIGNhY2hlW2tleV0gPSByZXN1bHQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIE9yaWVudGF0aW9uc1xyXG4gICAgICAgIHB1YmxpYyBpbnQgRGlyZWN0aW9uKFR1cGxlPGludCwgaW50PiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFfYWRqYWNlbnRbZS5JdGVtMSwgZS5JdGVtMl0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBEaXJlY3RlZFtlLkl0ZW0yLCBlLkl0ZW0xXSA/IC0xIDogMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYm9vbCBNYXRjaGVzT3V0TWludXNJbihMaXN0PGludD4gb3V0TWludXNJbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxpbnQ+KF92ZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh2ID0+IE91dERlZ3JlZSh2KSAtIEluRGVncmVlKHYpID09IG91dE1pbnVzSW5bdl0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIE1lbW9pemVFdWxlcmlhblN1YmdyYXBoQ291bnRpbmcgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PEdyYXBoPiBTcGFubmluZ091dE1pbnVzSW5TdWJncmFwaHMoTGlzdDxpbnQ+IG91dE1pbnVzSW4sIExpc3Q8VHVwbGU8aW50LCBpbnQ+PiBlZGdlcywgRGljdGlvbmFyeTxPcmllbnRhdGlvbkhhc2hHcmFwaCwgTGlzdDxHcmFwaD4+IHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5vZGVzVmlzaXRlZCsrO1xyXG5cclxuICAgICAgICAgICAgdmFyIGdyYXBocyA9IG5ldyBMaXN0PEdyYXBoPigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGludD4oX3ZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHYgPT4gb3V0TWludXNJblt2XSA+IE91dERlZ3JlZSh2KSB8fCAtb3V0TWludXNJblt2XSA+IEluRGVncmVlKHYpKSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ3JhcGhzO1xyXG5cclxuICAgICAgICAgICAgdmFyIGtleSA9IG5ldyBPcmllbnRhdGlvbkhhc2hHcmFwaCh0aGlzLCBvdXRNaW51c0luKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChNZW1vaXplRXVsZXJpYW5TdWJncmFwaENvdW50aW5nKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBMaXN0PEdyYXBoPiBzcGFubmVycztcclxuICAgICAgICAgICAgICAgIGlmIChzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUuVHJ5R2V0VmFsdWUoa2V5LCBvdXQgc3Bhbm5lcnMpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIENhY2hlSGl0cysrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzcGFubmVycztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGVkZ2VzLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChNYXRjaGVzT3V0TWludXNJbihvdXRNaW51c0luKSlcclxuICAgICAgICAgICAgICAgICAgICBncmFwaHMuQWRkKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBncmFwaHM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5MYXN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGludCwgaW50Pj4oZWRnZXMpO1xyXG5cclxuICAgICAgICAgICAgZWRnZXMuUmVtb3ZlKGUpO1xyXG4gICAgICAgICAgICB2YXIgZyA9IFJlbW92ZUVkZ2UoZSk7XHJcblxyXG4gICAgICAgICAgICBncmFwaHMuQWRkUmFuZ2UoZy5TcGFubmluZ091dE1pbnVzSW5TdWJncmFwaHMob3V0TWludXNJbiwgZWRnZXMsIHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG91dE1pbnVzSW5QcmltZSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4ob3V0TWludXNJbik7XHJcbiAgICAgICAgICAgIHZhciB2MSA9IGUuSXRlbTE7XHJcbiAgICAgICAgICAgIHZhciB2MiA9IGUuSXRlbTI7XHJcblxyXG4gICAgICAgICAgICBpZiAoRGlyZWN0aW9uKGUpID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG91dE1pbnVzSW5QcmltZVtlLkl0ZW0xXS0tO1xyXG4gICAgICAgICAgICAgICAgb3V0TWludXNJblByaW1lW2UuSXRlbTJdKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvdXRNaW51c0luUHJpbWVbZS5JdGVtMV0rKztcclxuICAgICAgICAgICAgICAgIG91dE1pbnVzSW5QcmltZVtlLkl0ZW0yXS0tO1xyXG5cclxuICAgICAgICAgICAgICAgIHYxID0gZS5JdGVtMjtcclxuICAgICAgICAgICAgICAgIHYyID0gZS5JdGVtMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZ3JhcGhzLkFkZFJhbmdlKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGg+KGcuU3Bhbm5pbmdPdXRNaW51c0luU3ViZ3JhcGhzKG91dE1pbnVzSW5QcmltZSwgZWRnZXMsIHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLCBnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGg+KShncmFwaCA9PiBncmFwaC5BZGRFZGdlKHYxLCB2MiwgdHJ1ZSkpKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoTWVtb2l6ZUV1bGVyaWFuU3ViZ3JhcGhDb3VudGluZylcclxuICAgICAgICAgICAgICAgIHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZVtrZXldID0gZ3JhcGhzO1xyXG5cclxuICAgICAgICAgICAgZWRnZXMuQWRkKGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JhcGhzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxHcmFwaD4gU3Bhbm5pbmdFdWxlcmlhblN1YmdyYXBocyhMaXN0PFR1cGxlPGludCwgaW50Pj4gZWRnZXMsIERpY3Rpb25hcnk8T3JpZW50YXRpb25IYXNoR3JhcGgsIExpc3Q8R3JhcGg+PiBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3Bhbm5pbmdPdXRNaW51c0luU3ViZ3JhcGhzKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4obmV3IGludFtOXSksIGVkZ2VzLCBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBDb3VudFNwYW5uaW5nRXVsZXJpYW5TdWJncmFwaHMob3V0IGludCBldmVuLCBvdXQgaW50IG9kZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENhY2hlSGl0cyA9IDA7XHJcbiAgICAgICAgICAgIE5vZGVzVmlzaXRlZCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUgPSBuZXcgRGljdGlvbmFyeTxPcmllbnRhdGlvbkhhc2hHcmFwaCwgTGlzdDxHcmFwaD4+KCk7XHJcbiAgICAgICAgICAgIHZhciBlZGdlcyA9IEdldEVkZ2VUdXBsZXMoKTtcclxuXHJcbiAgICAgICAgICAgIGV2ZW4gPSAwO1xyXG4gICAgICAgICAgICBvZGQgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZyBpbiBTcGFubmluZ0V1bGVyaWFuU3ViZ3JhcGhzKGVkZ2VzLCBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZy5TaXplICUgMiA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW4rKztcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBvZGQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBDb3VudFNwYW5uaW5nRXVsZXJpYW5TdWJncmFwaHNVc2luZ1ZlcnRpY2VzKExpc3Q8aW50PiB2ZXJ0aWNlcywgb3V0IGludCBldmVuLCBvdXQgaW50IG9kZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENhY2hlSGl0cyA9IDA7XHJcbiAgICAgICAgICAgIE5vZGVzVmlzaXRlZCA9IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAodmVydGljZXMgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHZlcnRpY2VzID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PE9yaWVudGF0aW9uSGFzaEdyYXBoLCBMaXN0PEdyYXBoPj4oKTtcclxuICAgICAgICAgICAgdmFyIGVkZ2VzID0gR2V0RWRnZVR1cGxlcygpO1xyXG5cclxuICAgICAgICAgICAgZXZlbiA9IDA7XHJcbiAgICAgICAgICAgIG9kZCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBnIGluIFNwYW5uaW5nRXVsZXJpYW5TdWJncmFwaHMoZWRnZXMsIHNwYW5uaW5nRXVsZXJpYW5PcmllbnRhdGlvbnNDYWNoZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIHZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnLkRlZ3JlZSh2KSA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHNraXA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGcuU2l6ZSAlIDIgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICBldmVuKys7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgb2RkKys7XHJcblxyXG4gICAgICAgICAgICBza2lwOiA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgQ291bnRTcGFubmluZ0V1bGVyaWFuU3ViZ3JhcGhzVXNpbmdFZGdlcyhMaXN0PFR1cGxlPGludCwgaW50Pj4gZWRnZXMsIG91dCBpbnQgZXZlbiwgb3V0IGludCBvZGQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBDYWNoZUhpdHMgPSAwO1xyXG4gICAgICAgICAgICBOb2Rlc1Zpc2l0ZWQgPSAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKGVkZ2VzID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICBlZGdlcyA9IG5ldyBMaXN0PFR1cGxlPGludCwgaW50Pj4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzcGFubmluZ0V1bGVyaWFuT3JpZW50YXRpb25zQ2FjaGUgPSBuZXcgRGljdGlvbmFyeTxPcmllbnRhdGlvbkhhc2hHcmFwaCwgTGlzdDxHcmFwaD4+KCk7XHJcbiAgICAgICAgICAgIHZhciBlZGdlVHVwbGVzID0gR2V0RWRnZVR1cGxlcygpO1xyXG5cclxuICAgICAgICAgICAgZXZlbiA9IDA7XHJcbiAgICAgICAgICAgIG9kZCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBnIGluIFNwYW5uaW5nRXVsZXJpYW5TdWJncmFwaHMoZWRnZVR1cGxlcywgc3Bhbm5pbmdFdWxlcmlhbk9yaWVudGF0aW9uc0NhY2hlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZWRnZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnLl9hZGphY2VudFtlLkl0ZW0xLCBlLkl0ZW0yXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ290byBza2lwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChnLlNpemUgJSAyID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbisrO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIG9kZCsrO1xyXG5cclxuICAgICAgICAgICAgc2tpcDogO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxHcmFwaD4gRW51bWVyYXRlT3JpZW50YXRpb25zKEZ1bmM8aW50LCBpbnQ+IHJlcXVpcmVkSW5kZWdyZWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZ2FpbiA9IG5ldyBpbnRbTl07XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaW5OZWlnaGJvckxpc3QgaW4gRW51bWVyYXRlT3JpZW50YXRpb25zRm9yKDAsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PilyZXF1aXJlZEluZGVncmVlLCBnYWluKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFkamFjZW50ID0gbmV3IGJvb2xbTiwgTl07XHJcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0ZWQgPSBuZXcgYm9vbFtOLCBOXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGluTmVpZ2hib3JMaXN0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBpbk5laWdoYm9yTGlzdC5Db3VudCAtIDEgLSBpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdyBpbiBpbk5laWdoYm9yTGlzdFtpXSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkamFjZW50W3YsIHddID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRbdywgdl0gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0ZWRbdywgdl0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG91dE5laWdoYm9ycyA9IExpc3RVdGlsaXR5LkRpZmZlcmVuY2U8aW50PihfbGF0ZXJOZWlnaGJvcnMuVmFsdWVbdl0sIGluTmVpZ2hib3JMaXN0W2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gb3V0TmVpZ2hib3JzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRbdiwgd10gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGphY2VudFt3LCB2XSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RlZFt2LCB3XSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXcgR3JhcGgoR2V0RWRnZVdlaWdodHMoYWRqYWNlbnQsIGRpcmVjdGVkKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgSUVudW1lcmFibGU8TGlzdDxMaXN0PGludD4+PiBFbnVtZXJhdGVPcmllbnRhdGlvbnNGb3IoaW50IHYsIEZ1bmM8aW50LCBpbnQ+IHJlcXVpcmVkSW5kZWdyZWUsIGludFtdIGdhaW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodiA+PSBOIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdhaW5bdl0gPCByZXF1aXJlZEluZGVncmVlKHYpKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGlucyBpbiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KF9sYXRlck5laWdoYm9ycy5WYWx1ZVt2XSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucy5Db3VudCA8IHJlcXVpcmVkSW5kZWdyZWUodikgLSBnYWluW3ZdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG91dHMgPSBMaXN0VXRpbGl0eS5EaWZmZXJlbmNlPGludD4oX2xhdGVyTmVpZ2hib3JzLlZhbHVlW3ZdLCBpbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgeCBpbiBvdXRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYWluW3hdKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBvIGluIEVudW1lcmF0ZU9yaWVudGF0aW9uc0Zvcih2ICsgMSwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KXJlcXVpcmVkSW5kZWdyZWUsIGdhaW4pKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgby5BZGQoaW5zKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBvO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHggaW4gb3V0cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2Fpblt4XS0tO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxHcmFwaD4gRW51bWVyYXRlT3JpZW50YXRpb25zKGJvb2wgZmFzdCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHVuZGlyZWN0ZWRXZWlnaHRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oR2V0RWRnZVdlaWdodHMoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHcgPT4gTWF0aC5BYnModykpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIGVkZ2VJbmRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4odW5kaXJlY3RlZFdlaWdodHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQsIGludD4pKCh3LCBpKSA9PiB3ICE9IDAgPyBpIDogLTEpKS5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KSh4ID0+IHggPiAwKSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdW5kaXJlY3RlZCA9IG5ldyBHcmFwaCh1bmRpcmVjdGVkV2VpZ2h0cyk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgbGlzdCBpbiBMaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KGVkZ2VJbmRpY2VzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdlaWdodHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50Pih1bmRpcmVjdGVkV2VpZ2h0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludCwgaW50PikoKHcsIGkpID0+IGxpc3QuQ29udGFpbnMoaSkgPyAtdyA6IHcpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IEdyYXBoKHdlaWdodHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaCBHZW5lcmF0ZVJhbmRvbU9yaWVudGF0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB1bmRpcmVjdGVkV2VpZ2h0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KEdldEVkZ2VXZWlnaHRzKCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh3ID0+IE1hdGguQWJzKHcpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBlZGdlSW5kaWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHVuZGlyZWN0ZWRXZWlnaHRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50LCBpbnQ+KSgodywgaSkgPT4gdyAhPSAwID8gaSA6IC0xKSkuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoeCA9PiB4ID4gMCkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxpc3QgPSBuZXcgTGlzdDxpbnQ+KEUgLyAyKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gZWRnZUluZGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChSTkcuTmV4dCgyKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3QuQWRkKGkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgd2VpZ2h0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KHVuZGlyZWN0ZWRXZWlnaHRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50LCBpbnQ+KSgodywgaSkgPT4gbGlzdC5Db250YWlucyhpKSA/IC13IDogdykpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaCh3ZWlnaHRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPEdyYXBoPiBFbnVtZXJhdGVBY3ljbGljT3JpZW50YXRpb25zKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGVBY3ljbGljT3JpZW50YXRpb25zKDAsIG5ldyBEaWN0aW9uYXJ5PGludCxMaXN0PGludD4+KE4pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgSUVudW1lcmFibGU8R3JhcGg+IEVudW1lcmF0ZUFjeWNsaWNPcmllbnRhdGlvbnMoaW50IGksIERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IG91dE5laWdoYm9ycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpID49IE4pXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gRnJvbU91dE5laWdoYm9yTGlzdHMob3V0TmVpZ2hib3JzKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmVpZ2hib3JzID0gTmVpZ2hib3JzSW5TdWJncmFwaChpLCBFbnVtZXJhYmxlLlJhbmdlKDAsIGkpLlRvTGlzdCgpKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZWlnaGJvcnMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2xvbmUgPSBDbG9uZU91dE5laWdoYm9ycyhvdXROZWlnaGJvcnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjbG9uZVtpXSA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZyBpbiBFbnVtZXJhdGVBY3ljbGljT3JpZW50YXRpb25zKGkgKyAxLCBjbG9uZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0ZWROZWlnaGJvcnMgPSBUb3BvbG9naWNhbFNvcnQoaSwgbmVpZ2hib3JzLCBvdXROZWlnaGJvcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBkIGluIEVudW1lcmF0ZUxlZ2FsRGlyZWN0aW9uQXNzaWdubWVudHMoaSwgc29ydGVkTmVpZ2hib3JzLCBvdXROZWlnaGJvcnMpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lID0gQ2xvbmVPdXROZWlnaGJvcnMob3V0TmVpZ2hib3JzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lW2ldID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGludD4oZC5FbnVtZXJhdGVCaXRzKCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShiID0+IHNvcnRlZE5laWdoYm9yc1tzb3J0ZWROZWlnaGJvcnMuQ291bnQgLSAxIC0gYl0pKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkRpZmZlcmVuY2U8aW50PihuZWlnaGJvcnMsY2xvbmVbaV0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVbdl0uQWRkKGkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGcgaW4gRW51bWVyYXRlQWN5Y2xpY09yaWVudGF0aW9ucyhpICsgMSwgY2xvbmUpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IENsb25lT3V0TmVpZ2hib3JzKERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IG91dE5laWdoYm9ycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjbG9uZSA9IG5ldyBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PihvdXROZWlnaGJvcnMuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGt2cCBpbiBvdXROZWlnaGJvcnMpXHJcbiAgICAgICAgICAgICAgICBjbG9uZVtrdnAuS2V5XSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oa3ZwLlZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjbG9uZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgTGlzdDxpbnQ+IFRvcG9sb2dpY2FsU29ydChpbnQgaSwgTGlzdDxpbnQ+IHZlcnRpY2VzLCBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PiBvdXROZWlnaGJvcnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaW5OZWlnaGJvckNvdW50ID0gbmV3IGludFtpXTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGt2cCBpbiBvdXROZWlnaGJvcnMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghdmVydGljZXMuQ29udGFpbnMoa3ZwLktleSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5JbnRlcnNlY3Q8aW50PihrdnAuVmFsdWUsdmVydGljZXMpKVxyXG4gICAgICAgICAgICAgICAgICAgIGluTmVpZ2hib3JDb3VudFt2XSsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgc29ydGVkID0gbmV3IExpc3Q8aW50PihpKTtcclxuICAgICAgICAgICAgdmFyIHNvdXJjZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGludD4odmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikodiA9PiBpbk5laWdoYm9yQ291bnRbdl0gPT0gMCkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHNvdXJjZXMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gc291cmNlc1tzb3VyY2VzLkNvdW50IC0gMV07XHJcbiAgICAgICAgICAgICAgICBzb3VyY2VzLlJlbW92ZUF0KHNvdXJjZXMuQ291bnQgLSAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzb3J0ZWQuQWRkKHNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkludGVyc2VjdDxpbnQ+KG91dE5laWdoYm9yc1tzb3VyY2VdLHZlcnRpY2VzKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbk5laWdoYm9yQ291bnRbdl0tLTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5OZWlnaGJvckNvdW50W3ZdID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZXMuQWRkKHYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc29ydGVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBJRW51bWVyYWJsZTxsb25nPiBFbnVtZXJhdGVMZWdhbERpcmVjdGlvbkFzc2lnbm1lbnRzKGludCBpLCBMaXN0PGludD4gc29ydGVkTmVpZ2hib3JzLCBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PiBvdXROZWlnaGJvcnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIGQgPSAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFuY2VzdG9yTGlzdHMgPSBHZXRBbmNlc3Rvckxpc3RzKGksIG91dE5laWdoYm9ycyk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gZDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZC5BbGxTZXQoc29ydGVkTmVpZ2hib3JzLkNvdW50KSlcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBkID0gQ2xvc3VyZShkICsgMSwgc29ydGVkTmVpZ2hib3JzLCBhbmNlc3Rvckxpc3RzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsb25nIENsb3N1cmUobG9uZyBkLCBMaXN0PGludD4gc29ydGVkTmVpZ2hib3JzLCBEaWN0aW9uYXJ5PGludCwgTGlzdDxpbnQ+PiBhbmNlc3Rvckxpc3RzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGRvbmUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICghZG9uZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgdiBpbiBzb3J0ZWROZWlnaGJvcnMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZCaXQgPSBzb3J0ZWROZWlnaGJvcnMuQ291bnQgLSAxIC0gc29ydGVkTmVpZ2hib3JzLkluZGV4T2Yodik7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5JbnRlcnNlY3Q8aW50PihhbmNlc3Rvckxpc3RzW3ZdLHNvcnRlZE5laWdoYm9ycykpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgd0JpdCA9IHNvcnRlZE5laWdoYm9ycy5Db3VudCAtIDEgLSBzb3J0ZWROZWlnaGJvcnMuSW5kZXhPZih3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQuSXNCaXRTZXQod0JpdCkgJiYgIWQuSXNCaXRTZXQodkJpdCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBkLlNldEJpdCh2Qml0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IEdldEFuY2VzdG9yTGlzdHMoaW50IGksIERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IG91dE5laWdoYm9ycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhbmNlc3Rvckxpc3RzID0gbmV3IERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+KGkpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgdiA9IDA7IHYgPCBpOyB2KyspXHJcbiAgICAgICAgICAgICAgICBhbmNlc3Rvckxpc3RzW3ZdID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGludD4oKSwoX28xNik9PntfbzE2LkFkZCh2KTtyZXR1cm4gX28xNjt9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkb25lID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHdoaWxlICghZG9uZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgdiA9IDA7IHYgPCBpOyB2KyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gb3V0TmVpZ2hib3JzW3ZdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHcgPj0gaSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBhbmNlc3Rvckxpc3RzW3ddLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmNlc3Rvckxpc3RzW3ddID0gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4oYW5jZXN0b3JMaXN0c1t3XSxhbmNlc3Rvckxpc3RzW3ZdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbmNlc3Rvckxpc3RzW3ddLkNvdW50ID4gYylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhbmNlc3Rvckxpc3RzO1xyXG4gICAgICAgIH1cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gQ2xhc3NpYyBBbGdvcml0aG1zXHJcbiAgICAgICAgcHVibGljIEVxdWl2YWxlbmNlUmVsYXRpb248aW50PiBGaW5kRmFjdG9ycygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZXF1aXZhbGVuY2VSZWxhdGlvbiA9IG5ldyBBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZXF1aXZhbGVuY2VSZWxhdGlvbi5BZGRFbGVtZW50KGkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIV9hZGphY2VudFtpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXF1aXZhbGVuY2VSZWxhdGlvbi5SZWxhdGUoaSwgaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlcXVpdmFsZW5jZVJlbGF0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgRXF1aXZhbGVuY2VSZWxhdGlvbjxpbnQ+IEZpbmRDb21wb25lbnRzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBlcXVpdmFsZW5jZVJlbGF0aW9uID0gbmV3IEFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlcXVpdmFsZW5jZVJlbGF0aW9uLkFkZEVsZW1lbnQoaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVxdWl2YWxlbmNlUmVsYXRpb24uUmVsYXRlKGksIGopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXF1aXZhbGVuY2VSZWxhdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEVxdWl2YWxlbmNlUmVsYXRpb248aW50PiBGaW5kQ29tcG9uZW50cyhMaXN0PGludD4gdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBlcXVpdmFsZW5jZVJlbGF0aW9uID0gbmV3IEFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPGludD4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlcXVpdmFsZW5jZVJlbGF0aW9uLkFkZEVsZW1lbnQodltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgdi5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWRqYWNlbnRbdltpXSwgdltqXV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVxdWl2YWxlbmNlUmVsYXRpb24uUmVsYXRlKHZbaV0sIHZbal0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXF1aXZhbGVuY2VSZWxhdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9wdWJsaWMgTGlzdDxMaXN0PGludD4+IEZpbmRTdHJvbmdDb21wb25lbnRzVGFyamFuKClcclxuICAgICAgICAvL3tcclxuICAgICAgICAvLyAgICB2YXIgc3Ryb25nQ29tcG9uZW50cyA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgdmFyIGluZGljZXMgPSBFbnVtZXJhYmxlLlJlcGVhdCgtMSwgTikuVG9BcnJheSgpO1xyXG4gICAgICAgIC8vICAgIHZhciBsb3dsaW5rID0gRW51bWVyYWJsZS5SZXBlYXQoLTEsIE4pLlRvQXJyYXkoKTtcclxuICAgICAgICAvLyAgICB2YXIgUyA9IG5ldyBTdGFjazxpbnQ+KCk7XHJcbiAgICAgICAgLy8gICAgdmFyIGluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgLy8gICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgIC8vICAgIHtcclxuICAgICAgICAvLyAgICAgICAgaWYgKGluZGljZXNbdl0gPCAwKVxyXG4gICAgICAgIC8vICAgICAgICAgICAgU3Ryb25nQ29ubmVjdCh2LCByZWYgaW5kZXgsIGluZGljZXMsIGxvd2xpbmssIFMsIHN0cm9uZ0NvbXBvbmVudHMpO1xyXG4gICAgICAgIC8vICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgcmV0dXJuIHN0cm9uZ0NvbXBvbmVudHM7XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgLy92b2lkIFN0cm9uZ0Nvbm5lY3QoaW50IHYsIHJlZiBpbnQgaW5kZXgsIGludFtdIGluZGljZXMsIGludFtdIGxvd2xpbmssIFN0YWNrPGludD4gUywgTGlzdDxMaXN0PGludD4+IHN0cm9uZ0NvbXBvbmVudHMpXHJcbiAgICAgICAgLy97XHJcbiAgICAgICAgLy8gICAgaW5kaWNlc1t2XSA9IGluZGV4O1xyXG4gICAgICAgIC8vICAgIGxvd2xpbmtbdl0gPSBpbmRleDtcclxuICAgICAgICAvLyAgICBpbmRleCsrO1xyXG4gICAgICAgIC8vICAgIFMuUHVzaCh2KTtcclxuXHJcbiAgICAgICAgLy8gICAgZm9yZWFjaCAodmFyIHcgaW4gT3V0TmVpZ2hib3JzW3ZdKVxyXG4gICAgICAgIC8vICAgIHtcclxuICAgICAgICAvLyAgICAgICAgaWYgKGluZGljZXNbd10gPCAwKVxyXG4gICAgICAgIC8vICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICBTdHJvbmdDb25uZWN0KHcsIHJlZiBpbmRleCwgaW5kaWNlcywgbG93bGluaywgUywgc3Ryb25nQ29tcG9uZW50cyk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICBsb3dsaW5rW3ZdID0gTWF0aC5NaW4obG93bGlua1t2XSwgbG93bGlua1t3XSk7XHJcbiAgICAgICAgLy8gICAgICAgIH1cclxuICAgICAgICAvLyAgICAgICAgZWxzZSBpZiAoUy5Db250YWlucyh3KSlcclxuICAgICAgICAvLyAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgbG93bGlua1t2XSA9IE1hdGguTWluKGxvd2xpbmtbdl0sIGluZGljZXNbd10pO1xyXG4gICAgICAgIC8vICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgfVxyXG5cclxuICAgICAgICAvLyAgICBpZiAobG93bGlua1t2XSA9PSBpbmRpY2VzW3ZdKVxyXG4gICAgICAgIC8vICAgIHtcclxuICAgICAgICAvLyAgICAgICAgdmFyIGNvbXBvbmVudCA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIC8vICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAvLyAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgdmFyIHcgPSBTLlBvcCgpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgY29tcG9uZW50LkFkZCh3KTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgICAgICBpZiAodyA9PSB2KVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIC8vICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICAgICAgICBzdHJvbmdDb21wb25lbnRzLkFkZChjb21wb25lbnQpO1xyXG4gICAgICAgIC8vICAgIH1cclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgcHVibGljIGludCBDb21wdXRlRGlhbWV0ZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50WyxdIGRpc3RhbmNlO1xyXG4gICAgICAgICAgICBpbnRbLF0gbmV4dDtcclxuICAgICAgICAgICAgRmxveWRXYXJzaGFsbChvdXQgZGlzdGFuY2UsIG91dCBuZXh0KTtcclxuICAgICAgICAgICAgaW50IGRpYW1ldGVyID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gVmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIFZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZVt2LCB3XSA+IGRpYW1ldGVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFtZXRlciA9IGRpc3RhbmNlW3YsIHddO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGlhbWV0ZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBGbG95ZFdhcnNoYWxsKG91dCBpbnRbLF0gZGlzdGFuY2UsIG91dCBpbnRbLF0gbmV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGRpc3RhbmNlID0gbmV3IGludFtOLCBOXTtcclxuICAgICAgICAgICAgbmV4dCA9IG5ldyBpbnRbTiwgTl07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgTjsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlW2ksIGpdID0gaW50Lk1heFZhbHVlIC8gMztcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZVtpLCBqXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoX2FkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyppZiAoRGlyZWN0ZWRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZVtpLCBqXSA9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGlyZWN0ZWRbaiwgaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZVtqLCBpXSA9IDE7Ki9cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlW2ksIGpdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VbaiwgaV0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IE47IGorKylcclxuICAgICAgICAgICAgICAgICAgICBuZXh0W2ksIGpdID0gLTE7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBrID0gMDsgayA8IE47IGsrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBOOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2VbaSwga10gKyBkaXN0YW5jZVtrLCBqXSA8IGRpc3RhbmNlW2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZVtpLCBqXSA9IGRpc3RhbmNlW2ksIGtdICsgZGlzdGFuY2Vbaywgal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0W2ksIGpdID0gaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8aW50PiBGbG95ZFdhcnNoYWxsU2hvcnRlc3RQYXRoKGludCB2LCBpbnQgdywgaW50WyxdIGRpc3RhbmNlLCBpbnRbLF0gbmV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkaXN0YW5jZVt2LCB3XSA9PSBpbnQuTWF4VmFsdWUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGlmIChuZXh0W3YsIHddID09IC0xKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1tdIHsgdiwgdyB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVW5pb248aW50PihGbG95ZFdhcnNoYWxsU2hvcnRlc3RQYXRoKHYsIG5leHRbdiwgd10sIGRpc3RhbmNlLCBuZXh0KSxTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNraXA8aW50PihGbG95ZFdhcnNoYWxsU2hvcnRlc3RQYXRoKG5leHRbdiwgd10sIHcsIGRpc3RhbmNlLCBuZXh0KSwxKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vcHVibGljIExpc3Q8aW50PiBGaW5kU2hvcnRlc3RDeWNsZSgpXHJcbiAgICAgICAgLy97XHJcbiAgICAgICAgLy8gICAgdmFyIHNob3J0ZXN0TGVuZ3RoID0gaW50Lk1heFZhbHVlO1xyXG4gICAgICAgIC8vICAgIHZhciBzaG9ydGVzdEN5Y2xlID0gbmV3IExpc3Q8aW50PigpO1xyXG5cclxuICAgICAgICAvLyAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgLy8gICAge1xyXG4gICAgICAgIC8vICAgICAgICB2YXIgZGlzdGFuY2UgPSBuZXcgaW50W05dO1xyXG4gICAgICAgIC8vICAgICAgICB2YXIgcGFyZW50ID0gRW51bWVyYWJsZS5SZXBlYXQoLTEsIE4pLlRvQXJyYXkoKTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgIHZhciB2aXNpdGVkID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgIC8vICAgICAgICB2YXIgbGVhdmVzID0gbmV3IFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLlF1ZXVlPGludD4oKTtcclxuICAgICAgICAvLyAgICAgICAgbGVhdmVzLkVucXVldWUodik7XHJcblxyXG4gICAgICAgIC8vICAgICAgICB3aGlsZSAobGVhdmVzLkNvdW50ID4gMClcclxuICAgICAgICAvLyAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgdmFyIHggPSBsZWF2ZXMuRGVxdWV1ZSgpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgdmlzaXRlZC5BZGQoeCk7XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgICAgZm9yZWFjaCAodmFyIHkgaW4gTmVpZ2hib3JzW3hdKVxyXG4gICAgICAgIC8vICAgICAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIGlmICh5ID09IHBhcmVudFt4XSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIGlmICghdmlzaXRlZC5Db250YWlucyh5KSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHBhcmVudFt5XSA9IHg7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlW3ldID0gZGlzdGFuY2VbeF0gKyAxO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICBsZWF2ZXMuRW5xdWV1ZSh5KTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGlzdGFuY2VbeF0gKyBkaXN0YW5jZVt5XSArIDEgPCBzaG9ydGVzdExlbmd0aClcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHNob3J0ZXN0TGVuZ3RoID0gZGlzdGFuY2VbeF0gKyBkaXN0YW5jZVt5XSArIDE7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHNob3J0ZXN0Q3ljbGUuQ2xlYXIoKTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHZhciB3ID0geDtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHcgIT0gLTEpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIHNob3J0ZXN0Q3ljbGUuQWRkKHcpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgdyA9IHBhcmVudFt3XTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgaWYgKHkgIT0gdilcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgdyA9IHk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAodyAhPSAtMSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGVzdEN5Y2xlLkluc2VydCgwLCB3KTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gcGFyZW50W3ddO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgfVxyXG5cclxuICAgICAgICAvLyAgICByZXR1cm4gc2hvcnRlc3RDeWNsZTtcclxuICAgICAgICAvL31cclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBHcmFwaHNcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIEUoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoKG5ldyBib29sW24sIG5dKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBLKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEUobikuQ29tcGxlbWVudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIFAoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgRyA9IEUobik7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbiAtIDE7IGkrKylcclxuICAgICAgICAgICAgICAgIEcgPSBHLkFkZEVkZ2UoaSwgaSArIDEpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggU3RhcihpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBHID0gRShuKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBHID0gRy5BZGRFZGdlKDAsIGkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggQyhpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBQKG4pLkFkZEVkZ2UobiAtIDEsIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIERpYW1vbmRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBFKDIpICogSygyKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdyYXBoIEJ1bGxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBLKDMpLkF0dGFjaE5ld1ZlcnRleCgxKS5BdHRhY2hOZXdWZXJ0ZXgoMik7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBLaXRlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gRGlhbW9uZC5BdHRhY2hOZXdWZXJ0ZXgoMSk7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBEYXJ0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gRGlhbW9uZC5BdHRhY2hOZXdWZXJ0ZXgoMik7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHcmFwaCBDaGFpclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIFAoNCkuQXR0YWNoTmV3VmVydGV4KDIpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggRW1wdHlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBuZXcgR3JhcGgobmV3IGJvb2xbMCwgMF0pOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggUGF3XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gUCg0KS5BZGRFZGdlKDAsIDIpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggSFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIFAoNCkuQXR0YWNoTmV3VmVydGV4KDEpLkF0dGFjaE5ld1ZlcnRleCgyKTsgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgSGFzaEdyYXBoXHJcbiAgICB7XHJcbiAgICAgICAgYnl0ZVtdIF92YWx1ZXM7XHJcbiAgICAgICAgTGlzdDxpbnQ+IF9vdXRNaW51c0luO1xyXG4gICAgICAgIGludCBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBIYXNoR3JhcGgoR3JhcGggZywgTGlzdDxpbnQ+IG91dE1pbnVzSW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdmFsdWVzID0gbmV3IGJ5dGVbZy5OICogKGcuTiAtIDEpIC8gMl07XHJcbiAgICAgICAgICAgIF9vdXRNaW51c0luID0gb3V0TWludXNJbjtcclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBnLk47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgZy5OOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gKGJ5dGUpKGdbaSwgal0gPyAxIDogMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3ZhbHVlc1trXSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZ1tpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2hhc2hDb2RlICs9IDEgPDwgKGsgJSAzMik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gb3V0TWludXNJbilcclxuICAgICAgICAgICAgICAgIF9oYXNoQ29kZSA9IF9oYXNoQ29kZSAqIDMzICsgaTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG90aGVyID0gb2JqIGFzIEhhc2hHcmFwaDtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGludD4oX291dE1pbnVzSW4sb3RoZXIuX291dE1pbnVzSW4pICYmIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxieXRlPihfdmFsdWVzLG90aGVyLl92YWx1ZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGludCBHZXRIYXNoQ29kZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2hhc2hDb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgSGVyZWRpdGFyeUNsYXNzRW51bWVyYXRpb25cclxuICAgIHtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgU2l6ZUNvbXBhcmVyIF9zaXplQ29tcGFyZXIgPSBuZXcgU2l6ZUNvbXBhcmVyKCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8R3JhcGg+IEVudW1lcmF0ZUNsYXNzKHBhcmFtcyBHcmFwaFtdIGV4Y2x1ZGVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZUNsYXNzKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaD4oZXhjbHVkZWQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8R3JhcGg+IEVudW1lcmF0ZUNsYXNzKExpc3Q8R3JhcGg+IGV4Y2x1ZGVkLCBpbnQgbWF4VmVydGljZXMgPSBpbnQuTWF4VmFsdWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBleGNsdWRlZC5Tb3J0KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCwgZ2xvYmFsOjpBbGdvcml0aG1zLkdyYXBoLCBpbnQ+KSgoZzEsIGcyKSA9PiBnMS5OLkNvbXBhcmVUbyhnMi5OKSkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGV4Y2x1ZGVkLkNvdW50ID4gMCAmJiBleGNsdWRlZFswXS5OIDw9IDEpIHlpZWxkIGJyZWFrO1xyXG4gICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IEdyYXBoKG5ldyBMaXN0PGludD4oKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGFzdExldmVsID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PEdyYXBoPigpLChfbzE3KT0+e19vMTcuQWRkKG5ldyBHcmFwaChuZXcgTGlzdDxpbnQ+KCkpKTtyZXR1cm4gX28xNzt9KTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChsYXN0TGV2ZWwuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudExldmVsID0gbmV3IExpc3Q8R3JhcGg+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIEcgaW4gbGFzdExldmVsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIExpc3Q8TGlzdDxpbnQ+PiBuZWlnaGJvclNldHM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChHLklzQ29tcGxldGUoKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoYm9yU2V0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KExpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4oRW51bWVyYWJsZS5SYW5nZSgwLCBHLk4pLlRvTGlzdCgpKSxfc2l6ZUNvbXBhcmVyKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JTZXRzID0gTGlzdFV0aWxpdHkuR2VuZXJhdGVTdWJsaXN0czxpbnQ+KEVudW1lcmFibGUuUmFuZ2UoMCwgRy5OKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBuZWlnaGJvclNldCBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihuZWlnaGJvclNldHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGJvb2w+KShsID0+IGwuQ291bnQgPiAwKSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgSCA9IEcuQXR0YWNoTmV3VmVydGV4KG5laWdoYm9yU2V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGg+KGN1cnJlbnRMZXZlbCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGgsIGJvb2w+KShXID0+IEdyYXBoLklzb21vcnBoaWMoSCwgVykpKSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OkFsZ29yaXRobXMuR3JhcGg+KGV4Y2x1ZGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5HcmFwaCwgYm9vbD4pKFcgPT4gSC5Db250YWluc0luZHVjZWQoVykpKSkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50TGV2ZWwuQWRkKEgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gSDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRMZXZlbC5Db3VudCA+IDAgJiYgY3VycmVudExldmVsWzBdLk4gPj0gbWF4VmVydGljZXMpIHlpZWxkIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgbGFzdExldmVsID0gY3VycmVudExldmVsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjbGFzcyBTaXplQ29tcGFyZXIgOiBJRXF1YWxpdHlDb21wYXJlcjxMaXN0PGludD4+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoTGlzdDxpbnQ+IHgsIExpc3Q8aW50PiB5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geC5Db3VudCA9PSB5LkNvdW50O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IEdldEhhc2hDb2RlKExpc3Q8aW50PiBvYmopXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmouQ291bnQuR2V0SGFzaENvZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBIeXBlcmdyYXBoPFQ+XHJcbiAgICAgICAgd2hlcmUgVCA6IElDb21wYXJhYmxlXHJcbiAgICB7XHJcbiAgICAgICAgU29ydGVkTGlzdENvbXBhcmVyIF9saXN0Q29tcGFyZXIgPSBuZXcgU29ydGVkTGlzdENvbXBhcmVyKCk7XHJcbiAgICAgICAgcHVibGljIEhhc2hTZXQ8TGlzdDxUPj4gRSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIEh5cGVyZ3JhcGgoTGlzdDxMaXN0PFQ+PiBlZGdlcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZWRnZXMgIT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZWRnZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgZS5Tb3J0KCk7XHJcbiAgICAgICAgICAgICAgICBFID0gbmV3IEhhc2hTZXQ8TGlzdDxUPj4oZWRnZXMsIF9saXN0Q29tcGFyZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIEUgPSBuZXcgSGFzaFNldDxMaXN0PFQ+PihfbGlzdENvbXBhcmVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBIeXBlcmdyYXBoPFQ+IE1pbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2hhaW5IZWFkcyA9IG5ldyBMaXN0PExpc3Q8VD4+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgc2V0IGluIEUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByZW1vdmVkID0gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihjaGFpbkhlYWRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKGhlYWQgPT4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlN1YnNldEVxdWFsU29ydGVkPFQ+KHNldCxoZWFkKSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikoKHgpID0+IHsgfSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlbW92ZWQgPiAwIHx8IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oY2hhaW5IZWFkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShoZWFkID0+ICFBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWxTb3J0ZWQ8VD4oaGVhZCxzZXQpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5IZWFkcy5BZGQoc2V0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBIeXBlcmdyYXBoPFQ+KGNoYWluSGVhZHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEh5cGVyZ3JhcGg8VD4gVHIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIEggPSBuZXcgSHlwZXJncmFwaDxUPihCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8TGlzdDxUPj4oKSwoX28xOCk9PntfbzE4LkFkZChuZXcgTGlzdDxUPigpKTtyZXR1cm4gX28xODt9KSk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBFKVxyXG4gICAgICAgICAgICAgICAgSCA9IEguUHJvZHVjdChFZGdlSHlwZXJncmFwaChlKSkuTWluKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gSDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEh5cGVyZ3JhcGg8VD4gRWRnZUh5cGVyZ3JhcGgoTGlzdDxUPiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBIeXBlcmdyYXBoPFQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PFQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihlLChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKHYgPT4gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5Fbkxpc3Q8VD4odikpKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSHlwZXJncmFwaDxUPiBVbmlvbihIeXBlcmdyYXBoPFQ+IG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBIeXBlcmdyYXBoPFQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVW5pb248Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihFLG90aGVyLkUpLlRvTGlzdCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBIeXBlcmdyYXBoPFQ+IFByb2R1Y3QoSHlwZXJncmFwaDxUPiBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgSHlwZXJncmFwaDxUPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oRSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4pKGVfaSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihvdGhlci5FLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikoZV9qID0+IExpc3RVdGlsaXR5LlVuaW9uPFQ+KGVfaSwgZV9qKSkpLlRvTGlzdCgpKSkuVG9MaXN0KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2xhc3MgU29ydGVkTGlzdENvbXBhcmVyIDogSUVxdWFsaXR5Q29tcGFyZXI8TGlzdDxUPj5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhMaXN0PFQ+IHgsIExpc3Q8VD4geSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPih4LHkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IEdldEhhc2hDb2RlKExpc3Q8VD4gbGlzdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdW5jaGVja2VkXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGhhc2ggPSAxOTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgeCBpbiBsaXN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNoID0gaGFzaCAqIDMxICsgeC5HZXRIYXNoQ29kZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFzaDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkluZGVwZW5kZW5jZVJhdGlvXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgTWlub3JGaW5kZXJcclxuICAgIHtcclxuICAgICAgICAvLyBUT0RPOiByZXBsYWNlIG5haXZlIGltcGxlbWVudGF0aW9uIG9mIHRoaXMgd2l0aCBmYXN0IHZlcnNpb24gaWYgbmVjZXNzYXJ5LlxyXG4gICAgICAgIC8vIGFsc28sIHxKfCBpcyBoYXJkY29kZWQgdG8gMywgd2hpY2ggaXMgYWxsIHdlIG5lZWQgbm93LlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4+PiBGaW5kV2l0aEooR3JhcGggZywgTGlzdDxpbnQ+IEopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoSi5Db3VudCAhPSAzKVxyXG4gICAgICAgICAgICAgICAgeWllbGQgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdHJpcGxlIGluIEVudW1lcmF0ZUNvbm5lY3RlZFRocmVlUGFydFBhcnRpdGlvbnMoZywgSikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChnLkluZGVwZW5kZW5jZU51bWJlcihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50Pih0cmlwbGUuSXRlbTEsSikpIDwgNClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmIChnLkluZGVwZW5kZW5jZU51bWJlcihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50Pih0cmlwbGUuSXRlbTIsSikpIDwgNClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmIChnLkluZGVwZW5kZW5jZU51bWJlcihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50Pih0cmlwbGUuSXRlbTMsSikpIDwgNClcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmIChnLkVkZ2VzQmV0d2Vlbih0cmlwbGUuSXRlbTEsIHRyaXBsZS5JdGVtMikgPD0gMCAmJiBnLkluZGVwZW5kZW5jZU51bWJlcihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50PihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50Pih0cmlwbGUuSXRlbTEsdHJpcGxlLkl0ZW0yKSxKKSkgPCA1KVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGcuRWRnZXNCZXR3ZWVuKHRyaXBsZS5JdGVtMSwgdHJpcGxlLkl0ZW0zKSA8PSAwICYmIGcuSW5kZXBlbmRlbmNlTnVtYmVyKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KHRyaXBsZS5JdGVtMSx0cmlwbGUuSXRlbTMpLEopKSA8IDUpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoZy5FZGdlc0JldHdlZW4odHJpcGxlLkl0ZW0yLCB0cmlwbGUuSXRlbTMpIDw9IDAgJiYgZy5JbmRlcGVuZGVuY2VOdW1iZXIoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4oQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4odHJpcGxlLkl0ZW0yLHRyaXBsZS5JdGVtMiksSikpIDwgNSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+Pj4oKSwoX28xOSk9PntfbzE5LkFkZChuZXcgVHVwbGU8TGlzdDxpbnQ+LCBMaXN0PGludD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4odHJpcGxlLkl0ZW0xKSwgZy5NYXhpbXVtSW5kZXBlbmRlbnRTdWJzZXQoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlVuaW9uPGludD4odHJpcGxlLkl0ZW0xLEopKSkpO19vMTkuQWRkKG5ldyBUdXBsZTxMaXN0PGludD4sIExpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih0cmlwbGUuSXRlbTIpLCBnLk1heGltdW1JbmRlcGVuZGVudFN1YnNldChBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248aW50Pih0cmlwbGUuSXRlbTIsSikpKSk7X28xOS5BZGQobmV3IFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHRyaXBsZS5JdGVtMyksIGcuTWF4aW11bUluZGVwZW5kZW50U3Vic2V0KEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxpbnQ+KHRyaXBsZS5JdGVtMyxKKSkpKTtyZXR1cm4gX28xOTt9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+LCBMaXN0PGludD4+PiBFbnVtZXJhdGVDb25uZWN0ZWRUaHJlZVBhcnRQYXJ0aXRpb25zKEdyYXBoIGcsIExpc3Q8aW50PiBKKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJlc3QgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxpbnQ+KGcuVmVydGljZXMsSikuVG9MaXN0KCk7XHJcbkFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuU2h1ZmZsZTxpbnQ+KCAgICAgICAgICAgIHJlc3QpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZmlyc3QgaW4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4ocmVzdCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZpcnN0LkFkZChKWzBdKTtcclxuICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4oZy5GaW5kQ29tcG9uZW50cyhmaXJzdCkuR2V0RXF1aXZhbGVuY2VDbGFzc2VzKCkpICE9IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3QyID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8aW50PihyZXN0LGZpcnN0KS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzZWNvbmQgaW4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4ocmVzdDIpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZC5BZGQoSlsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+PihnLkZpbmRDb21wb25lbnRzKHNlY29uZCkuR2V0RXF1aXZhbGVuY2VDbGFzc2VzKCkpICE9IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGhpcmQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxpbnQ+KHJlc3QyLHNlY29uZCkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcmQuQWRkKEpbMl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4oZy5GaW5kQ29tcG9uZW50cyh0aGlyZCkuR2V0RXF1aXZhbGVuY2VDbGFzc2VzKCkpICE9IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IFR1cGxlPExpc3Q8aW50PiwgTGlzdDxpbnQ+LCBMaXN0PGludD4+KGZpcnN0LCBzZWNvbmQsIHRoaXJkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEludDMyVXNhZ2VcclxuICAgIHtcclxuICAgICAgICBjb25zdCBVSW50MzIgRGVCcnVpam5NdWx0aXBsaWVyID0gMHgwNzdDQjUzMVU7XHJcbiAgICAgICAgc3RhdGljIGludFtdIERlQnJ1aWpuTG9va3VwID0gbmV3IGludFszMl0geyAwLCAxLCAyOCwgMiwgMjksIDE0LCAyNCwgMywgMzAsIDIyLCAyMCwgMTUsIDI1LCAxNywgNCwgOCwgMzEsIDI3LCAxMywgMjMsIDIxLCAxOSwgMTYsIDcsIDI2LCAxMiwgMTgsIDYsIDExLCA1LCAxMCwgOSB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IExlYXN0U2lnbmlmaWNhbnRCaXQodGhpcyBpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBEZUJydWlqbkxvb2t1cFt1bmNoZWNrZWQoKHVpbnQpKHggJiAteCkgKiBEZUJydWlqbk11bHRpcGxpZXIgPj4gMjcpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgaW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IHggJiAteDtcclxuICAgICAgICAgICAgeCBePSBtO1xyXG4gICAgICAgICAgICByZXR1cm4gRGVCcnVpam5Mb29rdXBbdW5jaGVja2VkKCh1aW50KW0gKiBEZUJydWlqbk11bHRpcGxpZXIgPj4gMjcpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFBvcHVsYXRpb25Db3VudCh0aGlzIHVpbnQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBxID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKGIgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBxKys7XHJcbiAgICAgICAgICAgICAgICBiICY9IGIgLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBUb1NldCh0aGlzIHVpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvbkJpdHMgPSBuZXcgTGlzdDxpbnQ+KDEwKTtcclxuICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxzYiA9IHggJiAoMCAtIHgpO1xyXG4gICAgICAgICAgICAgICAgb25CaXRzLkFkZChEZUJydWlqbkxvb2t1cFt1bmNoZWNrZWQobHNiICogRGVCcnVpam5NdWx0aXBsaWVyID4+IDI3KV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHggXj0gbHNiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb25CaXRzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEludDY0VXNhZ2VcclxuICAgIHtcclxuICAgICAgICBjb25zdCBVSW50NjQgRGVCcnVpam5NdWx0aXBsaWVyID0gMHgwN0VERDVFNTlBNEUyOEMyO1xyXG4gICAgICAgIHN0YXRpYyBpbnRbXSBEZUJydWlqbkxvb2t1cCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYzLCAgMCwgNTgsICAxLCA1OSwgNDcsIDUzLCAgMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYwLCAzOSwgNDgsIDI3LCA1NCwgMzMsIDQyLCAgMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYxLCA1MSwgMzcsIDQwLCA0OSwgMTgsIDI4LCAyMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDU1LCAzMCwgMzQsIDExLCA0MywgMTQsIDIyLCAgNCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYyLCA1NywgNDYsIDUyLCAzOCwgMjYsIDMyLCA0MSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwLCAzNiwgMTcsIDE5LCAyOSwgMTAsIDEzLCAyMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDU2LCA0NSwgMjUsIDMxLCAzNSwgMTYsICA5LCAxMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDQ0LCAyNCwgMTUsICA4LCAyMywgIDcsICA2LCAgNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgSW50NjRbXSBCaXRNYXNrID0gbmV3IEludDY0WzY0XTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgSW50NjRbXSBOb3RCaXRNYXNrID0gbmV3IEludDY0WzY0XTtcclxuXHJcbiAgICAgICAgc3RhdGljIEludDY0VXNhZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAoaW50IGJpdCBpbiBFbnVtZXJhYmxlLlJhbmdlKDAsIDY0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQml0TWFza1tiaXRdID0gKChJbnQ2NCkxKSA8PCBiaXQ7XHJcbiAgICAgICAgICAgICAgICBOb3RCaXRNYXNrW2JpdF0gPSB+KCgoSW50NjQpMSkgPDwgYml0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBEaWN0aW9uYXJ5PGxvbmcsIGxvbmc+IEdlbmVyYXRlUGFpck1hc2tzKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1hc2tNYXAgPSBuZXcgRGljdGlvbmFyeTxsb25nLCBsb25nPigpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IG47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXNrTWFwW0JpdE1hc2tbaV0gfCBCaXRNYXNrW2pdXSA9IEJpdE1hc2tbal07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYXNrTWFwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJbnQ2NCBDbGVhckJpdCh0aGlzIEludDY0IHgsIGludCBiaXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4geCAmIE5vdEJpdE1hc2tbYml0XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSW50NjQgU2V0Qml0KHRoaXMgSW50NjQgeCwgaW50IGJpdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB4IHwgQml0TWFza1tiaXRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzQml0U2V0KHRoaXMgSW50NjQgeCwgaW50IGJpdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoeCAmIEJpdE1hc2tbYml0XSkgIT0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSW50NjQgRmxpcEJpdHModGhpcyBJbnQ2NCB4LCBpbnQgYml0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHggXiBCaXRNYXNrW2JpdF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSW50NjQgRmxpcEJpdHModGhpcyBJbnQ2NCB4LCBpbnQgYml0MSwgaW50IGJpdDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4geCBeIChCaXRNYXNrW2JpdDFdIHwgQml0TWFza1tiaXQyXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSW50NjQgRmxpcEJpdHModGhpcyBJbnQ2NCB4LCBwYXJhbXMgaW50W10gYml0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChiaXRzID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4geDtcclxuXHJcbiAgICAgICAgICAgIEludDY0IG1hc2sgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYml0IGluIGJpdHMpXHJcbiAgICAgICAgICAgICAgICBtYXNrIHw9IEJpdE1hc2tbYml0XTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4IF4gbWFzaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IExlYXN0U2lnbmlmaWNhbnRCaXQodGhpcyBJbnQ2NCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIERlQnJ1aWpuTG9va3VwW3VuY2hlY2tlZCgoVUludDY0KShiICYgLWIpICogRGVCcnVpam5NdWx0aXBsaWVyID4+IDU4KV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgSW50NjQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtID0geCAmIC14O1xyXG4gICAgICAgICAgICB4IF49IG07XHJcbiAgICAgICAgICAgIHJldHVybiBEZUJydWlqbkxvb2t1cFsoKFVJbnQ2NCltICogRGVCcnVpam5NdWx0aXBsaWVyKSA+PiA1OF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBQb3B1bGF0aW9uQ291bnQodGhpcyBJbnQ2NCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHEgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAoYiA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHErKztcclxuICAgICAgICAgICAgICAgIGIgJj0gYiAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBQb3B1bGF0aW9uQ291bnQodGhpcyB1bG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgdWxvbmcgazEgPSAweDU1NTU1NTU1NTU1NTU1NTVVTDtcclxuICAgICAgICAgICAgY29uc3QgdWxvbmcgazIgPSAweDMzMzMzMzMzMzMzMzMzMzNVTDtcclxuICAgICAgICAgICAgY29uc3QgdWxvbmcgazQgPSAweDBmMGYwZjBmMGYwZjBmMGZVTDtcclxuICAgICAgICAgICAgeCA9IHggLSAoKHggPj4gMSkgJiBrMSk7XHJcbiAgICAgICAgICAgIHggPSAoeCAmIGsyKSArICgoeCA+PiAyKSAmIGsyKTtcclxuICAgICAgICAgICAgeCA9ICh4ICsgKHggPj4gNCkpICYgazQ7XHJcbiAgICAgICAgICAgIHggPSAoeCAqIDB4MDEwMTAxMDEwMTAxMDEwMVVMKSA+PiA1NjtcclxuICAgICAgICAgICAgcmV0dXJuIChpbnQpeDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdWxvbmcgUmlnaHRGaWxsVG9NU0IodGhpcyB1bG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDE7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAyO1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gNDtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDg7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAxNjtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDMyO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb0JpdFN0cmluZyh0aGlzIEludDY0IHgsIGludCBsZW5ndGggPSA2NClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcIlwiLCBFbnVtZXJhYmxlLlJhbmdlKDAsIGxlbmd0aCkuU2VsZWN0PHN0cmluZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBzdHJpbmc+KShiaXQgPT4geC5Jc0JpdFNldChiaXQpID8gXCIxXCIgOiBcIjBcIikpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IFRvU2V0KHRoaXMgSW50NjQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvbkJpdHMgPSBuZXcgTGlzdDxpbnQ+KDEwKTtcclxuICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAgICAgIG9uQml0cy5BZGQoR2V0QW5kQ2xlYXJMZWFzdFNpZ25pZmljYW50Qml0KHJlZiB4KSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb25CaXRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gVG9TZXQodGhpcyBVSW50NjQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvbkJpdHMgPSBuZXcgTGlzdDxpbnQ+KDEwKTtcclxuICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxzYiA9IHggJiAoMCAtIHgpO1xyXG4gICAgICAgICAgICAgICAgb25CaXRzLkFkZChEZUJydWlqbkxvb2t1cFt1bmNoZWNrZWQobHNiICogRGVCcnVpam5NdWx0aXBsaWVyID4+IDU4KV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHggXj0gbHNiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb25CaXRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEVudW1lcmF0ZUJpdHModGhpcyBJbnQ2NCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2hpbGUgKHggIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxzYiA9IEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgeCk7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbHNiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIFRvSW50NjQocGFyYW1zIGludFtdIGJpdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIHRvdGFsID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJpdCBpbiBiaXRzKVxyXG4gICAgICAgICAgICAgICAgdG90YWwgfD0gQml0TWFza1tiaXRdO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIFRvSW50NjQodGhpcyBJRW51bWVyYWJsZTxpbnQ+IHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYml0IGluIHNldClcclxuICAgICAgICAgICAgICAgIHRvdGFsIHw9IEJpdE1hc2tbYml0XTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1bG9uZyBUb1VJbnQ2NCh0aGlzIElFbnVtZXJhYmxlPGludD4gc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYml0IGluIHNldClcclxuICAgICAgICAgICAgICAgIHRvdGFsIHw9IDFVTCA8PCBiaXQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxpbnQ+PiBFeHBhbmRJbnRvTGlzdHModGhpcyBMaXN0PEludDY0PiB4cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pih4cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHggPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih4LlRvU2V0KCkpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1NldFN0cmluZyh0aGlzIEludDY0IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4geC5Ub1NldCgpLlRvU2V0U3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1NldFN0cmluZ1NtYWxsKHRoaXMgSW50NjQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcInxcIiwgc3RyaW5nLkpvaW48aW50PihcIlwiLCB4LlRvU2V0KCkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBBbGxTZXQodGhpcyBJbnQ2NCB4LCBpbnQgaSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoeCBeICh4ICsgMSkpLklzQml0U2V0KGkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGxvbmc+IEdldEJpdHModGhpcyBsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2V0Qml0cyA9IG5ldyBMaXN0PGxvbmc+KCk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb25nIGxzYiA9IHggJiAteDtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRCaXRzLkFkZChsc2IpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggXj0gbHNiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2V0Qml0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDx1bG9uZz4gR2V0Qml0cyh0aGlzIHVsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2V0Qml0cyA9IG5ldyBMaXN0PHVsb25nPigxNik7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1bG9uZyBsc2IgPSB4ICYgKDAgLSB4KTtcclxuICAgICAgICAgICAgICAgIHNldEJpdHMuQWRkKGxzYik7XHJcbiAgICAgICAgICAgICAgICB4IF49IGxzYjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNldEJpdHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb1NldFN0cmluZyh0aGlzIElFbnVtZXJhYmxlPEludDY0PiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwie1wiICsgc3RyaW5nLkpvaW4oXCIsIFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLHN0cmluZz4obGlzdCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxsb25nLCBzdHJpbmc+KShsID0+IGwuVG9TZXRTdHJpbmcoKSkpKSArIFwifVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9TZXRTdHJpbmcodGhpcyBJRW51bWVyYWJsZTxpbnQ+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJ7XCIgKyBzdHJpbmcuSm9pbjxpbnQ+KFwiLCBcIiwgbGlzdCkgKyBcIn1cIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxueyBcclxuICAgIHB1YmxpYyBjbGFzcyBMYXp5PFQ+XHJcbiAgICB7XHJcbiAgICAgICAgRnVuYzxUPiBfY3JlYXRvcjtcclxuICAgICAgICBUIF92YWx1ZSA9IGRlZmF1bHQoVCk7XHJcbiAgICAgICAgb2JqZWN0IF90b2tlbiA9IG5ldyBvYmplY3QoKTtcclxuXHJcbiAgICAgICAgcHVibGljIFQgVmFsdWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3ZhbHVlID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jayAoX3Rva2VuKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF92YWx1ZSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZhbHVlID0gX2NyZWF0b3IoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF92YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExhenkoRnVuYzxUPiBjcmVhdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2NyZWF0b3IgPSBjcmVhdG9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExhenkoRnVuYzxUPiBjcmVhdG9yLCBib29sIHRocmVhZFNhZmUpXHJcbiAgICAgICAgICAgIDogdGhpcyhjcmVhdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEZvcmdldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrIChfdG9rZW4pXHJcbiAgICAgICAgICAgICAgICBfdmFsdWUgPSBkZWZhdWx0KFQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbXBsaWNpdCBvcGVyYXRvciBUKExhenk8VD4gZGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZGEuVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBPbmVGYWN0b3JpemF0aW9uc09mQ29tcGxldGVHcmFwaFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8aW50W10+IEVudW1lcmF0ZU9uZUZhY3Rvcml6YXRpb25zKGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyBsaXN0ID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuIC0gMTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbGlzdCB8PSAxTCA8PCBpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9yaW5nID0gbmV3IGludFtuICogKG4gLSAxKSAvIDJdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4gLSAxOyBpKyspXHJcbiAgICAgICAgICAgICAgICBjb2xvcmluZ1tpXSA9IGk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGlzdHMgPSBuZXcgbG9uZ1tuXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0c1tpXSA9IGxpc3QgXiAoMSA8PCAoaSAtIDEpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcmlvck5laWdoYm9ycyA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYXRlT25lRmFjdG9yaXphdGlvbnMoMSwgMiwgbiwgbGlzdHMsIGNvbG9yaW5nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxpbnRbXT4gRW51bWVyYXRlT25lRmFjdG9yaXphdGlvbnMoaW50IGksIGludCBqLCBpbnQgbiwgbG9uZ1tdIGxpc3RzLCBpbnRbXSBjb2xvcmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChpID49IG4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb3B5ID0gbmV3IGludFtjb2xvcmluZy5MZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgQXJyYXkuQ29weShjb2xvcmluZywgY29weSwgY29sb3JpbmcuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBjb3B5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGogPj0gbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG9mIGluIEVudW1lcmF0ZU9uZUZhY3Rvcml6YXRpb25zKGkgKyAxLCBpICsgMiwgbiwgbGlzdHMsIGNvbG9yaW5nKSlcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gb2Y7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYyBpbiAobGlzdHNbaV0gJiBsaXN0c1tqXSkuRW51bWVyYXRlQml0cygpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RzW2ldID0gbGlzdHNbaV0uQ2xlYXJCaXQoYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdHNbal0gPSBsaXN0c1tqXS5DbGVhckJpdChjKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JpbmdbaSAqIG4gLSBpICogKGkgKyAxKSAvIDIgKyBqIC0gaSAtIDFdID0gYztcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgb2YgaW4gRW51bWVyYXRlT25lRmFjdG9yaXphdGlvbnMoaSwgaiArIDEsIG4sIGxpc3RzLCBjb2xvcmluZykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBvZjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdHNbaV0gPSBsaXN0c1tpXS5TZXRCaXQoYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdHNbal0gPSBsaXN0c1tqXS5TZXRCaXQoYyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldFNpZ25TdW0oaW50IG4sIG91dCBpbnQgcGx1cywgb3V0IGludCBtaW51cywgQWN0aW9uPGludCwgaW50PiBwcm9ncmVzcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHBsdXMgPSAwO1xyXG4gICAgICAgICAgICBtaW51cyA9IDA7XHJcblxyXG4gICAgICAgICAgICBpbnQgbGlzdCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbiAtIDE7IGkrKylcclxuICAgICAgICAgICAgICAgIGxpc3QgfD0gMSA8PCBpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG9mID0gbmV3IGludFtuLCBuXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBvZlswLCBpXSA9IG9mW2ksIDBdID0gaSAtIDE7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGlzdHMgPSBuZXcgaW50W25dO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAgICAgIGxpc3RzW2ldID0gbGlzdCBeICgxIDw8IChpIC0gMSkpO1xyXG5cclxuICAgICAgICAgICAgaW50IHRlcm0gPSBuICogKG4gLSAxKSAlIDQgPT0gMCA/IDEgOiAtMTtcclxuXHJcbiAgICAgICAgICAgIERvU2lnblN1bSgxLCAyLCBuLCBsaXN0cywgb2YsIHJlZiB0ZXJtLCByZWYgcGx1cywgcmVmIG1pbnVzLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGludCwgaW50Pilwcm9ncmVzcyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcGx1cyAtIG1pbnVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgRG9UZXJtKGludCB0ZXJtLCByZWYgaW50IHBsdXMsIHJlZiBpbnQgbWludXMsIEFjdGlvbjxpbnQsIGludD4gcHJvZ3Jlc3MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGVybSA+IDApXHJcbiAgICAgICAgICAgICAgICBwbHVzKys7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIG1pbnVzKys7XHJcblxyXG4gICAgICAgICAgICBpZiAoKHBsdXMgKyBtaW51cykgJSAxMDAwMDAwID09IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzKHBsdXMsIG1pbnVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgRG9TaWduU3VtKGludCBpLCBpbnQgaiwgaW50IG4sIGludFtdIGxpc3RzLCBpbnRbLF0gb2YsIHJlZiBpbnQgdGVybSwgcmVmIGludCBwbHVzLCByZWYgaW50IG1pbnVzLCBBY3Rpb248aW50LCBpbnQ+IHByb2dyZXNzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGkgPj0gbiAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERvVGVybSh0ZXJtLCByZWYgcGx1cywgcmVmIG1pbnVzLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGludCwgaW50Pilwcm9ncmVzcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IGxpc3RzW2ldICYgbGlzdHNbal07XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0geCAmIC14O1xyXG4gICAgICAgICAgICAgICAgICAgIHggXj0gYztcclxuICAgICAgICAgICAgICAgICAgICBsaXN0c1tpXSBePSBjO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RzW2pdIF49IGM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG9mW2ksIGpdID0gb2ZbaiwgaV0gPSBjO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmFjdG9yID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBrID0gMDsgayA8IGk7IGsrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjdG9yICo9IDEgfCAoKGMgLSBvZltrLCBqXSkgPj4gMzEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGsgPSAwOyBrIDwgajsgaysrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWN0b3IgKj0gMSB8ICgoYyAtIG9mW2ksIGtdKSA+PiAzMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRlcm0gKj0gZmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqID49IG4gLSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBEb1NpZ25TdW0oaSArIDEsIGkgKyAyLCBuLCBsaXN0cywgb2YsIHJlZiB0ZXJtLCByZWYgcGx1cywgcmVmIG1pbnVzLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGludCwgaW50Pilwcm9ncmVzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBEb1NpZ25TdW0oaSwgaiArIDEsIG4sIGxpc3RzLCBvZiwgcmVmIHRlcm0sIHJlZiBwbHVzLCByZWYgbWludXMsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248aW50LCBpbnQ+KXByb2dyZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXJtICo9IGZhY3RvcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdHNbaV0gXj0gYztcclxuICAgICAgICAgICAgICAgICAgICBsaXN0c1tqXSBePSBjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBPbkZhY3Rvcml6YXRpb25zT2ZDb21wbGV0ZUdyYXBoXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnRbXT4gRW51bWVyYXRlT25lRmFjdG9yaXphdGlvbnMoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIGxpc3QgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4gLSAxOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0IHw9IDFMIDw8IGk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29sb3JpbmcgPSBuZXcgaW50W24gKiAobiAtIDEpIC8gMl07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbiAtIDE7IGkrKylcclxuICAgICAgICAgICAgICAgIGNvbG9yaW5nW2ldID0gaTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsaXN0cyA9IG5ldyBsb25nW25dO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGlzdHNbaV0gPSBsaXN0IF4gKDEgPDwgKGkgLSAxKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29sb3JpbmdbaSAqIG4gLSBpICogKGkgKyAxKSAvIDJdID0gaSAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGVPbmVGYWN0b3JpemF0aW9ucygxLCAyLCBuLCBsaXN0cywgY29sb3JpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPGludFtdPiBFbnVtZXJhdGVPbmVGYWN0b3JpemF0aW9ucyhpbnQgaSwgaW50IGosIGludCBuLCBsb25nW10gbGlzdHMsIGludFtdIGNvbG9yaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGkgPj0gbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvcHkgPSBuZXcgaW50W2NvbG9yaW5nLkxlbmd0aF07XHJcbiAgICAgICAgICAgICAgICBBcnJheS5Db3B5KGNvbG9yaW5nLCBjb3B5LCBjb2xvcmluZy5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGNvcHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaiA+PSBuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgb2YgaW4gRW51bWVyYXRlT25lRmFjdG9yaXphdGlvbnMoaSArIDEsIGkgKyAyLCBuLCBsaXN0cywgY29sb3JpbmcpKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBvZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjIGluIChsaXN0c1tpXSAmIGxpc3RzW2pdKS5FbnVtZXJhdGVCaXRzKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIGNsYXNzIE9ubGluZUNob2ljZUhhc2hHcmFwaFxyXG4gICAge1xyXG4gICAgICAgIGludFtdIF9mO1xyXG4gICAgICAgIGludFtdIF9nO1xyXG4gICAgICAgIGludCBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBPbmxpbmVDaG9pY2VIYXNoR3JhcGgoaW50W10gZiwgaW50W10gZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9mID0gKGludFtdKWYuQ2xvbmUoKTtcclxuICAgICAgICAgICAgX2cgPSAoaW50W10pZy5DbG9uZSgpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZy5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9nW2ldID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgX2ZbaV0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBfZilcclxuICAgICAgICAgICAgICAgIF9oYXNoQ29kZSA9IF9oYXNoQ29kZSAqIDMzICsgaTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2godmFyIGkgaW4gX2cpXHJcbiAgICAgICAgICAgICAgICBfaGFzaENvZGUgPSBfaGFzaENvZGUgKiAzMyArIGk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvdGhlciA9IG9iaiBhcyBPbmxpbmVDaG9pY2VIYXNoR3JhcGg7XHJcbiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxpbnQ+KF9nLG90aGVyLl9nKSAmJiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8aW50PihfZixvdGhlci5fZik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBPcmllbnRhdGlvbkhhc2hHcmFwaFxyXG4gICAge1xyXG4gICAgICAgIGJ5dGVbXSBfdmFsdWVzO1xyXG4gICAgICAgIExpc3Q8aW50PiBfb3V0TWludXNJbjtcclxuICAgICAgICBpbnQgX2hhc2hDb2RlO1xyXG5cclxuICAgICAgICBwdWJsaWMgT3JpZW50YXRpb25IYXNoR3JhcGgoR3JhcGggZywgTGlzdDxpbnQ+IG91dE1pbnVzSW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdmFsdWVzID0gbmV3IGJ5dGVbZy5OICogKGcuTiAtIDEpIC8gMl07XHJcbiAgICAgICAgICAgIF9vdXRNaW51c0luID0gb3V0TWludXNJbjtcclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBnLk47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgZy5OOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gKGJ5dGUpKGdbaSwgal0gPyAxIDogMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3ZhbHVlc1trXSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZ1tpLCBqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2hhc2hDb2RlICs9IDEgPDwgKGsgJSAzMik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gb3V0TWludXNJbilcclxuICAgICAgICAgICAgICAgIF9oYXNoQ29kZSA9IF9oYXNoQ29kZSAqIDMzICsgaTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29sIEVxdWFscyhvYmplY3Qgb2JqKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG90aGVyID0gb2JqIGFzIE9yaWVudGF0aW9uSGFzaEdyYXBoO1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8aW50Pihfb3V0TWludXNJbixvdGhlci5fb3V0TWludXNJbikgJiYgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGJ5dGU+KF92YWx1ZXMsb3RoZXIuX3ZhbHVlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlBvbHlub21pYWxzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBGYWN0b3JlZFJhdGlvbmFsXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHN0YXRpYyBGYWN0b3JlZFJhdGlvbmFsIFplcm8gPSBuZXcgRmFjdG9yZWRSYXRpb25hbCgpIHsgU2lnbiA9IDAgfTtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBTaWduO1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gSztcclxuXHJcbiAgICAgICAgcHVibGljIEZhY3RvcmVkUmF0aW9uYWwoKSB7IH1cclxuXHJcbiAgICAgICAgcHVibGljIEZhY3RvcmVkUmF0aW9uYWwoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdnYgPSBuZXcgaW50WzExXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgamogPSAwOyBqaiA8PSAxMDsgamorKylcclxuICAgICAgICAgICAgICAgIHZ2W2pqXSA9IFBvd2VyKDIsIGpqKTtcclxuXHJcbiAgICAgICAgICAgIFNpZ24gPSBNYXRoLlNpZ24oKGRlY2ltYWwpbik7XHJcbiAgICAgICAgICAgIG4gKj0gU2lnbjtcclxuXHJcbiAgICAgICAgICAgIEsgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcbiAgICAgICAgICAgIGludCBpID0gMDtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChuID4gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgSy5BZGQoMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IFByaW1lTnVtYmVycy5HZXQoaSk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiAlIHAgPT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBLW2ldKys7XHJcbiAgICAgICAgICAgICAgICAgICAgbiAvPSBwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBGYWN0b3JlZFJhdGlvbmFsIG9wZXJhdG9yICooRmFjdG9yZWRSYXRpb25hbCBmaSwgRmFjdG9yZWRSYXRpb25hbCBmaTIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2lnbiA9IGZpLlNpZ24gKiBmaTIuU2lnbjtcclxuICAgICAgICAgICAgdmFyIGsgPSBuZXcgTGlzdDxpbnQ+KE1hdGguTWF4KGZpLksuQ291bnQsIGZpMi5LLkNvdW50KSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2lnbiAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE1hdGguTWF4KGZpLksuQ291bnQsIGZpMi5LLkNvdW50KTsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGsuQWRkKDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpIDwgZmkuSy5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICAgICAga1tpXSArPSBmaS5LW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpIDwgZmkyLksuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtbaV0gKz0gZmkyLktbaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmFjdG9yZWRSYXRpb25hbCgpIHsgSyA9IGssIFNpZ24gPSBzaWduIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEZhY3RvcmVkUmF0aW9uYWwgb3BlcmF0b3IgLyhGYWN0b3JlZFJhdGlvbmFsIGZpLCBGYWN0b3JlZFJhdGlvbmFsIGZpMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaWduID0gZmkuU2lnbiAqIGZpMi5TaWduO1xyXG4gICAgICAgICAgICB2YXIgayA9IG5ldyBMaXN0PGludD4oTWF0aC5NYXgoZmkuSy5Db3VudCwgZmkyLksuQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzaWduICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTWF0aC5NYXgoZmkuSy5Db3VudCwgZmkyLksuQ291bnQpOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgay5BZGQoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCBmaS5LLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrW2ldICs9IGZpLktbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCBmaTIuSy5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICAgICAga1tpXSAtPSBmaTIuS1tpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGYWN0b3JlZFJhdGlvbmFsKCkgeyBLID0gaywgU2lnbiA9IHNpZ24gfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFRvUmF0aW9uYWwob3V0IGludCB0b3AsIG91dCBpbnQgYm90dG9tKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEsgPT0gbnVsbCB8fCBTaWduID09IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRvcCA9IDA7XHJcbiAgICAgICAgICAgICAgICBib3R0b20gPSAxO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0b3AgPSBTaWduO1xyXG4gICAgICAgICAgICBib3R0b20gPSAxO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IEsuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKEtbaV0gPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHRvcCAqPSBQb3dlcihQcmltZU51bWJlcnMuR2V0KGkpLCBLW2ldKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBib3R0b20gKj0gUG93ZXIoUHJpbWVOdW1iZXJzLkdldChpKSwgLUtbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgUG93ZXIoaW50IHAsIGludCBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSAxO1xyXG4gICAgICAgICAgICB3aGlsZSAoayA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBlID0gMTtcclxuICAgICAgICAgICAgICAgIHZhciBuID0gcDtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChlIDw9IGsgPj4gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuICo9IG47XHJcbiAgICAgICAgICAgICAgICAgICAgZSA8PD0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBrIC09IGU7XHJcbiAgICAgICAgICAgICAgICBtICo9IG47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Qb2x5bm9taWFsc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR3JhcGhQb2x5bm9taWFsXHJcbiAgICB7XHJcbiAgICAgICAgQWxnb3JpdGhtcy5HcmFwaCBfZztcclxuICAgICAgICBMaXN0PExpc3Q8aW50Pj4gX3ByaW9yTmVpZ2hib3JzO1xyXG4gICAgICAgIE5vcm1hbGl6ZXIgX25vcm1hbGl6ZXI7XHJcbiAgICAgICAgU2lnbkxvb2t1cCBfc2lnbkxvb2t1cDtcclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgR3JhcGhQb2x5bm9taWFsKEFsZ29yaXRobXMuR3JhcGggZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9nID0gZztcclxuICAgICAgIFxyXG4gICAgICAgICAgICBfcHJpb3JOZWlnaGJvcnMgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IHcgPSAwOyB3IDwgX2cuTjsgdysrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfcHJpb3JOZWlnaGJvcnMuQWRkKG5ldyBMaXN0PGludD4oKSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCB2ID0gMDsgdiA8IHc7IHYrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZ1t2LCB3XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3ByaW9yTmVpZ2hib3JzW3ddLkFkZCh2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBHZXRDb2VmZmljaWVudChpbnRbXSBwb3dlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9ub3JtYWxpemVyID0gbmV3IE5vcm1hbGl6ZXIocG93ZXIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGEgPSBuZXcgaW50W3Bvd2VyLkxlbmd0aF07XHJcbiAgICAgICAgICAgIGxvbmcgdG9wID0gMEw7XHJcbiAgICAgICAgICAgIGxvbmcgYm90dG9tID0gMUw7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0aWFsUHJvZHVjdCA9IG5ldyBGYWN0b3JlZFJhdGlvbmFsKCkgeyBLID0gbmV3IExpc3Q8aW50PigpLCBTaWduID0gMSB9O1xyXG4gICAgICAgICAgICBTdW1UZXJtcygwLCBhLCBwb3dlciwgcmVmIHBhcnRpYWxQcm9kdWN0LCByZWYgdG9wLCByZWYgYm90dG9tKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KSh0b3AgLyBib3R0b20pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBHZXRTaWduU3VtKGludFtdIHBvd2VyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3NpZ25Mb29rdXAgPSBuZXcgU2lnbkxvb2t1cChwb3dlcik7XHJcblxyXG4gICAgICAgICAgICB2YXIgYSA9IG5ldyBpbnRbcG93ZXIuTGVuZ3RoXTtcclxuICAgICAgICAgICAgdmFyIHN1bSA9IDA7XHJcbiAgICAgICAgICAgIHZhciBwYXJ0aWFsUHJvZHVjdCA9IDE7XHJcbiAgICAgICAgICAgIFN1bVNpZ25zKDAsIGEsIHBvd2VyLCByZWYgcGFydGlhbFByb2R1Y3QsIHJlZiBzdW0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN1bTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgU3VtU2lnbnMoaW50IHcsIGludFtdIGEsIGludFtdIHBvd2VyLCByZWYgaW50IHBhcnRpYWxQcm9kdWN0LCByZWYgaW50IHN1bSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh3ID09IHBvd2VyLkxlbmd0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3VtICs9IHBhcnRpYWxQcm9kdWN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPD0gcG93ZXJbd107IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhW3ddID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF9wcmlvck5laWdoYm9yc1t3XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudCAqPSBfc2lnbkxvb2t1cC5TaWduW2Fbdl0sIGFbd11dO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGlhbFByb2R1Y3QgKj0gY3VycmVudDtcclxuICAgICAgICAgICAgICAgICAgICBTdW1TaWducyh3ICsgMSwgYSwgcG93ZXIsIHJlZiBwYXJ0aWFsUHJvZHVjdCwgcmVmIHN1bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGlhbFByb2R1Y3QgLz0gY3VycmVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBTdW1UZXJtcyhpbnQgdywgaW50W10gYSwgaW50W10gcG93ZXIsIHJlZiBGYWN0b3JlZFJhdGlvbmFsIHBhcnRpYWxQcm9kdWN0LCByZWYgbG9uZyB0b3AsIHJlZiBsb25nIGJvdHRvbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh3ID09IHBvd2VyLkxlbmd0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSBwYXJ0aWFsUHJvZHVjdCAvIF9ub3JtYWxpemVyLkdldChhKTtcclxuICAgICAgICAgICAgICAgIGludCB0b3AyO1xyXG4gICAgICAgICAgICAgICAgaW50IGJvdHRvbTI7XHJcbiAgICAgICAgICAgICAgICByLlRvUmF0aW9uYWwob3V0IHRvcDIsIG91dCBib3R0b20yKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0b3AgPSB0b3AgKiBib3R0b20yICsgYm90dG9tICogdG9wMjtcclxuICAgICAgICAgICAgICAgIGJvdHRvbSA9IGJvdHRvbSAqIGJvdHRvbTI7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGdjZCA9IEdDRCh0b3AsIGJvdHRvbSk7XHJcbiAgICAgICAgICAgICAgICB0b3AgLz0gZ2NkO1xyXG4gICAgICAgICAgICAgICAgYm90dG9tIC89IGdjZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDw9IHBvd2VyW3ddOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYVt3XSA9IGo7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gbmV3IEZhY3RvcmVkUmF0aW9uYWwoKSB7IEsgPSBuZXcgTGlzdDxpbnQ+KCksIFNpZ24gPSAxIH07XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ByaW9yTmVpZ2hib3JzW3ddKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ICo9IF9ub3JtYWxpemVyLkZhY3RvcmVkRGlmZmVyZW5jZVthW3ZdLCBhW3ddXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuU2lnbiA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGlhbFByb2R1Y3QgKj0gY3VycmVudDtcclxuICAgICAgICAgICAgICAgICAgICBTdW1UZXJtcyh3ICsgMSwgYSwgcG93ZXIsIHJlZiBwYXJ0aWFsUHJvZHVjdCwgcmVmIHRvcCwgcmVmIGJvdHRvbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGlhbFByb2R1Y3QgLz0gY3VycmVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9uZyBHQ0QobG9uZyB4LCBsb25nIHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIHRtcDtcclxuICAgICAgICAgICAgeCA9IE1hdGguQWJzKHgpO1xyXG4gICAgICAgICAgICB5ID0gTWF0aC5BYnMoeSk7XHJcbiAgICAgICAgICAgIHdoaWxlICh4ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdG1wID0geDtcclxuICAgICAgICAgICAgICAgIHggPSB5ICUgeDtcclxuICAgICAgICAgICAgICAgIHkgPSB0bXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgR3JhcGhQb2x5bm9taWFsRXh0ZW5zaW9uc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldENvZWZmaWNpZW50KHRoaXMgQWxnb3JpdGhtcy5HcmFwaCBnLCBpbnRbXSBwb3dlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBncCA9IG5ldyBHcmFwaFBvbHlub21pYWwoZyk7XHJcbiAgICAgICAgICAgIHJldHVybiBncC5HZXRDb2VmZmljaWVudChwb3dlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBHZXRTaWduU3VtKHRoaXMgQWxnb3JpdGhtcy5HcmFwaCBnLCBpbnRbXSBwb3dlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBncCA9IG5ldyBHcmFwaFBvbHlub21pYWwoZyk7XHJcbiAgICAgICAgICAgIHJldHVybiBncC5HZXRTaWduU3VtKHBvd2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuUG9seW5vbWlhbHNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIE5vcm1hbGl6ZXJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgRmFjdG9yZWRSYXRpb25hbFssXSBGYWN0b3JlZERpZmZlcmVuY2U7XHJcbiAgICAgICAgcHVibGljIEZhY3RvcmVkUmF0aW9uYWxbLF0gSW5zaWRlUHJvZHVjdDtcclxuXHJcbiAgICAgICAgcHVibGljIE5vcm1hbGl6ZXIoaW50W10gaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSBoZWlnaHQuTWF4KCk7XHJcblxyXG4gICAgICAgICAgICBGYWN0b3JlZERpZmZlcmVuY2UgPSBuZXcgRmFjdG9yZWRSYXRpb25hbFttICsgMSwgbSArIDFdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8PSBtOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8PSBtOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgRmFjdG9yZWREaWZmZXJlbmNlW2ksIGpdID0gbmV3IEZhY3RvcmVkUmF0aW9uYWwoaSAtIGopO1xyXG5cclxuICAgICAgICAgICAgSW5zaWRlUHJvZHVjdCA9IG5ldyBGYWN0b3JlZFJhdGlvbmFsW2hlaWdodC5MZW5ndGgsIG0gKyAxXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBoZWlnaHQuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDw9IGhlaWdodFtpXTsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEluc2lkZVByb2R1Y3RbaSwgal0gPSBuZXcgRmFjdG9yZWRSYXRpb25hbCgpIHsgSyA9IG5ldyBMaXN0PGludD4oKSwgU2lnbiA9IDEgfTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBrID0gMDsgayA8PSBoZWlnaHRbaV07IGsrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrID09IGopXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEluc2lkZVByb2R1Y3RbaSwgal0gKj0gRmFjdG9yZWREaWZmZXJlbmNlW2osIGtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEZhY3RvcmVkUmF0aW9uYWwgR2V0KGludFtdIGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbm9ybWFsaXplciA9IG5ldyBGYWN0b3JlZFJhdGlvbmFsKCkgeyBLID0gbmV3IExpc3Q8aW50PigpLCBTaWduID0gMSB9O1xyXG4gICAgICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgYS5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZXIgKj0gSW5zaWRlUHJvZHVjdFtpLCBhW2ldXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBub3JtYWxpemVyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Qb2x5bm9taWFsc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIFByaW1lTnVtYmVyc1xyXG4gICAge1xyXG4gICAgICAgIHN0YXRpYyBMaXN0PGludD4gX3ByaW1lcyA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vMjApPT57X28yMC5BZGQoMik7X28yMC5BZGQoMyk7X28yMC5BZGQoNSk7X28yMC5BZGQoNyk7X28yMC5BZGQoMTEpO19vMjAuQWRkKDEzKTtfbzIwLkFkZCgxNyk7X28yMC5BZGQoMTkpO3JldHVybiBfbzIwO30pO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBHZXQoaW50IGkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBfcHJpbWVzLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgQ29tcHV0ZU1vcmVQcmltZXMoaSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gX3ByaW1lc1tpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIENvbXB1dGVNb3JlUHJpbWVzKGludCBpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSBNYXRoLk1heChpLCAyICogX3ByaW1lcy5Db3VudCk7XHJcbiAgICAgICAgICAgIHZhciBwID0gX3ByaW1lc1tfcHJpbWVzLkNvdW50IC0gMV0gKyAyO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKF9wcmltZXMuQ291bnQgPD0gbSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKElzUHJpbWUocCkpXHJcbiAgICAgICAgICAgICAgICAgICAgX3ByaW1lcy5BZGQocCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcCArPSAyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYm9vbCBJc1ByaW1lKGludCBwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yKGludCBrID0gMDsgX3ByaW1lc1trXSAqIF9wcmltZXNba10gPD0gcDsgaysrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAocCAlIF9wcmltZXNba10gPT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Qb2x5bm9taWFsc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU2lnbkxvb2t1cFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBpbnRbLF0gU2lnbjtcclxuICAgICAgICBwdWJsaWMgU2lnbkxvb2t1cChpbnRbXSBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbSA9IGhlaWdodC5NYXgoKTtcclxuXHJcbiAgICAgICAgICAgIFNpZ24gPSBuZXcgaW50W20gKyAxLCBtICsgMV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDw9IG07IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDw9IG07IGorKylcclxuICAgICAgICAgICAgICAgICAgICBTaWduW2ksIGpdID0gTWF0aC5TaWduKChkZWNpbWFsKShpIC0gaikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU3Vic2V0RW51bWVyYXRvciA6IElFbnVtZXJhYmxlPEludDY0PlxyXG4gICAge1xyXG4gICAgICAgIGludCBfc2V0U2l6ZTtcclxuICAgICAgICBpbnQgX3N1YnNldFNpemU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTdWJzZXRFbnVtZXJhdG9yKGludCBzZXRTaXplLCBpbnQgc3Vic2V0U2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9zZXRTaXplID0gc2V0U2l6ZTtcclxuICAgICAgICAgICAgX3N1YnNldFNpemUgPSBzdWJzZXRTaXplO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBJRW51bWVyYWJsZTxsb25nPiBNZW1iZXJzXHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYXRvcjxJbnQ2ND4gR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEVudW1lcmF0b3IoX3NldFNpemUsIF9zdWJzZXRTaXplKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBJRW51bWVyYWJsZSBNZW1iZXJzXHJcblxyXG4gICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvciBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmFibGUuR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gR2V0RW51bWVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgRW51bWVyYXRvciA6IElFbnVtZXJhdG9yPEludDY0PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYm9vbCBfaXNGaXJzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGludCBfc2V0U2l6ZTtcclxuICAgICAgICAgICAgaW50IF9zdWJzZXRTaXplO1xyXG5cclxuICAgICAgICAgICAgSW50NjQgX2N1cnJlbnQ7XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgRW51bWVyYXRvcihpbnQgc2V0U2l6ZSwgaW50IHN1YnNldFNpemUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9zZXRTaXplID0gc2V0U2l6ZTtcclxuICAgICAgICAgICAgICAgIF9zdWJzZXRTaXplID0gc3Vic2V0U2l6ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgI3JlZ2lvbiBJRW51bWVyYXRvcjxsb25nPiBNZW1iZXJzXHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgbG9uZyBDdXJyZW50XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdldCB7IHJldHVybiBfY3VycmVudDsgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICAgICAjcmVnaW9uIElEaXNwb3NhYmxlIE1lbWJlcnNcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyB2b2lkIERpc3Bvc2UoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgICAgICNyZWdpb24gSUVudW1lcmF0b3IgTWVtYmVyc1xyXG5cclxuICAgICAgICAgICAgb2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvci5DdXJyZW50XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdldCB7IHJldHVybiBDdXJyZW50OyB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBib29sIE1vdmVOZXh0KClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9pc0ZpcnN0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfc3Vic2V0U2l6ZSA+IF9zZXRTaXplKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9jdXJyZW50ID0gKCgxIDw8IF9zdWJzZXRTaXplKSAtIDEpIDw8IChfc2V0U2l6ZSAtIF9zdWJzZXRTaXplKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX2lzRmlyc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBJbnQ2NCBsc2IgPSBfY3VycmVudCAmIC1fY3VycmVudDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobHNiID4gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfY3VycmVudCA9IF9jdXJyZW50IF4gbHNiIF4gKGxzYiA+PiAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgSW50NjQgaGlnaCA9IF9jdXJyZW50ICYgKF9jdXJyZW50ICsgMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGhpZ2ggPT0gMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIEludDY0IGxvdyA9IF9jdXJyZW50IF4gaGlnaDtcclxuICAgICAgICAgICAgICAgIGxvdyA9IChsb3cgPDwgMikgKyAzO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlICgobG93ICYgaGlnaCkgPT0gMCkgbG93IDw8PSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIF9jdXJyZW50ID0gaGlnaCBeIGxvdztcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIHZvaWQgUmVzZXQoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfaXNGaXJzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICNlbmRyZWdpb25cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFRyYW5zaXRpdmVQYXJ0aXRpb25cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxQYXJ0PiBQYXJ0cyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgVHJhbnNpdGl2ZVBhcnRpdGlvbihMaXN0PGludD4gc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgUGFydHMgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8UGFydD4oKSwoX28yMSk9PntfbzIxLkFkZChuZXcgUGFydCgpIHsgU2V0ID0gc2V0LCBTY29yZXMgPSBuZXcgTGlzdDxpbnQ+KCkgfSk7cmV0dXJuIF9vMjE7fSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSZWZpbmUoaW50W10gc2NvcmUsIGludCBzY29yZU51bWJlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChQYXJ0c1swXS5TY29yZXMuQ291bnQgPj0gc2NvcmVOdW1iZXIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVmaW5lZCA9IG5ldyBMaXN0PFBhcnQ+KFBhcnRzLkNvdW50KTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnQgaW4gUGFydHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXAgPSBSZWZpbmVQYXJ0KHBhcnQsIHNjb3JlKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBrdnAgaW4gbWFwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gbmV3IFBhcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBwLlNldCA9IGt2cC5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBwLlNjb3JlcyA9IG5ldyBMaXN0PGludD4ocGFydC5TY29yZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHAuU2NvcmVzLkFkZChrdnAuS2V5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVmaW5lZC5BZGQocCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFBhcnRzID0gcmVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIERpY3Rpb25hcnk8aW50LCBMaXN0PGludD4+IFJlZmluZVBhcnQoUGFydCBwYXJ0LCBpbnRbXSBzY29yZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtYXAgPSBuZXcgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gcGFydC5TZXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gc2NvcmVbdl07XHJcbiAgICAgICAgICAgICAgICBMaXN0PGludD4gbDtcclxuICAgICAgICAgICAgICAgIGlmICghbWFwLlRyeUdldFZhbHVlKHgsIG91dCBsKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcFt4XSA9IGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbC5BZGQodik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0cCA9IG9iaiBhcyBUcmFuc2l0aXZlUGFydGl0aW9uO1xyXG4gICAgICAgICAgICBpZiAodHAgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYXJ0IGluIFBhcnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IHRwLkZpbmRQYXJ0V2l0aFNjb3JlcyhwYXJ0LlNjb3Jlcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAocCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocC5TZXQuQ291bnQgIT0gcGFydC5TZXQuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJhc2UuR2V0SGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFBhcnQgRmluZFBhcnRXaXRoU2NvcmVzKExpc3Q8aW50PiBzY29yZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydCBpbiBQYXJ0cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKEVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxpbnQ+KHBhcnQuU2NvcmVzLCBzY29yZXMpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGFzcyBQYXJ0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IFNldCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgICAgIHB1YmxpYyBMaXN0PGludD4gU2NvcmVzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFVucGVybXV0ZWRBc3NpZ25tZW50RW51bWVyYXRvciA6IElFbnVtZXJhYmxlPExpc3Q8SW50NjQ+PlxyXG4gICAge1xyXG4gICAgICAgIGludCBfdmVydGV4Q291bnQ7XHJcbiAgICAgICAgRnVuYzxpbnQsIGludD4gX2Y7XHJcbiAgICAgICAgaW50IF9wb3RTaXplO1xyXG4gICAgICAgIGludCBfc3RhcnQ7XHJcbiAgICAgICAgaW50IF9zdGVwO1xyXG5cclxuICAgICAgICBEaWN0aW9uYXJ5PGxvbmcsIGxvbmc+IF9wYWlyTWFza1RvQmFkTWFzaztcclxuXHJcbiAgICAgICAgcHVibGljIFVucGVybXV0ZWRBc3NpZ25tZW50RW51bWVyYXRvcihpbnQgdmVydGV4Q291bnQsIEZ1bmM8aW50LCBpbnQ+IGYsIGludCBwb3RTaXplLCBpbnQgc3RhcnQgPSAwLCBpbnQgc3RlcCA9IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdmVydGV4Q291bnQgPSB2ZXJ0ZXhDb3VudDtcclxuICAgICAgICAgICAgX2YgPSBmO1xyXG4gICAgICAgICAgICBfcG90U2l6ZSA9IHBvdFNpemU7XHJcbiAgICAgICAgICAgIF9zdGFydCA9IHN0YXJ0O1xyXG4gICAgICAgICAgICBfc3RlcCA9IHN0ZXA7XHJcblxyXG4gICAgICAgICAgICBfcGFpck1hc2tUb0JhZE1hc2sgPSBJbnQ2NFVzYWdlLkdlbmVyYXRlUGFpck1hc2tzKF9wb3RTaXplKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYXRvcjxMaXN0PGxvbmc+PiBHZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPj4oR2V0RW51bWVyYWJsZShfdmVydGV4Q291bnQpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPiwgaW50LCBib29sPikoKGxpc3QsIGkpID0+IChpIC0gX3N0YXJ0KSAlIF9zdGVwID09IDApKS5HZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJRW51bWVyYWJsZTxMaXN0PGxvbmc+PiBHZXRFbnVtZXJhYmxlUmVjdXJzaXZlKGludCB2ZXJ0ZXhDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2ZXJ0ZXhDb3VudCA9PSAxKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRW5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPj4oQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5Fbkxpc3Q8bG9uZz4oKCgobG9uZykxIDw8IF9mKDApKSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8bG9uZz4+KEdldEVudW1lcmFibGVSZWN1cnNpdmUodmVydGV4Q291bnQgLSAxKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8bG9uZz4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+Pj4pKGxpc3QgPT4gR2V0RXh0ZW5zaW9ucyhsaXN0KSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSUVudW1lcmFibGU8TGlzdDxsb25nPj4gR2V0RW51bWVyYWJsZShpbnQgdmVydGV4Q291bnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJRW51bWVyYWJsZTxMaXN0PGxvbmc+PiBlbnVtZXJhYmxlID0gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5Fbkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+PihBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkVuTGlzdDxsb25nPigoKChsb25nKTEgPDwgX2YoMCkpIC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgdmVydGV4Q291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGUgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxsb25nPj4oZW51bWVyYWJsZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8bG9uZz4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGxvbmc+Pj4pKGxpc3QgPT4gR2V0RXh0ZW5zaW9ucyhsaXN0KSkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGVudW1lcmFibGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJRW51bWVyYWJsZTxMaXN0PGxvbmc+PiBHZXRFeHRlbnNpb25zKExpc3Q8bG9uZz4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByZXN0cmljdGVkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxsb25nLCBsb25nPj4oX3BhaXJNYXNrVG9CYWRNYXNrLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGxvbmcsIGxvbmc+LCBib29sPikoa3ZwID0+IElzUmVzdHJpY3RlZChrdnAuS2V5LCBsaXN0KSkpO1xyXG5cclxuICAgICAgICAgICAgaW50IHNpemUgPSBfZihsaXN0LkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmcm9tIHN1YnNldCBpbiBuZXcgU3Vic2V0RW51bWVyYXRvcihfcG90U2l6ZSwgc2l6ZSlcclxuICAgICAgICAgICAgICAgICAgIHdoZXJlIHJlc3RyaWN0ZWQuQWxsKChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuS2V5VmFsdWVQYWlyPGxvbmcsIGxvbmc+LCBib29sPikoa3ZwID0+IChzdWJzZXQgJiBrdnAuS2V5KSAhPSBrdnAuVmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgICAgc2VsZWN0IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29uY2F0PGxvbmc+KGxpc3QsbmV3W10geyBzdWJzZXQgfSkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIElzUmVzdHJpY3RlZChsb25nIHAsIExpc3Q8bG9uZz4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB4IGluIGxpc3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbnRlcnNlY3Rpb24gPSB4ICYgcDtcclxuICAgICAgICAgICAgICAgIGlmIChpbnRlcnNlY3Rpb24gIT0gMCAmJiBpbnRlcnNlY3Rpb24gIT0geClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhdG9yIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYWJsZS5HZXRFbnVtZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlV0aWxpdHlcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEVxdWl2YWxlbmNlUmVsYXRpb248VD5cclxuICAgIHtcclxuICAgICAgICBEaWN0aW9uYXJ5PFQsIE5vZGU+IF9ub2RlTG9va3VwID0gbmV3IERpY3Rpb25hcnk8VCwgTm9kZT4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkRWxlbWVudChUIHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMb29rdXBOb2RlKHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgUmVsYXRlKFQgeCwgVCB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG54ID0gTG9va3VwTm9kZSh4KTtcclxuICAgICAgICAgICAgdmFyIG55ID0gTG9va3VwTm9kZSh5KTtcclxuXHJcbiAgICAgICAgICAgIHZhciB4Um9vdCA9IEZpbmQobngpO1xyXG4gICAgICAgICAgICB2YXIgeVJvb3QgPSBGaW5kKG55KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh4Um9vdCA9PSB5Um9vdClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGlmICh4Um9vdC5SYW5rIDwgeVJvb3QuUmFuaylcclxuICAgICAgICAgICAgICAgIHhSb290LlBhcmVudCA9IHlSb290O1xyXG4gICAgICAgICAgICBlbHNlIGlmICh4Um9vdC5SYW5rID4geVJvb3QuUmFuaylcclxuICAgICAgICAgICAgICAgIHlSb290LlBhcmVudCA9IHhSb290O1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHlSb290LlBhcmVudCA9IHhSb290O1xyXG4gICAgICAgICAgICAgICAgeFJvb3QuUmFuaysrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBcmVSZWxhdGVkKFQgeCwgVCB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG54ID0gTG9va3VwTm9kZSh4KTtcclxuICAgICAgICAgICAgdmFyIG55ID0gTG9va3VwTm9kZSh5KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBGaW5kKG54KSA9PSBGaW5kKG55KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxUPiBHZXRFcXVpdmFsZW5jZUNsYXNzKFQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBueCA9IExvb2t1cE5vZGUoeCk7XHJcbiAgICAgICAgICAgIHZhciB4Um9vdCA9IEZpbmQobngpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxUPi5Ob2RlPihfbm9kZUxvb2t1cC5WYWx1ZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuRXF1aXZhbGVuY2VSZWxhdGlvbjxUPi5Ob2RlLCBib29sPikobm9kZSA9PiBGaW5kKG5vZGUpID09IHhSb290KSkuU2VsZWN0PFQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248VD4uTm9kZSwgVD4pKG5vZGUgPT4gbm9kZS5UKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8SUVudW1lcmFibGU8VD4+IEdldEVxdWl2YWxlbmNlQ2xhc3NlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Hcm91cEJ5PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248VD4uTm9kZSxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPFQ+Lk5vZGU+KF9ub2RlTG9va3VwLlZhbHVlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPFQ+Lk5vZGUsIGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248VD4uTm9kZT4pKG5vZGUgPT4gRmluZChub2RlKSkpLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5MaW5xLkVudW1lcmFibGVJbnN0YW5jZTxUPj4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uTGlucS5Hcm91cGluZzxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5FcXVpdmFsZW5jZVJlbGF0aW9uPFQ+Lk5vZGUsIGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248VD4uTm9kZT4sIGdsb2JhbDo6U3lzdGVtLkxpbnEuRW51bWVyYWJsZUluc3RhbmNlPFQ+PikoZ3JvdXAgPT4gZ3JvdXAuU2VsZWN0PFQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LkVxdWl2YWxlbmNlUmVsYXRpb248VD4uTm9kZSwgVD4pKG5vZGUgPT4gbm9kZS5UKSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIE5vZGUgRmluZChOb2RlIG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAobi5QYXJlbnQgIT0gbilcclxuICAgICAgICAgICAgICAgIG4uUGFyZW50ID0gRmluZChuLlBhcmVudCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbi5QYXJlbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBOb2RlIExvb2t1cE5vZGUoVCB0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTm9kZSBub2RlO1xyXG4gICAgICAgICAgICBpZiAoIV9ub2RlTG9va3VwLlRyeUdldFZhbHVlKHQsIG91dCBub2RlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5ldyBOb2RlKCk7XHJcbiAgICAgICAgICAgICAgICBub2RlLlBhcmVudCA9IG5vZGU7XHJcbiAgICAgICAgICAgICAgICBub2RlLlJhbmsgPSAwO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5UID0gdDtcclxuXHJcbiAgICAgICAgICAgICAgICBfbm9kZUxvb2t1cFt0XSA9IG5vZGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2xhc3MgTm9kZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIE5vZGUgUGFyZW50IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgICAgcHVibGljIGludCBSYW5rIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgICAgcHVibGljIFQgVCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuVXRpbGl0eVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRmFjdG9yYWRpY1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBGYWN0b3JhZGljKGxvbmcgdmFsdWUsIGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVmFsdWUgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIERpZ2l0cyA9IG5ldyBMaXN0PGludD4obik7XHJcbiAgICAgICAgICAgIERpZ2l0cy5BZGQoMCk7XHJcblxyXG4gICAgICAgICAgICBpbnQgaSA9IDE7XHJcbiAgICAgICAgICAgIHdoaWxlICh2YWx1ZSA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERpZ2l0cy5BZGQoKGludCkodmFsdWUgJSArK2kpKTtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgLyBpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGkgPSBEaWdpdHMuQ291bnQ7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBEaWdpdHMuQWRkKDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEZhY3RvcmFkaWMoUGVybXV0YXRpb24gcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIERpZ2l0cyA9IG5ldyBMaXN0PGludD4ocC5OKTtcclxuXHJcbiAgICAgICAgICAgIExpc3Q8aW50PiBlbGVtZW50cyA9IG5ldyBMaXN0PGludD4ocC5OKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwLk47IGkrKylcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzLkFkZChpKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcC5OOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERpZ2l0cy5BZGQoZWxlbWVudHMuSW5kZXhPZihwW2ldKSk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50cy5SZW1vdmUocFtpXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIERpZ2l0cy5SZXZlcnNlKCk7XHJcblxyXG4gICAgICAgICAgICBWYWx1ZSA9IDA7XHJcbiAgICAgICAgICAgIGludCBuID0gMTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBEaWdpdHMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVmFsdWUgKz0gRGlnaXRzW2ldICogbjtcclxuICAgICAgICAgICAgICAgIG4gKj0gKGkgKyAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IERpZ2l0c1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0O1xyXG4gICAgICAgICAgICBwcml2YXRlIHNldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBsb25nIFZhbHVlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQ7XHJcbiAgICAgICAgICAgIHByaXZhdGUgc2V0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlV0aWxpdHlcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBGbG93c1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEJpcGFydGl0ZU1heGltdW1NYXRjaGluZyhpbnQgbiwgTGlzdDxMaXN0PGludD4+IGFkamFjZW5jaWVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNhcGFjaXR5ID0gbmV3IGludFtuICsgMiwgbiArIDJdO1xyXG4gICAgICAgICAgICB2YXIgc291cmNlID0gMDtcclxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IDE7XHJcblxyXG4gICAgICAgICAgICB2YXIgbG8gPSAyO1xyXG4gICAgICAgICAgICB2YXIgcm8gPSBsbyArIGFkamFjZW5jaWVzLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBhZGphY2VuY2llcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXBhY2l0eVtzb3VyY2UsIGxvICsgaV0gPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBqIGluIGFkamFjZW5jaWVzW2ldKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcGFjaXR5W2xvICsgaSwgcm8gKyBqXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FwYWNpdHlbcm8gKyBqLCB0YXJnZXRdID0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIE1heEZsb3coY2FwYWNpdHksIHNvdXJjZSwgdGFyZ2V0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IE1heEZsb3coaW50WyxdIGNhcGFjaXR5LCBpbnQgc291cmNlLCBpbnQgdGFyZ2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGb3JkRnVsa2Vyc29uKGNhcGFjaXR5LCBzb3VyY2UsIHRhcmdldCkuTWF4RmxvdygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2xhc3MgRm9yZEZ1bGtlcnNvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IF9uO1xyXG4gICAgICAgICAgICBpbnQgX3NvdXJjZTtcclxuICAgICAgICAgICAgaW50IF90YXJnZXQ7XHJcbiAgICAgICAgICAgIGludFssXSBfY2FwYWNpdHk7XHJcbiAgICAgICAgICAgIGludFssXSBfZmxvdztcclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBGb3JkRnVsa2Vyc29uKGludFssXSBjYXBhY2l0eSwgaW50IHNvdXJjZSwgaW50IHRhcmdldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2NhcGFjaXR5ID0gY2FwYWNpdHk7XHJcbiAgICAgICAgICAgICAgICBfc291cmNlID0gc291cmNlO1xyXG4gICAgICAgICAgICAgICAgX3RhcmdldCA9IHRhcmdldDtcclxuXHJcbiAgICAgICAgICAgICAgICBfbiA9IGNhcGFjaXR5LkdldExlbmd0aCgwKTtcclxuICAgICAgICAgICAgICAgIF9mbG93ID0gbmV3IGludFtfbiwgX25dO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IE1heEZsb3coKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxpbnQ+KCksKF9vMjIpPT57X28yMi5BZGQoMCk7cmV0dXJuIF9vMjI7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRvbmUgPSAhRmluZEF1Z21lbnRpbmdQYXRoKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb25lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgQWRkRmxvdyhwYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRW51bWVyYWJsZS5SYW5nZSgwLCBfbikuU3VtKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoaSA9PiBfZmxvd1tfc291cmNlLCBpXSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBib29sIEZpbmRBdWdtZW50aW5nUGF0aChMaXN0PGludD4gcGF0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxhc3QgPSBwYXRoW3BhdGguQ291bnQgLSAxXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdCA9PSBfdGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBqIGluIE91dE5laWdoYm9ycyhsYXN0KSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGF0aC5Db250YWlucyhqKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBhdGguQWRkKGopO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaXNBdWdtZW50aW5nID0gRmluZEF1Z21lbnRpbmdQYXRoKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0F1Z21lbnRpbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwYXRoLlJlbW92ZShqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIElFbnVtZXJhYmxlPGludD4gT3V0TmVpZ2hib3JzKGludCBpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IF9uOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9jYXBhY2l0eVtpLCBqXSAtIF9mbG93W2ksIGpdID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGo7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZvaWQgQWRkRmxvdyhMaXN0PGludD4gcGF0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdhaW4gPSBGaW5kR2FpbihwYXRoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBhdGguQ291bnQgLSAxOyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2Zsb3dbcGF0aFtpXSwgcGF0aFtpICsgMV1dICs9IGdhaW47XHJcbiAgICAgICAgICAgICAgICAgICAgX2Zsb3dbcGF0aFtpICsgMV0sIHBhdGhbaV1dID0gLV9mbG93W3BhdGhbaV0sIHBhdGhbaSArIDFdXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaW50IEZpbmRHYWluKExpc3Q8aW50PiBwYXRoKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ2FpbiA9IGludC5NYXhWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBhdGguQ291bnQgLSAxOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FpbiA9IE1hdGguTWluKGdhaW4sIF9jYXBhY2l0eVtwYXRoW2ldLCBwYXRoW2kgKyAxXV0gLSBfZmxvd1twYXRoW2ldLCBwYXRoW2kgKyAxXV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBnYWluO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlV0aWxpdHlcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBMaW5xRXh0ZW5zaW9uc1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8VHVwbGU8VCwgVD4+IENhcnRlc2lhblByb2R1Y3Q8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBhLCBJRW51bWVyYWJsZTxUPiBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4sZ2xvYmFsOjpTeXN0ZW0uVHVwbGU8VCwgVD4+KENhcnRlc2lhblByb2R1Y3Q8VD4obmV3W10geyBhLCBiIH0pLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4sIGdsb2JhbDo6U3lzdGVtLlR1cGxlPFQsIFQ+PikocyA9PiBuZXcgVHVwbGU8VCwgVD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FbGVtZW50QXQ8VD4ocywwKSwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FbGVtZW50QXQ8VD4ocywxKSkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxJRW51bWVyYWJsZTxUPj4gQ2FydGVzaWFuUHJvZHVjdDxUPih0aGlzIElFbnVtZXJhYmxlPElFbnVtZXJhYmxlPFQ+PiBzZXF1ZW5jZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJRW51bWVyYWJsZTxJRW51bWVyYWJsZTxUPj4gZW1wdHlQcm9kdWN0ID0gbmV3W10geyBFbnVtZXJhYmxlLkVtcHR5PFQ+KCkgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPj4+KFxyXG5zZXF1ZW5jZXMsICAgICAgICAgICAgICBlbXB0eVByb2R1Y3QsXHJcbihnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPj4+KSggICAgICAgICAgICAgIChhY2N1bXVsYXRvciwgc2VxdWVuY2UpID0+XHJcbiAgICAgICAgICAgICAgICBmcm9tIGFjY3NlcSBpbiBhY2N1bXVsYXRvclxyXG4gICAgICAgICAgICAgICAgZnJvbSBpdGVtIGluIHNlcXVlbmNlXHJcbiAgICAgICAgICAgICAgICBzZWxlY3QgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db25jYXQ8VD4oYWNjc2VxLG5ld1tdIHsgaXRlbSB9KSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxJRW51bWVyYWJsZTxUPj4gQ2FydGVzaWFuUHJvZHVjdDxUPih0aGlzIElFbnVtZXJhYmxlPExpc3Q8VD4+IHNlcXVlbmNlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIElFbnVtZXJhYmxlPElFbnVtZXJhYmxlPFQ+PiBlbXB0eVByb2R1Y3QgPSBuZXdbXSB7IEVudW1lcmFibGUuRW1wdHk8VD4oKSB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWdncmVnYXRlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4+Pihcclxuc2VxdWVuY2VzLCAgICAgICAgICAgICAgZW1wdHlQcm9kdWN0LFxyXG4oZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPj4+KSggICAgICAgICAgICAgIChhY2N1bXVsYXRvciwgc2VxdWVuY2UpID0+XHJcbiAgICAgICAgICAgICAgICBmcm9tIGFjY3NlcSBpbiBhY2N1bXVsYXRvclxyXG4gICAgICAgICAgICAgICAgZnJvbSBpdGVtIGluIHNlcXVlbmNlXHJcbiAgICAgICAgICAgICAgICBzZWxlY3QgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db25jYXQ8VD4oYWNjc2VxLG5ld1tdIHsgaXRlbSB9KSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxUPiBDb25jYXQ8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBlLCBUIHZhbHVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gZSlcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiB2O1xyXG4gICAgICAgICAgICB5aWVsZCByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPFQ+IERpc3RpbmN0PFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gc291cmNlLCBGdW5jPFQsIFQsIGJvb2w+IGFyZUVxdWFsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHlpZWxkZWQgPSBuZXcgTGlzdDxUPigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gc291cmNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8VD4oeWllbGRlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxULCBib29sPikoeCA9PiAhYXJlRXF1YWwoeCwgdCkpKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZGVkLkFkZCh0KTtcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5VdGlsaXR5XHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgTGlzdFV0aWxpdHlcclxuICAgIHtcclxuICAgICAgICBzdGF0aWMgY2xhc3MgTGlzdFV0aWxpdHlHZW5lcmljPFQ+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzdGF0aWMgSGFzaFNldDxUPiBfc2V0ID0gbmV3IEhhc2hTZXQ8VD4oKTtcclxuICAgICAgICAgICAgc3RhdGljIERpY3Rpb25hcnk8VCwgaW50PiBfbXVsdGlTZXQgPSBuZXcgRGljdGlvbmFyeTxULCBpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gSW50ZXJzZWN0aW9uKElFbnVtZXJhYmxlPFQ+IEEsIElFbnVtZXJhYmxlPFQ+IEIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChBID09IG51bGwgfHwgQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxUPigpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbkIgPSBfc2V0O1xyXG4gICAgICAgICAgICAgICAgaW5CLkNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQilcclxuICAgICAgICAgICAgICAgICAgICBpbkIuQWRkKHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbnRlcnNlY3Rpb24gPSBuZXcgTGlzdDxUPihpbkIuQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5CLkNvbnRhaW5zKHQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb24uQWRkKHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnRlcnNlY3Rpb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEludGVyc2VjdGlvbkNvdW50KElFbnVtZXJhYmxlPFQ+IEEsIElFbnVtZXJhYmxlPFQ+IEIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChBID09IG51bGwgfHwgQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbkIgPSBfc2V0O1xyXG4gICAgICAgICAgICAgICAgaW5CLkNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQilcclxuICAgICAgICAgICAgICAgICAgICBpbkIuQWRkKHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBBKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbkIuQ29udGFpbnModCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gRGlmZmVyZW5jZShJRW51bWVyYWJsZTxUPiBBLCBJRW51bWVyYWJsZTxUPiBCKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQSA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxUPigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBCID0gbmV3IExpc3Q8VD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW5CID0gX3NldDtcclxuICAgICAgICAgICAgICAgIGluQi5DbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIEIpXHJcbiAgICAgICAgICAgICAgICAgICAgaW5CLkFkZCh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGlmZmVyZW5jZSA9IG5ldyBMaXN0PFQ+KGluQi5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBBKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5CLkNvbnRhaW5zKHQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWZmZXJlbmNlLkFkZCh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlmZmVyZW5jZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IFVuaW9uKExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQSA9PSBudWxsICYmIEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpc3Q8VD4oKTtcclxuICAgICAgICAgICAgICAgIGlmIChBID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEI7XHJcbiAgICAgICAgICAgICAgICBpZiAoQiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBBO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbkIgPSBfc2V0O1xyXG4gICAgICAgICAgICAgICAgaW5CLkNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAoVCB0IGluIEIpXHJcbiAgICAgICAgICAgICAgICAgICAgaW5CLkFkZCh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdW5pb24gPSBuZXcgTGlzdDxUPihCKTtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKFQgdCBpbiBBKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5CLkNvbnRhaW5zKHQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlvbi5BZGQodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuaW9uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gVW5pb24oTGlzdDxUPiBBLCBUIGIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB1bmlvbiA9IG5ldyBMaXN0PFQ+KEEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF1bmlvbi5Db250YWlucyhiKSlcclxuICAgICAgICAgICAgICAgICAgICB1bmlvbi5BZGQoYik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuaW9uO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gTXVsdGlTZXRJbnRlcnNlY3Rpb24oSUVudW1lcmFibGU8VD4gQSwgSUVudW1lcmFibGU8VD4gQilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKEEgPT0gbnVsbCB8fCBCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0PFQ+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGluQiA9IF9tdWx0aVNldDtcclxuICAgICAgICAgICAgICAgIGluQi5DbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIEIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGluQi5UcnlHZXRWYWx1ZSh0LCBvdXQgY291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbkJbdF0gPSBjb3VudCArIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGludGVyc2VjdGlvbiA9IG5ldyBMaXN0PFQ+KGluQi5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdCBpbiBBKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGludCBjb3VudDtcclxuICAgICAgICAgICAgICAgICAgICBpbkIuVHJ5R2V0VmFsdWUodCwgb3V0IGNvdW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbi5BZGQodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQlt0XSA9IGNvdW50IC0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGludGVyc2VjdGlvbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgTXVsdGlTZXRJbnRlcnNlY3Rpb25Db3VudChJRW51bWVyYWJsZTxUPiBBLCBJRW51bWVyYWJsZTxUPiBCKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW5CID0gX211bHRpU2V0O1xyXG4gICAgICAgICAgICAgICAgaW5CLkNsZWFyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5CLlRyeUdldFZhbHVlKHQsIG91dCBjb3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGluQlt0XSA9IGNvdW50ICsgMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gQSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5CLlRyeUdldFZhbHVlKHQsIG91dCBjb3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbkJbdF0gPSBjb3VudCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0b3RhbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBzb3J0ZWQgbGlzdHNcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gRGlmZmVyZW5jZVNvcnRlZDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgICAgICB3aGVyZSBUIDogSUNvbXBhcmFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8VD4oQSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgQyA9IG5ldyBMaXN0PFQ+KE1hdGguTWF4KDQsIEEuQ291bnQgLSBCLkNvdW50KSk7XHJcbiAgICAgICAgICAgIGludCBqID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBBLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChqIDwgQi5Db3VudCAmJiBBW2ldLkNvbXBhcmVUbyhCW2pdKSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgaisrO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChqID49IEIuQ291bnQgfHwgQVtpXS5Db21wYXJlVG8oQltqXSkgPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgIEMuQWRkKEFbaV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBJbnRlcnNlY3Rpb25Tb3J0ZWQ8VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICAgICAgd2hlcmUgVCA6IElDb21wYXJhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxUPigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIEMgPSBuZXcgTGlzdDxUPihNYXRoLk1pbihBLkNvdW50LCBCLkNvdW50KSk7XHJcbiAgICAgICAgICAgIGludCBpID0gMDtcclxuICAgICAgICAgICAgaW50IGogPSAwO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGkgPCBBLkNvdW50ICYmIGogPCBCLkNvdW50KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29tcGFyZSA9IEFbaV0uQ29tcGFyZVRvKEJbal0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjb21wYXJlID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgQy5BZGQoQVtpXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcGFyZSA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgICAgIGlmIChjb21wYXJlID49IDApXHJcbiAgICAgICAgICAgICAgICAgICAgaisrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEludGVyc2VjdGlvbkNvdW50U29ydGVkPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAgICAgIHdoZXJlIFQgOiBJQ29tcGFyYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEEgPT0gbnVsbCB8fCBCID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgIGludCBpID0gMDtcclxuICAgICAgICAgICAgaW50IGogPSAwO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGkgPCBBLkNvdW50ICYmIGogPCBCLkNvdW50KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29tcGFyZSA9IEFbaV0uQ29tcGFyZVRvKEJbal0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjb21wYXJlID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIGlmIChjb21wYXJlIDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXBhcmUgPj0gMClcclxuICAgICAgICAgICAgICAgICAgICBqKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBVbmlvblNvcnRlZDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgICAgICB3aGVyZSBUIDogSUNvbXBhcmFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0ID0gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LkRpZmZlcmVuY2VTb3J0ZWQ8VD4oQSxCKTtcclxuICAgICAgICAgICAgbGlzdC5BZGRSYW5nZShBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRGlmZmVyZW5jZVNvcnRlZDxUPihCLEEpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIEVxdWFsU29ydGVkPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAgICAgIHdoZXJlIFQgOiBJQ29tcGFyYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuQ291bnQgPT0gQi5Db3VudCAmJiBJbnRlcnNlY3Rpb25Db3VudFNvcnRlZDxUPihBLCBCKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIFN1YnNldEVxdWFsU29ydGVkPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAgICAgIHdoZXJlIFQgOiBJQ29tcGFyYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEludGVyc2VjdGlvbkNvdW50U29ydGVkPFQ+KEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgU3Vic2V0U29ydGVkPFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAgICAgIHdoZXJlIFQgOiBJQ29tcGFyYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuQ291bnQgPCBCLkNvdW50ICYmIEludGVyc2VjdGlvbkNvdW50U29ydGVkPFQ+KEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxUPj4gTWF4aW1hbEVsZW1lbnRzU29ydGVkPFQ+KHRoaXMgTGlzdDxMaXN0PFQ+PiBBKVxyXG4gICAgICAgICAgICB3aGVyZSBUIDogSUNvbXBhcmFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChBID09IG51bGwgfHwgQS5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0PExpc3Q8VD4+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2hhaW5IZWFkcyA9IG5ldyBMaXN0PExpc3Q8VD4+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgc2V0IGluIEEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByZW1vdmVkID0gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihjaGFpbkhlYWRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKGhlYWQgPT4gQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlN1YnNldEVxdWFsU29ydGVkPFQ+KGhlYWQsc2V0KSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikoKHgpID0+IHsgfSApKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZW1vdmVkID4gMCB8fCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGNoYWluSGVhZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoaGVhZCA9PiAhQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlN1YnNldEVxdWFsU29ydGVkPFQ+KHNldCxoZWFkKSkpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSGVhZHMuQWRkKHNldCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaGFpbkhlYWRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBpbnQgc3BlY2lmaWNcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBEaWZmZXJlbmNlU29ydGVkKHRoaXMgTGlzdDxpbnQ+IEEsIExpc3Q8aW50PiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEEpO1xyXG5cclxuICAgICAgICAgICAgdmFyIEMgPSBuZXcgTGlzdDxpbnQ+KE1hdGguTWF4KDQsIEEuQ291bnQgLSBCLkNvdW50KSk7XHJcbiAgICAgICAgICAgIGludCBqID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBBLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChqIDwgQi5Db3VudCAmJiBBW2ldID4gQltqXSlcclxuICAgICAgICAgICAgICAgICAgICBqKys7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGogPj0gQi5Db3VudCB8fCBBW2ldIDwgQltqXSlcclxuICAgICAgICAgICAgICAgICAgICBDLkFkZChBW2ldKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBJbnRlcnNlY3Rpb25Tb3J0ZWQodGhpcyBMaXN0PGludD4gQSwgTGlzdDxpbnQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgQyA9IG5ldyBMaXN0PGludD4oTWF0aC5NaW4oQS5Db3VudCwgQi5Db3VudCkpO1xyXG4gICAgICAgICAgICBpbnQgaSA9IDA7XHJcbiAgICAgICAgICAgIGludCBqID0gMDtcclxuXHJcbiAgICAgICAgICAgIGludCBhYyA9IEEuQ291bnQ7XHJcbiAgICAgICAgICAgIGludCBiYyA9IEIuQ291bnQ7XHJcbiAgICAgICAgICAgIHdoaWxlIChpIDwgYWMgJiYgaiA8IGJjKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYSA9IEFbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IEJbal07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGEgPT0gYilcclxuICAgICAgICAgICAgICAgICAgICBDLkFkZChhKTtcclxuICAgICAgICAgICAgICAgIGlmIChhIDw9IGIpXHJcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGEgPj0gYilcclxuICAgICAgICAgICAgICAgICAgICBqKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgSW50ZXJzZWN0aW9uQ291bnRTb3J0ZWQodGhpcyBMaXN0PGludD4gQSwgTGlzdDxpbnQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuICAgICAgICAgICAgaW50IGkgPSAwO1xyXG4gICAgICAgICAgICBpbnQgaiA9IDA7XHJcblxyXG4gICAgICAgICAgICBpbnQgYWMgPSBBLkNvdW50O1xyXG4gICAgICAgICAgICBpbnQgYmMgPSBCLkNvdW50O1xyXG4gICAgICAgICAgICB3aGlsZSAoaSA8IGFjICYmIGogPCBiYylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGEgPSBBW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBCW2pdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhID09IGIpXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIGlmIChhIDw9IGIpXHJcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGEgPj0gYilcclxuICAgICAgICAgICAgICAgICAgICBqKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IFVuaW9uU29ydGVkKHRoaXMgTGlzdDxpbnQ+IEEsIExpc3Q8aW50PiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxpc3QgPSBBLkRpZmZlcmVuY2VTb3J0ZWQoQik7XHJcbiAgICAgICAgICAgIGxpc3QuQWRkUmFuZ2UoQi5EaWZmZXJlbmNlU29ydGVkKEEpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIEVxdWFsU29ydGVkKHRoaXMgTGlzdDxpbnQ+IEEsIExpc3Q8aW50PiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuQ291bnQgPT0gQi5Db3VudCAmJiBJbnRlcnNlY3Rpb25Db3VudFNvcnRlZChBLCBCKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIFN1YnNldEVxdWFsU29ydGVkKHRoaXMgTGlzdDxpbnQ+IEEsIExpc3Q8aW50PiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEludGVyc2VjdGlvbkNvdW50U29ydGVkKEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgU3Vic2V0U29ydGVkKHRoaXMgTGlzdDxpbnQ+IEEsIExpc3Q8aW50PiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuQ291bnQgPCBCLkNvdW50ICYmIEludGVyc2VjdGlvbkNvdW50U29ydGVkKEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxpbnQ+PiBNYXhpbWFsRWxlbWVudHNTb3J0ZWQodGhpcyBMaXN0PExpc3Q8aW50Pj4gQSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChBID09IG51bGwgfHwgQS5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjaGFpbkhlYWRzID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNldCBpbiBBKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlZCA9IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihjaGFpbkhlYWRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoaGVhZCA9PiBoZWFkLlN1YnNldEVxdWFsU29ydGVkKHNldCkpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikoKHgpID0+IHsgfSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlbW92ZWQgPiAwIHx8IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihjaGFpbkhlYWRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikoaGVhZCA9PiAhc2V0LlN1YnNldEVxdWFsU29ydGVkKGhlYWQpKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5IZWFkcy5BZGQoc2V0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNoYWluSGVhZHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUPiBNdWx0aVNldEludGVyc2VjdGlvbjxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IEEsIElFbnVtZXJhYmxlPFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHlHZW5lcmljPFQ+Lk11bHRpU2V0SW50ZXJzZWN0aW9uKEEsIEIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgTXVsdGlTZXRJbnRlcnNlY3Rpb25Db3VudDxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IEEsIElFbnVtZXJhYmxlPFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHlHZW5lcmljPFQ+Lk11bHRpU2V0SW50ZXJzZWN0aW9uQ291bnQoQSwgQik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgTXVsdGlTZXRFcXVhbDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuQ291bnQgPT0gQi5Db3VudCAmJiBNdWx0aVNldEludGVyc2VjdGlvbkNvdW50PFQ+KEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgTXVsdGlTZXRTdWJzZXRFcXVhbDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE11bHRpU2V0SW50ZXJzZWN0aW9uQ291bnQ8VD4oQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBNdWx0aVNldFN1YnNldDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEEuQ291bnQgPCBCLkNvdW50ICYmIE11bHRpU2V0SW50ZXJzZWN0aW9uQ291bnQ8VD4oQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBCaW5vbWlhbENvZWZmaWNpZW50KGxvbmcgbiwgbG9uZyBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGsgPCAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbG9uZyBtYXggPSBNYXRoLk1heChrLCBuIC0gayk7XHJcbiAgICAgICAgICAgIGxvbmcgbWluID0gTWF0aC5NaW4oaywgbiAtIGspO1xyXG5cclxuICAgICAgICAgICAgbG9uZyByZXN1bHQgPSAxO1xyXG4gICAgICAgICAgICB3aGlsZSAobiA+IG1heClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICo9IG47XHJcbiAgICAgICAgICAgICAgICBuLS07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChtaW4gPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgLz0gbWluO1xyXG5cclxuICAgICAgICAgICAgICAgIG1pbi0tO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9TdHJpbmc8VD4oTGlzdDxUPiBBKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKFQgdCBpbiBBKVxyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kRm9ybWF0KFwiezB9LCBcIiwgdC5Ub1N0cmluZygpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzYi5Ub1N0cmluZygpLlRyaW1FbmQoJyAnLCAnLCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IERpZmZlcmVuY2U8VD4odGhpcyBJRW51bWVyYWJsZTxUPiBBLCBJRW51bWVyYWJsZTxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIExpc3RVdGlsaXR5R2VuZXJpYzxUPi5EaWZmZXJlbmNlKEEsIEIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IEludGVyc2VjdGlvbjxUPih0aGlzIElFbnVtZXJhYmxlPFQ+IEEsIElFbnVtZXJhYmxlPFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGlzdFV0aWxpdHlHZW5lcmljPFQ+LkludGVyc2VjdGlvbihBLCBCKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEludGVyc2VjdGlvbkNvdW50PFQ+KHRoaXMgSUVudW1lcmFibGU8VD4gQSwgSUVudW1lcmFibGU8VD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBMaXN0VXRpbGl0eUdlbmVyaWM8VD4uSW50ZXJzZWN0aW9uQ291bnQoQSwgQik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gVW5pb248VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBMaXN0VXRpbGl0eUdlbmVyaWM8VD4uVW5pb24oQSwgQik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8VD4gVW5pb248VD4odGhpcyBMaXN0PFQ+IEEsIFQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBMaXN0VXRpbGl0eUdlbmVyaWM8VD4uVW5pb24oQSwgYik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgRXF1YWw8VD4odGhpcyBMaXN0PFQ+IEEsIExpc3Q8VD4gQilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBLkNvdW50ID09IEIuQ291bnQgJiYgSW50ZXJzZWN0aW9uQ291bnQ8VD4oQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBTdWJzZXRFcXVhbDxUPih0aGlzIExpc3Q8VD4gQSwgTGlzdDxUPiBCKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEludGVyc2VjdGlvbkNvdW50PFQ+KEEsIEIpID09IEEuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgU3Vic2V0PFQ+KHRoaXMgTGlzdDxUPiBBLCBMaXN0PFQ+IEIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQS5Db3VudCA8IEIuQ291bnQgJiYgSW50ZXJzZWN0aW9uQ291bnQ8VD4oQSwgQikgPT0gQS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PFQ+PiBNYXhpbWFsRWxlbWVudHM8VD4odGhpcyBMaXN0PExpc3Q8VD4+IEEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQSA9PSBudWxsIHx8IEEuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdDxMaXN0PFQ+PigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNoYWluSGVhZHMgPSBuZXcgTGlzdDxMaXN0PFQ+PigpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNldCBpbiBBKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlZCA9IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oY2hhaW5IZWFkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShoZWFkID0+IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5TdWJzZXRFcXVhbDxUPihoZWFkLHNldCkpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKCh4KSA9PiB7IH0pKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZW1vdmVkID4gMCB8fCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGNoYWluSGVhZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoaGVhZCA9PiAhQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlN1YnNldEVxdWFsPFQ+KHNldCxoZWFkKSkpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSGVhZHMuQWRkKHNldCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaGFpbkhlYWRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PExpc3Q8VD4+IEdlbmVyYXRlU3VibGlzdHM8VD4odGhpcyBMaXN0PFQ+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMaXN0PExpc3Q8VD4+IHN1Ymxpc3RzID0gbmV3IExpc3Q8TGlzdDxUPj4oKTtcclxuICAgICAgICAgICAgc3VibGlzdHMuQWRkKG5ldyBMaXN0PFQ+KCkpO1xyXG5cclxuICAgICAgICAgICAgTGlzdDxUPiBjbG9uZSA9IG5ldyBMaXN0PFQ+KGxpc3QpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGNsb25lLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVCBoZWFkID0gY2xvbmVbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgaW50IGNvdW50ID0gc3VibGlzdHMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTGlzdDxUPiB1bmlvbiA9IG5ldyBMaXN0PFQ+KHN1Ymxpc3RzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB1bmlvbi5BZGQoaGVhZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN1Ymxpc3RzLkFkZCh1bmlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY2xvbmUuUmVtb3ZlQXQoMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdWJsaXN0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PFQ+PiBHZW5lcmF0ZVN1Ymxpc3RzPFQ+KHRoaXMgTGlzdDxUPiBsaXN0LCBpbnQgc2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8TGlzdDxUPj4gc3VibGlzdHMgPSBuZXcgTGlzdDxMaXN0PFQ+PigpO1xyXG4gICAgICAgICAgICBpbnQgbiA9IGxpc3QuQ291bnQ7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKExpc3Q8Ym9vbD4gaW5PdXQgaW4gRW51bWVyYXRlU2hvcnRMZXgobiwgc2l6ZSkpXHJcbiAgICAgICAgICAgICAgICBzdWJsaXN0cy5BZGQoRXh0cmFjdFN1Ymxpc3Q8VD4obGlzdCwgaW5PdXQpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdWJsaXN0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxUPj4gRW51bWVyYXRlU3VibGlzdHM8VD4odGhpcyBMaXN0PFQ+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgbiA9IGxpc3QuQ291bnQ7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKExpc3Q8Ym9vbD4gaW5PdXQgaW4gRW51bWVyYXRlU2hvcnRMZXgobikpXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gRXh0cmFjdFN1Ymxpc3Q8VD4obGlzdCwgaW5PdXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PFQ+PiBFbnVtZXJhdGVTdWJsaXN0czxUPih0aGlzIExpc3Q8VD4gbGlzdCwgaW50IHNpemUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgbiA9IGxpc3QuQ291bnQ7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKExpc3Q8Ym9vbD4gaW5PdXQgaW4gRW51bWVyYXRlU2hvcnRMZXgobiwgc2l6ZSkpXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gRXh0cmFjdFN1Ymxpc3Q8VD4obGlzdCwgaW5PdXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PFQ+IE5leHRTdWJsaXN0PFQ+KExpc3Q8VD4gbGlzdCwgaW50IHNpemUsIHJlZiBMaXN0PGJvb2w+IHN0YXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IG4gPSBsaXN0LkNvdW50O1xyXG4gICAgICAgICAgICBib29sIGFyZU1vcmUgPSBOZXh0U2hvcnRMZXgobiwgc2l6ZSwgcmVmIHN0YXRlKTtcclxuXHJcbiAgICAgICAgICAgIExpc3Q8VD4gc3VibGlzdCA9IEV4dHJhY3RTdWJsaXN0PFQ+KGxpc3QsIHN0YXRlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghYXJlTW9yZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhdGUgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3VibGlzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBMaXN0PFQ+IEV4dHJhY3RTdWJsaXN0PFQ+KExpc3Q8VD4gbGlzdCwgTGlzdDxib29sPiBpbk91dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExpc3Q8VD4gc3VibGlzdCA9IG5ldyBMaXN0PFQ+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW5PdXQuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluT3V0W2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIHN1Ymxpc3QuQWRkKGxpc3RbaV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3VibGlzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PGJvb2w+PiBFbnVtZXJhdGVTaG9ydExleChpbnQgbiwgaW50IGspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBrID0gTWF0aC5NYXgoMCwgayk7XHJcblxyXG4gICAgICAgICAgICBMaXN0PGJvb2w+IGxpc3QgPSBuZXcgTGlzdDxib29sPihuKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBrOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0LkFkZCh0cnVlKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGs7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0LkFkZChmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICBkb1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbGlzdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAoTmV4dFNhbWVUcnVlQ291bnQobGlzdCwgaykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PGJvb2w+PiBFbnVtZXJhdGVTaG9ydExleChpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0ID0gbmV3IExpc3Q8Ym9vbD4obik7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbGlzdC5BZGQoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgZG9cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGxpc3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2hpbGUgKE5leHQobGlzdCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PGJvb2w+PiBFbnVtZXJhdGVTaG9ydExleE5vbmVtcHR5KGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgayA9IDE7IGsgPD0gbjsgaysrKVxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGxpc3QgaW4gRW51bWVyYXRlU2hvcnRMZXgobiwgaykpXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYm9vbCBOZXh0U2hvcnRMZXgoaW50IG4sIGludCBrLCByZWYgTGlzdDxib29sPiBzdGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBrID0gTWF0aC5NYXgoMCwgayk7XHJcblxyXG4gICAgICAgICAgICAgICAgc3RhdGUgPSBuZXcgTGlzdDxib29sPihuKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgazsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLkFkZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSBrOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLkFkZChmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGsgPiAwICYmIGsgPCBuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTmV4dFNhbWVUcnVlQ291bnQoc3RhdGUsIGspO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJvb2wgTmV4dChMaXN0PGJvb2w+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgdHJ1ZUNvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxib29sPigoKElFbnVtZXJhYmxlPGJvb2w+KWxpc3QpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGJvb2wsIGJvb2w+KShiID0+IGIpKTtcclxuICAgICAgICAgICAgaWYgKHRydWVDb3VudCA9PSBsaXN0LkNvdW50KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaW50IGZpcnN0SG9sZSA9IEZpbmRGaXJzdEhvbGUobGlzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZmlyc3RIb2xlID49IGxpc3QuQ291bnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdHJ1ZUNvdW50ICsgMTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RbaV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IHRydWVDb3VudCArIDE7IGkgPCBsaXN0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdFtpXSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGlzdFtmaXJzdEhvbGVdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpbnQgaW5pdGlhbFRydWVzID0gdHJ1ZUNvdW50O1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IGZpcnN0SG9sZTsgaSA8IGxpc3QuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGlzdFtpXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFRydWVzLS07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBpbml0aWFsVHJ1ZXM7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBsaXN0W2ldID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSBpbml0aWFsVHJ1ZXM7IGkgPCBmaXJzdEhvbGU7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBsaXN0W2ldID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJvb2wgTmV4dFNhbWVUcnVlQ291bnQoTGlzdDxib29sPiBsaXN0LCBpbnQgdHJ1ZUNvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGZpcnN0SG9sZSA9IEZpbmRGaXJzdEhvbGUobGlzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZmlyc3RIb2xlID49IGxpc3QuQ291bnQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBsaXN0W2ZpcnN0SG9sZV0gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaW50IGluaXRpYWxUcnVlcyA9IHRydWVDb3VudDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGZpcnN0SG9sZTsgaSA8IGxpc3QuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3RbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFRydWVzLS07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW5pdGlhbFRydWVzOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0W2ldID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGluaXRpYWxUcnVlczsgaSA8IGZpcnN0SG9sZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbGlzdFtpXSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgaW50IEZpbmRGaXJzdEhvbGUoTGlzdDxib29sPiBsaXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAoaSA8IGxpc3QuQ291bnQgLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGlzdFtpXSAmJiAhbGlzdFtpICsgMV0pXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaSArIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIGludCBiYXNlZFxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBOZXh0U2hvcnRMZXgoaW50IG4sIGludCBrLCByZWYgaW50W10gc3RhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoc3RhdGUgPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgayA9IE1hdGguTWF4KDAsIGspO1xyXG5cclxuICAgICAgICAgICAgICAgIHN0YXRlID0gbmV3IGludFtuXTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgazsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlW2ldID0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gayA8PSAwIHx8IGsgPj0gbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYm9vbCBkb25lID0gIU5leHRTYW1lT25Db3VudChzdGF0ZSwgayk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZG9uZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBrOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVbaV0gPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSBrOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlW2ldID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRvbmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYm9vbCBOZXh0U2FtZU9uQ291bnQoaW50W10gbGlzdCwgaW50IHRydWVDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBmaXJzdEhvbGUgPSBGaW5kRmlyc3RIb2xlKGxpc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZpcnN0SG9sZSA+PSBsaXN0Lkxlbmd0aClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGxpc3RbZmlyc3RIb2xlXSA9IDE7XHJcblxyXG4gICAgICAgICAgICBpbnQgaW5pdGlhbE9uZXMgPSB0cnVlQ291bnQ7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBmaXJzdEhvbGU7IGkgPCBsaXN0Lkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbml0aWFsT25lcyAtPSBsaXN0W2ldO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGluaXRpYWxPbmVzOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0W2ldID0gMTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGluaXRpYWxPbmVzOyBpIDwgZmlyc3RIb2xlOyBpKyspXHJcbiAgICAgICAgICAgICAgICBsaXN0W2ldID0gMDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGludCBGaW5kRmlyc3RIb2xlKGludFtdIGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChpIDwgbGlzdC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGlzdFtpXSA9PSAxICYmIGxpc3RbaSArIDFdID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaSArIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gcGFydGl0aW9uc1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8TGlzdDxMaXN0PGludD4+PiBFbnVtZXJhdGVQYXJ0aXRpb25zVW5vcmRlcmVkKGludFtdIHNpemVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+PihFbnVtZXJhdGVQYXJ0aXRpb25zKHNpemVzLCAwKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+LCBib29sPikoKGFhLCBiYikgPT4gUGFydGlhbE9yZGVyLkVtYmVkczxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYWEsIGJiLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBhcnRpYWxPcmRlclJlc3VsdD4pKChhLCBiKSA9PiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRXF1YWw8aW50PihhLGIpID8gbmV3IFBhcnRpYWxPcmRlclJlc3VsdCgpIHsgQXRNb3N0ID0gdHJ1ZSwgQXRMZWFzdCA9IHRydWUgfSA6IG5ldyBQYXJ0aWFsT3JkZXJSZXN1bHQoKSkpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPExpc3Q8TGlzdDxpbnQ+Pj4gRW51bWVyYXRlUGFydGl0aW9ucyhpbnRbXSBzaXplcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGVQYXJ0aXRpb25zKHNpemVzLCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxMaXN0PExpc3Q8aW50Pj4+IEVudW1lcmF0ZVBhcnRpdGlvbnMoaW50W10gc2l6ZXMsIGludCBpdGVtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkbGVzcyA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2l6ZXMuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChzaXplc1tpXSA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNoaWxkbGVzcyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIHNpemVzW2ldLS07XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnRpdGlvbiBpbiBFbnVtZXJhdGVQYXJ0aXRpb25zKHNpemVzLCBpdGVtICsgMSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGl0aW9uW2ldLkFkZChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gcGFydGl0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNpemVzW2ldKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjaGlsZGxlc3MpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0aXRpb24gPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNpemVzLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRpdGlvbi5BZGQobmV3IExpc3Q8aW50PigpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gcGFydGl0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICB9XHJcbn0iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5VdGlsaXR5XHJcbntcclxuICAgIHB1YmxpYyBzdHJ1Y3QgUGFydGlhbE9yZGVyUmVzdWx0XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIGJvb2wgQXRNb3N0O1xyXG4gICAgICAgIHB1YmxpYyBib29sIEF0TGVhc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBQYXJ0aWFsT3JkZXJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgRW1iZWRzPFQ+KExpc3Q8VD4gQSwgTGlzdDxUPiBCLCBGdW5jPFQsIFQsIFBhcnRpYWxPcmRlclJlc3VsdD4gb3JkZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoQS5Db3VudCA+IEIuQ291bnQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgbiA9IEEuQ291bnQgKyBCLkNvdW50O1xyXG4gICAgICAgICAgICB2YXIgYWRqYWNlbmNpZXMgPSBuZXcgTGlzdDxMaXN0PGludD4+KEEuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGEgaW4gQSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5laWdoYm9ycyA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBCLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG9yZGVyKGEsIEJbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuQXRNb3N0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWlnaGJvcnMuQWRkKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGFkamFjZW5jaWVzLkFkZChuZWlnaGJvcnMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRmxvd3MuQmlwYXJ0aXRlTWF4aW11bU1hdGNoaW5nKG4sIGFkamFjZW5jaWVzKSA9PSBBLkNvdW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5VdGlsaXR5XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBQZXJtdXRhdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBQZXJtdXRhdGlvbihGYWN0b3JhZGljIGYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2VxdWVuY2UgPSBuZXcgTGlzdDxpbnQ+KGYuRGlnaXRzLkNvdW50KTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBmLkRpZ2l0cy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgc2VxdWVuY2UuQWRkKGkpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBmLkRpZ2l0cy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgaiA9IGYuRGlnaXRzW2YuRGlnaXRzLkNvdW50IC0gMSAtIGldICsgaTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZS5JbnNlcnQoaSwgc2VxdWVuY2Vbal0pO1xyXG4gICAgICAgICAgICAgICAgc2VxdWVuY2UuUmVtb3ZlQXQoaiArIDEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBTZXF1ZW5jZSA9IHNlcXVlbmNlO1xyXG4gICAgICAgICAgICBOID0gU2VxdWVuY2UuQ291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgUGVybXV0YXRpb24oTGlzdDxpbnQ+IHNlcXVlbmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU2VxdWVuY2UgPSBuZXcgTGlzdDxpbnQ+KHNlcXVlbmNlKTtcclxuICAgICAgICAgICAgTiA9IFNlcXVlbmNlLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgdmFyIGhhc2ggPSBuZXcgRGljdGlvbmFyeTxpbnQsIGJvb2w+KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKGludCBpIGluIHNlcXVlbmNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzaC5Db250YWluc0tleShpKSlcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiVGhlIHN1cHBsaWVkIHNlcXVlbmNlIGhhcyBkdXBsaWNhdGVzLlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDAgfHwgaSA+IE4gLSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJUaGUgc3VwcGxpZWQgc2VxdWVuY2UgaGFzIGVsZW1lbnRzIHRoYXQgYXJlIG91dCBvZiByYW5nZS5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaGFzaFtpXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFQ+IEFwcGx5PFQ+KExpc3Q8VD4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChsaXN0ID09IG51bGwgfHwgbGlzdC5Db3VudCAhPSBOKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIlRoZSBwZXJtdXRhdGlvbiBjYW5ub3QgYmUgYXBwbGllZCB0byB0aGUgZ2l2ZW4gbGlzdC5cIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgcGVybXV0ZWRMaXN0ID0gbmV3IExpc3Q8VD4oTik7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKylcclxuICAgICAgICAgICAgICAgIHBlcm11dGVkTGlzdC5BZGQobGlzdFt0aGlzW2ldXSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcGVybXV0ZWRMaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIFBlcm11dGF0aW9uIEludmVyc2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNlcXVlbmNlID0gbmV3IGludFtOXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKVxyXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VbdGhpc1tpXV0gPSBpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZXJtdXRhdGlvbihuZXcgTGlzdDxpbnQ+KHNlcXVlbmNlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFBlcm11dGF0aW9uIG9wZXJhdG9yICooUGVybXV0YXRpb24gcDEsIFBlcm11dGF0aW9uIHAyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHAxID09IG51bGwgfHwgcDIgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgaWYgKHAxLk4gIT0gcDIuTilcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJZb3UgdHJpZWQgdG8gbXVsdGlwbHkgcGVybXV0YXRpb25zIG9mIGRpZmZlcmVudCBzZXRzLlwiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzZXF1ZW5jZSA9IG5ldyBMaXN0PGludD4ocDIuTik7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHAyLk47IGkrKylcclxuICAgICAgICAgICAgICAgIHNlcXVlbmNlLkFkZChwMVtwMltpXV0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZXJtdXRhdGlvbihzZXF1ZW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgPT0oUGVybXV0YXRpb24gcDEsIFBlcm11dGF0aW9uIHAyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKChvYmplY3QpcDEgPT0gbnVsbCAmJiAob2JqZWN0KXAyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKChvYmplY3QpcDEgPT0gbnVsbCB8fCAob2JqZWN0KXAyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcDEuRXF1YWxzKHAyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciAhPShQZXJtdXRhdGlvbiBwMSwgUGVybXV0YXRpb24gcDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gIShwMSA9PSBwMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvYmogPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBUb1N0cmluZygpID09IG9iai5Ub1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gXCIoXCIgKyBzdHJpbmcuSm9pbjxpbnQ+KFwiIFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihTZXF1ZW5jZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGkgPT4gaSArIDEpKSkgKyBcIilcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRvU3RyaW5nKCkuR2V0SGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8UGVybXV0YXRpb24+IEVudW1lcmF0ZUFsbChpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IENvdW50aW5nLkZhY3RvcmlhbChuKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobG9uZyBpID0gMDsgaSA8IGNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gbmV3IFBlcm11dGF0aW9uKG5ldyBGYWN0b3JhZGljKGksIG4pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgdGhpc1tpbnQgaV1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU2VxdWVuY2VbaV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gU2VxdWVuY2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldDtcclxuICAgICAgICAgICAgcHJpdmF0ZSBzZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IE5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldDtcclxuICAgICAgICAgICAgcHJpdmF0ZSBzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuVXRpbGl0eVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgU2FmZUNvbGxlY3Rpb248VD4gOiBJQ29sbGVjdGlvbjxUPlxyXG4gICAge1xyXG4gICAgICAgIGludCBfY291bnQ7XHJcbiAgICAgICAgTm9kZSBfZmlyc3Q7XHJcbiAgICAgICAgTm9kZSBfbGFzdDtcclxuXHJcbiAgICAgICAgcHVibGljIFNhZmVDb2xsZWN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9maXJzdCA9IG5ldyBOb2RlKCk7XHJcbiAgICAgICAgICAgIF9sYXN0ID0gX2ZpcnN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkKFQgaXRlbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9sYXN0Lk5leHQgPSBuZXcgTm9kZSgpIHsgSXRlbSA9IGl0ZW0gfTtcclxuICAgICAgICAgICAgX2xhc3QgPSBfbGFzdC5OZXh0O1xyXG4gICAgICAgICAgICBfY291bnQrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIENsZWFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9maXJzdC5OZXh0ID0gbnVsbDtcclxuICAgICAgICAgICAgX2xhc3QgPSBfZmlyc3Q7XHJcbiAgICAgICAgICAgIF9jb3VudCA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWlucyhUIGl0ZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRmluZFByZXZpb3VzTm9kZShpdGVtKSAhPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ29weVRvKFRbXSBhcnJheSwgaW50IGFycmF5SW5kZXgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IF9maXJzdDtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gbm9kZS5OZXh0O1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBhcnJheVthcnJheUluZGV4KytdID0gbmV4dC5JdGVtO1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5leHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ291bnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBfY291bnQ7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzUmVhZE9ubHlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgUmVtb3ZlKFQgaXRlbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gRmluZFByZXZpb3VzTm9kZShpdGVtKTtcclxuICAgICAgICAgICAgaWYgKG5vZGUgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBuZXh0ID0gbm9kZS5OZXh0O1xyXG4gICAgICAgICAgICBpZiAobmV4dCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICBcclxuICAgICAgICAgICAgbm9kZS5OZXh0ID0gbmV4dC5OZXh0O1xyXG4gICAgICAgICAgICBfY291bnQtLTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmF0b3I8VD4gR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IF9maXJzdDtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gbm9kZS5OZXh0O1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIG5leHQuSXRlbTtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBuZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmF0b3IgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhYmxlLkdldEVudW1lcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldEVudW1lcmF0b3IoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIE5vZGUgRmluZFByZXZpb3VzTm9kZShUIGl0ZW0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IF9maXJzdDtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gbm9kZS5OZXh0O1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoRXF1YWxpdHlDb21wYXJlcjxUPi5EZWZhdWx0LkVxdWFscyhuZXh0Lkl0ZW0sIGl0ZW0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG5cclxuICAgICAgICAgICAgICAgIG5vZGUgPSBuZXh0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNsYXNzIE5vZGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBUIEl0ZW07XHJcbiAgICAgICAgICAgIHB1YmxpYyBOb2RlIE5leHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLlV0aWxpdHlcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNlcXVlbmNlR2VuZXJhbGl6ZXI8VD5cclxuICAgIHtcclxuICAgICAgICBpbnQgX2xlbmd0aDtcclxuICAgICAgICBMaXN0PFQ+IF9hbHBoYWJldDtcclxuICAgICAgICBMaXN0PE1hdGNoZXI+IF9tYXRjaGVycyA9IG5ldyBMaXN0PE1hdGNoZXI+KCk7XHJcbiAgICAgICAgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4gX2dlbmVyYWxpemVycztcclxuXHJcbiAgICAgICAgcHVibGljIFNlcXVlbmNlR2VuZXJhbGl6ZXIoaW50IGxlbmd0aCwgTGlzdDxUPiBhbHBoYWJldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSBsZW5ndGg7XHJcbiAgICAgICAgICAgIF9hbHBoYWJldCA9IGFscGhhYmV0O1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHQgaW4gYWxwaGFiZXQpXHJcbiAgICAgICAgICAgICAgICBBZGRNYXRjaGVyKHQuVG9TdHJpbmcoKSwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VCwgYm9vbD4pKHR0ID0+IHQuRXF1YWxzKHR0KSkpO1xyXG5cclxuICAgICAgICAgICAgQWRkTWF0Y2hlcihcIipcIiwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VCwgYm9vbD4pKHR0ID0+IHRydWUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEFkZE1hdGNoZXIoc3RyaW5nIG5hbWUsIEZ1bmM8VCwgYm9vbD4gbWF0Y2gpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfbWF0Y2hlcnMuQWRkKG5ldyBNYXRjaGVyKCkgeyBOYW1lID0gbmFtZSwgTWF0Y2ggPSBtYXRjaCB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFZlY3RvckNvbXBhcmVyIF92ZWN0b3JDb21wYXJlciA9IG5ldyBWZWN0b3JDb21wYXJlcigpO1xyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8TWF0Y2hlcj4+IEdlbmVyYWxpemUoTGlzdDxMaXN0PFQ+PiBleGFtcGxlcywgTGlzdDxMaXN0PFQ+PiBub25FeGFtcGxlcywgYm9vbCBtb3N0R2VuZXJhbCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQnVpbGRNYXRjaGVyTGF0dGljZSgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBvc3NpYmxlcyA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGV4YW1wbGUgaW4gZXhhbXBsZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBhc01hdGNoZXJJbmRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8VCxpbnQ+KGV4YW1wbGUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8VCwgaW50PikodCA9PiBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkZpcnN0SW5kZXg8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxUPi5NYXRjaGVyPihfbWF0Y2hlcnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxUPi5NYXRjaGVyLCBib29sPikobSA9PiBtLk5hbWUgPT0gdC5Ub1N0cmluZygpKSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIHBvc3NpYmxlcy5BZGRSYW5nZShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGludD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pihhc01hdGNoZXJJbmRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShpID0+IF9nZW5lcmFsaXplcnNbaV0pKSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHYgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih2KSkpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcG9zc2libGVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4ocG9zc2libGVzLF92ZWN0b3JDb21wYXJlcikuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgbm9uRXhhbXBsZSBpbiBub25FeGFtcGxlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFzTWF0Y2hlckluZGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxULGludD4obm9uRXhhbXBsZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxULCBpbnQ+KSh0ID0+IEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuRmlyc3RJbmRleDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPFQ+Lk1hdGNoZXI+KF9tYXRjaGVycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPFQ+Lk1hdGNoZXIsIGJvb2w+KShtID0+IG0uTmFtZSA9PSB0LlRvU3RyaW5nKCkpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgcG9zc2libGVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHBvc3NpYmxlcyxTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGludD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pihhc01hdGNoZXJJbmRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShpID0+IF9nZW5lcmFsaXplcnNbaV0pKSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHYgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih2KSkpLCBfdmVjdG9yQ29tcGFyZXIpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZ2VuZXJhbGl6YXRpb25zID0gbmV3IExpc3Q8TGlzdDxpbnQ+PigpO1xyXG4gICAgICAgICAgICB2YXIgcmVtYWluaW5nID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihleGFtcGxlcyk7XHJcbiAgICAgICAgICAgIHdoaWxlIChyZW1haW5pbmcuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3JkZXJlZCA9IHBvc3NpYmxlcy5TZWxlY3QocHAgPT4gbmV3IHtWZWN0b3IgPSBwcCwgQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocmVtYWluaW5nLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHIgPT4gSXNNYXRjaChyLCBwcCkpKX0pLk9yZGVyQnlEZXNjZW5kaW5nPGludD4oeHggPT4geHguQ291bnQpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1heGVycyA9IG9yZGVyZWQuVGFrZVdoaWxlKHh4ID0+IHh4LkNvdW50ID09IG9yZGVyZWRbMF0uQ291bnQpLk9yZGVyQnlEZXNjZW5kaW5nPGludD4oeHggPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BZ2dyZWdhdGU8aW50Pih4eC5WZWN0b3IsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQsIGludD4pKCh0b3RhbCwgeCkgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfbWF0Y2hlcnNbeF0uTmFtZSA9PSBcIipcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b3RhbCAqIF9hbHBoYWJldC5Db3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9tYXRjaGVyc1t4XS5OYW1lLlN0YXJ0c1dpdGgoXCIhXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvdGFsICogKF9hbHBoYWJldC5Db3VudCAtIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvdGFsO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJlc3QgPSBtb3N0R2VuZXJhbCA/IG1heGVycy5GaXJzdCgpLlZlY3RvciA6IG1heGVycy5MYXN0KCkuVmVjdG9yO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBnZW5lcmFsaXphdGlvbnMuQWRkKGJlc3QpO1xyXG5BbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLlJlbW92ZUFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KCAgICAgICAgICAgICAgICByZW1haW5pbmcsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikociA9PiBJc01hdGNoKHIsIGJlc3QpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KSgoeCkgPT4geyB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxUPi5NYXRjaGVyPj4oZ2VuZXJhbGl6YXRpb25zLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxUPi5NYXRjaGVyPj4pKGwgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8aW50LGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8VD4uTWF0Y2hlcj4obCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8VD4uTWF0Y2hlcj4pKGkgPT4gX21hdGNoZXJzW2ldKSkuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGFzcyBWZWN0b3JDb21wYXJlciA6IElFcXVhbGl0eUNvbXBhcmVyPExpc3Q8aW50Pj5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhMaXN0PGludD4geCwgTGlzdDxpbnQ+IHkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8aW50Pih4LHkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwdWJsaWMgaW50IEdldEhhc2hDb2RlKExpc3Q8aW50PiBsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1bmNoZWNrZWRcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgaGFzaCA9IDE3O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB4IGluIGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2ggPSBoYXNoICogMjMgKyB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFzaDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBCdWlsZE1hdGNoZXJMYXR0aWNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9nZW5lcmFsaXplcnMgPSBuZXcgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IF9tYXRjaGVycy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfZ2VuZXJhbGl6ZXJzW2ldID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPFQ+KF9hbHBoYWJldCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxULCBib29sPikoYSA9PiBfbWF0Y2hlcnNbaV0uTWF0Y2goYSkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IoaW50IGogPSAwOyBqIDwgX21hdGNoZXJzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5TdWJzZXRFcXVhbDxUPihtYXRjaGVzLFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8VD4oX2FscGhhYmV0LChnbG9iYWw6OlN5c3RlbS5GdW5jPFQsIGJvb2w+KShhID0+IF9tYXRjaGVyc1tqXS5NYXRjaChhKSkpLlRvTGlzdCgpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2dlbmVyYWxpemVyc1tpXS5BZGQoaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgSXNNYXRjaChMaXN0PFQ+IHZlY3RvciwgTGlzdDxpbnQ+IG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHZlY3Rvci5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIV9tYXRjaGVyc1ttW2ldXS5NYXRjaCh2ZWN0b3JbaV0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xhc3MgTWF0Y2hlclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIHN0cmluZyBOYW1lO1xyXG4gICAgICAgICAgICBwdWJsaWMgRnVuYzxULCBib29sPiBNYXRjaDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Xb3JkR2FtZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQWNjZXNzaWJpbGl0eUNoZWNrZXJcclxuICAgIHtcclxuICAgICAgICBMaXN0PGNoYXI+IF9hbHBoYWJldDtcclxuICAgICAgICBwdWJsaWMgQWNjZXNzaWJpbGl0eUNoZWNrZXIoSUVudW1lcmFibGU8Y2hhcj4gYWxwaGFiZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfYWxwaGFiZXQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxjaGFyPihhbHBoYWJldCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0FjY2Vzc2libGUoc3RyaW5nIHcsIExpc3Q8c3RyaW5nPiBTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yZWFjaCh2YXIgYyBpbiBfYWxwaGFiZXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBnb29kQ2hvaWNlQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3dhcHBlcnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxjaGFyPihfYWxwaGFiZXQsbmV3W10geyBjIH0pLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgcGFydGl0aW9uIGluIEVudW1lcmF0ZVBhcnRpdGlvbnModywgc3dhcHBlcnMpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBnb29kQ2hvaWNlRXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNob2ljZSBpbiBBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuR2VuZXJhdGVTdWJsaXN0czxpbnQ+KEVudW1lcmFibGUuUmFuZ2UoMCwgcGFydGl0aW9uLkNvdW50KS5Ub0xpc3QoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hvaWNlLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3dyA9IE1ha2VNb3ZlKHcsIHBhcnRpdGlvbiwgY2hvaWNlLCBzd2FwcGVycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChTLkNvbnRhaW5zKHd3KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZENob2ljZUV4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnb29kQ2hvaWNlRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ29vZENob2ljZUFsd2F5c0V4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGdvb2RDaG9pY2VBbHdheXNFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIElFbnVtZXJhYmxlPExpc3Q8TGlzdDxpbnQ+Pj4gRW51bWVyYXRlUGFydGl0aW9ucyhzdHJpbmcgdywgTGlzdDxjaGFyPiBzd2FwcGVycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaGFycyA9IHcuVG9DaGFyQXJyYXkoKTtcclxuICAgICAgICAgICAgdmFyIGluZGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuSW5kaWNlc1doZXJlPGNoYXI+KGNoYXJzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGNoYXIsIGJvb2w+KShjID0+IHN3YXBwZXJzLkNvbnRhaW5zKGMpKSkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZGV4UGFydGl0aW9ucyA9IEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkNocm9uaWNsZS5CcmFuY2hHZW5lcmF0b3IuR2V0UGFydGl0aW9ucyhpbmRpY2VzLkNvdW50KTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGluZGV4UGFydGl0aW9uIGluIGluZGV4UGFydGl0aW9ucylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRpdGlvbiA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oaW5kZXhQYXJ0aXRpb24uQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGluZGV4UGFydCBpbiBpbmRleFBhcnRpdGlvbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KGluZGV4UGFydCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGkgPT4gaW5kaWNlc1tpXSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRpdGlvbi5BZGQocGFydCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHBhcnRpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RyaW5nIE1ha2VNb3ZlKHN0cmluZyB3LCBMaXN0PExpc3Q8aW50Pj4gcGFydGl0aW9uLCBMaXN0PGludD4gY2hvaWNlLCBMaXN0PGNoYXI+IHN3YXBwZXJzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNoYXJzID0gdy5Ub0NoYXJBcnJheSgpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaiBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8aW50LGludD4oY2hvaWNlLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+PikoaSA9PiBwYXJ0aXRpb25baV0pKSlcclxuICAgICAgICAgICAgICAgIGNoYXJzW2pdID0gc3dhcHBlcnNbMSAtIHN3YXBwZXJzLkluZGV4T2YoY2hhcnNbal0pXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgc3RyaW5nKGNoYXJzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Xb3JkR2FtZVxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEJveGlmaWNhdGlvblxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxUdXBsZTxMaXN0PExpc3Q8VD4+LCBMaXN0PExpc3Q8VD4+Pj4gU3BsaXQ8VD4oTGlzdDxMaXN0PFQ+PiBhbGxQb2ludHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2h1bmtzID0gbmV3IExpc3Q8VHVwbGU8TGlzdDxMaXN0PFQ+PiwgTGlzdDxMaXN0PFQ+Pj4+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcG9pbnRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihhbGxQb2ludHMpO1xyXG4gICAgICAgICAgICBpbnQgbiA9IGFsbFBvaW50c1swXS5Db3VudDtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChwb2ludHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgYmVzdFQgPSAxO1xyXG4gICAgICAgICAgICAgICAgaW50IGJlc3RTcGxpdCA9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgc3BsaXQgPSAxOyBzcGxpdCA8IG4gLSAxOyBzcGxpdCsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8VD4ocCxzcGxpdCkuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmlnaHQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihwb2ludHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KShwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2tpcDxUPihwLHNwbGl0KS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IEJpbmFyeSgxLCBwb2ludHMuQ291bnQgLSAxLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGkgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkRpc3RpbmN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4obGVmdCxpKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKChsMSwgbDIpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihsMSxsMikpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByaWdodHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHJpZ2h0LGkpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoKGwxLCBsMikgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KGwxLGwyKSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFuID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihsZWZ0cyxyaWdodHMpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikodHVwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29uY2F0PFQ+KHR1cC5JdGVtMSx0dXAuSXRlbTIpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbGxFeGlzdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oc3BhbiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQW55PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHBwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihwcCxwKSkpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWxsRXhpc3QgPyAxIDogLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpIC0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgPj0gYmVzdFQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodCA+IGJlc3RUIHx8IE1hdGguQWJzKG4vMiAtIHNwbGl0KSA8IE1hdGguQWJzKG4vMiAtIGJlc3RTcGxpdCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RUID0gdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RTcGxpdCA9IHNwbGl0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBsID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8VD4ocCxiZXN0U3BsaXQpLlRvTGlzdCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgciA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ta2lwPFQ+KHAsYmVzdFNwbGl0KS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihsLGJlc3RUKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKChsMSwgbDIpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihsMSxsMikpKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHIsYmVzdFQpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoKGwxLCBsMikgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KGwxLGwyKSkpKTtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihscyxycyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KSh0dXAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db25jYXQ8VD4odHVwLkl0ZW0xLHR1cC5JdGVtMikuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjaHVua3MuQWRkKG5ldyBUdXBsZTxMaXN0PExpc3Q8VD4+LCBMaXN0PExpc3Q8VD4+PihscywgcnMpKTtcclxuQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiggICAgICAgICAgICAgICAgcG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHBwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihwcCxwKSkpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KSgoeCkgPT4geyB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaHVua3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8TGlzdDxMaXN0PExpc3Q8VD4+Pj4gU3BsaXRNdWx0aXdheTxUPihMaXN0PExpc3Q8VD4+IGFsbFBvaW50cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjaHVua3MgPSBuZXcgTGlzdDxMaXN0PExpc3Q8TGlzdDxUPj4+PigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBvaW50cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oYWxsUG9pbnRzKTtcclxuICAgICAgICAgICAgaW50IG4gPSBhbGxQb2ludHNbMF0uQ291bnQ7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAocG9pbnRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IGJlc3RUID0gMTtcclxuICAgICAgICAgICAgICAgIExpc3Q8aW50PiBiZXN0U3BsaXQgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHNwbGl0IGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuRW51bWVyYXRlU3VibGlzdHM8aW50PihFbnVtZXJhYmxlLlJhbmdlKDAsIG4pLlRvTGlzdCgpKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShsID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxpbnQsaW50PihsLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoeCA9PiB4KSkuVG9MaXN0KCkpKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoRXh0cmFjdFJhbmdlczxUPihzcGxpdCwgcG9pbnRzWzBdKS5Db3VudCA8PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBCaW5hcnkoMSwgcG9pbnRzLkNvdW50IC0gMSwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShpID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmFuZ2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLGkpLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4pKHAgPT4gRXh0cmFjdFJhbmdlczxUPihzcGxpdCwgcCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhbmdlVmFsdWVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BZ2dyZWdhdGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+Pj4ocmFuZ2VzLEVudW1lcmFibGUuUmFuZ2UoMCwgcmFuZ2VzWzBdLkNvdW50KS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KShfXyA9PiBuZXcgTGlzdDxMaXN0PFQ+PigpKSkuVG9MaXN0KCksXHJcbihnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+PikoICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1bmlvbiwgbmV4dCkgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5aaXA8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+Pih1bmlvbixuZXh0LCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4pKChBLCBCKSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5EaXN0aW5jdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5Db25jYXQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihBLEIpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikoKGwxLCBsMikgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KGwxLGwyKSkpKSkpLlRvTGlzdCgpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3AgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocmFuZ2VWYWx1ZXMpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KShsbCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KGxsKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BhbiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oY3AsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKGxsID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sVD4obGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+PikocHAgPT4gcHApKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxsRXhpc3QgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFsbDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHNwYW4sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KShwcCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8VD4ocHAscCkpKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFsbEV4aXN0ID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKSAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ID4gYmVzdFQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0VCA9IHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RTcGxpdCA9IHNwbGl0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcnIgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihwb2ludHMsYmVzdFQpLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pj4pKHAgPT4gRXh0cmFjdFJhbmdlczxUPihiZXN0U3BsaXQsIHApKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnJ2ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BZ2dyZWdhdGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+Pj4ocnIsRW51bWVyYWJsZS5SYW5nZSgwLCByclswXS5Db3VudCkuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PikoX18gPT4gbmV3IExpc3Q8TGlzdDxUPj4oKSkpLlRvTGlzdCgpLFxyXG4oZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+Pj4pKCAgICAgICAgICAgICAgICAgICAgKHVuaW9uLCBuZXh0KSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlppcDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KHVuaW9uLG5leHQsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PikoKEEsIEIpID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkRpc3RpbmN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNvbmNhdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEEsQiksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGJvb2w+KSgobDEsIGwyKSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8VD4obDEsbDIpKSkpKSkuVG9MaXN0KCkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocnJ2KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKGxsID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sVD4obGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFQ+PikocHAgPT4gcHApKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNodW5rcy5BZGQocnJ2KTtcclxuQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiggICAgICAgICAgICAgICAgcG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHBwID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxUPihwcCxwKSkpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KSgoeCkgPT4geyB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaHVua3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgTGlzdDxMaXN0PFQ+PiBFeHRyYWN0UmFuZ2VzPFQ+KExpc3Q8aW50PiBzdG9wcywgTGlzdDxUPiBsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHJhbmdlcyA9IG5ldyBMaXN0PExpc3Q8VD4+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGVmdCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzdG9wIGluIHN0b3BzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByYW5nZXMuQWRkKGwuR2V0UmFuZ2UobGVmdCwgc3RvcCAtIGxlZnQgKyAxKSk7XHJcbiAgICAgICAgICAgICAgICBsZWZ0ID0gc3RvcCArIDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsZWZ0IDwgbC5Db3VudClcclxuICAgICAgICAgICAgICAgIHJhbmdlcy5BZGQobC5HZXRSYW5nZShsZWZ0LCBsLkNvdW50IC0gbGVmdCkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJhbmdlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PExpc3Q8VD4+PiBCb3hpZnk8VD4oTGlzdDxMaXN0PFQ+PiBwb2ludHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYm94ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KHBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+PikocCA9PiBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkVuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHApKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYm94Q29udGFpbmVycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+Pj4oQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+KGJveGVzLGJveGVzKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4+LCBib29sPikocGFpciA9PiAhU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocGFpci5JdGVtMSxwYWlyLkl0ZW0yKSkpLlNlbGVjdChwYWlyID0+IG5ldyB7IFBhaXIgPSBwYWlyLCBCb3hlZFVuaW9uID0gQm94Q29udGFpbmVyPFQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ29uY2F0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocGFpci5JdGVtMSxwYWlyLkl0ZW0yKS5Ub0xpc3QoKSkgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3duID0gYm94Q29udGFpbmVycy5GaXJzdE9yRGVmYXVsdChiYyA9PiBDb250YWluc0JveENvbnRhaW5lcjxUPihwb2ludHMsIGJjLkJveGVkVW5pb24pKTtcclxuICAgICAgICAgICAgICAgIGlmIChncm93biA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IGJveGVzLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgYm94ZXMuUmVtb3ZlKGdyb3duLlBhaXIuSXRlbTEpO1xyXG4gICAgICAgICAgICAgICAgYm94ZXMuUmVtb3ZlKGdyb3duLlBhaXIuSXRlbTIpO1xyXG4gICAgICAgICAgICAgICAgYm94ZXMuQWRkKGdyb3duLkJveGVkVW5pb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChib3hlcy5Db3VudCA9PSBjb3VudClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJveGVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PExpc3Q8TGlzdDxUPj4+IFByZWZpeEJveGlmeTxUPihMaXN0PExpc3Q8VD4+IHBvaW50cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cyk7XHJcbiAgICAgICAgICAgIHZhciBib3hlcyA9IG5ldyBMaXN0PExpc3Q8TGlzdDxUPj4+KCk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSBCaW5hcnkoMSwgcG9pbnRzLkNvdW50IC0gMSwgKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KShpID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ29udGFpbnNCb3g8VD4oYWxsUG9pbnRzLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRha2U8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Pihwb2ludHMsaSkuVG9MaXN0KCkpID8gMSA6IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgICAgICBib3hlcy5BZGQoQm94Q29udGFpbmVyPFQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KHBvaW50cyx0KS5Ub0xpc3QoKSkpO1xyXG4gICAgICAgICAgICAgICAgcG9pbnRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ta2lwPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4ocG9pbnRzLHQpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvaW50cy5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYm94ZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgQ29udGFpbnNCb3g8VD4oTGlzdDxMaXN0PFQ+PiBhbGxQb2ludHMsIExpc3Q8TGlzdDxUPj4gcG9pbnRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJveCA9IEJveENvbnRhaW5lcjxUPihwb2ludHMpO1xyXG4gICAgICAgICAgICByZXR1cm4gQ29udGFpbnNCb3hDb250YWluZXI8VD4oYWxsUG9pbnRzLCBib3gpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJvb2wgQ29udGFpbnNCb3hDb250YWluZXI8VD4oTGlzdDxMaXN0PFQ+PiBhbGxQb2ludHMsIExpc3Q8TGlzdDxUPj4gYm94Q29udGFpbmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4oYm94Q29udGFpbmVyLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgYm9vbD4pKHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PihhbGxQb2ludHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LCBib29sPikocHAgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZXF1ZW5jZUVxdWFsPFQ+KHBwLHApKSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxMaXN0PFQ+PiBCb3hDb250YWluZXI8VD4oTGlzdDxMaXN0PFQ+PiBwb2ludHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPixnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PFQ+KEVudW1lcmFibGUuUmFuZ2UoMCwgcG9pbnRzWzBdLkNvdW50KS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPj4pKGkgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+LFQ+KHBvaW50cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sIFQ+KShwID0+IHBbaV0pKS5EaXN0aW5jdCgpLlRvTGlzdCgpKSlcclxuKVxyXG4sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUPiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+PikoZSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxUPihlKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNCb3g8VD4oTGlzdDxMaXN0PFQ+PiBwb2ludHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gcG9pbnRzLkNvdW50ID09IEJveENvbnRhaW5lcjxUPihwb2ludHMpLkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9Cb3hTdHJpbmc8VD4oTGlzdDxMaXN0PFQ+PiBwb2ludHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLkpvaW4oXCIgKiBcIiwgRW51bWVyYWJsZS5SYW5nZSgwLCBwb2ludHNbMF0uQ291bnQpLlNlbGVjdDxzdHJpbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgc3RyaW5nPikoaSA9PiBcIntcIiArIHN0cmluZy5Kb2luPFQ+KFwiLFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sVD4ocG9pbnRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgVD4pKHAgPT4gcFtpXSkpLkRpc3RpbmN0KCkpICsgXCJ9XCIpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb011bHRpQ2h1bmtTdHJpbmc8VD4oTGlzdDxMaXN0PExpc3Q8VD4+PiBtdWx0aUNodW5rKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwiICogXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4+LHN0cmluZz4obXVsdGlDaHVuaywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PFQ+Piwgc3RyaW5nPikoY2h1bmsgPT4gVG9MaXN0T2ZMaXN0c1N0cmluZzxUPihjaHVuaykpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0cmluZyBUb0NodW5rU3RyaW5nPFQ+KFR1cGxlPExpc3Q8TGlzdDxUPj4sIExpc3Q8TGlzdDxUPj4+IGNodW5rKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRvTGlzdE9mTGlzdHNTdHJpbmc8VD4oY2h1bmsuSXRlbTEpICsgXCIgKiBcIiArIFRvTGlzdE9mTGlzdHNTdHJpbmc8VD4oY2h1bmsuSXRlbTIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHN0cmluZyBUb0xpc3RPZkxpc3RzU3RyaW5nPFQ+KExpc3Q8TGlzdDxUPj4gbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIntcIiArIHN0cmluZy5Kb2luKFwiLFwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8VD4sc3RyaW5nPihsLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxUPiwgc3RyaW5nPikoc2wgPT4gXCJ7XCIgKyBzdHJpbmcuSm9pbjxUPihcIixcIiwgc2wpICsgXCJ9XCIpKSkgKyBcIn1cIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBpbnQgQmluYXJ5KGludCBmaXJzdCwgaW50IGxhc3QsIEZ1bmM8aW50LCBpbnQ+IHRhcmdldERpcmVjdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gZmlyc3QgLSAxO1xyXG4gICAgICAgICAgICB2YXIgcmlnaHQgPSBsYXN0ICsgMTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChyaWdodCAtIGxlZnQgPj0gMilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IG1pZGRsZSA9IGxlZnQgKyAocmlnaHQgLSBsZWZ0KSAvIDI7XHJcbiAgICAgICAgICAgICAgICBpbnQgZGlyZWN0aW9uID0gdGFyZ2V0RGlyZWN0aW9uKG1pZGRsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtaWRkbGU7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gbWlkZGxlO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSBtaWRkbGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsZWZ0IDwgZmlyc3QpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlyc3QgLSAxO1xyXG4gICAgICAgICAgICBpZiAocmlnaHQgPiBsYXN0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhc3QgKyAxO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxlZnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEZhc3RBY2Nlc3NpYmlsaXR5Q2hlY2tlclxyXG4gICAge1xyXG4gICAgICAgIHVsb25nW10gX2ZpeGVyUmVzcG9uc2VzO1xyXG4gICAgICAgIGludCBfZml4ZXJSZXNwb25zZUNvdW50O1xyXG4gICAgICAgIERpY3Rpb25hcnk8dWxvbmcsIExpc3Q8TGlzdDx1bG9uZz4+PiBfYnJlYWtlckNob2ljZXNDYWNoZSA9IG5ldyBEaWN0aW9uYXJ5PHVsb25nLCBMaXN0PExpc3Q8dWxvbmc+Pj4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIEZhc3RBY2Nlc3NpYmlsaXR5Q2hlY2tlcihpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9maXhlclJlc3BvbnNlcyA9IG5ldyB1bG9uZ1sxIDw8ICgobiArIDEpID4+IDEpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQWNjZXNzaWJsZShGYXN0V29yZCBib2FyZCwgSGFzaFNldDxGYXN0V29yZD4gd29uQm9hcmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBib2FyZC5fbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IGJvYXJkLl9sZW5ndGg7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGJvYXJkLl90cmFjZVtpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IGJvYXJkLl90cmFjZVtqXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3dhcHBhYmxlID0geCBeIHk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwQWx3YXlzRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYnJlYWtlckNob2ljZSBpbiBHZXRCcmVha2VyQ2hvaWNlcyhzd2FwcGFibGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwRXhpc3RzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBHZXRGaXhlclJlc3BvbnNlcyhicmVha2VyQ2hvaWNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgayA9IDE7IGsgPCBfZml4ZXJSZXNwb25zZUNvdW50OyBrKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZEJvYXJkID0gbmV3IEZhc3RXb3JkKGJvYXJkLl90cmFjZSwgaSwgaiwgX2ZpeGVyUmVzcG9uc2VzW2tdLCBib2FyZC5fc3RhY2tDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod29uQm9hcmRzLkNvbnRhaW5zKGNoaWxkQm9hcmQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2FwRXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3aW5uaW5nU3dhcEV4aXN0cylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lubmluZ1N3YXBBbHdheXNFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAod2lubmluZ1N3YXBBbHdheXNFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEdldEZpeGVyUmVzcG9uc2VzKExpc3Q8dWxvbmc+IHBvc3NpYmxlTW92ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZml4ZXJSZXNwb25zZUNvdW50ID0gMSA8PCBwb3NzaWJsZU1vdmVzLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgdmFyIHN1YnNldCA9IDE7XHJcbiAgICAgICAgICAgIHdoaWxlIChzdWJzZXQgPCBfZml4ZXJSZXNwb25zZUNvdW50KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSAwVUw7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IHN1YnNldDtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlIHw9IHBvc3NpYmxlTW92ZXNbSW50MzJVc2FnZS5HZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIHgpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBfZml4ZXJSZXNwb25zZXNbc3Vic2V0XSA9IHJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgc3Vic2V0Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgTGlzdDxMaXN0PHVsb25nPj4gR2V0QnJlYWtlckNob2ljZXModWxvbmcgc3dhcHBhYmxlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGlzdDxMaXN0PHVsb25nPj4gY2hvaWNlcztcclxuICAgICAgICAgICAgaWYgKCFfYnJlYWtlckNob2ljZXNDYWNoZS5UcnlHZXRWYWx1ZShzd2FwcGFibGUsIG91dCBjaG9pY2VzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpdHMgPSBzd2FwcGFibGUuR2V0Qml0cygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRpdGlvbnMgPSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5DaHJvbmljbGUuQnJhbmNoR2VuZXJhdG9yLkdldFBhcnRpdGlvbnMoYml0cy5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICBjaG9pY2VzID0gbmV3IExpc3Q8TGlzdDx1bG9uZz4+KHBhcnRpdGlvbnMuQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcGFydGl0aW9uIGluIHBhcnRpdGlvbnMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNob2ljZSA9IG5ldyBMaXN0PHVsb25nPihwYXJ0aXRpb24uQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNob2ljZXMuQWRkKGNob2ljZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYXJ0IGluIHBhcnRpdGlvbilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gMFVMO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiBwYXJ0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeCB8PSBiaXRzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlLkFkZCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgX2JyZWFrZXJDaG9pY2VzQ2FjaGVbc3dhcHBhYmxlXSA9IGNob2ljZXM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaG9pY2VzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLldvcmRHYW1lXHJcbntcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBUYXJwaXRFbnVtZXJhdG9yXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkb25seSBMaXN0PGNoYXI+IEFscGhhYmV0ID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGNoYXI+KCksKF9vMjMpPT57X28yMy5BZGQoJ3gnKTtfbzIzLkFkZCgneScpO19vMjMuQWRkKCd6Jyk7cmV0dXJuIF9vMjM7fSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc1Blcm11dGF0aW9uQ2xvc2VkKExpc3Q8c3RyaW5nPiBTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxzdHJpbmc+LHN0cmluZz4oRW51bWVyYXRlQWxwaGFiZXRQZXJtdXRhdGlvbnMoUyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PHN0cmluZz4sIHN0cmluZz4pKFQgPT4gc3RyaW5nLkpvaW4oXCIsXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxzdHJpbmcsc3RyaW5nPihULChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgc3RyaW5nPikocyA9PiBzKSkpKSkuRGlzdGluY3QoKS5Db3VudCgpID09IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8c3RyaW5nPiBSZW1vdmVQZXJtdXRhdGlvblJlZHVuZGFuY2llcyhMaXN0PHN0cmluZz4gUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBoYXNoID0gbmV3IEhhc2hTZXQ8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICB2YXIgcGVybXV0ZWRMaXN0cyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxzdHJpbmc+PihFbnVtZXJhdGVBbHBoYWJldFBlcm11dGF0aW9ucyhTKSk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgUy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBoYXNoLkFkZChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8c3RyaW5nPixzdHJpbmc+KHBlcm11dGVkTGlzdHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PHN0cmluZz4sIHN0cmluZz4pKGwgPT4gbFtpXSkpLk9yZGVyQnk8c3RyaW5nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIHN0cmluZz4pKHMgPT4gcykpLkZpcnN0KCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8c3RyaW5nPihoYXNoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxzdHJpbmc+IFJlb3JkZXJBbHBoYWJldEJ5T2NjdXJlbmNlUmF0ZShMaXN0PHN0cmluZz4gUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxzdHJpbmcsc3RyaW5nPihTLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgc3RyaW5nPikocyA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hhcnMgPSBzLlRvQ2hhckFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IEFscGhhYmV0LlNlbGVjdChjID0+IG5ldyB7IEMgPSBjLCBSYXRlID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxjaGFyPihjaGFycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxjaGFyLCBib29sPikoY2MgPT4gY2MgPT0gYykpIH0pLk9yZGVyQnlEZXNjZW5kaW5nPGludD4oZCA9PiBkLlJhdGUpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzLlJlcGxhY2UocFswXS5DLCAnWCcpLlJlcGxhY2UocFsxXS5DLCAnWScpLlJlcGxhY2UocFsyXS5DLCAnWicpLlRvTG93ZXIoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9KSkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPExpc3Q8c3RyaW5nPj4gRW51bWVyYXRlQWxwaGFiZXRQZXJtdXRhdGlvbnMoTGlzdDxzdHJpbmc+IFMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdXBwZXJlZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxzdHJpbmc+KFMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBzdHJpbmc+KShzID0+IHMuVG9VcHBlcigpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwZXJtdXRhdGlvbiBpbiBQZXJtdXRhdGlvbi5FbnVtZXJhdGVBbGwoMykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gcGVybXV0YXRpb24uQXBwbHk8Y2hhcj4oQWxwaGFiZXQpO1xyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxzdHJpbmc+KHVwcGVyZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBzdHJpbmc+KShzID0+IHMuUmVwbGFjZSgnWCcsIHBbMF0pLlJlcGxhY2UoJ1knLCBwWzFdKS5SZXBsYWNlKCdaJywgcFsyXSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFic3RyYWN0IElFbnVtZXJhYmxlPExpc3Q8c3RyaW5nPj4gRW51bWVyYXRlTWluaW1hbFRhcnBpdHMoKTtcclxuICAgICAgICBwdWJsaWMgdmlydHVhbCB2b2lkIEdlbmVyYXRlTWluaW1hbFRhcnBpdHMoQWN0aW9uPExpc3Q8c3RyaW5nPj4gZm91bmRUYXJwaXQpIHsgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWRcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEZhc3RXb3JkXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHVsb25nW10gX3RyYWNlO1xyXG4gICAgICAgIHB1YmxpYyBpbnQgX2xlbmd0aDtcclxuICAgICAgICBwdWJsaWMgaW50IF9zdGFja0NvdW50O1xyXG4gICAgICAgIGludCBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBGYXN0V29yZCh1bG9uZ1tdIHRyYWNlLCBpbnQgc3RhY2tDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF90cmFjZSA9IHRyYWNlO1xyXG4gICAgICAgICAgICBfbGVuZ3RoID0gX3RyYWNlLkxlbmd0aDtcclxuICAgICAgICAgICAgX3N0YWNrQ291bnQgPSBzdGFja0NvdW50O1xyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSBIYXNoaW5nLkhhc2goX3RyYWNlLCBfbGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBGYXN0V29yZCh1bG9uZ1tdIHRyYWNlLCBpbnQgaSwgaW50IGosIHVsb25nIHN3YXAsIGludCBzdGFja0NvdW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3RyYWNlID0gbmV3IHVsb25nW3RyYWNlLkxlbmd0aF07XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBrID0gMDsgayA8IHRyYWNlLkxlbmd0aDsgaysrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1bG9uZyB2ID0gMDtcclxuICAgICAgICAgICAgICAgIGlmIChrID09IGkgfHwgayA9PSBqKVxyXG4gICAgICAgICAgICAgICAgICAgIHYgPSB0cmFjZVtrXSBeIHN3YXA7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IHRyYWNlW2tdO1xyXG5cclxuICAgICAgICAgICAgICAgIGludCBxID0gX2xlbmd0aDtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChxID4gMCAmJiBfdHJhY2VbcSAtIDFdID4gdilcclxuICAgICAgICAgICAgICAgICAgICBxLS07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHEgPCBfbGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5LkNvcHkoX3RyYWNlLCBxIDw8IDMsIF90cmFjZSwgKHEgKyAxKSA8PCAzLCAoX2xlbmd0aCAtIHEpIDw8IDMpO1xyXG4gICAgICAgICAgICAgICAgX3RyYWNlW3FdID0gdjtcclxuXHJcbiAgICAgICAgICAgICAgICBfbGVuZ3RoKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF9zdGFja0NvdW50ID0gc3RhY2tDb3VudDtcclxuICAgICAgICAgICAgX2hhc2hDb2RlID0gSGFzaGluZy5IYXNoKF90cmFjZSwgX2xlbmd0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFcXVhbHMob2JqIGFzIEZhc3RXb3JkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEVxdWFscyhGYXN0V29yZCBvdGhlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChvdGhlciA9PSBudWxsIHx8IF9sZW5ndGggIT0gb3RoZXIuX2xlbmd0aClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgaWYgKF90cmFjZVtpXSAhPSBvdGhlci5fdHJhY2VbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEJpdExldmVsR2VuZXJhdGlvbjtcclxudXNpbmcgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXI7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRmFzdFdvcmRHZW5lcmF0b3JcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgTGlzdDxGYXN0V29yZD4gR2VuZXJhdGVXb3JkcyhpbnQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHdvcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmdbXSxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihUaGVFbnVtZXJhdGlvbk1hY2hpbmUuRW51bWVyYXRlKEVudW1lcmFibGUuUmVwZWF0PGludD4oMSwgbGVuZ3RoKSwgMyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8dWxvbmdbXSwgZ2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4pKHRyYWNlID0+IG5ldyBGYXN0V29yZCh0cmFjZSwgbGVuZ3RoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gd29yZHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGNsYXNzIFRoZUVudW1lcmF0aW9uTWFjaGluZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTx1bG9uZ1tdPiBFbnVtZXJhdGUoSUVudW1lcmFibGU8aW50PiBzaXplcywgaW50IHBvdFNpemUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzaXplc0NvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHNpemVzKTtcclxuICAgICAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc191bG9uZy5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBuZXcgdWxvbmdbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSBuZXcgTGlzdDx1bG9uZz5bcG90U2l6ZV07XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdFNpemU7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc191bG9uZy5Ub0JpdFZlY3RvcihFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KHBvdFNpemUgLSAxIC0gaSwgc2l6ZXNDb3VudCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHVsb25nIGMgPSBzaXplVmVjdG9yLkdyZWF0ZXJUaGFuKHJbMF0pO1xyXG4gICAgICAgICAgICAgICAgdWxvbmcgZGMgPSAodWxvbmcpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGUoc2l6ZVZlY3RvciwgYXNzaWdubWVudCwgciwgMCwgMCwgYywgZGMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8dWxvbmdbXT4gRW51bWVyYXRlKExpc3Q8dWxvbmc+IHNpemVzLCB1bG9uZ1tdIGFzc2lnbm1lbnQsIExpc3Q8dWxvbmc+W10gciwgaW50IGksIHVsb25nIGxhc3QsIHVsb25nIGNhcmUsIHVsb25nIGRvbnRDYXJlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1bG9uZyB4O1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBnID0gKHVsb25nKShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHEgPSAodWxvbmcpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGcgPiBxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodWxvbmcpKChjYXJlICYgZikgfCAobGFzdCAmIH5mKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IHEuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9ICh1bG9uZykofmYgJiBsYXN0KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9ICh1bG9uZykoZG9udENhcmUgJiB+ZiAmIH50KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkyID0gKHVsb25nKShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB4ID0gbGFzdDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gKHVsb25nKShjYXJlIHwgZG9udENhcmUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gYXNzaWdubWVudC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgdWxvbmdbYXNzaWdubWVudC5MZW5ndGhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIGFzc2lnbm1lbnRDb3B5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemVzLkRlY3JlbWVudCh4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzaXplcy5HcmVhdGVyVGhhbihyW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiB6KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAodWxvbmcpKH4oYyB8IHopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBhIGluIEVudW1lcmF0ZShzaXplcywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZXMuSW5jcmVtZW50KHgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxudXNpbmcgQWxnb3JpdGhtcztcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuV29yZEdhbWVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFdvcmRFbnVtZXJhdG9yXHJcbiAgICB7XHJcbiAgICAgICAgTGlzdDxjaGFyPiBfYWxwaGFiZXQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBXb3JkRW51bWVyYXRvcihwYXJhbXMgY2hhcltdIGFscGhhYmV0KSA6IHRoaXMoKChJRW51bWVyYWJsZTxjaGFyPilhbHBoYWJldCkpIHsgfVxyXG4gICAgICAgIHB1YmxpYyBXb3JkRW51bWVyYXRvcihJRW51bWVyYWJsZTxjaGFyPiBhbHBoYWJldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9hbHBoYWJldCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGNoYXI+KGFscGhhYmV0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxzdHJpbmc+IEVudW1lcmF0ZVdvcmRzKGludCBsZW5ndGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxjaGFyPixzdHJpbmc+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGNoYXI+KEVudW1lcmFibGUuUmVwZWF0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxjaGFyPj4oX2FscGhhYmV0LCBsZW5ndGgpKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGNoYXI+LCBzdHJpbmc+KShjaGFycyA9PiBuZXcgc3RyaW5nKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9BcnJheTxjaGFyPihjaGFycykpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIlxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEFzc2lnbm1lbnRzX3Vsb25nXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PHVsb25nW10+IEdlbmVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplLCBpbnQgY291bnRFc3RpbWF0ZSA9IDIwNDgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc191bG9uZy5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudHMgPSBuZXcgTGlzdDx1bG9uZ1tdPihjb3VudEVzdGltYXRlKTtcclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBuZXcgdWxvbmdbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PHVsb25nPltwb3RTaXplXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3RTaXplOyBpKyspXHJcbiAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc191bG9uZy5Ub0JpdFZlY3RvcihFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KHBvdFNpemUgLSAxIC0gaSwgc2l6ZXNDb3VudCkpO1xyXG5cclxuICAgICAgICAgICAgdWxvbmcgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgIHVsb25nIGRjID0gKHVsb25nKSh+KGMgfCBzaXplVmVjdG9yLlplcm9lcygpKSk7XHJcbiAgICAgICAgICAgIEdlbmVyYXRlKHNpemVWZWN0b3IsIGFzc2lnbm1lbnRzLCBhc3NpZ25tZW50LCByLCAwLCAxLCBjLCBkYyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYXNzaWdubWVudHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBHZW5lcmF0ZShMaXN0PHVsb25nPiBzaXplcywgTGlzdDx1bG9uZ1tdPiBhc3NpZ25tZW50cywgdWxvbmdbXSBhc3NpZ25tZW50LCBMaXN0PHVsb25nPltdIHIsIGludCBpLCB1bG9uZyBsYXN0LCB1bG9uZyBjYXJlLCB1bG9uZyBkb250Q2FyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIHg7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9ICh1bG9uZykoY2FyZSAmIH5sYXN0KTtcclxuICAgICAgICAgICAgdmFyIHEgPSAodWxvbmcpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKGNhcmUgJiBmKSB8IChsYXN0ICYgfmYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBxLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9ICh1bG9uZykofmYgJiBsYXN0KTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gKHVsb25nKShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKHVsb25nKShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoY2FyZSAmIChmID4+IDEpKSB8ICh0ICYgfnkyKSB8ICh5ICYgKDAgLSB5KSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeCA9IGxhc3Q7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlbmQgPSAodWxvbmcpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyB1bG9uZ1thc3NpZ25tZW50Lkxlbmd0aF07XHJcblx0XHRcdFx0XHRBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRzLkFkZChhc3NpZ25tZW50Q29weSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodWxvbmcpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkRlY3JlbWVudCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHNpemVzLkdyZWF0ZXJUaGFuKHJbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IHNpemVzLlplcm9lcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiB6KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRjID0gKHVsb25nKSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdlbmVyYXRlKHNpemVzLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTx1bG9uZ1tdPiBFbnVtZXJhdGUoSUVudW1lcmFibGU8aW50PiBzaXplcywgaW50IHBvdFNpemUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc191bG9uZy5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyB1bG9uZ1twb3RTaXplXTtcclxuXHJcbiAgICAgICAgICAgIHZhciByID0gbmV3IExpc3Q8dWxvbmc+W3BvdFNpemVdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdFNpemU7IGkrKylcclxuICAgICAgICAgICAgICAgIHJbaV0gPSBCaXRWZWN0b3JzX3Vsb25nLlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICB1bG9uZyBjID0gc2l6ZVZlY3Rvci5HcmVhdGVyVGhhbihyWzBdKTtcclxuICAgICAgICAgICAgdWxvbmcgZGMgPSAodWxvbmcpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50LCByLCAwLCAxLCBjLCBkYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8dWxvbmdbXT4gRW51bWVyYXRlKExpc3Q8dWxvbmc+IHNpemVzLCB1bG9uZ1tdIGFzc2lnbm1lbnQsIExpc3Q8dWxvbmc+W10gciwgaW50IGksIHVsb25nIGxhc3QsIHVsb25nIGNhcmUsIHVsb25nIGRvbnRDYXJlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgeDtcclxuXHJcbiAgICAgICAgICAgIHZhciBnID0gKHVsb25nKShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9ICh1bG9uZykofmNhcmUgJiB+ZG9udENhcmUgJiBsYXN0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChnID4gcSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBnLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB4ID0gKHVsb25nKSgoY2FyZSAmIGYpIHwgKGxhc3QgJiB+ZikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHEgPiBnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHEuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gKHVsb25nKSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAodWxvbmcpKGRvbnRDYXJlICYgfmYgJiB+dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB5MiA9ICh1bG9uZykoZG9udENhcmUgJiB0ICYgKHkgfCAoeSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKHVsb25nKShjYXJlIHwgZG9udENhcmUpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBhc3NpZ25tZW50Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgdWxvbmdbYXNzaWdubWVudC5MZW5ndGhdO1xyXG5cdFx0XHRcdFx0QXJyYXkuQ29weShhc3NpZ25tZW50LCBhc3NpZ25tZW50Q29weSwgYXNzaWdubWVudENvcHkuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuXHRcdFx0XHRcdHlpZWxkIHJldHVybiBhc3NpZ25tZW50Q29weTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1bG9uZykoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAodWxvbmcpKH4oYyB8IHopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgYSBpbiBFbnVtZXJhdGUoc2l6ZXMsIGFzc2lnbm1lbnQsIHIsIGkgKyAxLCB4LCBjLCBkYykpXHJcblx0XHRcdFx0XHRcdFx0eWllbGQgcmV0dXJuIGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5JbmNyZW1lbnQoeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodWxvbmcpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEFzc2lnbm1lbnRzX2xvbmdcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8bG9uZ1tdPiBHZW5lcmF0ZShJRW51bWVyYWJsZTxpbnQ+IHNpemVzLCBpbnQgcG90U2l6ZSwgaW50IGNvdW50RXN0aW1hdGUgPSAyMDQ4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNpemVzQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oc2l6ZXMpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZVZlY3RvciA9IEJpdFZlY3RvcnNfbG9uZy5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudHMgPSBuZXcgTGlzdDxsb25nW10+KGNvdW50RXN0aW1hdGUpO1xyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyBsb25nW3BvdFNpemVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgTGlzdDxsb25nPltwb3RTaXplXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3RTaXplOyBpKyspXHJcbiAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc19sb25nLlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICBsb25nIGMgPSBzaXplVmVjdG9yLkdyZWF0ZXJUaGFuKHJbMF0pO1xyXG4gICAgICAgICAgICBsb25nIGRjID0gKGxvbmcpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgR2VuZXJhdGUoc2l6ZVZlY3RvciwgYXNzaWdubWVudHMsIGFzc2lnbm1lbnQsIHIsIDAsIDEsIGMsIGRjKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhc3NpZ25tZW50cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIEdlbmVyYXRlKExpc3Q8bG9uZz4gc2l6ZXMsIExpc3Q8bG9uZ1tdPiBhc3NpZ25tZW50cywgbG9uZ1tdIGFzc2lnbm1lbnQsIExpc3Q8bG9uZz5bXSByLCBpbnQgaSwgbG9uZyBsYXN0LCBsb25nIGNhcmUsIGxvbmcgZG9udENhcmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIHg7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9IChsb25nKShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9IChsb25nKSh+Y2FyZSAmIH5kb250Q2FyZSAmIGxhc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGcgPiBxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGcuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHggPSAobG9uZykoKGNhcmUgJiBmKSB8IChsYXN0ICYgfmYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBxLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IChsb25nKSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAobG9uZykoZG9udENhcmUgJiB+ZiAmIH50KTtcclxuICAgICAgICAgICAgICAgIGlmICh5ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB5MiA9IChsb25nKShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4ID0gKGxvbmcpKChjYXJlICYgKGYgPj4gMSkpIHwgKHQgJiB+eTIpIHwgKHkgJiAoMCAtIHkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4ID0gbGFzdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVuZCA9IChsb25nKShjYXJlIHwgZG9udENhcmUpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBhc3NpZ25tZW50Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgbG9uZ1thc3NpZ25tZW50Lkxlbmd0aF07XHJcblx0XHRcdFx0XHRBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRzLkFkZChhc3NpZ25tZW50Q29weSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAobG9uZykoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAobG9uZykofihjIHwgeikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHZW5lcmF0ZShzaXplcywgYXNzaWdubWVudHMsIGFzc2lnbm1lbnQsIHIsIGkgKyAxLCB4LCBjLCBkYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5JbmNyZW1lbnQoeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAobG9uZykoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxsb25nW10+IEVudW1lcmF0ZShJRW51bWVyYWJsZTxpbnQ+IHNpemVzLCBpbnQgcG90U2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaXplc0NvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHNpemVzKTtcclxuICAgICAgICAgICAgdmFyIHNpemVWZWN0b3IgPSBCaXRWZWN0b3JzX2xvbmcuVG9CaXRWZWN0b3Ioc2l6ZXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnQgPSBuZXcgbG9uZ1twb3RTaXplXTtcclxuXHJcbiAgICAgICAgICAgIHZhciByID0gbmV3IExpc3Q8bG9uZz5bcG90U2l6ZV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90U2l6ZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcltpXSA9IEJpdFZlY3RvcnNfbG9uZy5Ub0JpdFZlY3RvcihFbnVtZXJhYmxlLlJlcGVhdDxpbnQ+KHBvdFNpemUgLSAxIC0gaSwgc2l6ZXNDb3VudCkpO1xyXG5cclxuICAgICAgICAgICAgbG9uZyBjID0gc2l6ZVZlY3Rvci5HcmVhdGVyVGhhbihyWzBdKTtcclxuICAgICAgICAgICAgbG9uZyBkYyA9IChsb25nKSh+KGMgfCBzaXplVmVjdG9yLlplcm9lcygpKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhdGUoc2l6ZVZlY3RvciwgYXNzaWdubWVudCwgciwgMCwgMSwgYywgZGMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPGxvbmdbXT4gRW51bWVyYXRlKExpc3Q8bG9uZz4gc2l6ZXMsIGxvbmdbXSBhc3NpZ25tZW50LCBMaXN0PGxvbmc+W10gciwgaW50IGksIGxvbmcgbGFzdCwgbG9uZyBjYXJlLCBsb25nIGRvbnRDYXJlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyB4O1xyXG5cclxuICAgICAgICAgICAgdmFyIGcgPSAobG9uZykoY2FyZSAmIH5sYXN0KTtcclxuICAgICAgICAgICAgdmFyIHEgPSAobG9uZykofmNhcmUgJiB+ZG9udENhcmUgJiBsYXN0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChnID4gcSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBnLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB4ID0gKGxvbmcpKChjYXJlICYgZikgfCAobGFzdCAmIH5mKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocSA+IGcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gcS5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSAobG9uZykofmYgJiBsYXN0KTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gKGxvbmcpKGRvbnRDYXJlICYgfmYgJiB+dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB5MiA9IChsb25nKShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4ID0gKGxvbmcpKChjYXJlICYgKGYgPj4gMSkpIHwgKHQgJiB+eTIpIHwgKHkgJiAoMCAtIHkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4ID0gbGFzdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVuZCA9IChsb25nKShjYXJlIHwgZG9udENhcmUpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBhc3NpZ25tZW50Lkxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWdubWVudENvcHkgPSBuZXcgbG9uZ1thc3NpZ25tZW50Lkxlbmd0aF07XHJcblx0XHRcdFx0XHRBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdFx0eWllbGQgcmV0dXJuIGFzc2lnbm1lbnRDb3B5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKGxvbmcpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkRlY3JlbWVudCh4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHNpemVzLkdyZWF0ZXJUaGFuKHJbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IHNpemVzLlplcm9lcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGMgJiB6KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRjID0gKGxvbmcpKH4oYyB8IHopKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCh2YXIgYSBpbiBFbnVtZXJhdGUoc2l6ZXMsIGFzc2lnbm1lbnQsIHIsIGkgKyAxLCB4LCBjLCBkYykpXHJcblx0XHRcdFx0XHRcdFx0eWllbGQgcmV0dXJuIGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5JbmNyZW1lbnQoeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAobG9uZykoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQXNzaWdubWVudHNfdWludFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDx1aW50W10+IEdlbmVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplLCBpbnQgY291bnRFc3RpbWF0ZSA9IDIwNDgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc191aW50LlRvQml0VmVjdG9yKHNpemVzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50cyA9IG5ldyBMaXN0PHVpbnRbXT4oY291bnRFc3RpbWF0ZSk7XHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50ID0gbmV3IHVpbnRbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PHVpbnQ+W3BvdFNpemVdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdFNpemU7IGkrKylcclxuICAgICAgICAgICAgICAgIHJbaV0gPSBCaXRWZWN0b3JzX3VpbnQuVG9CaXRWZWN0b3IoRW51bWVyYWJsZS5SZXBlYXQ8aW50Pihwb3RTaXplIC0gMSAtIGksIHNpemVzQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIHVpbnQgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgIHVpbnQgZGMgPSAodWludCkofihjIHwgc2l6ZVZlY3Rvci5aZXJvZXMoKSkpO1xyXG4gICAgICAgICAgICBHZW5lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgMCwgMSwgYywgZGMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFzc2lnbm1lbnRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgR2VuZXJhdGUoTGlzdDx1aW50PiBzaXplcywgTGlzdDx1aW50W10+IGFzc2lnbm1lbnRzLCB1aW50W10gYXNzaWdubWVudCwgTGlzdDx1aW50PltdIHIsIGludCBpLCB1aW50IGxhc3QsIHVpbnQgY2FyZSwgdWludCBkb250Q2FyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVpbnQgeDtcclxuXHJcbiAgICAgICAgICAgIHZhciBnID0gKHVpbnQpKGNhcmUgJiB+bGFzdCk7XHJcbiAgICAgICAgICAgIHZhciBxID0gKHVpbnQpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgeCA9ICh1aW50KSgoY2FyZSAmIGYpIHwgKGxhc3QgJiB+ZikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHEgPiBnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHEuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gKHVpbnQpKH5mICYgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9ICh1aW50KShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKHVpbnQpKGRvbnRDYXJlICYgdCAmICh5IHwgKHkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggPSAodWludCkoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKHVpbnQpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyB1aW50W2Fzc2lnbm1lbnQuTGVuZ3RoXTtcclxuXHRcdFx0XHRcdEFycmF5LkNvcHkoYXNzaWdubWVudCwgYXNzaWdubWVudENvcHksIGFzc2lnbm1lbnRDb3B5Lkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudHMuQWRkKGFzc2lnbm1lbnRDb3B5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1aW50KSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5EZWNyZW1lbnQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzaXplcy5HcmVhdGVyVGhhbihyW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBzaXplcy5aZXJvZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjICYgeikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYyA9ICh1aW50KSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdlbmVyYXRlKHNpemVzLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1aW50KSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPHVpbnRbXT4gRW51bWVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNpemVzQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oc2l6ZXMpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZVZlY3RvciA9IEJpdFZlY3RvcnNfdWludC5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyB1aW50W3BvdFNpemVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgTGlzdDx1aW50Pltwb3RTaXplXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3RTaXplOyBpKyspXHJcbiAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc191aW50LlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICB1aW50IGMgPSBzaXplVmVjdG9yLkdyZWF0ZXJUaGFuKHJbMF0pO1xyXG4gICAgICAgICAgICB1aW50IGRjID0gKHVpbnQpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50LCByLCAwLCAxLCBjLCBkYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8dWludFtdPiBFbnVtZXJhdGUoTGlzdDx1aW50PiBzaXplcywgdWludFtdIGFzc2lnbm1lbnQsIExpc3Q8dWludD5bXSByLCBpbnQgaSwgdWludCBsYXN0LCB1aW50IGNhcmUsIHVpbnQgZG9udENhcmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1aW50IHg7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9ICh1aW50KShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9ICh1aW50KSh+Y2FyZSAmIH5kb250Q2FyZSAmIGxhc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGcgPiBxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGcuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHggPSAodWludCkoKGNhcmUgJiBmKSB8IChsYXN0ICYgfmYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBxLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9ICh1aW50KSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAodWludCkoZG9udENhcmUgJiB+ZiAmIH50KTtcclxuICAgICAgICAgICAgICAgIGlmICh5ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKHVpbnQpKGRvbnRDYXJlICYgdCAmICh5IHwgKHkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggPSAodWludCkoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKHVpbnQpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyB1aW50W2Fzc2lnbm1lbnQuTGVuZ3RoXTtcclxuXHRcdFx0XHRcdEFycmF5LkNvcHkoYXNzaWdubWVudCwgYXNzaWdubWVudENvcHksIGFzc2lnbm1lbnRDb3B5Lkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0XHR5aWVsZCByZXR1cm4gYXNzaWdubWVudENvcHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodWludCkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAodWludCkofihjIHwgeikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKHZhciBhIGluIEVudW1lcmF0ZShzaXplcywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKSlcclxuXHRcdFx0XHRcdFx0XHR5aWVsZCByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1aW50KSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBBc3NpZ25tZW50c191c2hvcnRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8dXNob3J0W10+IEdlbmVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplLCBpbnQgY291bnRFc3RpbWF0ZSA9IDIwNDgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc191c2hvcnQuVG9CaXRWZWN0b3Ioc2l6ZXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRzID0gbmV3IExpc3Q8dXNob3J0W10+KGNvdW50RXN0aW1hdGUpO1xyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyB1c2hvcnRbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PHVzaG9ydD5bcG90U2l6ZV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90U2l6ZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcltpXSA9IEJpdFZlY3RvcnNfdXNob3J0LlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICB1c2hvcnQgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgIHVzaG9ydCBkYyA9ICh1c2hvcnQpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgR2VuZXJhdGUoc2l6ZVZlY3RvciwgYXNzaWdubWVudHMsIGFzc2lnbm1lbnQsIHIsIDAsIDEsIGMsIGRjKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhc3NpZ25tZW50cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIEdlbmVyYXRlKExpc3Q8dXNob3J0PiBzaXplcywgTGlzdDx1c2hvcnRbXT4gYXNzaWdubWVudHMsIHVzaG9ydFtdIGFzc2lnbm1lbnQsIExpc3Q8dXNob3J0PltdIHIsIGludCBpLCB1c2hvcnQgbGFzdCwgdXNob3J0IGNhcmUsIHVzaG9ydCBkb250Q2FyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVzaG9ydCB4O1xyXG5cclxuICAgICAgICAgICAgdmFyIGcgPSAodXNob3J0KShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9ICh1c2hvcnQpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgeCA9ICh1c2hvcnQpKChjYXJlICYgZikgfCAobGFzdCAmIH5mKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocSA+IGcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gcS5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSAodXNob3J0KSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAodXNob3J0KShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKHVzaG9ydCkoZG9udENhcmUgJiB0ICYgKHkgfCAoeSAtIDEpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeCA9ICh1c2hvcnQpKChjYXJlICYgKGYgPj4gMSkpIHwgKHQgJiB+eTIpIHwgKHkgJiAoMCAtIHkpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB4ID0gbGFzdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVuZCA9ICh1c2hvcnQpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyB1c2hvcnRbYXNzaWdubWVudC5MZW5ndGhdO1xyXG5cdFx0XHRcdFx0QXJyYXkuQ29weShhc3NpZ25tZW50LCBhc3NpZ25tZW50Q29weSwgYXNzaWdubWVudENvcHkuTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50cy5BZGQoYXNzaWdubWVudENvcHkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVzaG9ydCkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAodXNob3J0KSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdlbmVyYXRlKHNpemVzLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9ICh1c2hvcnQpKCgoeCAtIChjYXJlICsgZG9udENhcmUpKSAmIGRvbnRDYXJlKSArIGNhcmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8dXNob3J0W10+IEVudW1lcmF0ZShJRW51bWVyYWJsZTxpbnQ+IHNpemVzLCBpbnQgcG90U2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaXplc0NvdW50ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KHNpemVzKTtcclxuICAgICAgICAgICAgdmFyIHNpemVWZWN0b3IgPSBCaXRWZWN0b3JzX3VzaG9ydC5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyB1c2hvcnRbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PHVzaG9ydD5bcG90U2l6ZV07XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcG90U2l6ZTsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcltpXSA9IEJpdFZlY3RvcnNfdXNob3J0LlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICB1c2hvcnQgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgIHVzaG9ydCBkYyA9ICh1c2hvcnQpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50LCByLCAwLCAxLCBjLCBkYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8dXNob3J0W10+IEVudW1lcmF0ZShMaXN0PHVzaG9ydD4gc2l6ZXMsIHVzaG9ydFtdIGFzc2lnbm1lbnQsIExpc3Q8dXNob3J0PltdIHIsIGludCBpLCB1c2hvcnQgbGFzdCwgdXNob3J0IGNhcmUsIHVzaG9ydCBkb250Q2FyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVzaG9ydCB4O1xyXG5cclxuICAgICAgICAgICAgdmFyIGcgPSAodXNob3J0KShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9ICh1c2hvcnQpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgeCA9ICh1c2hvcnQpKChjYXJlICYgZikgfCAobGFzdCAmIH5mKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocSA+IGcpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gcS5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSAodXNob3J0KSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAodXNob3J0KShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgeTIgPSAodXNob3J0KShkb250Q2FyZSAmIHQgJiAoeSB8ICh5IC0gMSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB4ID0gKHVzaG9ydCkoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKHVzaG9ydCkoY2FyZSB8IGRvbnRDYXJlKTtcclxuICAgICAgICAgICAgaWYgKGkgPj0gYXNzaWdubWVudC5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzc2lnbm1lbnRDb3B5ID0gbmV3IHVzaG9ydFthc3NpZ25tZW50Lkxlbmd0aF07XHJcblx0XHRcdFx0XHRBcnJheS5Db3B5KGFzc2lnbm1lbnQsIGFzc2lnbm1lbnRDb3B5LCBhc3NpZ25tZW50Q29weS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHRcdFx0eWllbGQgcmV0dXJuIGFzc2lnbm1lbnRDb3B5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVzaG9ydCkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAodXNob3J0KSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2godmFyIGEgaW4gRW51bWVyYXRlKHNpemVzLCBhc3NpZ25tZW50LCByLCBpICsgMSwgeCwgYywgZGMpKVxyXG5cdFx0XHRcdFx0XHRcdHlpZWxkIHJldHVybiBhO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuSW5jcmVtZW50KHgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA9PSBlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHVzaG9ydCkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQXNzaWdubWVudHNfYnl0ZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxieXRlW10+IEdlbmVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplLCBpbnQgY291bnRFc3RpbWF0ZSA9IDIwNDgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXNDb3VudCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50PihzaXplcyk7XHJcbiAgICAgICAgICAgIHZhciBzaXplVmVjdG9yID0gQml0VmVjdG9yc19ieXRlLlRvQml0VmVjdG9yKHNpemVzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50cyA9IG5ldyBMaXN0PGJ5dGVbXT4oY291bnRFc3RpbWF0ZSk7XHJcbiAgICAgICAgICAgIHZhciBhc3NpZ25tZW50ID0gbmV3IGJ5dGVbcG90U2l6ZV07XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IG5ldyBMaXN0PGJ5dGU+W3BvdFNpemVdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBvdFNpemU7IGkrKylcclxuICAgICAgICAgICAgICAgIHJbaV0gPSBCaXRWZWN0b3JzX2J5dGUuVG9CaXRWZWN0b3IoRW51bWVyYWJsZS5SZXBlYXQ8aW50Pihwb3RTaXplIC0gMSAtIGksIHNpemVzQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgIGJ5dGUgYyA9IHNpemVWZWN0b3IuR3JlYXRlclRoYW4oclswXSk7XHJcbiAgICAgICAgICAgIGJ5dGUgZGMgPSAoYnl0ZSkofihjIHwgc2l6ZVZlY3Rvci5aZXJvZXMoKSkpO1xyXG4gICAgICAgICAgICBHZW5lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgMCwgMSwgYywgZGMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFzc2lnbm1lbnRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgR2VuZXJhdGUoTGlzdDxieXRlPiBzaXplcywgTGlzdDxieXRlW10+IGFzc2lnbm1lbnRzLCBieXRlW10gYXNzaWdubWVudCwgTGlzdDxieXRlPltdIHIsIGludCBpLCBieXRlIGxhc3QsIGJ5dGUgY2FyZSwgYnl0ZSBkb250Q2FyZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJ5dGUgeDtcclxuXHJcbiAgICAgICAgICAgIHZhciBnID0gKGJ5dGUpKGNhcmUgJiB+bGFzdCk7XHJcbiAgICAgICAgICAgIHZhciBxID0gKGJ5dGUpKH5jYXJlICYgfmRvbnRDYXJlICYgbGFzdCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZyA+IHEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmID0gZy5SaWdodEZpbGxUb01TQigpO1xyXG4gICAgICAgICAgICAgICAgeCA9IChieXRlKSgoY2FyZSAmIGYpIHwgKGxhc3QgJiB+ZikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHEgPiBnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHEuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gKGJ5dGUpKH5mICYgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IChieXRlKShkb250Q2FyZSAmIH5mICYgfnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKGJ5dGUpKGRvbnRDYXJlICYgdCAmICh5IHwgKHkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggPSAoYnl0ZSkoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKGJ5dGUpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyBieXRlW2Fzc2lnbm1lbnQuTGVuZ3RoXTtcclxuXHRcdFx0XHRcdEFycmF5LkNvcHkoYXNzaWdubWVudCwgYXNzaWdubWVudENvcHksIGFzc2lnbm1lbnRDb3B5Lkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudHMuQWRkKGFzc2lnbm1lbnRDb3B5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9IChieXRlKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRbaV0gPSB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaXplcy5EZWNyZW1lbnQoeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzaXplcy5HcmVhdGVyVGhhbihyW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBzaXplcy5aZXJvZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChjICYgeikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYyA9IChieXRlKSh+KGMgfCB6KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdlbmVyYXRlKHNpemVzLCBhc3NpZ25tZW50cywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9IChieXRlKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblx0XHRwdWJsaWMgc3RhdGljIElFbnVtZXJhYmxlPGJ5dGVbXT4gRW51bWVyYXRlKElFbnVtZXJhYmxlPGludD4gc2l6ZXMsIGludCBwb3RTaXplKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNpemVzQ291bnQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGludD4oc2l6ZXMpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZVZlY3RvciA9IEJpdFZlY3RvcnNfYnl0ZS5Ub0JpdFZlY3RvcihzaXplcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXNzaWdubWVudCA9IG5ldyBieXRlW3BvdFNpemVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgTGlzdDxieXRlPltwb3RTaXplXTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3RTaXplOyBpKyspXHJcbiAgICAgICAgICAgICAgICByW2ldID0gQml0VmVjdG9yc19ieXRlLlRvQml0VmVjdG9yKEVudW1lcmFibGUuUmVwZWF0PGludD4ocG90U2l6ZSAtIDEgLSBpLCBzaXplc0NvdW50KSk7XHJcblxyXG4gICAgICAgICAgICBieXRlIGMgPSBzaXplVmVjdG9yLkdyZWF0ZXJUaGFuKHJbMF0pO1xyXG4gICAgICAgICAgICBieXRlIGRjID0gKGJ5dGUpKH4oYyB8IHNpemVWZWN0b3IuWmVyb2VzKCkpKTtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZShzaXplVmVjdG9yLCBhc3NpZ25tZW50LCByLCAwLCAxLCBjLCBkYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8Ynl0ZVtdPiBFbnVtZXJhdGUoTGlzdDxieXRlPiBzaXplcywgYnl0ZVtdIGFzc2lnbm1lbnQsIExpc3Q8Ynl0ZT5bXSByLCBpbnQgaSwgYnl0ZSBsYXN0LCBieXRlIGNhcmUsIGJ5dGUgZG9udENhcmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBieXRlIHg7XHJcblxyXG4gICAgICAgICAgICB2YXIgZyA9IChieXRlKShjYXJlICYgfmxhc3QpO1xyXG4gICAgICAgICAgICB2YXIgcSA9IChieXRlKSh+Y2FyZSAmIH5kb250Q2FyZSAmIGxhc3QpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGcgPiBxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGcuUmlnaHRGaWxsVG9NU0IoKTtcclxuICAgICAgICAgICAgICAgIHggPSAoYnl0ZSkoKGNhcmUgJiBmKSB8IChsYXN0ICYgfmYpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChxID4gZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGYgPSBxLlJpZ2h0RmlsbFRvTVNCKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IChieXRlKSh+ZiAmIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAoYnl0ZSkoZG9udENhcmUgJiB+ZiAmIH50KTtcclxuICAgICAgICAgICAgICAgIGlmICh5ID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gKGJ5dGUpKGRvbnRDYXJlICYgdCAmICh5IHwgKHkgLSAxKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHggPSAoYnl0ZSkoKGNhcmUgJiAoZiA+PiAxKSkgfCAodCAmIH55MikgfCAoeSAmICgwIC0geSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHggPSBsYXN0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW5kID0gKGJ5dGUpKGNhcmUgfCBkb250Q2FyZSk7XHJcbiAgICAgICAgICAgIGlmIChpID49IGFzc2lnbm1lbnQuTGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFtpXSA9IHg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3NpZ25tZW50Q29weSA9IG5ldyBieXRlW2Fzc2lnbm1lbnQuTGVuZ3RoXTtcclxuXHRcdFx0XHRcdEFycmF5LkNvcHkoYXNzaWdubWVudCwgYXNzaWdubWVudENvcHksIGFzc2lnbm1lbnRDb3B5Lkxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcblx0XHRcdFx0XHR5aWVsZCByZXR1cm4gYXNzaWdubWVudENvcHk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09IGVuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHggPSAoYnl0ZSkoKCh4IC0gKGNhcmUgKyBkb250Q2FyZSkpICYgZG9udENhcmUpICsgY2FyZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50W2ldID0geDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZXMuRGVjcmVtZW50KHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gc2l6ZXMuR3JlYXRlclRoYW4ocltpICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6ID0gc2l6ZXMuWmVyb2VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYyAmIHopID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGMgPSAoYnl0ZSkofihjIHwgeikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKHZhciBhIGluIEVudW1lcmF0ZShzaXplcywgYXNzaWdubWVudCwgciwgaSArIDEsIHgsIGMsIGRjKSlcclxuXHRcdFx0XHRcdFx0XHR5aWVsZCByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNpemVzLkluY3JlbWVudCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT0gZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeCA9IChieXRlKSgoKHggLSAoY2FyZSArIGRvbnRDYXJlKSkgJiBkb250Q2FyZSkgKyBjYXJlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCaXRPcGVyYXRpb25zXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1bG9uZyBUb191bG9uZyh0aGlzIElFbnVtZXJhYmxlPGludD4gYml0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIHggPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYml0IGluIGJpdHMpXHJcbiAgICAgICAgICAgICAgICB4IHw9IDFVTCA8PCBiaXQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdXNob3J0IFRvX3VzaG9ydCh0aGlzIElFbnVtZXJhYmxlPGludD4gYml0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVzaG9ydCB4ID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJpdCBpbiBiaXRzKVxyXG4gICAgICAgICAgICAgICAgeCB8PSAodXNob3J0KSgxIDw8IGJpdCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYnl0ZSBUb19ieXRlKHRoaXMgSUVudW1lcmFibGU8aW50PiBiaXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYnl0ZSB4ID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJpdCBpbiBiaXRzKVxyXG4gICAgICAgICAgICAgICAgeCB8PSAoYnl0ZSkoMSA8PCBiaXQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdHB1YmxpYyBzdGF0aWMgdWxvbmcgUmlnaHRGaWxsVG9NU0IodGhpcyB1bG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDE7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAyO1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gNDtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDg7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAxNjtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDMyO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdXNob3J0IFJpZ2h0RmlsbFRvTVNCKHRoaXMgdXNob3J0IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB4IHw9ICh1c2hvcnQpKHggPj4gMSk7XHJcbiAgICAgICAgICAgIHggfD0gKHVzaG9ydCkoeCA+PiAyKTtcclxuICAgICAgICAgICAgeCB8PSAodXNob3J0KSh4ID4+IDQpO1xyXG4gICAgICAgICAgICB4IHw9ICh1c2hvcnQpKHggPj4gOCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBieXRlIFJpZ2h0RmlsbFRvTVNCKHRoaXMgYnl0ZSB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgeCB8PSAoYnl0ZSkoeCA+PiAxKTtcclxuICAgICAgICAgICAgeCB8PSAoYnl0ZSkoeCA+PiAyKTtcclxuICAgICAgICAgICAgeCB8PSAoYnl0ZSkoeCA+PiA0KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuXHR9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCaXRVc2FnZV91aW50XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgdWludCBEZUJydWlqbk11bHRpcGxpZXIgPSAweDA3N0NCNTMxVTtcclxuICAgICAgICBzdGF0aWMgaW50W10gRGVCcnVpam5Mb29rdXAgPSBuZXcgaW50WzMyXSB7IDAsIDEsIDI4LCAyLCAyOSwgMTQsIDI0LCAzLCAzMCwgMjIsIDIwLCAxNSwgMjUsIDE3LCA0LCA4LCAzMSwgMjcsIDEzLCAyMywgMjEsIDE5LCAxNiwgNywgMjYsIDEyLCAxOCwgNiwgMTEsIDUsIDEwLCA5IH07XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEV4dHJhY3QodGhpcyB1aW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRGVCcnVpam5Mb29rdXBbKHggKiBEZUJydWlqbk11bHRpcGxpZXIpID4+IDI3XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IExlYXN0U2lnbmlmaWNhbnRCaXQodGhpcyB1aW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRGVCcnVpam5Mb29rdXBbKCh4ICYgKH54ICsgMSkpICogRGVCcnVpam5NdWx0aXBsaWVyKSA+PiAyN107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBHZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIHVpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtID0geCAmICh+eCArIDEpO1xyXG4gICAgICAgICAgICB4IF49IG07XHJcbiAgICAgICAgICAgIHJldHVybiBEZUJydWlqbkxvb2t1cFsobSAqIERlQnJ1aWpuTXVsdGlwbGllcikgPj4gMjddO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgUG9wdWxhdGlvbkNvdW50KHRoaXMgdWludCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHEgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAoYiA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHErKztcclxuICAgICAgICAgICAgICAgIGIgJj0gYiAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IFRvU2V0KHRoaXMgdWludCB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG9uQml0cyA9IG5ldyBMaXN0PGludD4oMTApO1xyXG4gICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAgb25CaXRzLkFkZChHZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIHgpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBvbkJpdHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdWludCBSaWdodEZpbGxUb01TQih0aGlzIHVpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAxO1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMjtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDQ7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiA4O1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gMTY7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1aW50IFRvX3VpbnQodGhpcyBJRW51bWVyYWJsZTxpbnQ+IGJpdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1aW50IHggPSAwO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYml0IGluIGJpdHMpXHJcbiAgICAgICAgICAgICAgICB4IHw9IDFVIDw8IGJpdDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB1aW50IE9yKHRoaXMgdWludFtdIGNvbG9yR3JhcGgsIGludCBvZmZzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gMFU7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBvZmZzZXQ7IGkgPCBjb2xvckdyYXBoLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0IHw9IGNvbG9yR3JhcGhbaV07XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgVHJ1ZUZvckFsbEJpdEluZGljZXModGhpcyB1aW50IHgsIEZ1bmM8aW50LCBib29sPiBwcmVkaWNhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aGlsZSAoeCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXByZWRpY2F0ZShHZXRBbmRDbGVhckxlYXN0U2lnbmlmaWNhbnRCaXQocmVmIHgpKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEJpdFVzYWdlX2xvbmdcclxuICAgIHtcclxuICAgICAgICBjb25zdCBVSW50NjQgRGVCcnVpam5NdWx0aXBsaWVyID0gMHgwN0VERDVFNTlBNEUyOEMyO1xyXG4gICAgICAgIHN0YXRpYyBpbnRbXSBEZUJydWlqbkxvb2t1cCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYzLCAgMCwgNTgsICAxLCA1OSwgNDcsIDUzLCAgMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYwLCAzOSwgNDgsIDI3LCA1NCwgMzMsIDQyLCAgMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYxLCA1MSwgMzcsIDQwLCA0OSwgMTgsIDI4LCAyMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDU1LCAzMCwgMzQsIDExLCA0MywgMTQsIDIyLCAgNCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDYyLCA1NywgNDYsIDUyLCAzOCwgMjYsIDMyLCA0MSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDUwLCAzNiwgMTcsIDE5LCAyOSwgMTAsIDEzLCAyMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDU2LCA0NSwgMjUsIDMxLCAzNSwgMTYsICA5LCAxMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDQ0LCAyNCwgMTUsICA4LCAyMywgIDcsICA2LCAgNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGludCBFeHRyYWN0KHRoaXMgbG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIERlQnJ1aWpuTG9va3VwWygoVUludDY0KXggKiBEZUJydWlqbk11bHRpcGxpZXIpID4+IDU4XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IExlYXN0U2lnbmlmaWNhbnRCaXQodGhpcyBsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRGVCcnVpam5Mb29rdXBbdW5jaGVja2VkKChVSW50NjQpKHggJiAteCkgKiBEZUJydWlqbk11bHRpcGxpZXIgPj4gNTgpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgbG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG0gPSB4ICYgLXg7XHJcbiAgICAgICAgICAgIHggXj0gbTtcclxuICAgICAgICAgICAgcmV0dXJuIERlQnJ1aWpuTG9va3VwWygoVUludDY0KW0gKiBEZUJydWlqbk11bHRpcGxpZXIpID4+IDU4XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW50IFBvcHVsYXRpb25Db3VudCh0aGlzIGxvbmcgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBxID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKGIgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBxKys7XHJcbiAgICAgICAgICAgICAgICBiICY9IGIgLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnQgUG9wdWxhdGlvbkNvdW50RGVuc2UodGhpcyBsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB4ID0geCAtICgoeCA+PiAxKSAmIDB4NTU1NTU1NTU1NTU1NTU1NUwpO1xyXG4gICAgICAgICAgICB4ID0gKHggJiAweDMzMzMzMzMzMzMzMzMzMzNMKSArICgoeCA+PiAyKSAmIDB4MzMzMzMzMzMzMzMzMzMzM0wpO1xyXG4gICAgICAgICAgICB4ID0gKHggKyAoeCA+PiA0KSkgJiAweDBmMGYwZjBmMGYwZjBmMGZMO1xyXG4gICAgICAgICAgICB4ID0gKHggKiAweDAxMDEwMTAxMDEwMTAxMDFMKSA+PiA1NjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBUb1NldChsb25nIHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgb25CaXRzID0gbmV3IExpc3Q8aW50PigxMCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgICAgICBvbkJpdHMuQWRkKEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgeCkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG9uQml0cztcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIFJpZ2h0RmlsbFRvTVNCKHRoaXMgbG9uZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDE7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAyO1xyXG4gICAgICAgICAgICB4IHw9IHggPj4gNDtcclxuICAgICAgICAgICAgeCB8PSB4ID4+IDg7XHJcbiAgICAgICAgICAgIHggfD0geCA+PiAxNjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgVG9fbG9uZyh0aGlzIElFbnVtZXJhYmxlPGludD4gYml0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvbmcgeCA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiaXQgaW4gYml0cylcclxuICAgICAgICAgICAgICAgIHggfD0gMUwgPDwgYml0O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgT3IodGhpcyBsb25nW10gY29sb3JHcmFwaCwgaW50IG9mZnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAwTDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IG9mZnNldDsgaSA8IGNvbG9yR3JhcGguTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgfD0gY29sb3JHcmFwaFtpXTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBUcnVlRm9yQWxsQml0SW5kaWNlcyh0aGlzIGxvbmcgeCwgRnVuYzxpbnQsIGJvb2w+IHByZWRpY2F0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghcHJlZGljYXRlKEdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgeCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIlxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQml0VmVjdG9yc191bG9uZ1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IEZyb21CaXRWZWN0b3IodGhpcyBMaXN0PHVsb25nPiBuKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gbmV3IExpc3Q8aW50Pig2NCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNjQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSAodWxvbmcpKDFVTCA8PCBpKTtcclxuICAgICAgICAgICAgICAgIGludCBtID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbi5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYiAmIG5bal0pICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gKz0gMSA8PCBqO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHYuQWRkKG0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDx1bG9uZz4gVG9CaXRWZWN0b3IoSUVudW1lcmFibGU8aW50PiB3KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHYgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHcpO1xyXG4gICAgICAgICAgICB2YXIgbiA9IG5ldyBMaXN0PHVsb25nPigpO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdWxvbmcgbSA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgemVybyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHYuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodltpXSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB6ZXJvID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgodltpXSAmIDEpICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gfD0gKHVsb25nKSgxVUwgPDwgaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZbaV0gPj49IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbi5BZGQobSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHplcm8pXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEluY3JlbWVudCh0aGlzIExpc3Q8dWxvbmc+IG4sIHVsb25nIG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChtICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9ICh1bG9uZykobSAmIG5baV0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQyID0gKHVsb25nKShtIF4gbltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgbltpXSA9IHQyO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIERlY3JlbWVudCh0aGlzIExpc3Q8dWxvbmc+IG4sIHVsb25nIG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChtICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9ICh1bG9uZykobSAmIH5uW2ldKTtcclxuICAgICAgICAgICAgICAgIHZhciB0MiA9ICh1bG9uZykobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdWxvbmcgWmVyb2VzKHRoaXMgTGlzdDx1bG9uZz4gbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIG0gPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4uQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIG0gfD0gbltpXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAodWxvbmcpfm07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVsb25nIEdyZWF0ZXJUaGFuKHRoaXMgTGlzdDx1bG9uZz4gbiwgTGlzdDx1bG9uZz4gaylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIGEgPSAwO1xyXG4gICAgICAgICAgICB1bG9uZyBiID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IE1hdGguTWF4KG4uQ291bnQsIGsuQ291bnQpIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChpID49IGsuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYSB8PSBuW2ldO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA+PSBuLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGIgfD0ga1tpXTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhIHw9ICh1bG9uZykofmIgJiBuW2ldICYgfmtbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGIgfD0gKHVsb25nKSh+YSAmIH5uW2ldICYga1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAodWxvbmcpKGEgJiB+Yik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCaXRWZWN0b3JzX2xvbmdcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBGcm9tQml0VmVjdG9yKHRoaXMgTGlzdDxsb25nPiBuKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gbmV3IExpc3Q8aW50Pig2NCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNjQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSAobG9uZykoMUwgPDwgaSk7XHJcbiAgICAgICAgICAgICAgICBpbnQgbSA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IG4uQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGIgJiBuW2pdKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtICs9IDEgPDwgajtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2LkFkZChtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8bG9uZz4gVG9CaXRWZWN0b3IoSUVudW1lcmFibGU8aW50PiB3KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHYgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHcpO1xyXG4gICAgICAgICAgICB2YXIgbiA9IG5ldyBMaXN0PGxvbmc+KCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb25nIG0gPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHplcm8gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB2LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZbaV0gIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgemVybyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHZbaV0gJiAxKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtIHw9IChsb25nKSgxTCA8PCBpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdltpXSA+Pj0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBuLkFkZChtKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoemVybylcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgSW5jcmVtZW50KHRoaXMgTGlzdDxsb25nPiBuLCBsb25nIG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChtICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9IChsb25nKShtICYgbltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAobG9uZykobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEZWNyZW1lbnQodGhpcyBMaXN0PGxvbmc+IG4sIGxvbmcgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKG0gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQxID0gKGxvbmcpKG0gJiB+bltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAobG9uZykobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBaZXJvZXModGhpcyBMaXN0PGxvbmc+IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIG0gPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4uQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIG0gfD0gbltpXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAobG9uZyl+bTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBHcmVhdGVyVGhhbih0aGlzIExpc3Q8bG9uZz4gbiwgTGlzdDxsb25nPiBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyBhID0gMDtcclxuICAgICAgICAgICAgbG9uZyBiID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IE1hdGguTWF4KG4uQ291bnQsIGsuQ291bnQpIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChpID49IGsuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYSB8PSBuW2ldO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA+PSBuLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGIgfD0ga1tpXTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhIHw9IChsb25nKSh+YiAmIG5baV0gJiB+a1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYiB8PSAobG9uZykofmEgJiB+bltpXSAmIGtbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGxvbmcpKGEgJiB+Yik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCaXRWZWN0b3JzX3VpbnRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8aW50PiBGcm9tQml0VmVjdG9yKHRoaXMgTGlzdDx1aW50PiBuKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gbmV3IExpc3Q8aW50PigzMik7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMzI7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSAodWludCkoMVUgPDwgaSk7XHJcbiAgICAgICAgICAgICAgICBpbnQgbSA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IG4uQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGIgJiBuW2pdKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtICs9IDEgPDwgajtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2LkFkZChtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIExpc3Q8dWludD4gVG9CaXRWZWN0b3IoSUVudW1lcmFibGU8aW50PiB3KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHYgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHcpO1xyXG4gICAgICAgICAgICB2YXIgbiA9IG5ldyBMaXN0PHVpbnQ+KCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1aW50IG0gPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHplcm8gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB2LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZbaV0gIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgemVybyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHZbaV0gJiAxKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtIHw9ICh1aW50KSgxVSA8PCBpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdltpXSA+Pj0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBuLkFkZChtKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoemVybylcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgSW5jcmVtZW50KHRoaXMgTGlzdDx1aW50PiBuLCB1aW50IG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChtICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9ICh1aW50KShtICYgbltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAodWludCkobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEZWNyZW1lbnQodGhpcyBMaXN0PHVpbnQ+IG4sIHVpbnQgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKG0gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQxID0gKHVpbnQpKG0gJiB+bltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAodWludCkobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdWludCBaZXJvZXModGhpcyBMaXN0PHVpbnQ+IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1aW50IG0gPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4uQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIG0gfD0gbltpXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAodWludCl+bTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdWludCBHcmVhdGVyVGhhbih0aGlzIExpc3Q8dWludD4gbiwgTGlzdDx1aW50PiBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWludCBhID0gMDtcclxuICAgICAgICAgICAgdWludCBiID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IE1hdGguTWF4KG4uQ291bnQsIGsuQ291bnQpIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChpID49IGsuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYSB8PSBuW2ldO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA+PSBuLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGIgfD0ga1tpXTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhIHw9ICh1aW50KSh+YiAmIG5baV0gJiB+a1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYiB8PSAodWludCkofmEgJiB+bltpXSAmIGtbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKHVpbnQpKGEgJiB+Yik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBCaXRWZWN0b3JzX3VzaG9ydFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IEZyb21CaXRWZWN0b3IodGhpcyBMaXN0PHVzaG9ydD4gbikgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdiA9IG5ldyBMaXN0PGludD4oMTYpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDE2OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gKHVzaG9ydCkoMSA8PCBpKTtcclxuICAgICAgICAgICAgICAgIGludCBtID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbi5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYiAmIG5bal0pICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gKz0gMSA8PCBqO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHYuQWRkKG0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDx1c2hvcnQ+IFRvQml0VmVjdG9yKElFbnVtZXJhYmxlPGludD4gdylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih3KTtcclxuICAgICAgICAgICAgdmFyIG4gPSBuZXcgTGlzdDx1c2hvcnQ+KCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1c2hvcnQgbSA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgemVybyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHYuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodltpXSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB6ZXJvID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgodltpXSAmIDEpICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gfD0gKHVzaG9ydCkoMSA8PCBpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdltpXSA+Pj0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBuLkFkZChtKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoemVybylcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgSW5jcmVtZW50KHRoaXMgTGlzdDx1c2hvcnQ+IG4sIHVzaG9ydCBtKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAobSAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDEgPSAodXNob3J0KShtICYgbltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAodXNob3J0KShtIF4gbltpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgbltpXSA9IHQyO1xyXG5cclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIERlY3JlbWVudCh0aGlzIExpc3Q8dXNob3J0PiBuLCB1c2hvcnQgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKG0gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQxID0gKHVzaG9ydCkobSAmIH5uW2ldKTtcclxuICAgICAgICAgICAgICAgIHZhciB0MiA9ICh1c2hvcnQpKG0gXiBuW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtID0gdDE7XHJcbiAgICAgICAgICAgICAgICBuW2ldID0gdDI7XHJcblxyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVzaG9ydCBaZXJvZXModGhpcyBMaXN0PHVzaG9ydD4gbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVzaG9ydCBtID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBtIHw9IG5baV07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKHVzaG9ydCl+bTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdXNob3J0IEdyZWF0ZXJUaGFuKHRoaXMgTGlzdDx1c2hvcnQ+IG4sIExpc3Q8dXNob3J0PiBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdXNob3J0IGEgPSAwO1xyXG4gICAgICAgICAgICB1c2hvcnQgYiA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBNYXRoLk1heChuLkNvdW50LCBrLkNvdW50KSAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSBrLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGEgfD0gbltpXTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGkgPj0gbi5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICBiIHw9IGtbaV07XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYSB8PSAodXNob3J0KSh+YiAmIG5baV0gJiB+a1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYiB8PSAodXNob3J0KSh+YSAmIH5uW2ldICYga1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAodXNob3J0KShhICYgfmIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQml0VmVjdG9yc19ieXRlXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGludD4gRnJvbUJpdFZlY3Rvcih0aGlzIExpc3Q8Ynl0ZT4gbikgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdiA9IG5ldyBMaXN0PGludD4oOCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgODsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IChieXRlKSgxIDw8IGkpO1xyXG4gICAgICAgICAgICAgICAgaW50IG0gPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBuLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChiICYgbltqXSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSArPSAxIDw8IGo7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdi5BZGQobSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBMaXN0PGJ5dGU+IFRvQml0VmVjdG9yKElFbnVtZXJhYmxlPGludD4gdylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50Pih3KTtcclxuICAgICAgICAgICAgdmFyIG4gPSBuZXcgTGlzdDxieXRlPigpO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnl0ZSBtID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciB6ZXJvID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2W2ldICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHplcm8gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh2W2ldICYgMSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSB8PSAoYnl0ZSkoMSA8PCBpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdltpXSA+Pj0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBuLkFkZChtKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoemVybylcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgSW5jcmVtZW50KHRoaXMgTGlzdDxieXRlPiBuLCBieXRlIG0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChtICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9IChieXRlKShtICYgbltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAoYnl0ZSkobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBEZWNyZW1lbnQodGhpcyBMaXN0PGJ5dGU+IG4sIGJ5dGUgbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKG0gIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQxID0gKGJ5dGUpKG0gJiB+bltpXSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdDIgPSAoYnl0ZSkobSBeIG5baV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG0gPSB0MTtcclxuICAgICAgICAgICAgICAgIG5baV0gPSB0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYnl0ZSBaZXJvZXModGhpcyBMaXN0PGJ5dGU+IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBieXRlIG0gPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG4uQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIG0gfD0gbltpXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoYnl0ZSl+bTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYnl0ZSBHcmVhdGVyVGhhbih0aGlzIExpc3Q8Ynl0ZT4gbiwgTGlzdDxieXRlPiBrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYnl0ZSBhID0gMDtcclxuICAgICAgICAgICAgYnl0ZSBiID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IE1hdGguTWF4KG4uQ291bnQsIGsuQ291bnQpIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChpID49IGsuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAgYSB8PSBuW2ldO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA+PSBuLkNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGIgfD0ga1tpXTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhIHw9IChieXRlKSh+YiAmIG5baV0gJiB+a1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYiB8PSAoYnl0ZSkofmEgJiB+bltpXSAmIGtbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGJ5dGUpKGEgJiB+Yik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmc7XHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgR3JhcGhDaG9vc2FiaWxpdHlfdWludFxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0ZDaG9vc2FibGUodGhpcyBJR3JhcGhfdWludCBncmFwaCwgRnVuYzxpbnQsIGludD4gZiwgb3V0IExpc3Q8TGlzdDxpbnQ+PiBiYWRBc3NpZ25tZW50KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9uZyBub2Rlc1Zpc2l0ZWQsIGNhY2hlSGl0cztcclxuICAgICAgICAgICAgcmV0dXJuIGdyYXBoLklzRkNob29zYWJsZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pZiwgb3V0IGJhZEFzc2lnbm1lbnQsIG91dCBub2Rlc1Zpc2l0ZWQsIG91dCBjYWNoZUhpdHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNGQ2hvb3NhYmxlKHRoaXMgSUdyYXBoX3VpbnQgZ3JhcGgsIEZ1bmM8aW50LCBpbnQ+IGYsIG91dCBMaXN0PExpc3Q8aW50Pj4gYmFkQXNzaWdubWVudCwgb3V0IGxvbmcgbm9kZXNWaXNpdGVkLCBvdXQgbG9uZyBjYWNoZUhpdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYWRBc3NpZ25tZW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIG5vZGVzVmlzaXRlZCA9IDA7XHJcbiAgICAgICAgICAgIGNhY2hlSGl0cyA9IDA7XHJcbiAgICAgICAgICAgIHZhciBsaXZlVmVydGV4Qml0cyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgZ3JhcGguTikuVG9fdWludCgpO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihncmFwaC5WZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHYgPT4gZih2KSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgbWF4TGlzdFNpemUgPSBzaXplcy5NYXgoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAoaW50IHBvdFNpemUgPSBtYXhMaXN0U2l6ZTsgcG90U2l6ZSA8IGdyYXBoLk47IHBvdFNpemUrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy92YXIgY2FjaGUgPSBuZXcgRGljdGlvbmFyeTxCaXRMZXZlbEdlbmVyYXRpb24uSGFzaGVkQXNzaWdubWVudF91aW50LCBib29sPigpO1xyXG4gICAgICAgICAgICAgICAgRGljdGlvbmFyeTxCaXRMZXZlbEdlbmVyYXRpb24uSGFzaGVkQXNzaWdubWVudF91aW50LCBib29sPiBjYWNoZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbG9yR3JhcGggaW4gQml0TGV2ZWxHZW5lcmF0aW9uLkFzc2lnbm1lbnRzX3VpbnQuRW51bWVyYXRlKHNpemVzLCBwb3RTaXplKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocG90U2l6ZSA+IG1heExpc3RTaXplKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWludCB4eCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29sb3JHcmFwaC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeHggfD0gY29sb3JHcmFwaFtpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeHguUG9wdWxhdGlvbkNvdW50KCkgPD0gaSArIDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBza2lwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbG9yR3JhcGguTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBjb2xvckdyYXBoLkxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY29sb3JHcmFwaFtpXSAmIGNvbG9yR3JhcGhbal0pID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gc2tpcDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2xvciBpbiBjb2xvckdyYXBoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdyYXBoLklzSW5kZXBlbmRlbnQoY29sb3IpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gc2tpcDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZ3JhcGguSXNDaG9vc2FibGUoY29sb3JHcmFwaCwgbGl2ZVZlcnRleEJpdHMsIDAsIGNhY2hlLCByZWYgbm9kZXNWaXNpdGVkLCByZWYgY2FjaGVIaXRzKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhZEFzc2lnbm1lbnQgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGdyYXBoLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IG5ldyBMaXN0PGludD4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQgYml0ID0gMVUgPDwgdjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29sb3JHcmFwaC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGJpdCAmIGNvbG9yR3JhcGhbaV0pICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QuQWRkKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhZEFzc2lnbm1lbnQuQWRkKGxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNraXA6IDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNDaG9vc2FibGUodGhpcyBJR3JhcGhfdWludCBncmFwaCwgdWludFtdIGNvbG9yR3JhcGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb25nIG5vZGVzVmlzaXRlZCwgY2FjaGVIaXRzO1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JhcGguSXNDaG9vc2FibGUoY29sb3JHcmFwaCwgb3V0IG5vZGVzVmlzaXRlZCwgb3V0IGNhY2hlSGl0cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNDaG9vc2FibGUodGhpcyBJR3JhcGhfdWludCBncmFwaCwgdWludFtdIGNvbG9yR3JhcGgsIG91dCBsb25nIG5vZGVzVmlzaXRlZCwgb3V0IGxvbmcgY2FjaGVIaXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbm9kZXNWaXNpdGVkID0gMDtcclxuICAgICAgICAgICAgY2FjaGVIaXRzID0gMDtcclxuICAgICAgICAgICAgLy92YXIgY2FjaGUgPSBuZXcgRGljdGlvbmFyeTxCaXRMZXZlbEdlbmVyYXRpb24uSGFzaGVkQXNzaWdubWVudF91aW50LCBib29sPigpO1xyXG4gICAgICAgICAgICBEaWN0aW9uYXJ5PEJpdExldmVsR2VuZXJhdGlvbi5IYXNoZWRBc3NpZ25tZW50X3VpbnQsIGJvb2w+IGNhY2hlID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBncmFwaC5Jc0Nob29zYWJsZShjb2xvckdyYXBoLCBFbnVtZXJhYmxlLlJhbmdlKDAsIGdyYXBoLk4pLlRvX3VpbnQoKSwgMCwgY2FjaGUsIHJlZiBub2Rlc1Zpc2l0ZWQsIHJlZiBjYWNoZUhpdHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJvb2wgSXNDaG9vc2FibGUodGhpcyBJR3JhcGhfdWludCBncmFwaCwgdWludFtdIGNvbG9yR3JhcGgsIHVpbnQgbGl2ZVZlcnRleEJpdHMsIGludCBjLCBEaWN0aW9uYXJ5PEJpdExldmVsR2VuZXJhdGlvbi5IYXNoZWRBc3NpZ25tZW50X3VpbnQsIGJvb2w+IGNhY2hlLCByZWYgbG9uZyBub2Rlc1Zpc2l0ZWQsIHJlZiBsb25nIGNhY2hlSGl0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5vZGVzVmlzaXRlZCsrO1xyXG5cclxuICAgICAgICAgICAgZ3JhcGguQmVHcmVlZHkoY29sb3JHcmFwaCwgcmVmIGxpdmVWZXJ0ZXhCaXRzLCBjKTtcclxuICAgICAgICAgICAgaWYgKGxpdmVWZXJ0ZXhCaXRzID09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKChsaXZlVmVydGV4Qml0cyAmIH5jb2xvckdyYXBoLk9yKGMpKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy9ib29sIGNhY2hlZFJlc3VsdDtcclxuICAgICAgICAgICAgLy92YXIga2V5ID0gbmV3IEJpdExldmVsR2VuZXJhdGlvbi5IYXNoZWRBc3NpZ25tZW50X3VpbnQoY29sb3JHcmFwaCwgYywgbGl2ZVZlcnRleEJpdHMpO1xyXG4gICAgICAgICAgICAvL2lmIChjYWNoZS5UcnlHZXRWYWx1ZShrZXksIG91dCBjYWNoZWRSZXN1bHQpKVxyXG4gICAgICAgICAgICAvL3tcclxuICAgICAgICAgICAgLy8gICAgY2FjaGVIaXRzKys7XHJcbiAgICAgICAgICAgIC8vICAgIHJldHVybiBjYWNoZWRSZXN1bHQ7XHJcbiAgICAgICAgICAgIC8vfVxyXG5cclxuICAgICAgICAgICAgdmFyIGNob29zYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgViA9IGNvbG9yR3JhcGhbY10gJiBsaXZlVmVydGV4Qml0cztcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIEMgaW4gZ3JhcGguTWF4aW1hbEluZGVwZW5kZW50U3Vic2V0cyhWKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdyYXBoLklzQ2hvb3NhYmxlKGNvbG9yR3JhcGgsIGxpdmVWZXJ0ZXhCaXRzIF4gQywgYyArIDEsIGNhY2hlLCByZWYgbm9kZXNWaXNpdGVkLCByZWYgY2FjaGVIaXRzKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjaG9vc2FibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL2NhY2hlW2tleV0gPSBjaG9vc2FibGU7XHJcbiAgICAgICAgICAgIHJldHVybiBjaG9vc2FibGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBCZUdyZWVkeSh0aGlzIElHcmFwaF91aW50IGdyYXBoLCB1aW50W10gY29sb3JHcmFwaCwgcmVmIHVpbnQgbGl2ZVZlcnRleEJpdHMsIGludCBjKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2hpbGUodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsQml0cyA9IGxpdmVWZXJ0ZXhCaXRzO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpdHMgPSBsaXZlVmVydGV4Qml0cztcclxuICAgICAgICAgICAgICAgIHdoaWxlIChiaXRzICE9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpdCA9IGJpdHMgJiAofmJpdHMgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICBiaXRzIF49IGJpdDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yQ291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSBjOyBpIDwgY29sb3JHcmFwaC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoYml0ICYgY29sb3JHcmFwaFtpXSkgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xvckNvdW50ID4gZ3JhcGguRGVncmVlSW5TZXQoYml0LkV4dHJhY3QoKSwgbGl2ZVZlcnRleEJpdHMpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXZlVmVydGV4Qml0cyBePSBiaXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxpdmVWZXJ0ZXhCaXRzID09IG9yaWdpbmFsQml0cylcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEdyYXBoQ2hvb3NhYmlsaXR5X2xvbmdcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNGQ2hvb3NhYmxlKHRoaXMgSUdyYXBoX2xvbmcgZ3JhcGgsIEZ1bmM8aW50LCBpbnQ+IGYsIG91dCBMaXN0PExpc3Q8aW50Pj4gYmFkQXNzaWdubWVudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhZEFzc2lnbm1lbnQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxpdmVWZXJ0ZXhCaXRzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBncmFwaC5OKS5Ub19sb25nKCk7XHJcbiAgICAgICAgICAgIHZhciBzaXplcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxpbnQ+KGdyYXBoLlZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodiA9PiBmKHYpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBtYXhMaXN0U2l6ZSA9IHNpemVzLk1heCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgcG90U2l6ZSA9IG1heExpc3RTaXplOyBwb3RTaXplIDwgZ3JhcGguTjsgcG90U2l6ZSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgY29sb3JHcmFwaCBpbiBCaXRMZXZlbEdlbmVyYXRpb24uQXNzaWdubWVudHNfbG9uZy5FbnVtZXJhdGUoc2l6ZXMsIHBvdFNpemUpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3RTaXplID4gbWF4TGlzdFNpemUpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeHggPSAwTDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xvckdyYXBoLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4eCB8PSBjb2xvckdyYXBoW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4eC5Qb3B1bGF0aW9uQ291bnQoKSA8PSBpICsgMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHNraXA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29sb3JHcmFwaC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IGNvbG9yR3JhcGguTGVuZ3RoOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChjb2xvckdyYXBoW2ldICYgY29sb3JHcmFwaFtqXSkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBza2lwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNvbG9yIGluIGNvbG9yR3JhcGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3JhcGguSXNJbmRlcGVuZGVudChjb2xvcikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ290byBza2lwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZ3JhcGguSXNDaG9vc2FibGUoY29sb3JHcmFwaCwgbGl2ZVZlcnRleEJpdHMsIDApKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFkQXNzaWdubWVudCA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gZ3JhcGguVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJpdCA9IDFMIDw8IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbG9yR3JhcGguTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChiaXQgJiBjb2xvckdyYXBoW2ldKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0LkFkZChpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWRBc3NpZ25tZW50LkFkZChsaXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBza2lwOiA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIElzQ2hvb3NhYmxlKHRoaXMgSUdyYXBoX2xvbmcgZ3JhcGgsIGxvbmdbXSBjb2xvckdyYXBoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdyYXBoLklzQ2hvb3NhYmxlKGNvbG9yR3JhcGgsIEVudW1lcmFibGUuUmFuZ2UoMCwgZ3JhcGguTikuVG9fbG9uZygpLCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0Nob29zYWJsZSh0aGlzIElHcmFwaF9sb25nIGdyYXBoLCBsb25nW10gY29sb3JHcmFwaCwgbG9uZyBzdWJzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JhcGguSXNDaG9vc2FibGUoY29sb3JHcmFwaCwgc3Vic2V0LCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sIElzQ2hvb3NhYmxlKHRoaXMgSUdyYXBoX2xvbmcgZ3JhcGgsIGxvbmdbXSBjb2xvckdyYXBoLCBsb25nIGxpdmVWZXJ0ZXhCaXRzLCBpbnQgYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdyYXBoLkJlR3JlZWR5KGNvbG9yR3JhcGgsIHJlZiBsaXZlVmVydGV4Qml0cywgYyk7XHJcbiAgICAgICAgICAgIGlmIChsaXZlVmVydGV4Qml0cyA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIGlmICgobGl2ZVZlcnRleEJpdHMgJiB+Y29sb3JHcmFwaC5PcihjKSkgIT0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjaG9vc2FibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIFYgPSBjb2xvckdyYXBoW2NdICYgbGl2ZVZlcnRleEJpdHM7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBDIGluIGdyYXBoLk1heGltYWxJbmRlcGVuZGVudFN1YnNldHMoVikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChncmFwaC5Jc0Nob29zYWJsZShjb2xvckdyYXBoLCBsaXZlVmVydGV4Qml0cyBeIEMsIGMgKyAxKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjaG9vc2FibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2hvb3NhYmxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgQmVHcmVlZHkodGhpcyBJR3JhcGhfbG9uZyBncmFwaCwgbG9uZ1tdIGNvbG9yR3JhcGgsIHJlZiBsb25nIGxpdmVWZXJ0ZXhCaXRzLCBpbnQgYylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxCaXRzID0gbGl2ZVZlcnRleEJpdHM7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0cyA9IGxpdmVWZXJ0ZXhCaXRzO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGJpdHMgIT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gYml0cyAmIC1iaXRzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJpdHMgXj0gYml0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JDb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IGM7IGkgPCBjb2xvckdyYXBoLkxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChiaXQgJiBjb2xvckdyYXBoW2ldKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9yQ291bnQgPiBncmFwaC5EZWdyZWVJblNldChiaXQuRXh0cmFjdCgpLCBsaXZlVmVydGV4Qml0cykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpdmVWZXJ0ZXhCaXRzIF49IGJpdDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGl2ZVZlcnRleEJpdHMgPT0gb3JpZ2luYWxCaXRzKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSXNTdWJzZXRUd29Db2xvcmFibGUoQml0R3JhcGhfbG9uZyBnLCBsb25nIHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjID0gbmV3IGludFtnLk5dO1xyXG4gICAgICAgICAgICB2YXIgcSA9IG5ldyBpbnRbZy5OXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsZWZ0b3ZlciA9IHNldDtcclxuICAgICAgICAgICAgdmFyIHMgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAobGVmdG92ZXIgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSBsZWZ0b3Zlci5MZWFzdFNpZ25pZmljYW50Qml0KCk7XHJcbiAgICAgICAgICAgICAgICBxW3NdID0gcjtcclxuICAgICAgICAgICAgICAgIGNbcl0gPSAxO1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBzO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlIChzIDw9IGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBxW3MrK107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBnLk5laWdoYm9yc0luU2V0KHYsIHNldCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChuICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gbiAmIC1uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IGJpdC5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY1t3XSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxWysrZV0gPSB3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY1t3XSA9IDMgLSBjW3ZdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNbd10gIT0gMyAtIGNbdl0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbiBePSBiaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZWZ0b3ZlciBePSAoMUwgPDwgdik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgSGFzaGVkQXNzaWdubWVudF91bG9uZ1xyXG4gICAge1xyXG4gICAgICAgIHVsb25nW10gX2Fzc2lnbm1lbnQ7IFxyXG4gICAgICAgIGludCBfbGVuZ3RoO1xyXG5cdFx0aW50IF9oYXNoQ29kZTtcclxuXHJcbiAgICAgICAgcHVibGljIEhhc2hlZEFzc2lnbm1lbnRfdWxvbmcodWxvbmdbXSBhc3NpZ25tZW50LCBpbnQgaW5kZXgsIHVsb25nIG9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2Fzc2lnbm1lbnQgPSBuZXcgdWxvbmdbYXNzaWdubWVudC5MZW5ndGggLSBpbmRleF07XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGluZGV4OyBpIDwgYXNzaWdubWVudC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSAodWxvbmcpKGFzc2lnbm1lbnRbaV0gJiBvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoeCAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9hc3NpZ25tZW50W19sZW5ndGhdID0geDtcclxuICAgICAgICAgICAgICAgICAgICBfbGVuZ3RoKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEFycmF5LlNvcnQ8dWxvbmc+KF9hc3NpZ25tZW50LCAwLCBfbGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIF9oYXNoQ29kZSA9IEhhc2goX2Fzc2lnbm1lbnQsIF9sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50IEhhc2godWxvbmdbXSBsaXN0LCBpbnQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgaGFzaCA9IDUzODE7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBoYXNoID0gKHVsb25nKShsaXN0W2ldICsgKGhhc2ggPDwgNSkgKyBoYXNoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KWhhc2g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFcXVhbHMob2JqIGFzIEhhc2hlZEFzc2lnbm1lbnRfdWxvbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKEhhc2hlZEFzc2lnbm1lbnRfdWxvbmcgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbCB8fCBfbGVuZ3RoICE9IG90aGVyLl9sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGlmIChfYXNzaWdubWVudFtpXSAhPSBvdGhlci5fYXNzaWdubWVudFtpXSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9oYXNoQ29kZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgSGFzaGVkQXNzaWdubWVudF91aW50XHJcbiAgICB7XHJcbiAgICAgICAgdWludFtdIF9hc3NpZ25tZW50OyBcclxuICAgICAgICBpbnQgX2xlbmd0aDtcclxuXHRcdGludCBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBIYXNoZWRBc3NpZ25tZW50X3VpbnQodWludFtdIGFzc2lnbm1lbnQsIGludCBpbmRleCwgdWludCBvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9hc3NpZ25tZW50ID0gbmV3IHVpbnRbYXNzaWdubWVudC5MZW5ndGggLSBpbmRleF07XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGluZGV4OyBpIDwgYXNzaWdubWVudC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSAodWludCkoYXNzaWdubWVudFtpXSAmIG9uKTtcclxuICAgICAgICAgICAgICAgIGlmICh4ICE9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2Fzc2lnbm1lbnRbX2xlbmd0aF0gPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgIF9sZW5ndGgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQXJyYXkuU29ydDx1aW50PihfYXNzaWdubWVudCwgMCwgX2xlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSBIYXNoKF9hc3NpZ25tZW50LCBfbGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBIYXNoKHVpbnRbXSBsaXN0LCBpbnQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgaGFzaCA9IDUzODE7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBoYXNoID0gKHVsb25nKShsaXN0W2ldICsgKGhhc2ggPDwgNSkgKyBoYXNoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KWhhc2g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFcXVhbHMob2JqIGFzIEhhc2hlZEFzc2lnbm1lbnRfdWludCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoSGFzaGVkQXNzaWdubWVudF91aW50IG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwgfHwgX2xlbmd0aCAhPSBvdGhlci5fbGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBpZiAoX2Fzc2lnbm1lbnRbaV0gIT0gb3RoZXIuX2Fzc2lnbm1lbnRbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIGNsYXNzIEhhc2hlZEFzc2lnbm1lbnRfdXNob3J0XHJcbiAgICB7XHJcbiAgICAgICAgdXNob3J0W10gX2Fzc2lnbm1lbnQ7IFxyXG4gICAgICAgIGludCBfbGVuZ3RoO1xyXG5cdFx0aW50IF9oYXNoQ29kZTtcclxuXHJcbiAgICAgICAgcHVibGljIEhhc2hlZEFzc2lnbm1lbnRfdXNob3J0KHVzaG9ydFtdIGFzc2lnbm1lbnQsIGludCBpbmRleCwgdXNob3J0IG9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2Fzc2lnbm1lbnQgPSBuZXcgdXNob3J0W2Fzc2lnbm1lbnQuTGVuZ3RoIC0gaW5kZXhdO1xyXG4gICAgICAgICAgICBfbGVuZ3RoID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBpbmRleDsgaSA8IGFzc2lnbm1lbnQuTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gKHVzaG9ydCkoYXNzaWdubWVudFtpXSAmIG9uKTtcclxuICAgICAgICAgICAgICAgIGlmICh4ICE9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2Fzc2lnbm1lbnRbX2xlbmd0aF0gPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgIF9sZW5ndGgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQXJyYXkuU29ydDx1c2hvcnQ+KF9hc3NpZ25tZW50LCAwLCBfbGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIF9oYXNoQ29kZSA9IEhhc2goX2Fzc2lnbm1lbnQsIF9sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50IEhhc2godXNob3J0W10gbGlzdCwgaW50IGxlbmd0aClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIGhhc2ggPSA1MzgxO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgaGFzaCA9ICh1bG9uZykobGlzdFtpXSArIChoYXNoIDw8IDUpICsgaGFzaCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKGludCloYXNoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRXF1YWxzKG9iaiBhcyBIYXNoZWRBc3NpZ25tZW50X3VzaG9ydCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoSGFzaGVkQXNzaWdubWVudF91c2hvcnQgb3RoZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAob3RoZXIgPT0gbnVsbCB8fCBfbGVuZ3RoICE9IG90aGVyLl9sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGlmIChfYXNzaWdubWVudFtpXSAhPSBvdGhlci5fYXNzaWdubWVudFtpXSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9oYXNoQ29kZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgSGFzaGVkQXNzaWdubWVudF9ieXRlXHJcbiAgICB7XHJcbiAgICAgICAgYnl0ZVtdIF9hc3NpZ25tZW50OyBcclxuICAgICAgICBpbnQgX2xlbmd0aDtcclxuXHRcdGludCBfaGFzaENvZGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBIYXNoZWRBc3NpZ25tZW50X2J5dGUoYnl0ZVtdIGFzc2lnbm1lbnQsIGludCBpbmRleCwgYnl0ZSBvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9hc3NpZ25tZW50ID0gbmV3IGJ5dGVbYXNzaWdubWVudC5MZW5ndGggLSBpbmRleF07XHJcbiAgICAgICAgICAgIF9sZW5ndGggPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IGluZGV4OyBpIDwgYXNzaWdubWVudC5MZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSAoYnl0ZSkoYXNzaWdubWVudFtpXSAmIG9uKTtcclxuICAgICAgICAgICAgICAgIGlmICh4ICE9IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2Fzc2lnbm1lbnRbX2xlbmd0aF0gPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgIF9sZW5ndGgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQXJyYXkuU29ydDxieXRlPihfYXNzaWdubWVudCwgMCwgX2xlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBfaGFzaENvZGUgPSBIYXNoKF9hc3NpZ25tZW50LCBfbGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBIYXNoKGJ5dGVbXSBsaXN0LCBpbnQgbGVuZ3RoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWxvbmcgaGFzaCA9IDUzODE7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBoYXNoID0gKHVsb25nKShsaXN0W2ldICsgKGhhc2ggPDwgNSkgKyBoYXNoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoaW50KWhhc2g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgYm9vbCBFcXVhbHMob2JqZWN0IG9iailcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFcXVhbHMob2JqIGFzIEhhc2hlZEFzc2lnbm1lbnRfYnl0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFcXVhbHMoSGFzaGVkQXNzaWdubWVudF9ieXRlIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG90aGVyID09IG51bGwgfHwgX2xlbmd0aCAhPSBvdGhlci5fbGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBpZiAoX2Fzc2lnbm1lbnRbaV0gIT0gb3RoZXIuX2Fzc2lnbm1lbnRbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaGFzaENvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQml0TGV2ZWxHZW5lcmF0aW9uXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBNYXhpbWFsbmRlcGVuZGVudFNldFNlYXJjaGluZ1xyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxsb25nPiBHZW5lcmF0ZU1heGltYWxJbmRlcGVuZGVudFN1YnNldHMoQml0R3JhcGhfbG9uZyBnLCBsb25nIHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkID0gbmV3IGludFs2NF07XHJcblxyXG4gICAgICAgICAgICB2YXIgbiA9IHNldC5Qb3B1bGF0aW9uQ291bnREZW5zZSgpO1xyXG4gICAgICAgICAgICB2YXIgRCA9IG5ldyBsb25nW25dO1xyXG5cclxuICAgICAgICAgICAgdmFyIHEgPSBzZXQ7XHJcbiAgICAgICAgICAgIHdoaWxlIChxICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiaXQgPSBxICYgLXE7XHJcbiAgICAgICAgICAgICAgICB2YXIgdiA9IGJpdC5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZFt2XSA9IGcuRGVncmVlSW5TZXQodiwgc2V0KTtcclxuICAgICAgICAgICAgICAgIERbZFt2XV0gfD0gYml0O1xyXG5cclxuICAgICAgICAgICAgICAgIHEgXj0gYml0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgYml0cyA9IG5ldyBsb25nW25dO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBuOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKERbal0gIT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSBEW2pdICYgLURbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpdHNbbiAtIDEgLSBpXSA9IGJpdDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0gYml0LkV4dHJhY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGcuTmVpZ2hib3JzSW5TZXQodiwgc2V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChxICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiID0gcSAmIC1xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBiLkV4dHJhY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEW2RbeF1dIF49IGI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkW3hdLS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEW2RbeF1dIHw9IGI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcSBePSBiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQgXj0gYml0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEW2pdIF49IGJpdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gR2VuZXJhdGVNYXhpbWFsSW5kZXBlbmRlbnRTdWJzZXRzKGcsIGJpdHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIExpc3Q8bG9uZz4gR2VuZXJhdGVNYXhpbWFsSW5kZXBlbmRlbnRTdWJzZXRzKEJpdEdyYXBoX2xvbmcgZywgbG9uZ1tdIGJpdHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWlzID0gbmV3IExpc3Q8bG9uZz4oOCk7XHJcbiAgICAgICAgICAgIG1pcy5BZGQoMEwpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVhcmxpZXIgPSAwTDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBiaXRzLkxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYml0ID0gYml0c1tqXTtcclxuICAgICAgICAgICAgICAgIHZhciB2ID0gYml0LkV4dHJhY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSBtaXMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBtaXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE4gPSBnLk5laWdoYm9yc0luU2V0KHYsIG0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChOID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaXNbaV0gfD0gYml0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXAgPSBtICYgfk47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtcHAgPSBtcCB8IGJpdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHEgPSBOO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IGVhcmxpZXIgJiB+bXBwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHEgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBxICYgLXE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IGIuRXh0cmFjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBxcSA9IGcuTmVpZ2hib3JzSW5TZXQodywgbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocXEgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmIgPSBxcSAmIC1xcTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IGJiLkV4dHJhY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGcuTmVpZ2hib3JzSW5TZXQoeiwgbXBwKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIHNraXA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHFxIF49IGJiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgXj0gYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFggPSBnLk5laWdoYm9yc0luU2V0KHYsIGVhcmxpZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxID0gWCAmIH5OO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHEgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBxICYgLXE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IGIuRXh0cmFjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnLk5laWdoYm9yc0luU2V0KHcsIG1wKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFggXj0gYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgXj0gYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFggIT0gTilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFogPSAwTDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChaIDwgTilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBaID0gKFogLSBYKSAmIFg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoWiAmIE4pID09IFopXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWcuSXNJbmRlcGVuZGVudChaKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtbSA9IG1wIHwgWjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gZWFybGllciAmIH5tbTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gTiAmIH5aO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBxICYgLXE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ID0gYi5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcXEgPSBnLk5laWdoYm9yc0luU2V0KHcsIGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAocXEgIT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJiID0gcXEgJiAtcXE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IGJiLkV4dHJhY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZy5OZWlnaGJvcnNJblNldCh6LCBtbSkgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb3RvIG5vdE1heGltYWw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXEgXj0gYmI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgXj0gYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gc2tpcDtcclxubm90TWF4aW1hbDogO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaXMuQWRkKChtIHwgYml0KSAmIH5OKTtcclxuc2tpcDogO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlYXJsaWVyIHw9IGJpdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1pcztcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgTGV4aWNvZ3JhcGhpY2FsbHlGaXJzdENvbnRhaW5pbmcoQml0R3JhcGhfbG9uZyBnLCBsb25nIHNldCwgbG9uZyBTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc2V0IF49IFM7XHJcbiAgICAgICAgICAgIHdoaWxlIChzZXQgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpdCA9IHNldCAmIC1zZXQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgdiA9IGJpdC5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGcuTmVpZ2hib3JzSW5TZXQodiwgUykgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICBTIHw9IGJpdDtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXQgXj0gYml0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBQYXJlbnQoQml0R3JhcGhfbG9uZyBnLCBsb25nIHNldCwgbG9uZyBMRk1JUywgbG9uZyBTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGEgPSBMRk1JUyAmIH5TO1xyXG4gICAgICAgICAgICB2YXIgYml0ID0gYSAmIC1hO1xyXG4gICAgICAgICAgICB2YXIgdiA9IGJpdC5FeHRyYWN0KCk7XHJcbiAgICAgICAgICAgIHZhciBOID0gZy5OZWlnaGJvcnNJblNldCh2LCBTKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBMZXhpY29ncmFwaGljYWxseUZpcnN0Q29udGFpbmluZyhnLCBzZXQsIChTIHwgYml0KSBeIE4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nIExhdGVyKEJpdEdyYXBoX2xvbmcgZywgbG9uZyBzZXQsIGxvbmcgTEZNSVMsIGludCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHEgPSBnLk5laWdoYm9yc0luU2V0KHYsIHNldCBeIExGTUlTKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBlYXJsaWVyID0gKCgxTCA8PCB2KSAtIDEpICYgTEZNSVM7XHJcbiAgICAgICAgICAgIHZhciBsYXRlciA9IDBMO1xyXG4gICAgICAgICAgICB3aGlsZSAoc2V0ICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiaXQgPSBxICYgLXE7XHJcbiAgICAgICAgICAgICAgICB2YXIgdyA9IGJpdC5FeHRyYWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGcuTmVpZ2hib3JzSW5TZXQodywgZWFybGllcikgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICBsYXRlciB8PSBiaXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgcSBePSBiaXQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBsYXRlcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEdyYXBoaWNzTGF5ZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEFSR0JcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEFSR0IgQmFzaWNQYWxldHRlKGludCBxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHEgPT0gLTEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFSR0IoMjU1LCAyNTUsIDI1NSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRnJvbUhTTCgwLjYgKyAoZG91YmxlKVJldmVyc2VCaXRzKCh1aW50KXEpIC8gTWF0aC5Qb3coMi4wZiwgMzIpLCAxLjAsIDAuNjUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBBUkdCIEZyb21GcmFjdGlvbmFsKGRvdWJsZSBhLCBkb3VibGUgciwgZG91YmxlIGcsIGRvdWJsZSBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBUkdCKChpbnQpKGEgKiAyNTUpLCAoaW50KShyICogMjU1KSwgKGludCkoZyAqIDI1NSksIChpbnQpKGIgKiAyNTUpKTsgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEFSR0IgRnJvbUhTTChkb3VibGUgaCwgZG91YmxlIHMsIGRvdWJsZSBsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2hpbGUgKGggPiAxLjApXHJcbiAgICAgICAgICAgICAgICBoIC09IDEuMDtcclxuICAgICAgICAgICAgd2hpbGUgKHMgPiAxLjApXHJcbiAgICAgICAgICAgICAgICBzIC09IDEuMDtcclxuICAgICAgICAgICAgd2hpbGUgKGwgPiAxLjApXHJcbiAgICAgICAgICAgICAgICBsIC09IDEuMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChzID09IDAuMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBGcm9tRnJhY3Rpb25hbCgxLjAsIGwsIGwsIGwpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHEgPSBsIDwgMC41ID8gbCAqICgxLjAgKyBzKSA6IGwgKyBzIC0gbCAqIHM7XHJcbiAgICAgICAgICAgIHZhciBwID0gMi4wICogbCAtIHE7XHJcbiAgICAgICAgICAgIHZhciByID0gSHVlVG9SZ2IocCwgcSwgaCArIDEuMCAvIDMuMCk7XHJcbiAgICAgICAgICAgIHZhciBnID0gSHVlVG9SZ2IocCwgcSwgaCk7XHJcbiAgICAgICAgICAgIHZhciBiID0gSHVlVG9SZ2IocCwgcSwgaCAtIDEuMCAvIDMuMCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRnJvbUZyYWN0aW9uYWwoMS4wLCByLCBnLCBiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBkb3VibGUgSHVlVG9SZ2IoZG91YmxlIHAsIGRvdWJsZSBxLCBkb3VibGUgdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0IDwgMC4wKSB0ICs9IDEuMGY7XHJcbiAgICAgICAgICAgIGlmICh0ID4gMS4wKSB0IC09IDEuMDtcclxuICAgICAgICAgICAgaWYgKHQgPCAxLjAgLyA2LjApIHJldHVybiBwICsgKHEgLSBwKSAqIDYuMCAqIHQ7XHJcbiAgICAgICAgICAgIGlmICh0IDwgMS4wIC8gMi4wKSByZXR1cm4gcTtcclxuICAgICAgICAgICAgaWYgKHQgPCAyLjAgLyAzLjApIHJldHVybiBwICsgKHEgLSBwKSAqICgyLjAgLyAzLjAgLSB0KSAqIDYuMDtcclxuICAgICAgICAgICAgcmV0dXJuIHA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdWludCBSZXZlcnNlQml0cyh1aW50IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB1aW50IHkgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDMyOyBpKyspXHJcbiAgICAgICAgICAgICAgICB5IHw9ICh1aW50KSgoeCAmICgxIDw8IGkpKSA8PCAoMzEgLSAyICogaSkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IEEgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgUiB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBHIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IEIgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgQVJHQihpbnQgYSwgaW50IHIsIGludCBnLCBpbnQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEEgPSBhO1xyXG4gICAgICAgICAgICBSID0gcjtcclxuICAgICAgICAgICAgRyA9IGc7XHJcbiAgICAgICAgICAgIEIgPSBiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgQVJHQihpbnQgciwgaW50IGcsIGludCBiKVxyXG4gICAgICAgICAgICA6IHRoaXMoMjU1LCByLCBnLCBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Gb3JtYXQoXCJ7MH0sezF9LHsyfSx7M31cIiwgQSwgUiwgRywgQik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaGljc0xheWVyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBCb3hcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEJveCBFbXB0eSA9IG5ldyBCb3goMCwgMCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgVG9wIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgZG91YmxlIExlZnQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgV2lkdGggeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgSGVpZ2h0IHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBYIHsgZ2V0IHsgcmV0dXJuIExlZnQ7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgWSB7IGdldCB7IHJldHVybiBUb3A7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgUmlnaHQgeyBnZXQgeyByZXR1cm4gTGVmdCArIFdpZHRoOyB9IH1cclxuICAgICAgICBwdWJsaWMgZG91YmxlIEJvdHRvbSB7IGdldCB7IHJldHVybiBUb3AgKyBIZWlnaHQ7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgQm94KGRvdWJsZSBsZWZ0LCBkb3VibGUgdG9wKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGVmdCA9IGxlZnQ7XHJcbiAgICAgICAgICAgIFRvcCA9IHRvcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEJveChkb3VibGUgbGVmdCwgZG91YmxlIHRvcCwgZG91YmxlIHdpZHRoLCBkb3VibGUgaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGVmdCA9IGxlZnQ7XHJcbiAgICAgICAgICAgIFRvcCA9IHRvcDtcclxuICAgICAgICAgICAgV2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgSGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgSW5mbGF0ZShkb3VibGUgeCwgZG91YmxlIHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMZWZ0IC09IHg7XHJcbiAgICAgICAgICAgIFRvcCAtPSB5O1xyXG4gICAgICAgICAgICBXaWR0aCArPSAyICogeDtcclxuICAgICAgICAgICAgSGVpZ2h0ICs9IDIgKiB5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWlucyhkb3VibGUgeCwgZG91YmxlIHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gTGVmdCA8PSB4ICYmIHggPD0gUmlnaHQgJiZcclxuICAgICAgICAgICAgICAgICAgIFRvcCA8PSB5ICYmIHkgPD0gQm90dG9tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBDb250YWlucyhCb3ggYm94KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIExlZnQgPD0gYm94LkxlZnQgJiYgYm94LlJpZ2h0IDw9IFJpZ2h0ICYmXHJcbiAgICAgICAgICAgICAgICAgICBUb3AgPD0gYm94LlRvcCAmJiBib3guQm90dG9tIDw9IEJvdHRvbTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEdyYXBoaWNzTGF5ZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEZvbnRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWUgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgU2l6ZSB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBGb250KHN0cmluZyBuYW1lLCBpbnQgc2l6ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICBTaXplID0gc2l6ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLklPO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxuXHJcbi8vLyA8c3VtbWFyeT5cclxuLy8vIEMjIGltcGxlbWVudGF0aW9uIG9mIEFTQ0lJODUgZW5jb2RpbmcuIFxyXG4vLy8gQmFzZWQgb24gQyBjb2RlIGZyb20gaHR0cDovL3d3dy5zdGlsbGhxLmNvbS9jZ2ktYmluL2N2c3dlYi9hc2NpaTg1L1xyXG4vLy8gPC9zdW1tYXJ5PlxyXG4vLy8gPHJlbWFya3M+XHJcbi8vLyBKZWZmIEF0d29vZFxyXG4vLy8gaHR0cDovL3d3dy5jb2Rpbmdob3Jyb3IuY29tL2Jsb2cvYXJjaGl2ZXMvMDAwNDEwLmh0bWxcclxuLy8vIDwvcmVtYXJrcz5cclxubmFtZXNwYWNlIEdyYXBoc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQXNjaWk4NVxyXG4gICAge1xyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gUHJlZml4IG1hcmsgdGhhdCBpZGVudGlmaWVzIGFuIGVuY29kZWQgQVNDSUk4NSBzdHJpbmcsIHRyYWRpdGlvbmFsbHkgJzx+J1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBQcmVmaXhNYXJrID0gXCJcIjtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIFN1ZmZpeCBtYXJrIHRoYXQgaWRlbnRpZmllcyBhbiBlbmNvZGVkIEFTQ0lJODUgc3RyaW5nLCB0cmFkaXRpb25hbGx5ICd+PidcclxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgU3VmZml4TWFyayA9IFwiXCI7XHJcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAgIC8vLyBNYXhpbXVtIGxpbmUgbGVuZ3RoIGZvciBlbmNvZGVkIEFTQ0lJODUgc3RyaW5nOyBcclxuICAgICAgICAvLy8gc2V0IHRvIHplcm8gZm9yIG9uZSB1bmJyb2tlbiBsaW5lLlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgcHVibGljIGludCBMaW5lTGVuZ3RoID0gMDtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEFkZCB0aGUgUHJlZml4IGFuZCBTdWZmaXggbWFya3Mgd2hlbiBlbmNvZGluZywgYW5kIGVuZm9yY2UgdGhlaXIgcHJlc2VuY2UgZm9yIGRlY29kaW5nXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICBwdWJsaWMgYm9vbCBFbmZvcmNlTWFya3MgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjb25zdCBpbnQgX2FzY2lpT2Zmc2V0ID0gMzM7XHJcbiAgICAgICAgcHJpdmF0ZSBieXRlW10gX2VuY29kZWRCbG9jayA9IG5ldyBieXRlWzVdO1xyXG4gICAgICAgIHByaXZhdGUgYnl0ZVtdIF9kZWNvZGVkQmxvY2sgPSBuZXcgYnl0ZVs0XTtcclxuICAgICAgICBwcml2YXRlIHVpbnQgX3R1cGxlID0gMDtcclxuICAgICAgICBwcml2YXRlIGludCBfbGluZVBvcyA9IDA7XHJcblxyXG4gICAgICAgIHByaXZhdGUgdWludFtdIHBvdzg1ID0geyA4NSAqIDg1ICogODUgKiA4NSwgODUgKiA4NSAqIDg1LCA4NSAqIDg1LCA4NSwgMSB9O1xyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIERlY29kZXMgYW4gQVNDSUk4NSBlbmNvZGVkIHN0cmluZyBpbnRvIHRoZSBvcmlnaW5hbCBiaW5hcnkgZGF0YVxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic1wiPkFTQ0lJODUgZW5jb2RlZCBzdHJpbmc8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cmV0dXJucz5ieXRlIGFycmF5IG9mIGRlY29kZWQgYmluYXJ5IGRhdGE8L3JldHVybnM+XHJcbiAgICAgICAgcHVibGljIGJ5dGVbXSBEZWNvZGUoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoRW5mb3JjZU1hcmtzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXMuU3RhcnRzV2l0aChQcmVmaXhNYXJrKSB8ICFzLkVuZHNXaXRoKFN1ZmZpeE1hcmspKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJBU0NJSTg1IGVuY29kZWQgZGF0YSBzaG91bGQgYmVnaW4gd2l0aCAnXCIgKyBQcmVmaXhNYXJrICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCInIGFuZCBlbmQgd2l0aCAnXCIgKyBTdWZmaXhNYXJrICsgXCInXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBzdHJpcCBwcmVmaXggYW5kIHN1ZmZpeCBpZiBwcmVzZW50XHJcbiAgICAgICAgICAgIGlmIChzLlN0YXJ0c1dpdGgoUHJlZml4TWFyaykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHMgPSBzLlN1YnN0cmluZyhQcmVmaXhNYXJrLkxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHMuRW5kc1dpdGgoU3VmZml4TWFyaykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHMgPSBzLlN1YnN0cmluZygwLCBzLkxlbmd0aCAtIFN1ZmZpeE1hcmsuTGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIG1zID0gbmV3IExpc3Q8Ynl0ZT4oKTtcclxuICAgICAgICAgICAgaW50IGNvdW50ID0gMDtcclxuICAgICAgICAgICAgYm9vbCBwcm9jZXNzQ2hhciA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAoY2hhciBjIGluIHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICd6JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJUaGUgY2hhcmFjdGVyICd6JyBpcyBpbnZhbGlkIGluc2lkZSBhbiBBU0NJSTg1IGJsb2NrLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZGVjb2RlZEJsb2NrWzBdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RlY29kZWRCbG9ja1sxXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kZWNvZGVkQmxvY2tbMl0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZGVjb2RlZEJsb2NrWzNdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXMuQWRkUmFuZ2UoX2RlY29kZWRCbG9jayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NDaGFyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1xcbic6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXFxyJzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdcXHQnOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1xcMCc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXFxmJzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdcXGInOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzQ2hhciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA8ICchJyB8fCBjID4gJ3UnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiQmFkIGNoYXJhY3RlciAnXCIgKyBjICsgXCInIGZvdW5kLiBBU0NJSTg1IG9ubHkgYWxsb3dzIGNoYXJhY3RlcnMgJyEnIHRvICd1Jy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0NoYXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJvY2Vzc0NoYXIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3R1cGxlICs9ICgodWludCkoYyAtIF9hc2NpaU9mZnNldCkgKiBwb3c4NVtjb3VudF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ID09IF9lbmNvZGVkQmxvY2suTGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlQmxvY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXMuQWRkUmFuZ2UoX2RlY29kZWRCbG9jayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90dXBsZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgc29tZSBieXRlcyBsZWZ0IG92ZXIgYXQgdGhlIGVuZC4uXHJcbiAgICAgICAgICAgIGlmIChjb3VudCAhPSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiVGhlIGxhc3QgYmxvY2sgb2YgQVNDSUk4NSBkYXRhIGNhbm5vdCBiZSBhIHNpbmdsZSBieXRlLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvdW50LS07XHJcbiAgICAgICAgICAgICAgICBfdHVwbGUgKz0gcG93ODVbY291bnRdO1xyXG4gICAgICAgICAgICAgICAgRGVjb2RlQmxvY2soY291bnQpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1zLkFkZChfZGVjb2RlZEJsb2NrW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1zLlRvQXJyYXkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyA8c3VtbWFyeT5cclxuICAgICAgICAvLy8gRW5jb2RlcyBiaW5hcnkgZGF0YSBpbnRvIGEgcGxhaW50ZXh0IEFTQ0lJODUgZm9ybWF0IHN0cmluZ1xyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiYmFcIj5iaW5hcnkgZGF0YSB0byBlbmNvZGU8L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cmV0dXJucz5BU0NJSTg1IGVuY29kZWQgc3RyaW5nPC9yZXR1cm5zPlxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgRW5jb2RlKGJ5dGVbXSBiYSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFN0cmluZ0J1aWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigoaW50KShiYS5MZW5ndGggKiAoX2VuY29kZWRCbG9jay5MZW5ndGggLyBfZGVjb2RlZEJsb2NrLkxlbmd0aCkpKTtcclxuICAgICAgICAgICAgX2xpbmVQb3MgPSAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKEVuZm9yY2VNYXJrcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQXBwZW5kU3RyaW5nKHNiLCBQcmVmaXhNYXJrKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaW50IGNvdW50ID0gMDtcclxuICAgICAgICAgICAgX3R1cGxlID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCAoYnl0ZSBiIGluIGJhKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPj0gX2RlY29kZWRCbG9jay5MZW5ndGggLSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF90dXBsZSB8PSBiO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdHVwbGUgPT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFwcGVuZENoYXIoc2IsICd6Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEVuY29kZUJsb2NrKHNiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgX3R1cGxlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3R1cGxlIHw9ICh1aW50KShiIDw8ICgyNCAtIChjb3VudCAqIDgpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBzb21lIGJ5dGVzIGxlZnQgb3ZlciBhdCB0aGUgZW5kLi5cclxuICAgICAgICAgICAgaWYgKGNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgRW5jb2RlQmxvY2soY291bnQgKyAxLCBzYik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChFbmZvcmNlTWFya3MpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFwcGVuZFN0cmluZyhzYiwgU3VmZml4TWFyayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNiLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgRW5jb2RlQmxvY2soU3RyaW5nQnVpbGRlciBzYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEVuY29kZUJsb2NrKF9lbmNvZGVkQmxvY2suTGVuZ3RoLCBzYik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgRW5jb2RlQmxvY2soaW50IGNvdW50LCBTdHJpbmdCdWlsZGVyIHNiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IF9lbmNvZGVkQmxvY2suTGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9lbmNvZGVkQmxvY2tbaV0gPSAoYnl0ZSkoKF90dXBsZSAlIDg1KSArIF9hc2NpaU9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICBfdHVwbGUgLz0gODU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2hhciBjID0gKGNoYXIpX2VuY29kZWRCbG9ja1tpXTtcclxuICAgICAgICAgICAgICAgIEFwcGVuZENoYXIoc2IsIGMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2b2lkIERlY29kZUJsb2NrKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIERlY29kZUJsb2NrKF9kZWNvZGVkQmxvY2suTGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBEZWNvZGVCbG9jayhpbnQgYnl0ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJ5dGVzOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9kZWNvZGVkQmxvY2tbaV0gPSAoYnl0ZSkoX3R1cGxlID4+IDI0IC0gKGkgKiA4KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdm9pZCBBcHBlbmRTdHJpbmcoU3RyaW5nQnVpbGRlciBzYiwgc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoTGluZUxlbmd0aCA+IDAgJiYgKF9saW5lUG9zICsgcy5MZW5ndGggPiBMaW5lTGVuZ3RoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX2xpbmVQb3MgPSAwO1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kKCdcXHInKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZCgnXFxuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfbGluZVBvcyArPSBzLkxlbmd0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzYi5BcHBlbmQocyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZvaWQgQXBwZW5kQ2hhcihTdHJpbmdCdWlsZGVyIHNiLCBjaGFyIGMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzYi5BcHBlbmQoYyk7XHJcbiAgICAgICAgICAgIF9saW5lUG9zKys7XHJcbiAgICAgICAgICAgIGlmIChMaW5lTGVuZ3RoID4gMCAmJiAoX2xpbmVQb3MgPj0gTGluZUxlbmd0aCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9saW5lUG9zID0gMDtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZCgnXFxyJyk7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmQoJ1xcbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBHcmFwaGljc0xheWVyO1xyXG5cclxubmFtZXNwYWNlIEdyYXBoc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgUG9seWdvbkNvbnRhaW5lclxyXG4gICAge1xyXG4gICAgICAgIElMaXN0PEJveD4gX2RvdHM7XHJcbiAgICAgICAgQm94IF9ib3VuZGluZ0JveDtcclxuXHJcbiAgICAgICAgcHVibGljIFBvbHlnb25Db250YWluZXIoSUxpc3Q8Qm94PiBkb3RzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2RvdHMgPSBkb3RzO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1pbnggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1pbjxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94PihfZG90cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94LCBkb3VibGU+KShkb3QgPT4gZG90LlgpKTtcclxuICAgICAgICAgICAgdmFyIG1heHggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1heDxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94PihfZG90cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94LCBkb3VibGU+KShkb3QgPT4gZG90LlgpKTtcclxuICAgICAgICAgICAgdmFyIG1pbnkgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1pbjxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94PihfZG90cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94LCBkb3VibGU+KShkb3QgPT4gZG90LlkpKTtcclxuICAgICAgICAgICAgdmFyIG1heHkgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1heDxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94PihfZG90cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBoaWNzTGF5ZXIuQm94LCBkb3VibGU+KShkb3QgPT4gZG90LlkpKTtcclxuXHJcbiAgICAgICAgICAgIF9ib3VuZGluZ0JveCA9IG5ldyBCb3gobWlueCwgbWlueSwgbWF4eCAtIG1pbngsIG1heHkgLSBtaW55KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIENvbnRhaW5zKEJveCBkb3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIV9ib3VuZGluZ0JveC5Db250YWlucyhkb3QpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbnRhaW5zID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBqID0gX2RvdHMuQ291bnQgLSAxO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfZG90cy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKF9kb3RzW2ldLlkgPD0gZG90LlkgJiYgZG90LlkgPCBfZG90c1tqXS5ZIHx8IF9kb3RzW2pdLlkgPD0gZG90LlkgJiYgZG90LlkgPCBfZG90c1tpXS5ZKSAmJiAgZG90LlggPCAoX2RvdHNbal0uWCAtIF9kb3RzW2ldLlgpICogKGRvdC5ZIC0gX2RvdHNbaV0uWSkgLyAoX2RvdHNbal0uWSAtIF9kb3RzW2ldLlkpICsgX2RvdHNbaV0uWClcclxuICAgICAgICAgICAgICAgICAgICBjb250YWlucyA9ICFjb250YWlucztcclxuXHJcbiAgICAgICAgICAgICAgICBqID0gaTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5zO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5SdW50aW1lLlNlcmlhbGl6YXRpb247XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEdyYXBoc1xyXG57XHJcbiAgICBbRGF0YUNvbnRyYWN0KE5hbWUgPSBcIlZlY3RvclwiKV1cclxuICAgIHB1YmxpYyBjbGFzcyBTZXJpYWxpemF0aW9uVmVjdG9yXHJcbiAgICB7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBYO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgWTtcclxuXHJcbiAgICAgICAgcHVibGljIFNlcmlhbGl6YXRpb25WZWN0b3IoKSB7IH1cclxuICAgICAgICBwdWJsaWMgU2VyaWFsaXphdGlvblZlY3RvcihWZWN0b3IgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFggPSB2Llg7XHJcbiAgICAgICAgICAgIFkgPSB2Llk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgW0RhdGFDb250cmFjdChOYW1lID0gXCJWZXJ0ZXhcIildXHJcbiAgICBwdWJsaWMgY2xhc3MgU2VyaWFsaXphdGlvblZlcnRleFxyXG4gICAge1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBTZXJpYWxpemF0aW9uVmVjdG9yIExvY2F0aW9uO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTGFiZWw7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIGZsb2F0IFBhZGRpbmc7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBTdHlsZTtcclxuXHJcbiAgICAgICAgcHVibGljIFNlcmlhbGl6YXRpb25WZXJ0ZXgoKSB7IH1cclxuICAgICAgICBwdWJsaWMgU2VyaWFsaXphdGlvblZlcnRleChWZXJ0ZXggdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExvY2F0aW9uID0gbmV3IFNlcmlhbGl6YXRpb25WZWN0b3Iodi5Mb2NhdGlvbik7XHJcbiAgICAgICAgICAgIExhYmVsID0gdi5MYWJlbDtcclxuICAgICAgICAgICAgUGFkZGluZyA9IHYuUGFkZGluZztcclxuICAgICAgICAgICAgU3R5bGUgPSB2LlN0eWxlID8/IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgW0RhdGFDb250cmFjdChOYW1lID0gXCJFZGdlXCIpXVxyXG4gICAgcHVibGljIGNsYXNzIFNlcmlhbGl6YXRpb25FZGdlXHJcbiAgICB7XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIGludCBJbmRleFYxO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBpbnQgSW5kZXhWMjtcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgRWRnZS5PcmllbnRhdGlvbnMgT3JpZW50YXRpb247XHJcbiAgICAgICAgW0RhdGFNZW1iZXJdXHJcbiAgICAgICAgcHVibGljIGZsb2F0IFRoaWNrbmVzcztcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgaW50IE11bHRpcGxpY2l0eTtcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFN0eWxlO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTGFiZWw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXJpYWxpemF0aW9uRWRnZSgpIHsgfVxyXG4gICAgICAgIHB1YmxpYyBTZXJpYWxpemF0aW9uRWRnZShFZGdlIGUsIExpc3Q8VmVydGV4PiB2ZXJ0aWNlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEluZGV4VjEgPSB2ZXJ0aWNlcy5JbmRleE9mKGUuVjEpO1xyXG4gICAgICAgICAgICBJbmRleFYyID0gdmVydGljZXMuSW5kZXhPZihlLlYyKTtcclxuICAgICAgICAgICAgT3JpZW50YXRpb24gPSBlLk9yaWVudGF0aW9uO1xyXG4gICAgICAgICAgICBUaGlja25lc3MgPSBlLlRoaWNrbmVzcztcclxuICAgICAgICAgICAgTXVsdGlwbGljaXR5ID0gZS5NdWx0aXBsaWNpdHk7XHJcbiAgICAgICAgICAgIFN0eWxlID0gZS5TdHlsZSA/PyBcIlwiO1xyXG4gICAgICAgICAgICBMYWJlbCA9IGUuTGFiZWwgPz8gXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGlmIChTdHlsZSA9PSBcIlwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoT3JpZW50YXRpb24gPT0gRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZClcclxuICAgICAgICAgICAgICAgICAgICBTdHlsZSA9IGUuU3R5bGUgPSBcInBvc3RcIjtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKE9yaWVudGF0aW9uID09IEVkZ2UuT3JpZW50YXRpb25zLkJhY2t3YXJkKVxyXG4gICAgICAgICAgICAgICAgICAgIFN0eWxlID0gZS5TdHlsZSA9IFwicHJlXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBbRGF0YUNvbnRyYWN0KE5hbWUgPSBcIkdyYXBoXCIpXVxyXG4gICAgcHVibGljIGNsYXNzIFNlcmlhbGl6YXRpb25HcmFwaFxyXG4gICAge1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFNlcmlhbGl6YXRpb25WZXJ0ZXg+IFZlcnRpY2VzO1xyXG4gICAgICAgIFtEYXRhTWVtYmVyXVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFNlcmlhbGl6YXRpb25FZGdlPiBFZGdlcztcclxuICAgICAgICBbRGF0YU1lbWJlcl1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBTZXJpYWxpemF0aW9uR3JhcGgoKSB7IH1cclxuICAgICAgICBwdWJsaWMgU2VyaWFsaXphdGlvbkdyYXBoKEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBWZXJ0aWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6R3JhcGhzLlZlcnRleCxnbG9iYWw6OkdyYXBocy5TZXJpYWxpemF0aW9uVmVydGV4PihnLlZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlZlcnRleCwgZ2xvYmFsOjpHcmFwaHMuU2VyaWFsaXphdGlvblZlcnRleD4pKHYgPT4gbmV3IFNlcmlhbGl6YXRpb25WZXJ0ZXgodikpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgRWRnZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkdyYXBocy5FZGdlLGdsb2JhbDo6R3JhcGhzLlNlcmlhbGl6YXRpb25FZGdlPihnLkVkZ2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLkVkZ2UsIGdsb2JhbDo6R3JhcGhzLlNlcmlhbGl6YXRpb25FZGdlPikoZSA9PiBuZXcgU2VyaWFsaXphdGlvbkVkZ2UoZSwgZy5WZXJ0aWNlcykpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgTmFtZSA9IGcuTmFtZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxudXNpbmcgU3lzdGVtLklPO1xyXG51c2luZyBTeXN0ZW0uUnVudGltZS5TZXJpYWxpemF0aW9uO1xyXG51c2luZyBHcmFwaGljc0xheWVyO1xyXG5cclxubmFtZXNwYWNlIEdyYXBoc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIFV0aWxpdHlcclxuICAgIHtcclxuICAgICAgICAjcmVnaW9uIGdlb21ldHJ5IHN0dWZmXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBCb3ggUm90YXRlQXJvdW5kUG9pbnQoQm94IHYsIEJveCBjZW50ZXIsIGRvdWJsZSBhbmdsZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gY2VudGVyLlggKyAodi5YIC0gY2VudGVyLlgpICogTWF0aC5Db3MoYW5nbGUpIC0gKHYuWSAtIGNlbnRlci5ZKSAqIE1hdGguU2luKGFuZ2xlKTtcclxuICAgICAgICAgICAgdmFyIHkgPSBjZW50ZXIuWSArICh2LlggLSBjZW50ZXIuWCkgKiBNYXRoLlNpbihhbmdsZSkgKyAodi5ZIC0gY2VudGVyLlkpICogTWF0aC5Db3MoYW5nbGUpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3goeCwgeSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFZlY3RvciBSb3RhdGVBcm91bmRQb2ludChWZWN0b3IgdiwgVmVjdG9yIGNlbnRlciwgZG91YmxlIGFuZ2xlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBjZW50ZXIuWCArICh2LlggLSBjZW50ZXIuWCkgKiBNYXRoLkNvcyhhbmdsZSkgLSAodi5ZIC0gY2VudGVyLlkpICogTWF0aC5TaW4oYW5nbGUpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGNlbnRlci5ZICsgKHYuWCAtIGNlbnRlci5YKSAqIE1hdGguU2luKGFuZ2xlKSArICh2LlkgLSBjZW50ZXIuWSkgKiBNYXRoLkNvcyhhbmdsZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih4LCB5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yIFBvbGFyVG9SZWN0YW5ndWxhcihkb3VibGUgciwgZG91YmxlIHRoZXRhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IociAqIE1hdGguQ29zKHRoZXRhKSwgciAqIE1hdGguU2luKHRoZXRhKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgSGF2ZUludGVyc2VjdGlvbihCb3ggc3RhcnQxLCBCb3ggZW5kMSwgQm94IHN0YXJ0MiwgQm94IGVuZDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZGVub20gPSAoKGVuZDEuWCAtIHN0YXJ0MS5YKSAqIChlbmQyLlkgLSBzdGFydDIuWSkpIC0gKChlbmQxLlkgLSBzdGFydDEuWSkgKiAoZW5kMi5YIC0gc3RhcnQyLlgpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkZW5vbSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIG51bWVyID0gKChzdGFydDEuWSAtIHN0YXJ0Mi5ZKSAqIChlbmQyLlggLSBzdGFydDIuWCkpIC0gKChzdGFydDEuWCAtIHN0YXJ0Mi5YKSAqIChlbmQyLlkgLSBzdGFydDIuWSkpO1xyXG4gICAgICAgICAgICB2YXIgciA9IG51bWVyIC8gZGVub207XHJcbiAgICAgICAgICAgIHZhciBudW1lcjIgPSAoKHN0YXJ0MS5ZIC0gc3RhcnQyLlkpICogKGVuZDEuWCAtIHN0YXJ0MS5YKSkgLSAoKHN0YXJ0MS5YIC0gc3RhcnQyLlgpICogKGVuZDEuWSAtIHN0YXJ0MS5ZKSk7XHJcbiAgICAgICAgICAgIHZhciBzID0gbnVtZXIyIC8gZGVub207XHJcblxyXG4gICAgICAgICAgICBpZiAociA8IDAgfHwgciA+IDEgfHwgcyA8IDAgfHwgcyA+IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAvLyNyZWdpb24gc3RyaW5nIHN0dWZmXHJcbiAgICAgICAgLy9wdWJsaWMgc3RhdGljIHN0cmluZyBDb21wcmVzcyhzdHJpbmcgcylcclxuICAgICAgICAvL3tcclxuICAgICAgICAvLyAgICB2YXIgdW5jb21wcmVzc2VkID0gRW5jb2RpbmcuVW5pY29kZS5HZXRCeXRlcyhzKTtcclxuICAgICAgICAvLyAgICB2YXIgY29tcHJlc3NlZCA9IFF1aWNrTFouY29tcHJlc3ModW5jb21wcmVzc2VkKTtcclxuICAgICAgICAvLyAgICByZXR1cm4gQ29udmVydC5Ub0Jhc2U2NFN0cmluZyhjb21wcmVzc2VkKTtcclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgLy9wdWJsaWMgc3RhdGljIHN0cmluZyBEZWNvbXByZXNzKHN0cmluZyBzKVxyXG4gICAgICAgIC8ve1xyXG4gICAgICAgIC8vICAgIHZhciBjb21wcmVzc2VkID0gQ29udmVydC5Gcm9tQmFzZTY0U3RyaW5nKHMpO1xyXG4gICAgICAgIC8vICAgIHZhciB1bmNvbXByZXNzZWQgPSBRdWlja0xaLmRlY29tcHJlc3MoY29tcHJlc3NlZCk7XHJcbiAgICAgICAgLy8gICAgcmV0dXJuIEVuY29kaW5nLlVuaWNvZGUuR2V0U3RyaW5nKHVuY29tcHJlc3NlZCwgMCwgdW5jb21wcmVzc2VkLkxlbmd0aCk7XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgLy8jZW5kcmVnaW9uXHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIEdyYXBoaWNzTGF5ZXI7XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBWZWN0b3JcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgVmVjdG9yKGRvdWJsZSB4LCBkb3VibGUgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9YID0geDtcclxuICAgICAgICAgICAgX1kgPSB5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBMZW5ndGhcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5TcXJ0KF9YICogX1ggKyBfWSAqIF9ZKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgTm9ybWFsaXplKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBMZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBfWCA9IF9YIC8gbGVuZ3RoO1xyXG4gICAgICAgICAgICBfWSA9IF9ZIC8gbGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGxlbmd0aCA+IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZG91YmxlIERvdChWZWN0b3IgdmVjdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9YICogdmVjdG9yLl9YICsgX1kgKiB2ZWN0b3IuX1k7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZG91YmxlIERpc3RhbmNlKFZlY3RvciB2ZWN0b3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gKGRvdWJsZSlNYXRoLlNxcnQoTWF0aC5Qb3codmVjdG9yLl9YIC0gX1gsIDIpICsgTWF0aC5Qb3codmVjdG9yLl9ZIC0gX1ksIDIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yIG9wZXJhdG9yICsoVmVjdG9yIGEsIFZlY3RvciBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoYS5fWCArIGIuX1gsIGEuX1kgKyBiLl9ZKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgVmVjdG9yIG9wZXJhdG9yIC0oVmVjdG9yIGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcigtYS5fWCwgLWEuX1kpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3Igb3BlcmF0b3IgLShWZWN0b3IgYSwgVmVjdG9yIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihhLl9YIC0gYi5fWCwgYS5fWSAtIGIuX1kpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3Igb3BlcmF0b3IgKihWZWN0b3IgYSwgZG91YmxlIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihhLl9YICogYiwgYS5fWSAqIGIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBWZWN0b3Igb3BlcmF0b3IgKihWZWN0b3IgYSwgaW50IGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihhLl9YICogYiwgYS5fWSAqIGIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIShvYmogaXMgVmVjdG9yKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIFZlY3RvciB2ID0gKFZlY3RvcilvYmo7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gRXF1YWxzKHYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKFZlY3RvciB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9YID09IHYuX1ggJiYgX1kgPT0gdi5fWTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBpbnQgR2V0SGFzaENvZGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRvU3RyaW5nKCkuR2V0SGFzaENvZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBvcGVyYXRvciA9PShWZWN0b3IgYSwgVmVjdG9yIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gYS5FcXVhbHMoYik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJvb2wgb3BlcmF0b3IgIT0oVmVjdG9yIGEsIFZlY3RvciBiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuICEoYSA9PSBiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW1wbGljaXQgb3BlcmF0b3IgQm94KFZlY3RvciB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3godi5YLCB2LlkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gXCIoXCIgKyBfWCArIFwiLCBcIiArIF9ZICsgXCIpXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZG91YmxlIFhcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX1g7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9YID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBZXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9ZO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfWSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb3VibGUgX1g7XHJcbiAgICAgICAgZG91YmxlIF9ZO1xyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEdyYXBocztcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLklPO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBHcmFwaHNDb3JlXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQ29tcGFjdFNlcmlhbGl6ZXJcclxuICAgIHtcclxuICAgICAgICBjb25zdCBpbnQgU2NhbGUgPSAxMDAwMDtcclxuICAgICAgICBjb25zdCBzdHJpbmcgUHJlZml4ID0gXCJ3ZWJncmFwaDpcIjtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBib29sIExvb2tzTGlrZUFTZXJpYWxpemVkR3JhcGgoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gIXN0cmluZy5Jc051bGxPckVtcHR5KHMpICYmIHMuU3RhcnRzV2l0aChQcmVmaXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgU2VyaWFsaXplKEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYnl0ZXMgPSBTZXJpYWxpemVUb0J5dGVBcnJheShnKTtcclxuICAgICAgICAgICAgdmFyIGNvbXByZXNzZWQgPSBRdWlja0xaLmNvbXByZXNzKGJ5dGVzKTtcclxuICAgICAgICAgICAgdmFyIEFzY2lpODUgPSBuZXcgQXNjaWk4NSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJlZml4ICsgQXNjaWk4NS5FbmNvZGUoY29tcHJlc3NlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYnl0ZVtdIFNlcmlhbGl6ZVRvQnl0ZUFycmF5KEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYnl0ZXMgPSBuZXcgTGlzdDxieXRlPigpO1xyXG4gICAgICAgICAgICBieXRlcy5BZGQoKGJ5dGUpZy5WZXJ0aWNlcy5Db3VudCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGcuVmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZFJhbmdlKEJpdENvbnZlcnRlci5HZXRCeXRlcygoVUludDE2KU1hdGguUm91bmQodi5YICogU2NhbGUpKSk7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5BZGRSYW5nZShCaXRDb252ZXJ0ZXIuR2V0Qnl0ZXMoKFVJbnQxNilNYXRoLlJvdW5kKHYuWSAqIFNjYWxlKSkpO1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkUmFuZ2UoQml0Q29udmVydGVyLkdldEJ5dGVzKChVSW50MTYpTWF0aC5Sb3VuZCh2LlBhZGRpbmcgKiBTY2FsZSkpKTtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZFJhbmdlKEdldEJ5dGVzKHYuTGFiZWwpKTtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZFJhbmdlKEdldEJ5dGVzKHYuU3R5bGUgPz8gXCJcIikpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBieXRlcy5BZGRSYW5nZShCaXRDb252ZXJ0ZXIuR2V0Qnl0ZXMoKFVJbnQxNilnLkVkZ2VzLkNvdW50KSk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIGcuRWRnZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZCgoYnl0ZSkoZy5WZXJ0aWNlcy5JbmRleE9mKGUuVjEpKSk7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5BZGQoKGJ5dGUpKGcuVmVydGljZXMuSW5kZXhPZihlLlYyKSkpO1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkKChieXRlKWUuTXVsdGlwbGljaXR5KTtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZCgoYnl0ZSllLk9yaWVudGF0aW9uKTtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZFJhbmdlKEJpdENvbnZlcnRlci5HZXRCeXRlcygoVUludDE2KU1hdGguUm91bmQoZS5UaGlja25lc3MgKiAxMDApKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gZS5MYWJlbCA/PyBcIlwiO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhhY2tlZFN0eWxlID0gKGUuU3R5bGUgPz8gXCJcIikgKyBcIn5+fH58fn5cIiArIGxhYmVsO1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkUmFuZ2UoR2V0Qnl0ZXMoaGFja2VkU3R5bGUpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJ5dGVzLlRvQXJyYXkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR3JhcGggRGVzZXJpYWxpemUoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIEFzY2lpODUgPSBuZXcgQXNjaWk4NSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbXByZXNzZWQgPSBBc2NpaTg1LkRlY29kZShzLlN1YnN0cmluZyhQcmVmaXguTGVuZ3RoKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYnl0ZXMgPSBRdWlja0xaLmRlY29tcHJlc3MoY29tcHJlc3NlZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGVzZXJpYWxpemVGcm9tQnl0ZUFycmF5KGJ5dGVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGV4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZShleC5NZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgR3JhcGggRGVzZXJpYWxpemVGcm9tQnl0ZUFycmF5KGJ5dGVbXSBieXRlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgbiA9IFJlYWRCeXRlKGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuICAgICAgICAgICAgdmFyIHZlcnRpY2VzID0gbmV3IExpc3Q8VmVydGV4PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSAoZG91YmxlKVJlYWRVSW50MTYoYnl0ZXMsIHJlZiBvZmZzZXQpIC8gU2NhbGU7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IChkb3VibGUpUmVhZFVJbnQxNihieXRlcywgcmVmIG9mZnNldCkgLyBTY2FsZTtcclxuICAgICAgICAgICAgICAgIHZhciBwYWRkaW5nID0gKGZsb2F0KVJlYWRVSW50MTYoYnl0ZXMsIHJlZiBvZmZzZXQpIC8gU2NhbGU7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBSZWFkU3RyaW5nKGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IFJlYWRTdHJpbmcoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgdmVydGljZXMuQWRkKG5ldyBWZXJ0ZXgoeCwgeSkgeyBQYWRkaW5nID0gcGFkZGluZywgTGFiZWwgPSBsYWJlbCwgU3R5bGUgPSBzdHlsZSB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGUgPSBSZWFkVUludDE2KGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuICAgICAgICAgICAgdmFyIGVkZ2VzID0gbmV3IExpc3Q8RWRnZT4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBlOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB2MSA9IFJlYWRCeXRlKGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIHZhciB2MiA9IFJlYWRCeXRlKGJ5dGVzLCByZWYgb2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIHZhciBtdWx0aXBsaWNpdHkgPSBSZWFkQnl0ZShieXRlcywgcmVmIG9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3JpZW50YXRpb24gPSAoRWRnZS5PcmllbnRhdGlvbnMpUmVhZEJ5dGUoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaWNrbmVzcyA9IChmbG9hdClSZWFkVUludDE2KGJ5dGVzLCByZWYgb2Zmc2V0KSAvIDEwMDtcclxuICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IFJlYWRTdHJpbmcoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGVkZ2VzLkFkZChuZXcgRWRnZSh2ZXJ0aWNlc1t2MV0sIHZlcnRpY2VzW3YyXSkgeyBNdWx0aXBsaWNpdHkgPSBtdWx0aXBsaWNpdHksIE9yaWVudGF0aW9uID0gb3JpZW50YXRpb24sIFRoaWNrbmVzcyA9IHRoaWNrbmVzcywgU3R5bGUgPSBzdHlsZSB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHcmFwaCh2ZXJ0aWNlcywgZWRnZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGJ5dGUgUmVhZEJ5dGUoYnl0ZVtdIGJ5dGVzLCByZWYgaW50IG9mZnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBieXRlc1tvZmZzZXQrK107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgVUludDE2IFJlYWRVSW50MTYoYnl0ZVtdIGJ5dGVzLCByZWYgaW50IG9mZnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gQml0Q29udmVydGVyLlRvVUludDE2KGJ5dGVzLCBvZmZzZXQpO1xyXG4gICAgICAgICAgICBvZmZzZXQgKz0gMjtcclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgVUludDMyIFJlYWRVSW50MzIoYnl0ZVtdIGJ5dGVzLCByZWYgaW50IG9mZnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gQml0Q29udmVydGVyLlRvVUludDMyKGJ5dGVzLCBvZmZzZXQpO1xyXG4gICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYnl0ZVtdIEdldDdCaXRFbmNvZGVkSW50KGludCB2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBieXRlcyA9IG5ldyBMaXN0PGJ5dGU+KCk7XHJcbiAgICAgICAgICAgIHVpbnQgbnVtID0gKHVpbnQpdmFsdWU7XHJcbiAgICAgICAgICAgIHdoaWxlIChudW0gPj0gMTI4VSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnl0ZXMuQWRkKChieXRlKShudW0gfCAxMjhVKSk7XHJcbiAgICAgICAgICAgICAgICBudW0gPj49IDc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnl0ZXMuQWRkKChieXRlKW51bSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYnl0ZXMuVG9BcnJheSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIGludCBSZWFkN0JpdEVuY29kZWRJbnQoYnl0ZVtdIGJ5dGVzLCByZWYgaW50IG9mZnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCBudW0xID0gMDtcclxuICAgICAgICAgICAgaW50IG51bTIgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAobnVtMiAhPSAzNSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYnl0ZSBudW0zID0gUmVhZEJ5dGUoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgbnVtMSB8PSAoKGludCludW0zICYgKGludClzYnl0ZS5NYXhWYWx1ZSkgPDwgbnVtMjtcclxuICAgICAgICAgICAgICAgIG51bTIgKz0gNztcclxuICAgICAgICAgICAgICAgIGlmICgoKGludCludW0zICYgMTI4KSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudW0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb24oXCJiYWQgNy1iaXQgZW5jb2RlZCBpbnRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYnl0ZVtdIEdldEJ5dGVzKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJ5dGVzID0gbmV3IExpc3Q8Ynl0ZT4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCh2YXIgYyBpbiBzLlRvQ2hhckFycmF5KCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJ5dGVzLkFkZFJhbmdlKEJpdENvbnZlcnRlci5HZXRCeXRlcyhjKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuUmV2ZXJzZTxieXRlPigoKElFbnVtZXJhYmxlPGJ5dGU+KUdldDdCaXRFbmNvZGVkSW50KGJ5dGVzLkNvdW50KSkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBieXRlcy5JbnNlcnQoMCwgYik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBieXRlcy5Ub0FycmF5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzdHJpbmcgQVNDSUkgPSBcIiAhXFxcIiMkJSZcXCcoKSorLC0uLzAxMjM0NTY3ODk6Ozw9Pj9AQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpbXFxcXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX5cIjtcclxuICAgICAgICBzdGF0aWMgc3RyaW5nIFJlYWRTdHJpbmcoYnl0ZVtdIGJ5dGVzLCByZWYgaW50IG9mZnNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBSZWFkN0JpdEVuY29kZWRJbnQoYnl0ZXMsIHJlZiBvZmZzZXQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHMgPSBcIlwiO1xyXG4gICAgICAgICAgICB3aGlsZShsZW5ndGgtLSA+IDApIHMgKz0gQVNDSUlbYnl0ZXNbb2Zmc2V0KytdIC0gMzJdO1xyXG4gICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBNb3JlTGlucTtcclxudXNpbmcgR3JhcGhzO1xyXG5cclxubmFtZXNwYWNlIEdyYXBoc0NvcmVcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBHcmFwaElPXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9BZGphY2VuY3lNYXRyaXgodGhpcyBMaXN0PGludD4gZWRnZVdlaWdodHMsIGJvb2wgaXNEaXJlY3RlZCA9IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG4gPSAoaW50KSgoMSArIE1hdGguU3FydCgxICsgOCAqIGVkZ2VXZWlnaHRzLkNvdW50KSkgLyAyKTtcclxuICAgICAgICAgICAgdmFyIG0gPSBuZXcgY2hhcltuLCBuXTtcclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IG47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXcgPSBlZGdlV2VpZ2h0c1trXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEaXJlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1baSwgal0gPSBtW2osIGldID0gJzAnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV3ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1baSwgal0gPSAnMSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV3IDwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1baiwgaV0gPSAnMSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1baSwgal0gPSBtW2osIGldID0gZXcgIT0gMCA/ICcxJyA6ICcwJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBtW2ksIGldID0gJzAnO1xyXG5cclxuICAgICAgICAgICAgdmFyIHMgPSBcIlwiO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBuOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgcyArPSBtW2ksIGpdO1xyXG4gICAgICAgICAgICAgICAgcyArPSBFbnZpcm9ubWVudC5OZXdMaW5lO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vcHVibGljIHN0YXRpYyBHcmFwaHMuR3JhcGggR3JhcGhGcm9tR3JhcGg2KHN0cmluZyBncmFwaDYpXHJcbiAgICAgICAgLy97XHJcbiAgICAgICAgLy8gICAgdmFyIHcgPSBHZXRFZGdlV2VpZ2h0cyhncmFwaDYpO1xyXG4gICAgICAgIC8vICAgIHZhciBoID0gbmV3IENob29zYWJpbGl0eS5HcmFwaCh3KTtcclxuXHJcbiAgICAgICAgLy8gICAgdmFyIGcgPSBuZXcgR3JhcGhzLkdyYXBoKGgsIGguR2V0U3ByaW5nc0xheW91dCgxMiksIGZhbHNlKTtcclxuICAgICAgICAvLyAgICBnLk5hbWUgPSBncmFwaDY7XHJcbiAgICAgICAgLy8gICAgcmV0dXJuIGc7XHJcbiAgICAgICAgLy99XHJcblxyXG4gICAgICAgIC8vcHVibGljIHN0YXRpYyBHcmFwaHMuR3JhcGggR3JhcGhGcm9tRWRnZVdlaWdodFN0cmluZyhzdHJpbmcgcylcclxuICAgICAgICAvL3tcclxuICAgICAgICAvLyAgICB2YXIgaXNEaXJlY3RlZCA9IHMuQ29udGFpbnMoXCItMVwiKTtcclxuXHJcbiAgICAgICAgLy8gICAgdmFyIHBhcnRzID0gcy5TcGxpdCgnICcpO1xyXG4gICAgICAgIC8vICAgIHZhciBlZGdlV2VpZ2h0cyA9IHBhcnRzLldoZXJlKHAgPT4gIXAuU3RhcnRzV2l0aChcIltcIikpLlNlbGVjdCh4ID0+IGludC5QYXJzZSh4KSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgIC8vICAgIExpc3Q8aW50PiB2ZXJ0ZXhXZWlnaHRzID0gbnVsbDtcclxuICAgICAgICAvLyAgICB2YXIgdndwID0gcGFydHMuRmlyc3RPckRlZmF1bHQocCA9PiBwLlN0YXJ0c1dpdGgoXCJbXCIpKTtcclxuICAgICAgICAvLyAgICBpZiAodndwICE9IG51bGwpXHJcbiAgICAgICAgLy8gICAgICAgIHZlcnRleFdlaWdodHMgPSB2d3AuVHJpbSgnWycpLlRyaW0oJ10nKS5TcGxpdCgnLCcpLlNlbGVjdCh4ID0+IGludC5QYXJzZSh4KSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgIC8vICAgIHZhciBoID0gbmV3IENob29zYWJpbGl0eS5HcmFwaChlZGdlV2VpZ2h0cywgdmVydGV4V2VpZ2h0cyk7XHJcblxyXG4gICAgICAgIC8vICAgIHJldHVybiBuZXcgR3JhcGhzLkdyYXBoKGgsIGguR2V0U3ByaW5nc0xheW91dCgxMiksIGlzRGlyZWN0ZWQpO1xyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICAvL3B1YmxpYyBzdGF0aWMgTGlzdDxpbnQ+IEdldEVkZ2VXZWlnaHRzKHN0cmluZyBncmFwaDYpXHJcbiAgICAgICAgLy97XHJcbiAgICAgICAgLy8gICAgdmFyIGNoYXJzID0gZ3JhcGg2LlRvQ2hhckFycmF5KCk7XHJcblxyXG4gICAgICAgIC8vICAgIHZhciBieXRlcyA9IFVURjhFbmNvZGluZy5VVEY4LkdldEJ5dGVzKGNoYXJzKTtcclxuXHJcbiAgICAgICAgLy8gICAgdmFyIE4gPSBieXRlc1swXSAtIDYzO1xyXG4gICAgICAgIC8vICAgIHZhciBoID0gTiAqIChOIC0gMSkgLyAyO1xyXG4gICAgICAgIC8vICAgIHZhciB3ID0gYnl0ZXMuU2tpcCgxKS5TZWxlY3RNYW55KGIgPT4gTG93NigoYnl0ZSkoYiAtIDYzKSkpLlRha2UoaCkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgIC8vICAgIHZhciBwID0gUm93VG9Db2x1bW5QZXJtdXRhdGlvbihOKS5Ub0xpc3QoKTtcclxuICAgICAgICAvLyAgICB2YXIgd3AgPSBuZXcgTGlzdDxpbnQ+KGgpO1xyXG5cclxuICAgICAgICAvLyAgICBmb3IgKGludCBpID0gMDsgaSA8IHAuQ291bnQ7IGkrKylcclxuICAgICAgICAvLyAgICAgICAgd3AuQWRkKHdbcFtpXV0pO1xyXG5cclxuICAgICAgICAvLyAgICByZXR1cm4gd3A7XHJcbiAgICAgICAgLy99XHJcblxyXG4gICAgICAgIC8vcHVibGljIHN0YXRpYyBib29sWyxdIEdldEFkamFjZW5jeU1hdHJpeChzdHJpbmcgYWRqYWNlbmN5TGlzdFN0cmluZylcclxuICAgICAgICAvL3tcclxuICAgICAgICAvLyAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkoYWRqYWNlbmN5TGlzdFN0cmluZykpXHJcbiAgICAgICAgLy8gICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAvLyAgICB0cnlcclxuICAgICAgICAvLyAgICB7XHJcbiAgICAgICAgLy8gICAgICAgIHZhciBsaW5lcyA9IGFkamFjZW5jeUxpc3RTdHJpbmcuU3BsaXQobmV3W10geyBFbnZpcm9ubWVudC5OZXdMaW5lIH0sIFN0cmluZ1NwbGl0T3B0aW9ucy5SZW1vdmVFbXB0eUVudHJpZXMpO1xyXG5cclxuICAgICAgICAvLyAgICAgICAgdmFyIGFkamFjZW5jeUxpc3QgPSBuZXcgRGljdGlvbmFyeTxpbnQsIExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAvLyAgICAgICAgZm9yZWFjaCAodmFyIGxpbmUgaW4gbGluZXMuV2hlcmUobCA9PiBsLkNvbnRhaW5zKFwiOlwiKSkpXHJcbiAgICAgICAgLy8gICAgICAgIHtcclxuICAgICAgICAvLyAgICAgICAgICAgIHZhciBjaHVua3MgPSBsaW5lLlNwbGl0KCc6JywgJywnKTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgICAgICBhZGphY2VuY3lMaXN0W2ludC5QYXJzZShjaHVua3NbMF0pXSA9IGNodW5rcy5Ta2lwKDEpLlNlbGVjdChjID0+IGludC5QYXJzZShjKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgLy8gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgICAgIHZhciBtaW4gPSBhZGphY2VuY3lMaXN0Lk1pbihrdnAgPT4ga3ZwLktleSk7XHJcbiAgICAgICAgLy8gICAgICAgIHZhciBtYXggPSBhZGphY2VuY3lMaXN0Lk1heChrdnAgPT4ga3ZwLktleSk7XHJcbiAgICAgICAgLy8gICAgICAgIHZhciBOID0gbWF4ICsgMSAtIG1pbjtcclxuXHJcbiAgICAgICAgLy8gICAgICAgIHZhciBhZGphY2VuY3lNYXRyaXggPSBuZXcgYm9vbFtOLCBOXTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgIGZvcmVhY2ggKHZhciBrdnAgaW4gYWRqYWNlbmN5TGlzdClcclxuICAgICAgICAvLyAgICAgICAgICAgIGZvcmVhY2ggKHZhciBuZWlnaGJvciBpbiBrdnAuVmFsdWUpXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgYWRqYWNlbmN5TWF0cml4W2t2cC5LZXkgLSBtaW4sIG5laWdoYm9yIC0gbWluXSA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vICAgICAgICByZXR1cm4gYWRqYWNlbmN5TWF0cml4O1xyXG4gICAgICAgIC8vICAgIH1cclxuICAgICAgICAvLyAgICBjYXRjaCB7IH1cclxuXHJcbiAgICAgICAgLy8gICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgLy99XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvR3JhcGg2KHRoaXMgR3JhcGggZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBnLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHN0cmluZyBBU0NJSSA9IFwiICFcXFwiIyQlJlxcJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXFxcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9flwiO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RyaW5nIFRvR3JhcGg2KHRoaXMgTGlzdDxpbnQ+IHcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbiA9IChpbnQpKCgxICsgTWF0aC5TcXJ0KDEgKyA4ICogdy5Db3VudCkpIC8gMik7XHJcbiAgICAgICAgICAgIGlmIChuID4gNjIpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFeGNlcHRpb24oXCJpIGhhdmUgeWV0IHRvIHdyaXRlL3JlYWQgZ3JhcGg2IGZpbGVzIHdpdGggbW9yZSB0aGFuIDYyIHZlcnRpY2VzLlwiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8aW50PihSb3dUb0NvbHVtblBlcm11dGF0aW9uKG4pKTtcclxuICAgICAgICAgICAgdmFyIHdwID0gbmV3IExpc3Q8aW50Pih3LkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgd3AuQWRkKE1hdGguQWJzKHdbcC5JbmRleE9mKGkpXSkpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHdwLkNvdW50ICUgNiAhPSAwKVxyXG4gICAgICAgICAgICAgICAgd3AuQWRkKDApO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJiID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0FycmF5PGJ5dGU+KE1vcmVMaW5xLk1vcmVFbnVtZXJhYmxlLlByZXBlbmQ8Ynl0ZT4od3AuQmF0Y2g8aW50LCBieXRlPig2LCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sIGJ5dGU+KShiaXRzID0+IChieXRlKShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxpbnQsIGludD4saW50PihNb3JlTGlucS5Nb3JlRW51bWVyYWJsZS5JbmRleDxpbnQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuUmV2ZXJzZTxpbnQ+KGJpdHMpKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLktleVZhbHVlUGFpcjxpbnQsIGludD4sIGludD4pKHBhaXIgPT4gcGFpci5WYWx1ZSA8PCBwYWlyLktleSkpLlN1bSgpICsgNjMpKSksKGJ5dGUpKG4gKyA2MykpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5Kb2luKFwiXCIsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGJ5dGUsc3RyaW5nPihiYiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxieXRlLCBzdHJpbmc+KShiID0+IEFTQ0lJW2IgLSAzMl0uVG9TdHJpbmcoKSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IFJvd1RvQ29sdW1uUGVybXV0YXRpb24oaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgbiAtIDE7IGorKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSB4O1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuIC0gMSAtIGo7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4geTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeSArPSAxICsgaiArIGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgeCArPSAyICsgajtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIElFbnVtZXJhYmxlPGludD4gTG93NihieXRlIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gNTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gKGIgJiAoMSA8PCBpKSkgPj4gaTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiI3JlZ2lvbiBMaWNlbnNlIGFuZCBUZXJtc1xyXG4vLyBNb3JlTElOUSAtIEV4dGVuc2lvbnMgdG8gTElOUSB0byBPYmplY3RzXHJcbi8vIENvcHlyaWdodCAoYykgMjAwOC0yMDExIEpvbmF0aGFuIFNrZWV0LiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4vLyBcclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuLy8gXHJcbi8vICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuLy8gXHJcbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuI2VuZHJlZ2lvblxyXG5cclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkRpYWdub3N0aWNzO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxuXHJcbm5hbWVzcGFjZSBNb3JlTGlucVxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIHBhcnRpYWwgY2xhc3MgTW9yZUVudW1lcmFibGVcclxuICAgIHtcclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEJhdGNoZXMgdGhlIHNvdXJjZSBzZXF1ZW5jZSBpbnRvIHNpemVkIGJ1Y2tldHMuXHJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cclxuICAgICAgICAvLy8gPHR5cGVwYXJhbSBuYW1lPVwiVFNvdXJjZVwiPlR5cGUgb2YgZWxlbWVudHMgaW4gPHBhcmFtcmVmIG5hbWU9XCJzb3VyY2VcIi8+IHNlcXVlbmNlLjwvdHlwZXBhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNvdXJjZVwiPlRoZSBzb3VyY2Ugc2VxdWVuY2UuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzaXplXCI+U2l6ZSBvZiBidWNrZXRzLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxyZXR1cm5zPkEgc2VxdWVuY2Ugb2YgZXF1YWxseSBzaXplZCBidWNrZXRzIGNvbnRhaW5pbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBjb2xsZWN0aW9uLjwvcmV0dXJucz5cclxuICAgICAgICAvLy8gPHJlbWFya3M+IFRoaXMgb3BlcmF0b3IgdXNlcyBkZWZlcnJlZCBleGVjdXRpb24gYW5kIHN0cmVhbXMgaXRzIHJlc3VsdHMgKGJ1Y2tldHMgYW5kIGJ1Y2tldCBjb250ZW50KS48L3JlbWFya3M+XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxJRW51bWVyYWJsZTxUU291cmNlPj4gQmF0Y2g8VFNvdXJjZT4odGhpcyBJRW51bWVyYWJsZTxUU291cmNlPiBzb3VyY2UsIGludCBzaXplKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJhdGNoPFRTb3VyY2UsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxUU291cmNlPj4oc291cmNlLCBzaXplLCAoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFRTb3VyY2U+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPFRTb3VyY2U+PikoeCA9PiB4KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gPHN1bW1hcnk+XHJcbiAgICAgICAgLy8vIEJhdGNoZXMgdGhlIHNvdXJjZSBzZXF1ZW5jZSBpbnRvIHNpemVkIGJ1Y2tldHMgYW5kIGFwcGxpZXMgYSBwcm9qZWN0aW9uIHRvIGVhY2ggYnVja2V0LlxyXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XHJcbiAgICAgICAgLy8vIDx0eXBlcGFyYW0gbmFtZT1cIlRTb3VyY2VcIj5UeXBlIG9mIGVsZW1lbnRzIGluIDxwYXJhbXJlZiBuYW1lPVwic291cmNlXCIvPiBzZXF1ZW5jZS48L3R5cGVwYXJhbT5cclxuICAgICAgICAvLy8gPHR5cGVwYXJhbSBuYW1lPVwiVFJlc3VsdFwiPlR5cGUgb2YgcmVzdWx0IHJldHVybmVkIGJ5IDxwYXJhbXJlZiBuYW1lPVwicmVzdWx0U2VsZWN0b3JcIi8+LjwvdHlwZXBhcmFtPlxyXG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNvdXJjZVwiPlRoZSBzb3VyY2Ugc2VxdWVuY2UuPC9wYXJhbT5cclxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzaXplXCI+U2l6ZSBvZiBidWNrZXRzLjwvcGFyYW0+XHJcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicmVzdWx0U2VsZWN0b3JcIj5UaGUgcHJvamVjdGlvbiB0byBhcHBseSB0byBlYWNoIGJ1Y2tldC48L3BhcmFtPlxyXG4gICAgICAgIC8vLyA8cmV0dXJucz5BIHNlcXVlbmNlIG9mIHByb2plY3Rpb25zIG9uIGVxdWFsbHkgc2l6ZWQgYnVja2V0cyBjb250YWluaW5nIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgY29sbGVjdGlvbi48L3JldHVybnM+XHJcbiAgICAgICAgLy8vIDxyZW1hcmtzPiBUaGlzIG9wZXJhdG9yIHVzZXMgZGVmZXJyZWQgZXhlY3V0aW9uIGFuZCBzdHJlYW1zIGl0cyByZXN1bHRzIChidWNrZXRzIGFuZCBidWNrZXQgY29udGVudCkuPC9yZW1hcmtzPlxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgSUVudW1lcmFibGU8VFJlc3VsdD4gQmF0Y2g8VFNvdXJjZSwgVFJlc3VsdD4odGhpcyBJRW51bWVyYWJsZTxUU291cmNlPiBzb3VyY2UsIGludCBzaXplLFxyXG4gICAgICAgICAgICBGdW5jPElFbnVtZXJhYmxlPFRTb3VyY2U+LCBUUmVzdWx0PiByZXN1bHRTZWxlY3RvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBCYXRjaEltcGw8VFNvdXJjZSxUUmVzdWx0Pihzb3VyY2UsIHNpemUsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8VFNvdXJjZT4sIFRSZXN1bHQ+KXJlc3VsdFNlbGVjdG9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIElFbnVtZXJhYmxlPFRSZXN1bHQ+IEJhdGNoSW1wbDxUU291cmNlLCBUUmVzdWx0Pih0aGlzIElFbnVtZXJhYmxlPFRTb3VyY2U+IHNvdXJjZSwgaW50IHNpemUsXHJcbiAgICAgICAgICAgIEZ1bmM8SUVudW1lcmFibGU8VFNvdXJjZT4sIFRSZXN1bHQ+IHJlc3VsdFNlbGVjdG9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVFNvdXJjZVtdIGJ1Y2tldCA9IG51bGw7XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgaXRlbSBpbiBzb3VyY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChidWNrZXQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBidWNrZXQgPSBuZXcgVFNvdXJjZVtzaXplXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBidWNrZXRbY291bnQrK10gPSBpdGVtO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRoZSBidWNrZXQgaXMgZnVsbHkgYnVmZmVyZWQgYmVmb3JlIGl0J3MgeWllbGRlZFxyXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ICE9IHNpemUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2VsZWN0IGlzIG5lY2Vzc2FyeSBzbyBidWNrZXQgY29udGVudHMgYXJlIHN0cmVhbWVkIHRvb1xyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHJlc3VsdFNlbGVjdG9yKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PFRTb3VyY2UsVFNvdXJjZT4oYnVja2V0LChnbG9iYWw6OlN5c3RlbS5GdW5jPFRTb3VyY2UsIFRTb3VyY2U+KSh4ID0+IHgpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYnVja2V0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGNvdW50ID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBsYXN0IGJ1Y2tldCB3aXRoIGFsbCByZW1haW5pbmcgZWxlbWVudHNcclxuICAgICAgICAgICAgaWYgKGJ1Y2tldCAhPSBudWxsICYmIGNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIHJlc3VsdFNlbGVjdG9yKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVGFrZTxUU291cmNlPihidWNrZXQsY291bnQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vIFF1aWNrTFogZGF0YSBjb21wcmVzc2lvbiBsaWJyYXJ5XHJcbi8vIENvcHlyaWdodCAoQykgMjAwNi0yMDExIExhc3NlIE1pa2tlbCBSZWluaG9sZFxyXG4vLyBsYXJAcXVpY2tsei5jb21cclxuLy9cclxuLy8gUXVpY2tMWiBjYW4gYmUgdXNlZCBmb3IgZnJlZSB1bmRlciB0aGUgR1BMIDEsIDIgb3IgMyBsaWNlbnNlICh3aGVyZSBhbnl0aGluZyBcclxuLy8gcmVsZWFzZWQgaW50byBwdWJsaWMgbXVzdCBiZSBvcGVuIHNvdXJjZSkgb3IgdW5kZXIgYSBjb21tZXJjaWFsIGxpY2Vuc2UgaWYgc3VjaCBcclxuLy8gaGFzIGJlZW4gYWNxdWlyZWQgKHNlZSBodHRwOi8vd3d3LnF1aWNrbHouY29tL29yZGVyLmh0bWwpLiBUaGUgY29tbWVyY2lhbCBsaWNlbnNlIFxyXG4vLyBkb2VzIG5vdCBjb3ZlciBkZXJpdmVkIG9yIHBvcnRlZCB2ZXJzaW9ucyBjcmVhdGVkIGJ5IHRoaXJkIHBhcnRpZXMgdW5kZXIgR1BMLlxyXG4vL1xyXG4vLyBPbmx5IGEgc3Vic2V0IG9mIHRoZSBDIGxpYnJhcnkgaGFzIGJlZW4gcG9ydGVkLCBuYW1lbHkgbGV2ZWwgMSBhbmQgMyBub3QgaW4gXHJcbi8vIHN0cmVhbWluZyBtb2RlLiBcclxuLy9cclxuLy8gVmVyc2lvbjogMS41LjAgZmluYWxcclxuXHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5JTztcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5zdGF0aWMgY2xhc3MgUXVpY2tMWlxyXG57XHJcbiAgICBwdWJsaWMgY29uc3QgaW50IFFMWl9WRVJTSU9OX01BSk9SID0gMTtcclxuICAgIHB1YmxpYyBjb25zdCBpbnQgUUxaX1ZFUlNJT05fTUlOT1IgPSA1O1xyXG4gICAgcHVibGljIGNvbnN0IGludCBRTFpfVkVSU0lPTl9SRVZJU0lPTiA9IDA7XHJcblxyXG4gICAgLy8gU3RyZWFtaW5nIG1vZGUgbm90IHN1cHBvcnRlZFxyXG4gICAgcHVibGljIGNvbnN0IGludCBRTFpfU1RSRUFNSU5HX0JVRkZFUiA9IDA7XHJcblxyXG4gICAgLy8gQm91bmRzIGNoZWNraW5nIG5vdCBzdXBwb3J0ZWQgIFVzZSB0cnkuLi5jYXRjaCBpbnN0ZWFkXHJcbiAgICBwdWJsaWMgY29uc3QgaW50IFFMWl9NRU1PUllfU0FGRSA9IDA7XHJcblxyXG4gICAgLy8gRGVjcmVhc2UgUUxaX1BPSU5URVJTXzMgdG8gaW5jcmVhc2UgbGV2ZWwgMyBjb21wcmVzc2lvbiBzcGVlZC4gRG8gbm90IGVkaXQgYW55IG90aGVyIHZhbHVlcyFcclxuICAgIHByaXZhdGUgY29uc3QgaW50IEhBU0hfVkFMVUVTID0gNDA5NjtcclxuICAgIHByaXZhdGUgY29uc3QgaW50IE1JTk9GRlNFVCA9IDI7XHJcbiAgICBwcml2YXRlIGNvbnN0IGludCBVTkNPTkRJVElPTkFMX01BVENITEVOID0gNjtcclxuICAgIHByaXZhdGUgY29uc3QgaW50IFVOQ09NUFJFU1NFRF9FTkQgPSA0O1xyXG4gICAgcHJpdmF0ZSBjb25zdCBpbnQgQ1dPUkRfTEVOID0gNDtcclxuICAgIHByaXZhdGUgY29uc3QgaW50IERFRkFVTFRfSEVBREVSTEVOID0gOTtcclxuICAgIHByaXZhdGUgY29uc3QgaW50IFFMWl9QT0lOVEVSU18xID0gMTtcclxuICAgIHByaXZhdGUgY29uc3QgaW50IFFMWl9QT0lOVEVSU18zID0gMTY7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaW50IGhlYWRlckxlbihieXRlW10gc291cmNlKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiAoKHNvdXJjZVswXSAmIDIpID09IDIpID8gOSA6IDM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBpbnQgc2l6ZURlY29tcHJlc3NlZChieXRlW10gc291cmNlKVxyXG4gICAge1xyXG4gICAgICAgIGlmIChoZWFkZXJMZW4oc291cmNlKSA9PSA5KVxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlWzVdIHwgKHNvdXJjZVs2XSA8PCA4KSB8IChzb3VyY2VbN10gPDwgMTYpIHwgKHNvdXJjZVs4XSA8PCAyNCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlWzJdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgaW50IHNpemVDb21wcmVzc2VkKGJ5dGVbXSBzb3VyY2UpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKGhlYWRlckxlbihzb3VyY2UpID09IDkpXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2VbMV0gfCAoc291cmNlWzJdIDw8IDgpIHwgKHNvdXJjZVszXSA8PCAxNikgfCAoc291cmNlWzRdIDw8IDI0KTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2VbMV07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCB3cml0ZV9oZWFkZXIoYnl0ZVtdIGRzdCwgaW50IGxldmVsLCBib29sIGNvbXByZXNzaWJsZSwgaW50IHNpemVfY29tcHJlc3NlZCwgaW50IHNpemVfZGVjb21wcmVzc2VkKVxyXG4gICAge1xyXG4gICAgICAgIGRzdFswXSA9IChieXRlKSgyIHwgKGNvbXByZXNzaWJsZSA/IDEgOiAwKSk7XHJcbiAgICAgICAgZHN0WzBdIHw9IChieXRlKShsZXZlbCA8PCAyKTtcclxuICAgICAgICBkc3RbMF0gfD0gKDEgPDwgNik7XHJcbiAgICAgICAgZHN0WzBdIHw9ICgwIDw8IDQpO1xyXG4gICAgICAgIGZhc3Rfd3JpdGUoZHN0LCAxLCBzaXplX2RlY29tcHJlc3NlZCwgNCk7XHJcbiAgICAgICAgZmFzdF93cml0ZShkc3QsIDUsIHNpemVfY29tcHJlc3NlZCwgNCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBieXRlW10gY29tcHJlc3MoYnl0ZVtdIHNvdXJjZSwgaW50IGxldmVsID0gMSlcclxuICAgIHtcclxuICAgICAgICBpbnQgc3JjID0gMDtcclxuICAgICAgICBpbnQgZHN0ID0gREVGQVVMVF9IRUFERVJMRU4gKyBDV09SRF9MRU47XHJcbiAgICAgICAgdWludCBjd29yZF92YWwgPSAweDgwMDAwMDAwO1xyXG4gICAgICAgIGludCBjd29yZF9wdHIgPSBERUZBVUxUX0hFQURFUkxFTjtcclxuICAgICAgICBieXRlW10gZGVzdGluYXRpb24gPSBuZXcgYnl0ZVtzb3VyY2UuTGVuZ3RoICsgNDAwXTtcclxuICAgICAgICBpbnRbLF0gaGFzaHRhYmxlO1xyXG4gICAgICAgIGludFtdIGNhY2hldGFibGUgPSBuZXcgaW50W0hBU0hfVkFMVUVTXTtcclxuICAgICAgICBieXRlW10gaGFzaF9jb3VudGVyID0gbmV3IGJ5dGVbSEFTSF9WQUxVRVNdO1xyXG4gICAgICAgIGJ5dGVbXSBkMjtcclxuICAgICAgICBpbnQgZmV0Y2ggPSAwO1xyXG4gICAgICAgIGludCBsYXN0X21hdGNoc3RhcnQgPSAoc291cmNlLkxlbmd0aCAtIFVOQ09ORElUSU9OQUxfTUFUQ0hMRU4gLSBVTkNPTVBSRVNTRURfRU5EIC0gMSk7XHJcbiAgICAgICAgaW50IGxpdHMgPSAwO1xyXG5cclxuICAgICAgICBpZiAobGV2ZWwgIT0gMSAmJiBsZXZlbCAhPSAzKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oXCJDIyB2ZXJzaW9uIG9ubHkgc3VwcG9ydHMgbGV2ZWwgMSBhbmQgM1wiKTtcclxuXHJcbiAgICAgICAgaWYgKGxldmVsID09IDEpXHJcbiAgICAgICAgICAgIGhhc2h0YWJsZSA9IG5ldyBpbnRbSEFTSF9WQUxVRVMsIFFMWl9QT0lOVEVSU18xXTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGhhc2h0YWJsZSA9IG5ldyBpbnRbSEFTSF9WQUxVRVMsIFFMWl9QT0lOVEVSU18zXTtcclxuXHJcbiAgICAgICAgaWYgKHNvdXJjZS5MZW5ndGggPT0gMClcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBieXRlWzBdO1xyXG5cclxuICAgICAgICBpZiAoc3JjIDw9IGxhc3RfbWF0Y2hzdGFydClcclxuICAgICAgICAgICAgZmV0Y2ggPSBzb3VyY2Vbc3JjXSB8IChzb3VyY2Vbc3JjICsgMV0gPDwgOCkgfCAoc291cmNlW3NyYyArIDJdIDw8IDE2KTtcclxuXHJcbiAgICAgICAgd2hpbGUgKHNyYyA8PSBsYXN0X21hdGNoc3RhcnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoKGN3b3JkX3ZhbCAmIDEpID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChzcmMgPiBzb3VyY2UuTGVuZ3RoID4+IDEgJiYgZHN0ID4gc3JjIC0gKHNyYyA+PiA1KSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkMiA9IG5ldyBieXRlW3NvdXJjZS5MZW5ndGggKyBERUZBVUxUX0hFQURFUkxFTl07XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVfaGVhZGVyKGQyLCBsZXZlbCwgZmFsc2UsIHNvdXJjZS5MZW5ndGgsIHNvdXJjZS5MZW5ndGggKyBERUZBVUxUX0hFQURFUkxFTik7XHJcbiAgICAgICAgICAgICAgICAgICAgU3lzdGVtLkFycmF5LkNvcHkoc291cmNlLCAwLCBkMiwgREVGQVVMVF9IRUFERVJMRU4sIHNvdXJjZS5MZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkMjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmYXN0X3dyaXRlKGRlc3RpbmF0aW9uLCBjd29yZF9wdHIsIChpbnQpKChjd29yZF92YWwgPj4gMSkgfCAweDgwMDAwMDAwKSwgNCk7XHJcbiAgICAgICAgICAgICAgICBjd29yZF9wdHIgPSBkc3Q7XHJcbiAgICAgICAgICAgICAgICBkc3QgKz0gQ1dPUkRfTEVOO1xyXG4gICAgICAgICAgICAgICAgY3dvcmRfdmFsID0gMHg4MDAwMDAwMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGxldmVsID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGludCBoYXNoID0gKChmZXRjaCA+PiAxMikgXiBmZXRjaCkgJiAoSEFTSF9WQUxVRVMgLSAxKTtcclxuICAgICAgICAgICAgICAgIGludCBvID0gaGFzaHRhYmxlW2hhc2gsIDBdO1xyXG4gICAgICAgICAgICAgICAgaW50IGNhY2hlID0gY2FjaGV0YWJsZVtoYXNoXSBeIGZldGNoO1xyXG4gICAgICAgICAgICAgICAgY2FjaGV0YWJsZVtoYXNoXSA9IGZldGNoO1xyXG4gICAgICAgICAgICAgICAgaGFzaHRhYmxlW2hhc2gsIDBdID0gc3JjO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjYWNoZSA9PSAwICYmIGhhc2hfY291bnRlcltoYXNoXSAhPSAwICYmIChzcmMgLSBvID4gTUlOT0ZGU0VUIHx8IChzcmMgPT0gbyArIDEgJiYgbGl0cyA+PSAzICYmIHNyYyA+IDMgJiYgc291cmNlW3NyY10gPT0gc291cmNlW3NyYyAtIDNdICYmIHNvdXJjZVtzcmNdID09IHNvdXJjZVtzcmMgLSAyXSAmJiBzb3VyY2Vbc3JjXSA9PSBzb3VyY2Vbc3JjIC0gMV0gJiYgc291cmNlW3NyY10gPT0gc291cmNlW3NyYyArIDFdICYmIHNvdXJjZVtzcmNdID09IHNvdXJjZVtzcmMgKyAyXSkpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGN3b3JkX3ZhbCA9ICgoY3dvcmRfdmFsID4+IDEpIHwgMHg4MDAwMDAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZVtvICsgM10gIT0gc291cmNlW3NyYyArIDNdKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IGYgPSAzIC0gMiB8IChoYXNoIDw8IDQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3QgKyAwXSA9IChieXRlKShmID4+IDAgKiA4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0ICsgMV0gPSAoYnl0ZSkoZiA+PiAxICogOCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3QgKz0gMjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50IG9sZF9zcmMgPSBzcmM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCByZW1haW5pbmcgPSAoKHNvdXJjZS5MZW5ndGggLSBVTkNPTVBSRVNTRURfRU5EIC0gc3JjICsgMSAtIDEpID4gMjU1ID8gMjU1IDogKHNvdXJjZS5MZW5ndGggLSBVTkNPTVBSRVNTRURfRU5EIC0gc3JjICsgMSAtIDEpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlW28gKyBzcmMgLSBvbGRfc3JjXSA9PSBzb3VyY2Vbc3JjXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlW28gKyBzcmMgLSBvbGRfc3JjXSA9PSBzb3VyY2Vbc3JjXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmMrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc291cmNlW28gKyAoc3JjIC0gb2xkX3NyYyldID09IHNvdXJjZVtzcmNdICYmIChzcmMgLSBvbGRfc3JjKSA8IHJlbWFpbmluZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludCBtYXRjaGxlbiA9IHNyYyAtIG9sZF9zcmM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNoIDw8PSA0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hsZW4gPCAxOClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGYgPSAoaGFzaCB8IChtYXRjaGxlbiAtIDIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdCArIDBdID0gKGJ5dGUpKGYgPj4gMCAqIDgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0ICsgMV0gPSAoYnl0ZSkoZiA+PiAxICogOCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3QgKz0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhc3Rfd3JpdGUoZGVzdGluYXRpb24sIGRzdCwgaGFzaCB8IChtYXRjaGxlbiA8PCAxNiksIDMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHN0ICs9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZmV0Y2ggPSBzb3VyY2Vbc3JjXSB8IChzb3VyY2Vbc3JjICsgMV0gPDwgOCkgfCAoc291cmNlW3NyYyArIDJdIDw8IDE2KTtcclxuICAgICAgICAgICAgICAgICAgICBsaXRzID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXRzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzaF9jb3VudGVyW2hhc2hdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3RdID0gc291cmNlW3NyY107XHJcbiAgICAgICAgICAgICAgICAgICAgY3dvcmRfdmFsID0gKGN3b3JkX3ZhbCA+PiAxKTtcclxuICAgICAgICAgICAgICAgICAgICBzcmMrKztcclxuICAgICAgICAgICAgICAgICAgICBkc3QrKztcclxuICAgICAgICAgICAgICAgICAgICBmZXRjaCA9ICgoZmV0Y2ggPj4gOCkgJiAweGZmZmYpIHwgKHNvdXJjZVtzcmMgKyAyXSA8PCAxNik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZmV0Y2ggPSBzb3VyY2Vbc3JjXSB8IChzb3VyY2Vbc3JjICsgMV0gPDwgOCkgfCAoc291cmNlW3NyYyArIDJdIDw8IDE2KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpbnQgbywgb2Zmc2V0MjtcclxuICAgICAgICAgICAgICAgIGludCBtYXRjaGxlbiwgaywgbSwgYmVzdF9rID0gMDtcclxuICAgICAgICAgICAgICAgIGJ5dGUgYztcclxuICAgICAgICAgICAgICAgIGludCByZW1haW5pbmcgPSAoKHNvdXJjZS5MZW5ndGggLSBVTkNPTVBSRVNTRURfRU5EIC0gc3JjICsgMSAtIDEpID4gMjU1ID8gMjU1IDogKHNvdXJjZS5MZW5ndGggLSBVTkNPTVBSRVNTRURfRU5EIC0gc3JjICsgMSAtIDEpKTtcclxuICAgICAgICAgICAgICAgIGludCBoYXNoID0gKChmZXRjaCA+PiAxMikgXiBmZXRjaCkgJiAoSEFTSF9WQUxVRVMgLSAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjID0gaGFzaF9jb3VudGVyW2hhc2hdO1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hsZW4gPSAwO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0MiA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgUUxaX1BPSU5URVJTXzMgJiYgYyA+IGs7IGsrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBvID0gaGFzaHRhYmxlW2hhc2gsIGtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoYnl0ZSlmZXRjaCA9PSBzb3VyY2Vbb10gJiYgKGJ5dGUpKGZldGNoID4+IDgpID09IHNvdXJjZVtvICsgMV0gJiYgKGJ5dGUpKGZldGNoID4+IDE2KSA9PSBzb3VyY2VbbyArIDJdICYmIG8gPCBzcmMgLSBNSU5PRkZTRVQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtID0gMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHNvdXJjZVtvICsgbV0gPT0gc291cmNlW3NyYyArIG1dICYmIG0gPCByZW1haW5pbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgobSA+IG1hdGNobGVuKSB8fCAobSA9PSBtYXRjaGxlbiAmJiBvID4gb2Zmc2V0MikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDIgPSBvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hsZW4gPSBtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdF9rID0gaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG8gPSBvZmZzZXQyO1xyXG4gICAgICAgICAgICAgICAgaGFzaHRhYmxlW2hhc2gsIGMgJiAoUUxaX1BPSU5URVJTXzMgLSAxKV0gPSBzcmM7XHJcbiAgICAgICAgICAgICAgICBjKys7XHJcbiAgICAgICAgICAgICAgICBoYXNoX2NvdW50ZXJbaGFzaF0gPSBjO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtYXRjaGxlbiA+PSAzICYmIHNyYyAtIG8gPCAxMzEwNzEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IG9mZnNldCA9IHNyYyAtIG87XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaW50IHUgPSAxOyB1IDwgbWF0Y2hsZW47IHUrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoID0gc291cmNlW3NyYyArIHVdIHwgKHNvdXJjZVtzcmMgKyB1ICsgMV0gPDwgOCkgfCAoc291cmNlW3NyYyArIHUgKyAyXSA8PCAxNik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2ggPSAoKGZldGNoID4+IDEyKSBeIGZldGNoKSAmIChIQVNIX1ZBTFVFUyAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjID0gaGFzaF9jb3VudGVyW2hhc2hdKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2h0YWJsZVtoYXNoLCBjICYgKFFMWl9QT0lOVEVSU18zIC0gMSldID0gc3JjICsgdTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNyYyArPSBtYXRjaGxlbjtcclxuICAgICAgICAgICAgICAgICAgICBjd29yZF92YWwgPSAoKGN3b3JkX3ZhbCA+PiAxKSB8IDB4ODAwMDAwMDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hsZW4gPT0gMyAmJiBvZmZzZXQgPD0gNjMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYXN0X3dyaXRlKGRlc3RpbmF0aW9uLCBkc3QsIG9mZnNldCA8PCAyLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHN0Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1hdGNobGVuID09IDMgJiYgb2Zmc2V0IDw9IDE2MzgzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFzdF93cml0ZShkZXN0aW5hdGlvbiwgZHN0LCAob2Zmc2V0IDw8IDIpIHwgMSwgMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzdCArPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChtYXRjaGxlbiA8PSAxOCAmJiBvZmZzZXQgPD0gMTAyMylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhc3Rfd3JpdGUoZGVzdGluYXRpb24sIGRzdCwgKChtYXRjaGxlbiAtIDMpIDw8IDIpIHwgKG9mZnNldCA8PCA2KSB8IDIsIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkc3QgKz0gMjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobWF0Y2hsZW4gPD0gMzMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYXN0X3dyaXRlKGRlc3RpbmF0aW9uLCBkc3QsICgobWF0Y2hsZW4gLSAyKSA8PCAyKSB8IChvZmZzZXQgPDwgNykgfCAzLCAzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHN0ICs9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhc3Rfd3JpdGUoZGVzdGluYXRpb24sIGRzdCwgKChtYXRjaGxlbiAtIDMpIDw8IDcpIHwgKG9mZnNldCA8PCAxNSkgfCAzLCA0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHN0ICs9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxpdHMgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdF0gPSBzb3VyY2Vbc3JjXTtcclxuICAgICAgICAgICAgICAgICAgICBjd29yZF92YWwgPSAoY3dvcmRfdmFsID4+IDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNyYysrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRzdCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlIChzcmMgPD0gc291cmNlLkxlbmd0aCAtIDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoKGN3b3JkX3ZhbCAmIDEpID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZhc3Rfd3JpdGUoZGVzdGluYXRpb24sIGN3b3JkX3B0ciwgKGludCkoKGN3b3JkX3ZhbCA+PiAxKSB8IDB4ODAwMDAwMDApLCA0KTtcclxuICAgICAgICAgICAgICAgIGN3b3JkX3B0ciA9IGRzdDtcclxuICAgICAgICAgICAgICAgIGRzdCArPSBDV09SRF9MRU47XHJcbiAgICAgICAgICAgICAgICBjd29yZF92YWwgPSAweDgwMDAwMDAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkZXN0aW5hdGlvbltkc3RdID0gc291cmNlW3NyY107XHJcbiAgICAgICAgICAgIHNyYysrO1xyXG4gICAgICAgICAgICBkc3QrKztcclxuICAgICAgICAgICAgY3dvcmRfdmFsID0gKGN3b3JkX3ZhbCA+PiAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2hpbGUgKChjd29yZF92YWwgJiAxKSAhPSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY3dvcmRfdmFsID0gKGN3b3JkX3ZhbCA+PiAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmFzdF93cml0ZShkZXN0aW5hdGlvbiwgY3dvcmRfcHRyLCAoaW50KSgoY3dvcmRfdmFsID4+IDEpIHwgMHg4MDAwMDAwMCksIENXT1JEX0xFTik7XHJcbiAgICAgICAgd3JpdGVfaGVhZGVyKGRlc3RpbmF0aW9uLCBsZXZlbCwgdHJ1ZSwgc291cmNlLkxlbmd0aCwgZHN0KTtcclxuICAgICAgICBkMiA9IG5ldyBieXRlW2RzdF07XHJcbiAgICAgICAgU3lzdGVtLkFycmF5LkNvcHkoZGVzdGluYXRpb24sIGQyLCBkc3QpO1xyXG4gICAgICAgIHJldHVybiBkMjtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBmYXN0X3dyaXRlKGJ5dGVbXSBhLCBpbnQgaSwgaW50IHZhbHVlLCBpbnQgbnVtYnl0ZXMpXHJcbiAgICB7XHJcbiAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBudW1ieXRlczsgaisrKVxyXG4gICAgICAgICAgICBhW2kgKyBqXSA9IChieXRlKSh2YWx1ZSA+PiAoaiAqIDgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGJ5dGVbXSBkZWNvbXByZXNzKGJ5dGVbXSBzb3VyY2UpXHJcbiAgICB7XHJcbiAgICAgICAgaW50IGxldmVsO1xyXG4gICAgICAgIGludCBzaXplID0gc2l6ZURlY29tcHJlc3NlZChzb3VyY2UpO1xyXG4gICAgICAgIGludCBzcmMgPSBoZWFkZXJMZW4oc291cmNlKTtcclxuICAgICAgICBpbnQgZHN0ID0gMDtcclxuICAgICAgICB1aW50IGN3b3JkX3ZhbCA9IDE7XHJcbiAgICAgICAgYnl0ZVtdIGRlc3RpbmF0aW9uID0gbmV3IGJ5dGVbc2l6ZV07XHJcbiAgICAgICAgaW50W10gaGFzaHRhYmxlID0gbmV3IGludFs0MDk2XTtcclxuICAgICAgICBieXRlW10gaGFzaF9jb3VudGVyID0gbmV3IGJ5dGVbNDA5Nl07XHJcbiAgICAgICAgaW50IGxhc3RfbWF0Y2hzdGFydCA9IHNpemUgLSBVTkNPTkRJVElPTkFMX01BVENITEVOIC0gVU5DT01QUkVTU0VEX0VORCAtIDE7XHJcbiAgICAgICAgaW50IGxhc3RfaGFzaGVkID0gLTE7XHJcbiAgICAgICAgaW50IGhhc2g7XHJcbiAgICAgICAgdWludCBmZXRjaCA9IDA7XHJcblxyXG4gICAgICAgIGxldmVsID0gKHNvdXJjZVswXSA+PiAyKSAmIDB4MztcclxuXHJcbiAgICAgICAgaWYgKGxldmVsICE9IDEgJiYgbGV2ZWwgIT0gMylcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKFwiQyMgdmVyc2lvbiBvbmx5IHN1cHBvcnRzIGxldmVsIDEgYW5kIDNcIik7XHJcblxyXG4gICAgICAgIGlmICgoc291cmNlWzBdICYgMSkgIT0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJ5dGVbXSBkMiA9IG5ldyBieXRlW3NpemVdO1xyXG4gICAgICAgICAgICBTeXN0ZW0uQXJyYXkuQ29weShzb3VyY2UsIGhlYWRlckxlbihzb3VyY2UpLCBkMiwgMCwgc2l6ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoOyA7IClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChjd29yZF92YWwgPT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY3dvcmRfdmFsID0gKHVpbnQpKHNvdXJjZVtzcmNdIHwgKHNvdXJjZVtzcmMgKyAxXSA8PCA4KSB8IChzb3VyY2Vbc3JjICsgMl0gPDwgMTYpIHwgKHNvdXJjZVtzcmMgKyAzXSA8PCAyNCkpO1xyXG4gICAgICAgICAgICAgICAgc3JjICs9IDQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoZHN0IDw9IGxhc3RfbWF0Y2hzdGFydClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPT0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2ggPSAodWludCkoc291cmNlW3NyY10gfCAoc291cmNlW3NyYyArIDFdIDw8IDgpIHwgKHNvdXJjZVtzcmMgKyAyXSA8PCAxNikpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2ggPSAodWludCkoc291cmNlW3NyY10gfCAoc291cmNlW3NyYyArIDFdIDw8IDgpIHwgKHNvdXJjZVtzcmMgKyAyXSA8PCAxNikgfCAoc291cmNlW3NyYyArIDNdIDw8IDI0KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICgoY3dvcmRfdmFsICYgMSkgPT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdWludCBtYXRjaGxlbjtcclxuICAgICAgICAgICAgICAgIHVpbnQgb2Zmc2V0MjtcclxuXHJcbiAgICAgICAgICAgICAgICBjd29yZF92YWwgPSBjd29yZF92YWwgPj4gMTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBoYXNoID0gKChpbnQpZmV0Y2ggPj4gNCkgJiAweGZmZjtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQyID0gKHVpbnQpaGFzaHRhYmxlW2hhc2hdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGZldGNoICYgMHhmKSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hsZW4gPSAoZmV0Y2ggJiAweGYpICsgMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjICs9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNobGVuID0gc291cmNlW3NyYyArIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gMztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdWludCBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChmZXRjaCAmIDMpID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAoZmV0Y2ggJiAweGZmKSA+PiAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGxlbiA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYysrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoZmV0Y2ggJiAyKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gKGZldGNoICYgMHhmZmZmKSA+PiAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGxlbiA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoZmV0Y2ggJiAxKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gKGZldGNoICYgMHhmZmZmKSA+PiA2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGxlbiA9ICgoZmV0Y2ggPj4gMikgJiAxNSkgKyAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gMjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKGZldGNoICYgMTI3KSAhPSAzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gKGZldGNoID4+IDcpICYgMHgxZmZmZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hsZW4gPSAoKGZldGNoID4+IDIpICYgMHgxZikgKyAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgKz0gMztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gKGZldGNoID4+IDE1KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hsZW4gPSAoKGZldGNoID4+IDcpICYgMjU1KSArIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQyID0gKHVpbnQpKGRzdCAtIG9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25bZHN0ICsgMF0gPSBkZXN0aW5hdGlvbltvZmZzZXQyICsgMF07XHJcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3QgKyAxXSA9IGRlc3RpbmF0aW9uW29mZnNldDIgKyAxXTtcclxuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdCArIDJdID0gZGVzdGluYXRpb25bb2Zmc2V0MiArIDJdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAzOyBpIDwgbWF0Y2hsZW47IGkgKz0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3QgKyBpXSA9IGRlc3RpbmF0aW9uW29mZnNldDIgKyBpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkc3QgKz0gKGludCltYXRjaGxlbjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmZXRjaCA9ICh1aW50KShkZXN0aW5hdGlvbltsYXN0X2hhc2hlZCArIDFdIHwgKGRlc3RpbmF0aW9uW2xhc3RfaGFzaGVkICsgMl0gPDwgOCkgfCAoZGVzdGluYXRpb25bbGFzdF9oYXNoZWQgKyAzXSA8PCAxNikpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChsYXN0X2hhc2hlZCA8IGRzdCAtIG1hdGNobGVuKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdF9oYXNoZWQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaCA9IChpbnQpKCgoZmV0Y2ggPj4gMTIpIF4gZmV0Y2gpICYgKEhBU0hfVkFMVUVTIC0gMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNodGFibGVbaGFzaF0gPSBsYXN0X2hhc2hlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzaF9jb3VudGVyW2hhc2hdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2ggPSAodWludCkoZmV0Y2ggPj4gOCAmIDB4ZmZmZiB8ICh1aW50KShkZXN0aW5hdGlvbltsYXN0X2hhc2hlZCArIDNdIDw8IDE2KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZldGNoID0gKHVpbnQpKHNvdXJjZVtzcmNdIHwgKHNvdXJjZVtzcmMgKyAxXSA8PCA4KSB8IChzb3VyY2Vbc3JjICsgMl0gPDwgMTYpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmZXRjaCA9ICh1aW50KShzb3VyY2Vbc3JjXSB8IChzb3VyY2Vbc3JjICsgMV0gPDwgOCkgfCAoc291cmNlW3NyYyArIDJdIDw8IDE2KSB8IChzb3VyY2Vbc3JjICsgM10gPDwgMjQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxhc3RfaGFzaGVkID0gZHN0IC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChkc3QgPD0gbGFzdF9tYXRjaHN0YXJ0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uW2RzdF0gPSBzb3VyY2Vbc3JjXTtcclxuICAgICAgICAgICAgICAgICAgICBkc3QgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICBzcmMgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjd29yZF92YWwgPSBjd29yZF92YWwgPj4gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxldmVsID09IDEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAobGFzdF9oYXNoZWQgPCBkc3QgLSAzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0X2hhc2hlZCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGZldGNoMiA9IGRlc3RpbmF0aW9uW2xhc3RfaGFzaGVkXSB8IChkZXN0aW5hdGlvbltsYXN0X2hhc2hlZCArIDFdIDw8IDgpIHwgKGRlc3RpbmF0aW9uW2xhc3RfaGFzaGVkICsgMl0gPDwgMTYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaCA9ICgoZmV0Y2gyID4+IDEyKSBeIGZldGNoMikgJiAoSEFTSF9WQUxVRVMgLSAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2h0YWJsZVtoYXNoXSA9IGxhc3RfaGFzaGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaF9jb3VudGVyW2hhc2hdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaCA9ICh1aW50KShmZXRjaCA+PiA4ICYgMHhmZmZmIHwgKHVpbnQpKHNvdXJjZVtzcmMgKyAyXSA8PCAxNikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaCA9ICh1aW50KShmZXRjaCA+PiA4ICYgMHhmZmZmIHwgKHVpbnQpKHNvdXJjZVtzcmMgKyAyXSA8PCAxNikgfCAodWludCkoc291cmNlW3NyYyArIDNdIDw8IDI0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChkc3QgPD0gc2l6ZSAtIDEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3dvcmRfdmFsID09IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSBDV09SRF9MRU47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjd29yZF92YWwgPSAweDgwMDAwMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltkc3RdID0gc291cmNlW3NyY107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzdCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3dvcmRfdmFsID0gY3dvcmRfdmFsID4+IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXN0aW5hdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuIH1cclxuICIsInVzaW5nIEJyaWRnZTtcclxudXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBHcmFwaHM7XHJcbnVzaW5nIEdyYXBoaWNzTGF5ZXI7XHJcbnVzaW5nIE5ld3RvbnNvZnQuSnNvbjtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBCcmlkZ2UualF1ZXJ5MjtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBHcmFwaHNDb3JlO1xyXG5cclxubmFtZXNwYWNlIFRlc3Rcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEFwcFxyXG4gICAge1xyXG4gICAgICAgIHN0YXRpYyBIVE1MRWxlbWVudCBfc2FnZUNvbnRhaW5lcjtcclxuICAgICAgICBzdGF0aWMgSFRNTExJRWxlbWVudCBfbmV3U2hlZXRUYWI7XHJcbiAgICAgICAgc3RhdGljIHN0cmluZyBfY3VycmVudFRhYkNhbnZhcztcclxuICAgICAgICBzdGF0aWMgaW50IF90YWJJRCA9IDE7XHJcblxyXG4gICAgICAgIHN0YXRpYyBEaWN0aW9uYXJ5PHN0cmluZywgVGFiQ2FudmFzPiBfY2FudmFzTG9va3VwID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBUYWJDYW52YXM+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBNYWluKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFdpbmRvdy5PbkxvYWQgKz0gT25XaW5kb3dMb2FkO1xyXG4gICAgICAgICAgICBXaW5kb3cuT25SZXNpemUgKz0gT25SZXNpemU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBPblJlc2l6ZShFdmVudCBlKSB7IE9uTGF5b3V0Q2hhbmdlKCk7fVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBPbkxheW91dENoYW5nZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdGMgPSBDdXJyZW50VGFiQ2FudmFzO1xyXG4gICAgICAgICAgICBpZiAodGMgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHRjLk9uTGF5b3V0Q2hhbmdlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgdm9pZCBPbldpbmRvd0xvYWQoRXZlbnQgZWVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgV2luZG93LkFkZEV2ZW50TGlzdGVuZXIoXCJjb3B5XCIsIChBY3Rpb248RXZlbnQ+KSgoRXZlbnQgZSkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKChlLlRhcmdldCBpcyBIVE1MU3BhbkVsZW1lbnQpIHx8IChlLlRhcmdldCBpcyBIVE1MQW5jaG9yRWxlbWVudCkpXHJcbiAgICAgICAgICAgICAgICAgICAgZS5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRjID0gX2NhbnZhc0xvb2t1cFtfY3VycmVudFRhYkNhbnZhc107XHJcbiAgICAgICAgICAgICAgICB2YXIgcyA9IHRjLkdyYXBoQ2FudmFzLkRvQ29weSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzdHJpbmcuSXNOdWxsT3JFbXB0eShzKSlcclxuICAgICAgICAgICAgICAgICAgICBlLlRvRHluYW1pYygpLmNsaXBib2FyZERhdGEuc2V0RGF0YShcIlRleHRcIiwgcyk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgIFdpbmRvdy5BZGRFdmVudExpc3RlbmVyKFwicGFzdGVcIiwgKEFjdGlvbjxFdmVudD4pKChFdmVudCBlKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlLlByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcyA9IGUuVG9EeW5hbWljKCkuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwiVGV4dFwiKTtcclxuICAgICAgICAgICAgICAgIHZhciB0YyA9IF9jYW52YXNMb29rdXBbX2N1cnJlbnRUYWJDYW52YXNdO1xyXG4gICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuRG9QYXN0ZShzID8/IFwiXCIpO1xyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICBqUXVlcnkuRG9jdW1lbnQuT24oXCJrZXlkb3duXCIsIChBY3Rpb248S2V5Ym9hcmRFdmVudD4pT25LZXlEb3duKTtcclxuICAgICAgICAgICAgalF1ZXJ5LkRvY3VtZW50Lk9uKFwiY29udGV4dG1lbnVcIiwgXCIuSUFtQUdyYXBoQ2FudmFzXCIsIChBY3Rpb248RXZlbnQ+KSgoRXZlbnQgZSkgPT4geyBlLlByZXZlbnREZWZhdWx0KCk7IH0pKTtcclxuXHJcbiAgICAgICAgICAgICNyZWdpb24gU2FnZVxyXG4gICAgICAgICAgICBfc2FnZUNvbnRhaW5lciA9IERvY3VtZW50LkdldEVsZW1lbnRCeUlkKFwiU2FnZUNvbnRhaW5lclwiKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlTWFudWFsXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTWFudWFsKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlR3JhcGg2XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlR3JhcGg2KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlU3BhcnNlNlwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZVNwYXJzZTYoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VDaHJvbWF0aWNOdW1iZXJcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VDaHJvbWF0aWNOdW1iZXIoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VDaHJvbWF0aWNQb2x5bm9taWFsXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQ2hyb21hdGljUG9seW5vbWlhbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUNvbG9yaW5nXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQ29sb3JpbmcoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJbmRlcGVuZGVudFNldFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUluZGVwZW5kZW50U2V0KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNQZXJmZWN0XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNQZXJmZWN0KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlTWF0Y2hpbmdQb2x5bm9taWFsXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTWF0Y2hpbmdQb2x5bm9taWFsKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlUGF0aHdpZHRoXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlUGF0aHdpZHRoKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlVHJlZXdpZHRoXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlVHJlZXdpZHRoKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlVHV0dGVQb2x5bm9taWFsXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlVHV0dGVQb2x5bm9taWFsKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlVmVydGV4Q292ZXJcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VWZXJ0ZXhDb3ZlcigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUNsaXF1ZUNvbXBsZXhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VDbGlxdWVDb21wbGV4KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQ2xpcXVlTWF4aW11bVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUNsaXF1ZU1heGltdW0oKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VDbGlxdWVOdW1iZXJcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VDbGlxdWVOdW1iZXIoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VDbGlxdWVQb2x5bm9taWFsXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQ2xpcXVlUG9seW5vbWlhbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUJyaWRnZXNcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VCcmlkZ2VzKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlR29tb3J5SHVUcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlR29tb3J5SHVUcmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlUmFuZG9tU3Bhbm5pbmdUcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlUmFuZG9tU3Bhbm5pbmdUcmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQXBleFZlcnRpY2VzXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQXBleFZlcnRpY2VzKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNBcGV4XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNBcGV4KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNBcmNUcmFuc2l0aXZlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNBcmNUcmFuc2l0aXZlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNBc3Rlcm9pZGFsVHJpcGxlRnJlZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzQXN0ZXJvaWRhbFRyaXBsZUZyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0JpY29ubmVjdGVkXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNCaWNvbm5lY3RlZCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQmlwYXJ0aXRlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNCaXBhcnRpdGUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0Jsb2NrR3JhcGhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0Jsb2NrR3JhcGgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0NhcnRlc2lhblByb2R1Y3RcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0NhcnRlc2lhblByb2R1Y3QoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0Rpc3RhbmNlUmVndWxhclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzRGlzdGFuY2VSZWd1bGFyKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNFZGdlVHJhbnNpdGl2ZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzRWRnZVRyYW5zaXRpdmUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0V2ZW5Ib2xlRnJlZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzRXZlbkhvbGVGcmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNGb3Jlc3RcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0ZvcmVzdCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzSGFsZlRyYW5zaXRpdmVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0hhbGZUcmFuc2l0aXZlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNMaW5lR3JhcGhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0xpbmVHcmFwaCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzTG9uZ0FudGlob2xlRnJlZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzTG9uZ0FudGlob2xlRnJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzTG9uZ0hvbGVGcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNMb25nSG9sZUZyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc09kZEhvbGVGcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNPZGRIb2xlRnJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzT3ZlcmZ1bGxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc092ZXJmdWxsKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNQYXJ0aWFsQ3ViZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzUGFydGlhbEN1YmUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1ByaW1lXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNQcmltZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzU2VtaVN5bW1ldHJpY1wiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzU2VtaVN5bW1ldHJpYygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzU3BsaXRcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1NwbGl0KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNTdHJvbmdseVJlZ3VsYXJcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1N0cm9uZ2x5UmVndWxhcigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzVHJlZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzVHJlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzVHJpYW5nbGVGcmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNUcmlhbmdsZUZyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1dlYWtseUNob3JkYWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1dlYWtseUNob3JkYWwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VPZGRHaXJ0aFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZU9kZEdpcnRoKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlRnJhY3Rpb25hbENocm9tYXRpY0luZGV4XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlRnJhY3Rpb25hbENocm9tYXRpY0luZGV4KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSGFzUGVyZmVjdE1hdGNoaW5nXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSGFzUGVyZmVjdE1hdGNoaW5nKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlS2lyY2hob2ZmU3ltYW56aWtQb2x5bm9taWFsXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlS2lyY2hob2ZmU3ltYW56aWtQb2x5bm9taWFsKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlTG92YXN6VGhldGFcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VMb3Zhc3pUaGV0YSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZU1hdGNoaW5nXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTWF0Y2hpbmcoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VNYXhpbXVtQXZlcmFnZURlZ3JlZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZU1heGltdW1BdmVyYWdlRGVncmVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlU2VpZGVsQWRqYWNlbmN5TWF0cml4XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlU2VpZGVsQWRqYWNlbmN5TWF0cml4KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlTmV0d29ya3hHcmFwaFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZU5ldHdvcmt4R3JhcGgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VBZGphY2VuY3lNYXRyaXhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VBZGphY2VuY3lNYXRyaXgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJbmNpZGVuY2VNYXRyaXhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJbmNpZGVuY2VNYXRyaXgoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VEaXN0YW5jZU1hdHJpeFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZURpc3RhbmNlTWF0cml4KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlS2lyY2hob2ZmTWF0cml4XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlS2lyY2hob2ZmTWF0cml4KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlRGVuc2l0eVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZURlbnNpdHkoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VPcmRlclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZU9yZGVyKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlU2l6ZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZVNpemUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VBdmVyYWdlRGVncmVlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQXZlcmFnZURlZ3JlZSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZURlZ3JlZVNlcXVlbmNlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlRGVncmVlU2VxdWVuY2UoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VDeWNsZUJhc2lzXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQ3ljbGVCYXNpcygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUFsbFBhdGhzXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlQWxsUGF0aHMoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VUcmlhbmdsZXNDb3VudFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZVRyaWFuZ2xlc0NvdW50KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlU3BlY3RydW1cIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VTcGVjdHJ1bSgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUVpZ2VudmVjdG9yc1wiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUVpZ2VudmVjdG9ycygpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUVpZ2Vuc3BhY2VzXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlRWlnZW5zcGFjZXMoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VBdXRvbW9ycGhpc21Hcm91cFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUF1dG9tb3JwaGlzbUdyb3VwKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNWZXJ0ZXhUcmFuc2l0aXZlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNWZXJ0ZXhUcmFuc2l0aXZlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlQ2Fub25pY2FsTGFiZWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VDYW5vbmljYWxMYWJlbCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzQ2F5bGV5XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNDYXlsZXkoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0V1bGVyaWFuXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNFdWxlcmlhbigpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzUGxhbmFyXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNQbGFuYXIoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc1JlZ3VsYXJcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc1JlZ3VsYXIoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0Nob3JkYWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0Nob3JkYWwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0NpcmN1bGFudFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzQ2lyY3VsYW50KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNJbnRlcnZhbFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzSW50ZXJ2YWwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0dhbGxhaVRyZWVcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VJc0dhbGxhaVRyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0NsaXF1ZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzQ2xpcXVlKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNDeWNsZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzQ3ljbGUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VJc0luZGVwZW5kZW50U2V0XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNJbmRlcGVuZGVudFNldCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzVHJhbnNpdGl2ZWx5UmVkdWNlZFwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzVHJhbnNpdGl2ZWx5UmVkdWNlZCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUlzRXF1aXRhYmxlXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlSXNFcXVpdGFibGUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VFY2NlbnRyaWNpdHlcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VFY2NlbnRyaWNpdHkoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VSYWRpdXNcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VSYWRpdXMoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VEaWFtZXRlclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZURpYW1ldGVyKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlR2lydGhcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VHaXJ0aCgpKSk7XHJcbiAgICAgICAgICAgIGpRdWVyeS5TZWxlY3QoXCIjU2FnZUVkZ2VDb25uZWN0aXZpdHlcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VFZGdlQ29ubmVjdGl2aXR5KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlVmVydGV4Q29ubmVjdGl2aXR5XCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlVmVydGV4Q29ubmVjdGl2aXR5KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlSXNIYW1pbHRvbmlhblwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUlzSGFtaWx0b25pYW4oKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VDaGFyYWN0ZXJpc3RpY1BvbHlub21pYWxcIikuT24oXCJjbGlja1wiLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uKSgoKSA9PiBDdXJyZW50VGFiQ2FudmFzLlNhZ2VDaGFyYWN0ZXJpc3RpY1BvbHlub21pYWwoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VHZW51c1wiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUdlbnVzKCkpKTtcclxuXHJcblxyXG4gICAgICAgICAgICAjcmVnaW9uIExheW91dFxyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VMYXlvdXRTcHJpbmdzXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTGF5b3V0U3ByaW5nKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlTGF5b3V0UmFua2VkXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTGF5b3V0UmFua2VkKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlTGF5b3V0UmFuZG9tXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTGF5b3V0RXh0ZW5kUmFuZG9tbHkoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VMYXlvdXRDaXJjdWxhclwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUxheW91dENpcmN1bGFyKCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlTGF5b3V0VHJlZVwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUxheW91dFRyZWUoKSkpO1xyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiI1NhZ2VMYXlvdXRHcmFwaFZpelwiKS5PbihcImNsaWNrXCIsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb24pKCgpID0+IEN1cnJlbnRUYWJDYW52YXMuU2FnZUxheW91dEdyYXBodml6KCkpKTtcclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIiNTYWdlTGF5b3V0UGxhbmFyXCIpLk9uKFwiY2xpY2tcIiwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbikoKCkgPT4gQ3VycmVudFRhYkNhbnZhcy5TYWdlTGF5b3V0UGxhbmFyKCkpKTtcclxuICAgICAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIi5OYW1lZEdyYXBoXCIpLk9uKFwiY2xpY2tcIiwgKEFjdGlvbjxFdmVudD4pKChFdmVudCBlZSkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVGFiQ2FudmFzLlNhZ2VMb2FkTmFtZWRHcmFwaCgoKEhUTUxFbGVtZW50KWVlLkN1cnJlbnRUYXJnZXQpLlRleHRDb250ZW50KTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIE5ld1RhYigpO1xyXG4gICAgICAgICAgICBBZGROZXdTaGVldFRhYigpO1xyXG5cclxuICAgICAgICAgICAgalF1ZXJ5LlNlbGVjdChcIi5uYXYtdGFic1wiKS5PbihcImNsaWNrXCIsIFwiYVwiLCAoQWN0aW9uPEV2ZW50PikoKEV2ZW50IGVlKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlZS5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFqUXVlcnkuVGhpcy5IYXNDbGFzcyhcIm5ldy1zaGVldC1hbmNob3JcIikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBqUXVlcnkuVGhpcy5Ub0R5bmFtaWMoKTtcclxuICAgICAgICAgICAgICAgICAgICBfY3VycmVudFRhYkNhbnZhcyA9IGVlLlRhcmdldC5BczxIVE1MQW5jaG9yRWxlbWVudD4oKS5IcmVmO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBfY2FudmFzTG9va3VwW19jdXJyZW50VGFiQ2FudmFzXS5DYW52YXM7XHJcbiAgICAgICAgICAgICAgICAgICAgZC50YWIoXCJzaG93XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICBqUXVlcnkuU2VsZWN0KFwiLm5ldy1zaGVldC1hbmNob3JcIikuT24oXCJjbGlja1wiLCAoQWN0aW9uPEV2ZW50PikoKEV2ZW50IGVlKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlZS5QcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgTmV3VGFiKCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB2b2lkIEFkZE5ld1NoZWV0VGFiKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0YWJDb250cm9sID0gRG9jdW1lbnQuR2V0RWxlbWVudEJ5SWQoXCJUYWJDb250cm9sXCIpO1xyXG4gICAgICAgICAgICBfbmV3U2hlZXRUYWIgPSBuZXcgSFRNTExJRWxlbWVudCgpO1xyXG4gICAgICAgICAgICBfbmV3U2hlZXRUYWIuSWQgPSBcIm5ldy1zaGVldFwiO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFuY2hvciA9IG5ldyBIVE1MQW5jaG9yRWxlbWVudCgpO1xyXG4gICAgICAgICAgICBhbmNob3IuQ2xhc3NOYW1lID0gXCJuZXctc2hlZXQtYW5jaG9yXCI7XHJcbiAgICAgICAgICAgIGFuY2hvci5UZXh0Q29udGVudCA9IFwiK1wiO1xyXG4gICAgICAgICAgICBhbmNob3IuSHJlZiA9IFwiI1wiO1xyXG5cclxuICAgICAgICAgICAgX25ld1NoZWV0VGFiLkFwcGVuZENoaWxkKGFuY2hvcik7XHJcbiAgICAgICAgICAgIHRhYkNvbnRyb2wuQXBwZW5kQ2hpbGQoX25ld1NoZWV0VGFiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBOZXdUYWIoc3RyaW5nIG5hbWUgPSBudWxsLCBHcmFwaCBHID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShuYW1lKSlcclxuICAgICAgICAgICAgICAgIG5hbWUgPSBcInNoZWV0IFwiICsgX3RhYklEO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IG5ldyBIVE1MQ2FudmFzRWxlbWVudCgpO1xyXG4gICAgICAgICAgICBjYW52YXMuSWQgPSBcIlRhYlwiICsgX3RhYklEO1xyXG4gICAgICAgICAgICBjYW52YXMuV2lkdGggPSAoaW50KShXaW5kb3cuSW5uZXJXaWR0aCk7XHJcbiAgICAgICAgICAgIGNhbnZhcy5IZWlnaHQgPSAoaW50KShXaW5kb3cuSW5uZXJIZWlnaHQpO1xyXG4gICAgICAgICAgICBjYW52YXMuQ2xhc3NOYW1lID0gXCJJQW1BR3JhcGhDYW52YXNcIjtcclxuXHJcbiAgICAgICAgICAgIGNhbnZhcy5PblNob3cgKz0gZGVsZWdhdGUgXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhbnZhcy5XaWR0aCA9IGNhbnZhcy5QYXJlbnRFbGVtZW50LkNsaWVudFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgY2FudmFzLkhlaWdodCA9IGNhbnZhcy5QYXJlbnRFbGVtZW50LkNsaWVudEhlaWdodDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChHID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICBHID0gbmV3IEdyYXBoKCk7XHJcbiAgICAgICAgICAgIHZhciBncmFwaENhbnZhcyA9IG5ldyBHcmFwaENhbnZhcyhHKTtcclxuICAgICAgICAgICAgdmFyIHRjID0gbmV3IFRhYkNhbnZhcyhjYW52YXMsIGdyYXBoQ2FudmFzKTtcclxuICAgICAgICAgICAgdGMuSW52YWxpZGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRhYlBhbmUgPSBuZXcgSFRNTERpdkVsZW1lbnQoKTtcclxuICAgICAgICAgICAgdGFiUGFuZS5DbGFzc05hbWUgPSBcInRhYi1wYW5lIGFjdGl2ZVwiO1xyXG4gICAgICAgICAgICB0YWJQYW5lLklkID0gXCJUYWJcIiArIF90YWJJRDtcclxuICAgICAgICAgICAgdGFiUGFuZS5BcHBlbmRDaGlsZChjYW52YXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRhYkNvbnRyb2xDb250ZW50ID0gRG9jdW1lbnQuR2V0RWxlbWVudEJ5SWQoXCJUYWJDb250cm9sQ29udGVudFwiKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNoaWxkIGluIHRhYkNvbnRyb2xDb250ZW50LkNoaWxkcmVuKVxyXG4gICAgICAgICAgICAgICAgY2hpbGQuQ2xhc3NOYW1lID0gXCJ0YWItcGFuZVwiO1xyXG4gICAgICAgICAgICB0YWJDb250cm9sQ29udGVudC5BcHBlbmRDaGlsZCh0YWJQYW5lKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0YWIgPSBuZXcgSFRNTExJRWxlbWVudCgpO1xyXG4gICAgICAgICAgICB0YWIuQ2xhc3NOYW1lID0gXCJhY3RpdmVcIjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHZhciBhbmNob3IgPSBuZXcgSFRNTEFuY2hvckVsZW1lbnQoKTtcclxuICAgICAgICAgICAgYW5jaG9yLlNldEF0dHJpYnV0ZShcImRhdGEtdG9nZ2xlXCIsIFwidGFiXCIpO1xyXG4gICAgICAgICAgICBhbmNob3IuVGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgICAgICBhbmNob3IuSHJlZiA9IFwiI1RhYlwiICsgX3RhYklEO1xyXG4gICAgICAgICAgICBfY2FudmFzTG9va3VwW2FuY2hvci5IcmVmXSA9IHRjO1xyXG4gICAgICAgICAgICBfY3VycmVudFRhYkNhbnZhcyA9IGFuY2hvci5IcmVmO1xyXG5cclxuICAgICAgICAgICAgdGFiLkFwcGVuZENoaWxkKGFuY2hvcik7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGFiQ29udHJvbCA9IERvY3VtZW50LkdldEVsZW1lbnRCeUlkKFwiVGFiQ29udHJvbFwiKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGNoaWxkIGluIHRhYkNvbnRyb2wuQ2hpbGRyZW4pXHJcbiAgICAgICAgICAgICAgICBjaGlsZC5DbGFzc05hbWUgPSBcIm5hcmZcIjtcclxuICAgICAgICAgICAgdGFiQ29udHJvbC5JbnNlcnRCZWZvcmUodGFiLCBfbmV3U2hlZXRUYWIpO1xyXG5cclxuICAgICAgICAgICAgX3RhYklEKys7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIFRhYkNhbnZhcyBDdXJyZW50VGFiQ2FudmFzIHsgZ2V0IHsgcmV0dXJuIF9jYW52YXNMb29rdXBbX2N1cnJlbnRUYWJDYW52YXNdOyB9IH1cclxuXHJcbiAgICAgICAgc3RhdGljIHZvaWQgT25LZXlEb3duKEtleWJvYXJkRXZlbnQgZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB0YyA9IEN1cnJlbnRUYWJDYW52YXM7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKGUuS2V5KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRjLkdyYXBoQ2FudmFzLkRvWm9vbUZpdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIi1cIjpcclxuICAgICAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Eb1pvb20oLTEsIG5ldyBCb3goMC41LCAwLjUpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIrXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuRG9ab29tKDEsIG5ldyBCb3goMC41LCAwLjUpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJpXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuVG9nZ2xlVmVydGV4SW5kaWNlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIklcIjpcclxuICAgICAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Sb3RhdGVWZXJ0ZXhJbmRpY2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwialwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRjLkdyYXBoQ2FudmFzLlRvZ2dsZUVkZ2VJbmRpY2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiSlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRjLkdyYXBoQ2FudmFzLlJvdGF0ZUVkZ2VJbmRpY2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiclwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRjLkdyYXBoQ2FudmFzLkRvUmV2ZXJzZVNlbGVjdGVkRWRnZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJSXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGMuR3JhcGhDYW52YXMuRG9Sb3RhdGVTZWxlY3RlZEVkZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwieVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLkN0cmxLZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRjLkdyYXBoQ2FudmFzLkRvUmVkbygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInpcIjpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5DdHJsS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0Yy5HcmFwaENhbnZhcy5Eb1VuZG8oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBBc2tTYWdlKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGRpdiA9IEFwcGVuZFNhZ2VEaXYocyk7XHJcblxyXG4gICAgICAgICAgICBTY3JpcHQuV3JpdGUoXCJzYWdlY2VsbC5tYWtlU2FnZWNlbGwoe1xcXCJpbnB1dExvY2F0aW9uXFxcIjogXFxcImRpdi5jb21wdXRlXFxcIiwgaGlkZTogW1xcXCJwZXJtYWxpbmtcXFwiLCBcXFwiZnVsbFNjcmVlblxcXCJdLCBhdXRvZXZhbDpmYWxzZX0pO1wiKTtcclxuICAgICAgICAgICAgU2NyaXB0LldyaXRlKFwiJChcXFwiI1NhZ2VNb2RhbFxcXCIpLm1vZGFsKCdzaG93Jyk7XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB2b2lkIEFza1NhZ2VBdXRvKHN0cmluZyBzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwZW5kU2FnZURpdihzKTtcclxuXHJcbiAgICAgICAgICAgIFNjcmlwdC5Xcml0ZShcInNhZ2VjZWxsLm1ha2VTYWdlY2VsbCh7XFxcImlucHV0TG9jYXRpb25cXFwiOiBcXFwiZGl2LmNvbXB1dGVcXFwiLCBoaWRlOiBbXFxcInBlcm1hbGlua1xcXCIsIFxcXCJldmFsQnV0dG9uXFxcIiwgXFxcImZ1bGxTY3JlZW5cXFwiLCBcXFwiZWRpdG9yXFxcIl0sIGF1dG9ldmFsOnRydWV9KTtcIik7XHJcbiAgICAgICAgICAgIFNjcmlwdC5Xcml0ZShcIiQoXFxcIiNTYWdlTW9kYWxcXFwiKS5tb2RhbCgnc2hvdycpO1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgVGFzazxzdHJpbmc+IEFza1NhZ2VBc3luYyhHcmFwaCBHLCBzdHJpbmcgc2FnZUNvZGVBYm91dEcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhcIkcgPSBHcmFwaCgnXCIgKyBHLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBzYWdlQ29kZUFib3V0Ryk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGFzeW5jIFRhc2s8c3RyaW5nPiBBc2tTYWdlQXN5bmMoc3RyaW5nIHNhZ2VDb2RlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG91dHB1dCA9IERvY3VtZW50LkdldEVsZW1lbnRCeUlkKFwiU2FnZVNlY3JldE91dHB1dEhvbGVcIik7XHJcbiAgICAgICAgICAgIG91dHB1dC5UZXh0Q29udGVudCA9IFwid29ya2luZ1wiO1xyXG4gICAgICAgICAgICBBcHBlbmRTYWdlRGl2KHNhZ2VDb2RlKTtcclxuXHJcbiAgICAgICAgICAgIFNjcmlwdC5Xcml0ZShcInNhZ2VjZWxsLm1ha2VTYWdlY2VsbCh7XFxcImlucHV0TG9jYXRpb25cXFwiOiBcXFwiZGl2LmNvbXB1dGVcXFwiLCBoaWRlOiBbXFxcInBlcm1hbGlua1xcXCIsIFxcXCJldmFsQnV0dG9uXFxcIiwgXFxcImZ1bGxTY3JlZW5cXFwiLCBcXFwiZWRpdG9yXFxcIl0sIGF1dG9ldmFsOnRydWUsIG91dHB1dExvY2F0aW9uOlxcXCIjU2FnZVNlY3JldE91dHB1dEhvbGVcXFwifSk7XCIpO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKCFvdXRwdXQuVGV4dENvbnRlbnQuQ29udGFpbnMoXCJBY2NlcHRlZDpcIikpXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBUYXNrLkRlbGF5KDEwMCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBvdXRwdXQuVGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgIGlmIChzdHJpbmcuSXNOdWxsT3JFbXB0eShyZXNwb25zZSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJmbGliYmxlXCI7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0T3JEZWZhdWx0PHN0cmluZz4ocmVzcG9uc2UuU3BsaXQobmV3W10geyBFbnZpcm9ubWVudC5OZXdMaW5lIH0sIFN0cmluZ1NwbGl0T3B0aW9ucy5SZW1vdmVFbXB0eUVudHJpZXMpLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgYm9vbD4pKGxpbmUgPT4gbGluZS5Db250YWlucyhcIkFjY2VwdGVkOlwiKSkpO1xyXG4gICAgICAgICAgICBpZiAoc3RyaW5nLklzTnVsbE9yRW1wdHkoc3MpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZmxhYmJsZVwiO1xyXG5cclxuICAgICAgICAgICAgc3MgPSBzcy5TdWJzdHJpbmcoc3MuSW5kZXhPZihcInRleHQvcGxhaW5cIikgKyBcInRleHQvcGxhaW5cIi5MZW5ndGggKyAzKTtcclxuICAgICAgICAgICAgc3MgPSBzcy5TdWJzdHJpbmcoMCwgc3MuSW5kZXhPZihcIlxcXCJcIikpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIEhUTUxEaXZFbGVtZW50IEFwcGVuZFNhZ2VEaXYoc3RyaW5nIHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX3NhZ2VDb250YWluZXIuQ2hpbGRFbGVtZW50Q291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgX3NhZ2VDb250YWluZXIuUmVtb3ZlQ2hpbGQoX3NhZ2VDb250YWluZXIuQ2hpbGRyZW5bMF0pO1xyXG4gICAgICAgICAgICB2YXIgZGl2ID0gbmV3IEhUTUxEaXZFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIGRpdi5DbGFzc05hbWUgPSBcImNvbXB1dGVcIjtcclxuICAgICAgICAgICAgZGl2LlRleHRDb250ZW50ID0gcztcclxuICAgICAgICAgICAgX3NhZ2VDb250YWluZXIuQXBwZW5kQ2hpbGQoZGl2KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkaXY7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidXNpbmcgR3JhcGhpY3NMYXllcjtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIFRlc3Rcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFzcyBIZWxwZXJFeHRlbnNpb25zXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdHJpbmcgVG9Db2xvcih0aGlzIEFSR0IgYXJnYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuRm9ybWF0KFwicmdiYSh7MH0sezF9LHsyfSx7MzowLjAwfSlcIiwgYXJnYi5SLCBhcmdiLkcsIGFyZ2IuQiwgYXJnYi5BIC8gMjU1LjApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgVGVzdFxyXG57XHJcbiAgICBjbGFzcyBMYXlvdXRBbmltYXRpb25cclxuICAgIHtcclxuICAgICAgICBjb25zdCBpbnQgU3RlcHMgPSAxMDA7XHJcblxyXG4gICAgICAgIEFjdGlvbiBfdXBkYXRlO1xyXG4gICAgICAgIEFjdGlvbiBfZmluYWxVcGRhdGU7XHJcbiAgICAgICAgTGlzdDxHcmFwaHMuVmVjdG9yPiBfbGF5b3V0O1xyXG4gICAgICAgIGRvdWJsZVtdIF94c3RlcDtcclxuICAgICAgICBkb3VibGVbXSBfeXN0ZXA7XHJcbiAgICAgICAgaW50IF9zdGVwID0gMDtcclxuICAgICAgICBHcmFwaHMuR3JhcGggX0c7XHJcblxyXG4gICAgICAgIHB1YmxpYyBMYXlvdXRBbmltYXRpb24oQWN0aW9uIHVwZGF0ZSwgQWN0aW9uIGZpbmFsVXBkYXRlLCBMaXN0PEdyYXBocy5WZWN0b3I+IGxheW91dCwgR3JhcGhzLkdyYXBoIEcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfRyA9IEc7XHJcbiAgICAgICAgICAgIF91cGRhdGUgPSB1cGRhdGU7XHJcbiAgICAgICAgICAgIF9maW5hbFVwZGF0ZSA9IGZpbmFsVXBkYXRlO1xyXG4gICAgICAgICAgICBfbGF5b3V0ID0gbGF5b3V0O1xyXG5cclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF94c3RlcCA9IG5ldyBkb3VibGVbX2xheW91dC5Db3VudF07XHJcbiAgICAgICAgICAgICAgICBfeXN0ZXAgPSBuZXcgZG91YmxlW19sYXlvdXQuQ291bnRdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfbGF5b3V0LkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3hzdGVwW2ldID0gKF9sYXlvdXRbaV0uWCAtIF9HLlZlcnRpY2VzW2ldLlgpIC8gU3RlcHM7XHJcbiAgICAgICAgICAgICAgICAgICAgX3lzdGVwW2ldID0gKF9sYXlvdXRbaV0uWSAtIF9HLlZlcnRpY2VzW2ldLlkpIC8gU3RlcHM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYXN5bmMgVGFzayBBbmltYXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdoaWxlKF9zdGVwIDwgU3RlcHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIERvU3RlcCgpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgVGFzay5EZWxheSgxMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgRG9TdGVwKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2xheW91dC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfRy5WZXJ0aWNlc1tpXS5YICs9IF94c3RlcFtpXTtcclxuICAgICAgICAgICAgICAgIF9HLlZlcnRpY2VzW2ldLlkgKz0gX3lzdGVwW2ldO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBfdXBkYXRlKCk7XHJcbiAgICAgICAgICAgIF9zdGVwKys7XHJcbiAgICAgICAgICAgIGlmIChfc3RlcCA+PSBTdGVwcylcclxuICAgICAgICAgICAgICAgIE9uRmluaXNoKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uRmluaXNoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2xheW91dC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfRy5WZXJ0aWNlc1tpXS5YID0gX2xheW91dFtpXS5YO1xyXG4gICAgICAgICAgICAgICAgX0cuVmVydGljZXNbaV0uWSA9IF9sYXlvdXRbaV0uWTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfZmluYWxVcGRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRGF0YVN0cnVjdHVyZXNcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFVuaW9uRmluZFRyYWNrZWRSb290czxUPiA6IFVuaW9uRmluZDxUPlxyXG4gICAge1xyXG4gICAgICAgIExpc3Q8Tm9kZT4gX3Jvb3RzID0gbmV3IExpc3Q8Tm9kZT4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPE5vZGU+IEZpbmRBbGxFeGNlcHQoSUVudW1lcmFibGU8Tm9kZT4gbm9kZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8Z2xvYmFsOjpBbGdvcml0aG1zLkRhdGFTdHJ1Y3R1cmVzLlVuaW9uRmluZDxUPi5Ob2RlPihfcm9vdHMsU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkRhdGFTdHJ1Y3R1cmVzLlVuaW9uRmluZDxUPi5Ob2RlLGdsb2JhbDo6QWxnb3JpdGhtcy5EYXRhU3RydWN0dXJlcy5VbmlvbkZpbmQ8VD4uTm9kZT4obm9kZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkRhdGFTdHJ1Y3R1cmVzLlVuaW9uRmluZDxUPi5Ob2RlLCBnbG9iYWw6OkFsZ29yaXRobXMuRGF0YVN0cnVjdHVyZXMuVW5pb25GaW5kPFQ+Lk5vZGU+KShuID0+IEZpbmQobikpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBSb290QWRkZWQoTm9kZSBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3Jvb3RzLkFkZChuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIFJvb3RSZW1vdmVkKE5vZGUgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9yb290cy5SZW1vdmUobik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxudXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkNocm9uaWNsZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQ2hyb25pY2xlZEJyYW5jaCA6IElFbnVtZXJhYmxlPElFbnVtZXJhYmxlPE1vdmU+PlxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBpbnQgQWxwaGEge2dldDsgcHJpdmF0ZSBzZXQ7fVxyXG4gICAgICAgIHB1YmxpYyBpbnQgQmV0YSB7Z2V0OyBwcml2YXRlIHNldDt9XHJcbiAgICAgICAgcHVibGljIExpc3Q8TGlzdDxpbnQ+PiBTd2FwQ29tcG9uZW50cyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIENocm9uaWNsZWRCcmFuY2goTGlzdDxpbnQ+IFMsIGludCBhbHBoYSwgaW50IGJldGEsIExpc3Q8TGlzdDxpbnQ+PiBwYXJ0aXRpb25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQWxwaGEgPSBhbHBoYTtcclxuICAgICAgICAgICAgQmV0YSA9IGJldGE7XHJcbiAgICAgICAgICAgIFN3YXBDb21wb25lbnRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHBhcnRpdGlvbnMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikocCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxpbnQsaW50PihwLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikoaSA9PiBTW2ldKSkuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYXRvcjxJRW51bWVyYWJsZTxNb3ZlPj4gR2V0RW51bWVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGJvb2w+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Nb3ZlPj4oTGlzdFV0aWxpdHkuRW51bWVyYXRlU2hvcnRMZXhOb25lbXB0eShTd2FwQ29tcG9uZW50cy5Db3VudCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGJvb2w+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZT4+KShjZiA9PiBFbnVtZXJhdGVNb3ZlcyhjZikpKS5HZXRFbnVtZXJhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJRW51bWVyYWJsZTxNb3ZlPiBFbnVtZXJhdGVNb3ZlcyhMaXN0PGJvb2w+IGNmKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjZi5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNmW2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzIGluIFN3YXBDb21wb25lbnRzW2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXcgTW92ZSgpIHsgQWRkZWQgPSBBbHBoYSwgUmVtb3ZlZCA9IEJldGEsIFN0YWNrID0gcyB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmF0b3IgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhYmxlLkdldEVudW1lcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdldEVudW1lcmF0b3IoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQ29sb3JpbmdBbmFseXplciA6IElCb2FyZEFuYWx5emVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZWFzb24geyBnZXQgeyByZXR1cm4gXCJjb2xvciBhbGxcIjsgfSB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNLbm93bGVkZ2VEZXBlbmRlbnQgeyBnZXQgeyByZXR1cm4gZmFsc2U7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxpbmVHcmFwaCA9IGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5MaW5lR3JhcGg7XHJcbiAgICAgICAgICAgIHZhciBjYW5Db2xvciA9IGxpbmVHcmFwaC5Jc0Nob29zYWJsZShFbnVtZXJhYmxlLlJhbmdlKDAsIGxpbmVHcmFwaC5OKS5TZWxlY3Q8bG9uZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBsb25nPikoZSA9PiBrbm93bGVkZ2UuR2V0RWRnZUNvbG9yTGlzdChib2FyZCwgZSkpKS5Ub0xpc3QoKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2FuQ29sb3IpXHJcbiAgICAgICAgICAgICAgICBrbm93bGVkZ2VbYm9hcmQuVGVtcGxhdGUuVmFsdWVdW2JvYXJkLkNvbG9yQ291bnRdLkFkZFdpbihib2FyZCwgUmVhc29uKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjYW5Db2xvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBDb2xvcmFibGVXaXRob3V0RWRnZShLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZCwgaW50IGVkZ2VJbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb2xvcmFibGVXaXRob3V0RWRnZShrbm93bGVkZ2UsIGJvYXJkLlN0YWNrcywgZWRnZUluZGV4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBDb2xvcmFibGVXaXRob3V0RWRnZShLbm93bGVkZ2Uga25vd2xlZGdlLCBMaXN0PGxvbmc+IHN0YWNrcywgaW50IGVkZ2VJbmRleClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsZyA9IGtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5MaW5lR3JhcGg7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbGcuSXNDaG9vc2FibGUoRW51bWVyYWJsZS5SYW5nZSgwLCBsZy5OKS5TZWxlY3Q8bG9uZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBsb25nPikoZSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZSA9PSBlZGdlSW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBrbm93bGVkZ2UuR2V0RWRnZUNvbG9yTGlzdChzdGFja3MsIGUpO1xyXG4gICAgICAgICAgICB9KSkuVG9MaXN0KCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBDb21tb25Db2xvckFuYWx5emVyIDogSUJvYXJkQW5hbHl6ZXJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFJlYXNvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIFwiY29tbW9uIGNvbG9yXCI7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzS25vd2xlZGdlRGVwZW5kZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY29tbW9uQ29sb3IgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTxsb25nLGxvbmc+KGJvYXJkLlN0YWNrcywtMUwsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGxvbmcsIGxvbmc+KSgodCwgcykgPT4gdCAmIHMpKSAhPSAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvbW1vbkNvbG9yKVxyXG4gICAgICAgICAgICAgICAga25vd2xlZGdlW2JvYXJkLlRlbXBsYXRlLlZhbHVlXVtib2FyZC5Db2xvckNvdW50XS5BZGRXaW4oYm9hcmQsIFJlYXNvbik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY29tbW9uQ29sb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFN3YXBBbmFseXplciA6IElCb2FyZEFuYWx5emVyXHJcbiAgICB7XHJcbiAgICAgICAgYm9vbCBGaW5kQ2xlYW5lc3RXaW4geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIGJvb2wgRG9TdXBlcmFidW5kYW50Q2hlY2sgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyB2aXJ0dWFsIHN0cmluZyBSZWFzb24geyBnZXQgeyByZXR1cm4gXCJnb29kIHN3YXBcIjsgfSB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNLbm93bGVkZ2VEZXBlbmRlbnQgeyBnZXQgeyByZXR1cm4gdHJ1ZTsgfSB9XHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgc3RyaW5nIENoaWxkUmVhc29uIHsgZ2V0IHsgcmV0dXJuIHN0cmluZy5FbXB0eTsgfSB9XHJcbiAgICAgICAgcHJvdGVjdGVkIHZpcnR1YWwgYm9vbCBJc0NoaWxkQm9hcmRCZXR0ZXIoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQsIEJvYXJkIGNoaWxkQm9hcmQpIHsgcmV0dXJuIGZhbHNlOyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTd2FwQW5hbHl6ZXIoYm9vbCBmaW5kQ2xlYW5lc3RXaW4gPSB0cnVlLCBib29sIHN1cGVyYWJ1bmRhbnRPbmx5ID0gdHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEZpbmRDbGVhbmVzdFdpbiA9IGZpbmRDbGVhbmVzdFdpbjtcclxuICAgICAgICAgICAgRG9TdXBlcmFidW5kYW50Q2hlY2sgPSBzdXBlcmFidW5kYW50T25seTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcG90S25vd2xlZGdlID0ga25vd2xlZGdlW2JvYXJkLlRlbXBsYXRlLlZhbHVlXVtib2FyZC5Db2xvckNvdW50XTtcclxuICAgICAgICAgICAgdmFyIGdyYXBoS25vd2xlZGdlID0ga25vd2xlZGdlLkdyYXBoS25vd2xlZGdlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJvYXJkS25vd2xlZGdlID0gcG90S25vd2xlZGdlW2JvYXJkXTtcclxuICAgICAgICAgICAgaWYgKGJvYXJkS25vd2xlZGdlLkV4aXN0cygpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgd2luID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciB3aW5EZXB0aCA9IE1ldGFLbm93bGVkZ2UuSW5maW5pdHk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2xvclBhaXIgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5RGVzY2VuZGluZzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4saW50Pihwb3RLbm93bGVkZ2UuQ29sb3JQYWlycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4sIGludD4pKHBhaXIgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxpbnQ+KENocm9uaWNsZS5CcmFuY2hHZW5lcmF0b3IuRW51bWVyYXRlRXhhY3RseU9uZUludGVyc2VjdGVycyhib2FyZCwgcGFpcikpICUgMikpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sb3JQYWlyV2luRGVwdGggPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpbm5pbmdTd2FwcyA9IG5ldyBMaXN0PFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPj4oKTtcclxuICAgICAgICAgICAgICAgIHZhciBpbXByb3ZpbmdTd2FwcyA9IG5ldyBMaXN0PFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPj4oKTtcclxuICAgICAgICAgICAgICAgIHZhciB3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW1wcm92aW5nU3dhcEFsd2F5c0V4aXN0cyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJyYW5jaCBpbiBDaHJvbmljbGUuQnJhbmNoR2VuZXJhdG9yLkVudW1lcmF0ZUJyYW5jaGVzKGJvYXJkLCBjb2xvclBhaXIpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPiB3aW5uaW5nU3dhcCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgVHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+IGltcHJvdmluZ1N3YXAgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYnJhbmNoV2luRGVwdGggPSBNZXRhS25vd2xlZGdlLkluZmluaXR5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgc3dhcCBpbiBicmFuY2gpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRCb2FyZCA9IGJvYXJkLkNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkQm9hcmQuRG9Nb3ZlQ29tYmluYXRpb24oc3dhcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoRG9TdXBlcmFidW5kYW50Q2hlY2sgJiYgIWdyYXBoS25vd2xlZGdlLkdyYXBoLkRlZ3JlZUNvbmRpdGlvbihjaGlsZEJvYXJkKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkQm9hcmRLbm93bGVkZ2UgPSBwb3RLbm93bGVkZ2VbY2hpbGRCb2FyZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZEJvYXJkS25vd2xlZGdlLkV4aXN0cygpICYmIGNoaWxkQm9hcmRLbm93bGVkZ2UuRGVwdGggKyAxIDwgYnJhbmNoV2luRGVwdGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyYW5jaFdpbkRlcHRoID0gY2hpbGRCb2FyZEtub3dsZWRnZS5EZXB0aCArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5uaW5nU3dhcCA9IG5ldyBUdXBsZTxMaXN0PExpc3Q8aW50Pj4sIExpc3Q8TW92ZT4sIHN0cmluZz4oYnJhbmNoLlN3YXBDb21wb25lbnRzLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLk1vdmU+KHN3YXApLCBjaGlsZEJvYXJkS25vd2xlZGdlLlJlYXNvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFGaW5kQ2xlYW5lc3RXaW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoSXNDaGlsZEJvYXJkQmV0dGVyKGtub3dsZWRnZSwgYm9hcmQsIGNoaWxkQm9hcmQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXByb3ZpbmdTd2FwID0gbmV3IFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPihicmFuY2guU3dhcENvbXBvbmVudHMsIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuTW92ZT4oc3dhcCksIENoaWxkUmVhc29uICsgXCIgYmV0dGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb2xvclBhaXJXaW5EZXB0aCA9IE1hdGguTWF4KGNvbG9yUGFpcldpbkRlcHRoLCBicmFuY2hXaW5EZXB0aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3aW5uaW5nU3dhcC5FeGlzdHMoKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbm5pbmdTd2Fwcy5BZGQod2lubmluZ1N3YXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbXByb3ZpbmdTd2Fwcy5BZGQod2lubmluZ1N3YXApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5uaW5nU3dhcEFsd2F5c0V4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1wcm92aW5nU3dhcC5FeGlzdHMoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltcHJvdmluZ1N3YXBzLkFkZChpbXByb3ZpbmdTd2FwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXByb3ZpbmdTd2FwQWx3YXlzRXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAod2lubmluZ1N3YXBBbHdheXNFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbG9yUGFpcldpbkRlcHRoIDwgd2luRGVwdGgpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5EZXB0aCA9IGNvbG9yUGFpcldpbkRlcHRoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG90S25vd2xlZGdlLkFkZFdpbihib2FyZCwgUmVhc29uLCB3aW5EZXB0aCwgY29sb3JQYWlyLCB3aW5uaW5nU3dhcHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFGaW5kQ2xlYW5lc3RXaW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpbXByb3ZpbmdTd2FwQWx3YXlzRXhpc3RzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvdEtub3dsZWRnZS5BZGRJbXByb3ZlbWVudChib2FyZCwgQ2hpbGRSZWFzb24sIGNvbG9yUGFpcldpbkRlcHRoLCBjb2xvclBhaXIsIGltcHJvdmluZ1N3YXBzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHdpbjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZVxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgS2llcnN0ZWFkQW5hbHl6ZXIgOiBJQm9hcmRBbmFseXplclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUmVhc29uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gXCJydW4ga2llcnN0ZWFkXCI7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzS25vd2xlZGdlRGVwZW5kZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gSXNLaWVyc3RlYWQoa25vd2xlZGdlLCBib2FyZCwgdHJ1ZSwgUmVhc29uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0tpZXJzdGVhZChLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZCwgYm9vbCBlbmZvcmNlRGVncmVlUmVxdWlyZW1lbnQgPSBmYWxzZSwgc3RyaW5nIHJlYXNvbiA9IFwiXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8aW50PihFbnVtZXJhdGVLaWVyc3RlYWRFZGdlSW5kaWNlcyhrbm93bGVkZ2UsIGJvYXJkLCBlbmZvcmNlRGVncmVlUmVxdWlyZW1lbnQsIHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBJRW51bWVyYWJsZTxpbnQ+IEVudW1lcmF0ZUtpZXJzdGVhZEVkZ2VJbmRpY2VzKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBib29sIGVuZm9yY2VEZWdyZWVSZXF1aXJlbWVudCA9IGZhbHNlLCBzdHJpbmcgcmVhc29uID0gXCJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnID0ga25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkdyYXBoO1xyXG4gICAgICAgICAgICB2YXIgaW50ZXJuYWxWZXJ0aWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8aW50PihnLlZlcnRpY2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKHYgPT4gZy5EZWdyZWUodikgPj0gMikpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGVkZ2VJbmRleCBpbiBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuRWRnZUluZGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBlID0ga25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkVkZ2VzW2VkZ2VJbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJuYWxWZXJ0aWNlcy5Db250YWlucyhlLkl0ZW0xKSAmJiBpbnRlcm5hbFZlcnRpY2VzLkNvbnRhaW5zKGUuSXRlbTIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChJc0tpZXJzdGVhZChrbm93bGVkZ2UsIGJvYXJkLCBlZGdlSW5kZXgpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGtub3dsZWRnZVtib2FyZC5UZW1wbGF0ZS5WYWx1ZV1bYm9hcmQuQ29sb3JDb3VudF0uQWRkV2luKGJvYXJkLCByZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBlZGdlSW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0tpZXJzdGVhZChLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZCwgaW50IGVkZ2VJbmRleCwgYm9vbCBlbmZvcmNlRGVncmVlUmVxdWlyZW1lbnQgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBvcmRlcmluZyBpbiBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuQ29ubmVjdGVkT3JkZXJpbmdzLlZhbHVlW2tub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5FZGdlc1tlZGdlSW5kZXhdXSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBlbnVsdGltYXRlID0gb3JkZXJpbmdbb3JkZXJpbmcuQ291bnQgLSAyXTtcclxuICAgICAgICAgICAgICAgIGlmIChlbmZvcmNlRGVncmVlUmVxdWlyZW1lbnQgJiYgYm9hcmQuU3RhY2tzW3BlbnVsdGltYXRlXS5Qb3B1bGF0aW9uQ291bnQoKSA8PSBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuR3JhcGguRGVncmVlKHBlbnVsdGltYXRlKSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoSXNLaWVyc3RlYWQoa25vd2xlZGdlLCBib2FyZCwgZWRnZUluZGV4LCBvcmRlcmluZykpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYm9vbCBJc0tpZXJzdGVhZChLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZCwgaW50IGVkZ2VJbmRleCwgTGlzdDxpbnQ+IG9yZGVyaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGduID0ga25vd2xlZGdlLkdyYXBoS25vd2xlZGdlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGduLkxpbmVHcmFwaC5Jc0Nob29zYWJsZShFbnVtZXJhYmxlLlJhbmdlKDAsIGduLkxpbmVHcmFwaC5OKS5TZWxlY3Q8bG9uZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBsb25nPikoZSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZSA9PSBlZGdlSW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBlZGdlID0gZ24uRWRnZXNbZV07XHJcbiAgICAgICAgICAgICAgICB2YXIgaiA9IE1hdGguTWF4KG9yZGVyaW5nLkluZGV4T2YoZWRnZS5JdGVtMSksIG9yZGVyaW5nLkluZGV4T2YoZWRnZS5JdGVtMikpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHByaW9yU3RhY2tzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxsb25nPihib2FyZC5TdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgaW50LCBib29sPikoKHN0YWNrLCBpKSA9PiBvcmRlcmluZy5JbmRleE9mKGkpIDwgaikpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxvbmcgYWxsb3dlZExpc3QgPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBrbm93bGVkZ2UuR2V0RWRnZUNvbG9yTGlzdChib2FyZCwgZSk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYWxwaGEgaW4gbGlzdC5FbnVtZXJhdGVCaXRzKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1ldGFLbm93bGVkZ2UuZF9IKGFscGhhLCBwcmlvclN0YWNrcykgJSAyID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93ZWRMaXN0ID0gYWxsb3dlZExpc3QuU2V0Qml0KGFscGhhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYWxsb3dlZExpc3Q7XHJcbiAgICAgICAgICAgIH0pKS5Ub0xpc3QoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEtub3dsZWRnZVRyZWUgOiBUcmVlPEtub3dsZWRnZVRyZWU+XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIFR1cGxlPExpc3Q8TGlzdDxpbnQ+PiwgTGlzdDxNb3ZlPiwgc3RyaW5nPiBTd2FwIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBUdXBsZTxpbnQsIGludD4gQ29sb3JQYWlyIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEJvYXJkIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE5vdGUgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTnVtYmVyIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIEtub3dsZWRnZVRyZWUgQWRkQ2hpbGQoVHVwbGU8TGlzdDxMaXN0PGludD4+LCBMaXN0PE1vdmU+LCBzdHJpbmc+IHN3YXApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBuZXcgS25vd2xlZGdlVHJlZSgpIHsgU3dhcCA9IHN3YXAgfTtcclxuICAgICAgICAgICAgQWRkQ2hpbGQoY2hpbGQpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBSZWR1Y3Rpb25BbmFseXplciA6IElCb2FyZEFuYWx5emVyXHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHN0cmluZyBSZWFzb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBcInJlZHVjaWJsZVwiOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0tub3dsZWRnZURlcGVuZGVudFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGcgPSBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuR3JhcGg7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuRWRnZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gTWF0aC5NaW4oZS5JdGVtMSwgZS5JdGVtMik7XHJcbiAgICAgICAgICAgICAgICB2YXIgeSA9IE1hdGguTWF4KGUuSXRlbTEsIGUuSXRlbTIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb21tb24gPSBib2FyZC5TdGFja3NbeF0gJiBib2FyZC5TdGFja3NbeV07XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhY2tzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8bG9uZz4oYm9hcmQuU3RhY2tzKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGMgaW4gY29tbW9uLkVudW1lcmF0ZUJpdHMoKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFja3NbeF0gPSBib2FyZC5TdGFja3NbeF0uQ2xlYXJCaXQoYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhY2tzW3ldID0gYm9hcmQuU3RhY2tzW3ldLkNsZWFyQml0KGMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZy5EZWdyZWVDb25kaXRpb24oc3RhY2tzLCBib2FyZC5Qb3QsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBpbnQ+KShYID0+IFguQ29udGFpbnMoeCkgJiYgWC5Db250YWlucyh5KSA/IDEgOiAwKSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrbm93bGVkZ2VbYm9hcmQuVGVtcGxhdGUuVmFsdWVdW2JvYXJkLkNvbG9yQ291bnRdLkFkZFdpbihib2FyZCwgc3RyaW5nLkZvcm1hdChcImNvbG9yIHswfXsxfSB3aXRoIHsyfVwiLCB4ICsgMSwgeSArIDEsIGMpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkNocm9uaWNsZTtcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7XHJcbnVzaW5nIEFsZ29yaXRobXM7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW1cclxue1xyXG4gICAgcHVibGljIGNsYXNzIFNsaW1NaW5kIDogSU1pbmRcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgYm9vbCBTdG9wQW5hbHlzaXNPbkJyZWFrZXJXaW4geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIE5lYXJseUNvbG9yYWJsZU9ubHkgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIFN1cGVyYWJ1bmRhbnRPbmx5IHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IE1pblBvdCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBNYXhQb3QgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBCb2FyZCBCcmVha2VyV29uQm9hcmQgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEZpeGVyV29uQWxsTmVhcmx5Q29sb3JhYmxlQm9hcmRzIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IFRvdGFsUG9zaXRpb25zIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG5cclxuICAgICAgICBLbm93bGVkZ2UgS25vd2xlZGdlIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBDb2xvcmluZ0FuYWx5emVyIENvbG9yaW5nQW5hbHl6ZXIge2dldDsgc2V0O31cclxuICAgICAgICBTbGltU3dhcEFuYWx5emVyIFN3YXBBbmFseXplciB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgRGljdGlvbmFyeTxpbnQsIEJvYXJkPiBCb2FyZExvb2t1cCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgRGljdGlvbmFyeTxCb2FyZCwgaW50PiBCb2FyZElETG9va3VwIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBMaXN0PGludD4gUmVtYWluaW5nQm9hcmRJRHMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIFNvcnRlZEludExpc3QgV29uQm9hcmRJRHMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIGludCBOZXh0Qm9hcmRJRCB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTbGltTWluZChHcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU3VwZXJhYnVuZGFudE9ubHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgTmVhcmx5Q29sb3JhYmxlT25seSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBNYXhQb3QgPSBNZXRhS25vd2xlZGdlLkluZmluaXR5O1xyXG4gICAgICAgICAgICBLbm93bGVkZ2UgPSBuZXcgS25vd2xlZGdlKGcpO1xyXG5cclxuICAgICAgICAgICAgQ29sb3JpbmdBbmFseXplciA9IG5ldyBDb2xvcmluZ0FuYWx5emVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBBbmFseXplKFRlbXBsYXRlIHRlbXBsYXRlLCBBY3Rpb248VHVwbGU8c3RyaW5nLCBpbnQ+PiBwcm9ncmVzcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBCb2FyZExvb2t1cCA9IG5ldyBEaWN0aW9uYXJ5PGludCwgQm9hcmQ+KCk7XHJcbiAgICAgICAgICAgIEJvYXJkSURMb29rdXAgPSBuZXcgRGljdGlvbmFyeTxCb2FyZCwgaW50PigpO1xyXG4gICAgICAgICAgICBXb25Cb2FyZElEcyA9IG5ldyBTb3J0ZWRJbnRMaXN0KCk7XHJcbiAgICAgICAgICAgIFN3YXBBbmFseXplciA9IG5ldyBTbGltU3dhcEFuYWx5emVyKEtub3dsZWRnZSwgQm9hcmRMb29rdXAsIEJvYXJkSURMb29rdXApO1xyXG5cclxuICAgICAgICAgICAgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1pbmltdW1Db2xvckNvdW50ID0gTWF0aC5NYXgoTWluUG90LCB0ZW1wbGF0ZS5TaXplcy5NYXgoKSk7XHJcbiAgICAgICAgICAgIHZhciBtYXhpbXVtQ29sb3JDb3VudCA9IE1hdGguTWluKE1heFBvdCwgdGVtcGxhdGUuU2l6ZXMuU3VtKCkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZvdW5kQXRMZWFzdE9uZUJvYXJkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjb2xvckNvdW50IGluIE1ldGFLbm93bGVkZ2UuSW50ZXJ2YWwobWluaW11bUNvbG9yQ291bnQsIG1heGltdW1Db2xvckNvdW50KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgR2VuZXJhdGVBbGxCb2FyZHModGVtcGxhdGUsIGNvbG9yQ291bnQsIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8c3RyaW5nLCBpbnQ+Pilwcm9ncmVzcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm91bmRBdExlYXN0T25lQm9hcmQgJiYgQm9hcmRMb29rdXAuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBUb3RhbFBvc2l0aW9ucyA9IEJvYXJkTG9va3VwLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgZm91bmRBdExlYXN0T25lQm9hcmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgUmVtYWluaW5nQm9hcmRJRHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KEJvYXJkTG9va3VwLktleXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBicmVha2VyV2luID0gIUFuYWx5emUoKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5UdXBsZTxzdHJpbmcsIGludD4+KXByb2dyZXNzKTtcclxuICAgICAgICAgICAgICAgIGlmIChicmVha2VyV2luICYmIFN0b3BBbmFseXNpc09uQnJlYWtlcldpbilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgS25vd2xlZGdlW3RlbXBsYXRlXS5Qcm9tb3RlKGNvbG9yQ291bnQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLkJvYXJkPihLbm93bGVkZ2VbdGVtcGxhdGVdLkxvc3RCb2FyZHMpIDw9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIEFuYWx5emUoQWN0aW9uPFR1cGxlPHN0cmluZywgaW50Pj4gcHJvZ3Jlc3MgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHdpbkxlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgdG90YWxCb2FyZHMgPSBSZW1haW5pbmdCb2FyZElEcy5Db3VudDtcclxuICAgICAgICAgICAgdmFyIGxhc3RQID0gLTE7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gUmVtYWluaW5nQm9hcmRJRHMuQ291bnQgLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlkID0gUmVtYWluaW5nQm9hcmRJRHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBCb2FyZExvb2t1cFtpZF07XHJcbiAgICAgICAgICAgICAgICBpZiAoQ29sb3JpbmdBbmFseXplci5BbmFseXplKEtub3dsZWRnZSwgYikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgUmVtYWluaW5nQm9hcmRJRHMuUmVtb3ZlQXQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgV29uQm9hcmRJRHMuQWRkKGlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IDEwMCAqICh0b3RhbEJvYXJkcyAtIFJlbWFpbmluZ0JvYXJkSURzLkNvdW50KSAvIHRvdGFsQm9hcmRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocCA+IGxhc3RQKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVHVwbGU8c3RyaW5nLCBpbnQ+KFwiRmluZGluZyBhbGwgY29sb3JhYmxlIHBvc2l0aW9ucy4uLlwiLCBwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UCA9IHA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChSZW1haW5pbmdCb2FyZElEcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdpbkxlbmd0aCsrO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IFJlbWFpbmluZ0JvYXJkSURzLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSBSZW1haW5pbmdCb2FyZElEcy5Db3VudCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IFJlbWFpbmluZ0JvYXJkSURzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IEJvYXJkTG9va3VwW2lkXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoU3dhcEFuYWx5emVyLkFuYWx5emUoaWQsIFdvbkJvYXJkSURzKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlbWFpbmluZ0JvYXJkSURzLlJlbW92ZUF0KGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBXb25Cb2FyZElEcy5BZGQoaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwID0gMTAwICogKHRvdGFsQm9hcmRzIC0gUmVtYWluaW5nQm9hcmRJRHMuQ291bnQpIC8gdG90YWxCb2FyZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocCA+IGxhc3RQKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzKG5ldyBUdXBsZTxzdHJpbmcsIGludD4oc3RyaW5nLkZvcm1hdChcIkZpbmRpbmcgYWxsIHswfSBtb3ZlIHdpbnMuLi5cIiwgd2luTGVuZ3RoKSwgcCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQID0gcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoUmVtYWluaW5nQm9hcmRJRHMuQ291bnQgPT0gY291bnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGlkIGluIFJlbWFpbmluZ0JvYXJkSURzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBCb2FyZExvb2t1cFtpZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEtub3dsZWRnZVtiLlRlbXBsYXRlLlZhbHVlXVtiLkNvbG9yQ291bnRdLkFkZExvc3MoYik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IEtub3dsZWRnZS5HcmFwaEtub3dsZWRnZS5HcmFwaDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5lYXJseUNvbG9yYWJsZSA9IEVudW1lcmFibGUuUmFuZ2UoMCwgS25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkxpbmVHcmFwaC5OKS5BbGwoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoZSA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxpbnQ+KFJlbWFpbmluZ0JvYXJkSURzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGlkID0+IENvbG9yaW5nQW5hbHl6ZXIuQ29sb3JhYmxlV2l0aG91dEVkZ2UoS25vd2xlZGdlLCBCb2FyZExvb2t1cFtpZF0sIGUpKSkpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmVhcmx5Q29sb3JhYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxpbnQ+KFJlbWFpbmluZ0JvYXJkSURzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGlkID0+IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiID0gQm9hcmRMb29rdXBbaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnLkRlZ3JlZUNvbmRpdGlvbihiKSAmJiBDb2xvcmluZ0FuYWx5emVyLkNvbG9yYWJsZVdpdGhvdXRFZGdlKEtub3dsZWRnZSwgYiwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuQm9hcmQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Cb2FyZD4pKGlkID0+IEJvYXJkTG9va3VwW2lkXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5GaXJzdE9yRGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEJyZWFrZXJXb25Cb2FyZCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkID0gQm9hcmRMb29rdXBbU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KFJlbWFpbmluZ0JvYXJkSURzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGlkID0+IENvbG9yaW5nQW5hbHl6ZXIuQ29sb3JhYmxlV2l0aG91dEVkZ2UoS25vd2xlZGdlLCBCb2FyZExvb2t1cFtpZF0sIDApKSldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgR2VuZXJhdGVBbGxCb2FyZHMoVGVtcGxhdGUgdGVtcGxhdGUsIGludCBjb2xvckNvdW50LCBBY3Rpb248VHVwbGU8c3RyaW5nLCBpbnQ+PiBwcm9ncmVzcyA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYm9hcmRzID0gbmV3IEhhc2hTZXQ8Qm9hcmQ+KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmVydGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIHRlbXBsYXRlLlNpemVzLkNvdW50KS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIHBvdFNldCA9IEVudW1lcmFibGUuUmFuZ2UoMCwgY29sb3JDb3VudCkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBwb3QgPSBwb3RTZXQuVG9JbnQ2NCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZpeCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuT3JkZXJCeTxpbnQsaW50Pih2ZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKHYgPT4gTWF0aC5BYnModGVtcGxhdGUuU2l6ZXNbdl0gLSBjb2xvckNvdW50IC8gMikpKS5GaXJzdCgpO1xyXG4gICAgICAgICAgICB2YXIgbGFzdFAgPSAtMTtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgdG90YWwgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFnZ3JlZ2F0ZTxpbnQsbG9uZz4odmVydGljZXMsMUwsIChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGludCwgbG9uZz4pKCh4LCB2KSA9PiBcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodiA9PSBmaXgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geCAqIExpc3RVdGlsaXR5LkJpbm9taWFsQ29lZmZpY2llbnQocG90U2V0LkNvdW50LCB0ZW1wbGF0ZS5TaXplc1t2XSk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYXNzaWdubWVudFNldHMgaW4gQWxnb3JpdGhtcy5VdGlsaXR5LkxpbnFFeHRlbnNpb25zLkNhcnRlc2lhblByb2R1Y3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4odmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pj4pKHYgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHYgPT0gZml4KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkVuTGlzdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5UYWtlPGludD4ocG90U2V0LHRlbXBsYXRlLlNpemVzW3ZdKS5Ub0xpc3QoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIExpc3RVdGlsaXR5LkVudW1lcmF0ZVN1Ymxpc3RzPGludD4ocG90U2V0LCB0ZW1wbGF0ZS5TaXplc1t2XSk7XHJcbiAgICAgICAgICAgIH0pKSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZXRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGFzc2lnbm1lbnRTZXRzKTtcclxuICAgICAgICAgICAgICAgIHZhciB0b3RhbENvbG9ycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KHNldHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4pKHNldCA9PiBzZXQpKS5EaXN0aW5jdCgpLkNvdW50KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodG90YWxDb2xvcnMgPCBjb2xvckNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzdGFja3MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pixsb25nPihzZXRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBsb25nPikobGlzdCA9PiBsaXN0LlRvSW50NjQoKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChTdXBlcmFidW5kYW50T25seSAmJiAhS25vd2xlZGdlLkdyYXBoS25vd2xlZGdlLkdyYXBoLkRlZ3JlZUNvbmRpdGlvbihzdGFja3MsIHBvdCkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJvYXJkID0gbmV3IEJvYXJkKHN0YWNrcywgcG90KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSBib2FyZHMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBib2FyZHMuQWRkKGJvYXJkKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYm9hcmRzLkNvdW50ID4gY291bnQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQm9hcmRMb29rdXBbTmV4dEJvYXJkSURdID0gYm9hcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgQm9hcmRJRExvb2t1cFtib2FyZF0gPSBOZXh0Qm9hcmRJRDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgTmV4dEJvYXJkSUQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IChpbnQpKDEwMCAqIGN1cnJlbnQgLyB0b3RhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHAgPiBsYXN0UClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzKG5ldyBUdXBsZTxzdHJpbmcsIGludD4oXCJGaW5kaW5nIGFsbCBwb3NpdGlvbnMuLi5cIiwgcCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UCA9IHA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGN1cnJlbnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdhbWVUcmVlIDogVHJlZTxHYW1lVHJlZT5cclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgU3VwZXJTbGltQm9hcmQgQm9hcmQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzQ29sb3JhYmxlIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc1N1cGVyYWJ1bmRhbnQgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIElzRml4ZXJXaW4geyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgR2FtZVRyZWVJbmRleCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBTYW1lQXNJbmRleCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIEJyZWFrZXJDaG9pY2VJbmZvIEluZm8ge2dldDsgc2V0O31cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkQ2hpbGQoR2FtZVRyZWUgdHJlZSwgQnJlYWtlckNob2ljZUluZm8gaW5mbylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRyZWUuSW5mbyA9IGluZm87XHJcbiAgICAgICAgICAgIEFkZENoaWxkKHRyZWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIGJvb2wgRXF1YWxzKG9iamVjdCBvYmopXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZ2cgPSBvYmogYXMgR2FtZVRyZWU7XHJcbiAgICAgICAgICAgIGlmIChnZyA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGdnLkJvYXJkLkVxdWFscyhCb2FyZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBCb2FyZC5HZXRIYXNoQ29kZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXJcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdhbWVUcmVlSW5mbyA6IExpc3Q8QnJlYWtlckNob2ljZUluZm8+XHJcbiAgICB7XHJcbiAgICAgICAgcHVibGljIHZvaWQgQWRkKExpc3Q8dWxvbmc+IGJyZWFrZXJDaG9pY2UsIGludCBpLCBpbnQgaiwgdWxvbmcgZml4ZXJSZXNwb25zZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFkZChuZXcgQnJlYWtlckNob2ljZUluZm8oKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBQYXJ0aXRpb24gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDx1bG9uZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYnJlYWtlckNob2ljZSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzx1bG9uZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShjaG9pY2UgPT4gY2hvaWNlLlRvU2V0KCkpKS5Ub0xpc3QoKSxcclxuICAgICAgICAgICAgICAgIEFscGhhID0gaSxcclxuICAgICAgICAgICAgICAgIEJldGEgPSBqLFxyXG4gICAgICAgICAgICAgICAgUmVzcG9uc2UgPSBmaXhlclJlc3BvbnNlLFxyXG4gICAgICAgICAgICAgICAgU3dhcFZlcnRpY2VzID0gZml4ZXJSZXNwb25zZS5Ub1NldCgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xhc3MgQnJlYWtlckNob2ljZUluZm9cclxuICAgIHtcclxuICAgICAgICAgcHVibGljIGludCBBbHBoYSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgIHB1YmxpYyBpbnQgQmV0YSB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gUGFydGl0aW9uIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgcHVibGljIHVsb25nIFJlc3BvbnNlIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgcHVibGljIExpc3Q8aW50PiBTd2FwVmVydGljZXMgeyBnZXQ7IHNldDsgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlclxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR3JlZWR5V2luRmlsdGVyIDogSVdpbkZpbHRlclxyXG4gICAge1xyXG4gICAgICAgIFN1cGVyU2xpbVN3YXBBbmFseXplciBfc3dhcEFuYWx5emVyO1xyXG5cclxuICAgICAgICBwdWJsaWMgR3JlZWR5V2luRmlsdGVyKFN1cGVyU2xpbVN3YXBBbmFseXplciBzd2FwQW5hbHl6ZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfc3dhcEFuYWx5emVyID0gc3dhcEFuYWx5emVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIElFbnVtZXJhYmxlPGludD4gRmlsdGVyKExpc3Q8U3VwZXJTbGltQm9hcmQ+IFIsIEhhc2hTZXQ8U3VwZXJTbGltQm9hcmQ+IFcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5JbmRpY2VzV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oUiwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBib29sPikoYiA9PiBfc3dhcEFuYWx5emVyLkFuYWx5emUoYiwgVykpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzXHJcbntcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBQZXJtdXRhdGlvbkF3YXJlUHJvb2ZCdWlsZGVyIDogUHJvb2ZCdWlsZGVyXHJcbiAgICB7XHJcbiAgICAgICAgcHJvdGVjdGVkIERpY3Rpb25hcnk8U3VwZXJTbGltQm9hcmQsIExpc3Q8VHVwbGU8UGVybXV0YXRpb24sIFN1cGVyU2xpbUJvYXJkPj4+IF9wZXJtdXRhdGlvbkxpbmtlZDtcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgcHVibGljIFBlcm11dGF0aW9uQXdhcmVQcm9vZkJ1aWxkZXIoU3VwZXJTbGltTWluZCBtaW5kLCBib29sIHVzZVBlcm11dGF0aW9ucyA9IGZhbHNlKVxyXG4gICAgICAgICAgICA6IGJhc2UobWluZCwgdXNlUGVybXV0YXRpb25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBFeHRyYWN0Q2FzZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQ2FzZXMgPSBuZXcgTGlzdDxQcm9vZkNhc2U+KCk7XHJcblxyXG4gICAgICAgICAgICBfcGVybXV0YXRpb25MaW5rZWQgPSBuZXcgRGljdGlvbmFyeTxTdXBlclNsaW1Cb2FyZCwgTGlzdDxUdXBsZTxQZXJtdXRhdGlvbiwgU3VwZXJTbGltQm9hcmQ+Pj4oKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRpY2VzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBNaW5kLkNvbG9yYWJsZUJvYXJkc1swXS5TdGFja3MuVmFsdWUuTGVuZ3RoKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIHBlcm11dGF0aW9ucyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uPihQZXJtdXRhdGlvbi5FbnVtZXJhdGVBbGwoaW5kaWNlcy5Db3VudCkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNhc2VOdW1iZXIgPSAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbG9yYWJsZUNhc2UgPSBuZXcgUHJvb2ZDYXNlKE1pbmQsIDAsIE1pbmQuQ29sb3JhYmxlQm9hcmRzKTtcclxuICAgICAgICAgICAgQ2FzZXMuQWRkKGNvbG9yYWJsZUNhc2UpO1xyXG4gICAgICAgICAgICBjYXNlTnVtYmVyKys7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVtYWluaW5nQm9hcmRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oTWluZC5Ob25Db2xvcmFibGVCb2FyZHMsTWluZC5CcmVha2VyV29uQm9hcmRzKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIHdvbkJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KE1pbmQuQ29sb3JhYmxlQm9hcmRzKTtcclxuICAgICAgICAgICAgd2hpbGUgKHJlbWFpbmluZ0JvYXJkcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwcm9vZkNhc2UgPSBuZXcgUHJvb2ZDYXNlKE1pbmQsIGNhc2VOdW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgQ2FzZXMuQWRkKHByb29mQ2FzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFkZGVkUm9vdEJvYXJkcyA9IG5ldyBMaXN0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGFkZGVkQm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYm9hcmQgaW4gcmVtYWluaW5nQm9hcmRzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhZGRlZEJvYXJkcy5Db250YWlucyhib2FyZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHJlZUluZm8gPSBNaW5kLkdldFdpblRyZWVJbmZvKGJvYXJkKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRCb2FyZHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KHRyZWVJbmZvLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KShiYyA9PiBuZXcgU3VwZXJTbGltQm9hcmQoYm9hcmQuX3RyYWNlLCBiYy5BbHBoYSwgYmMuQmV0YSwgYmMuUmVzcG9uc2UsIGJvYXJkLl9zdGFja0NvdW50KSkpLkRpc3RpbmN0KCkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuU3Vic2V0RXF1YWw8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oY2hpbGRCb2FyZHMsd29uQm9hcmRzKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkUm9vdEJvYXJkcy5BZGQoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRlZEJvYXJkcy5BZGQoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfcGVybXV0YXRpb25MaW5rZWRbYm9hcmRdID0gbmV3IExpc3Q8VHVwbGU8UGVybXV0YXRpb24sIFN1cGVyU2xpbUJvYXJkPj4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChVc2VQZXJtdXRhdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwIGluIHBlcm11dGF0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGIgPSBib2FyZC5QZXJtdXRlKHAsIGluZGljZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b25Cb2FyZHMuQ29udGFpbnMocGIpIHx8IGFkZGVkQm9hcmRzLkNvbnRhaW5zKHBiKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbG9zZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjYiBpbiBjaGlsZEJvYXJkcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd29uQm9hcmRzLkNvbnRhaW5zKGNiLlBlcm11dGUocCwgaW5kaWNlcykpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xvc2VkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Blcm11dGF0aW9uTGlua2VkW2JvYXJkXS5BZGQobmV3IFR1cGxlPFBlcm11dGF0aW9uLCBTdXBlclNsaW1Cb2FyZD4ocCwgcGIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRCb2FyZHMuQWRkKHBiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJvYXJkIGluIGFkZGVkUm9vdEJvYXJkcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9vZkNhc2UuQWRkQm9hcmQoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBib2FyZCBpbiBhZGRlZEJvYXJkcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3b25Cb2FyZHMuQWRkKGJvYXJkKTtcclxuICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdCb2FyZHMuUmVtb3ZlKGJvYXJkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlTnVtYmVyKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChNaW5kLkJyZWFrZXJXb25Cb2FyZHMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZ3JvdXAgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Hcm91cEJ5PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsYm9vbD4oTWluZC5CcmVha2VyV29uQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGJvb2w+KShiID0+IE1pbmQuSXNTdXBlcmFidW5kYW50KGIpKSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvc3RDYXNlID0gbmV3IFByb29mQ2FzZShNaW5kLCBjYXNlTnVtYmVyLCBncm91cC5Ub0xpc3QoKSkgeyBCcmVha2VyV2luID0gdHJ1ZSwgU3VwZXJhYnVuZGFudCA9IGdyb3VwLktleSB9O1xyXG4gICAgICAgICAgICAgICAgICAgIENhc2VzLkFkZChsb3N0Q2FzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSBpbnQgR2V0SGFuZGxlZENhc2VOdW1iZXIoU3VwZXJTbGltQm9hcmQgYiwgQnJlYWtlckNob2ljZUluZm8gYmMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRCb2FyZCA9IG5ldyBTdXBlclNsaW1Cb2FyZChiLl90cmFjZSwgYmMuQWxwaGEsIGJjLkJldGEsIGJjLlJlc3BvbnNlLCBiLl9zdGFja0NvdW50KTtcclxuICAgICAgICAgICAgaWYgKENhc2VzWzBdLkJvYXJkcy5Db250YWlucyhjaGlsZEJvYXJkKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkluZGljZXNXaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5Qcm9vZkNhc2U+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2tpcDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5Qcm9vZkNhc2U+KENhc2VzLDEpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLlByb29mQ2FzZSwgYm9vbD4pKGNjID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KGNjLkJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+PikoYmIgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5VbmlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihuZXdbXSB7IGJiIH0sU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KF9wZXJtdXRhdGlvbkxpbmtlZFtiYl0sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPikodHVwID0+IHR1cC5JdGVtMikpKSkpLkNvbnRhaW5zKGNoaWxkQm9hcmQpKSkpICsgMjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTbWFydEZpbHRlciA6IElXaW5GaWx0ZXJcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgSUVudW1lcmFibGU8aW50PiBGaWx0ZXIoTGlzdDxTdXBlclNsaW1Cb2FyZD4gUiwgSGFzaFNldDxTdXBlclNsaW1Cb2FyZD4gVylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSUVudW1lcmFibGU8Q29sb3JQYWlyT3V0Y29tZT4gQW5hbHl6ZShTdXBlclNsaW1Cb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb2xvclBhaXJzID0gbmV3IExpc3Q8VHVwbGU8aW50LCBpbnQ+PigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJvYXJkLl9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IGJvYXJkLl9sZW5ndGg7IGorKylcclxuICAgICAgICAgICAgICAgICAgICBjb2xvclBhaXJzLkFkZChuZXcgVHVwbGU8aW50LCBpbnQ+KGksIGopKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8aW50LCBpbnQ+LGludD4oY29sb3JQYWlycywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4sIGludD4pKGNwID0+IChib2FyZC5fdHJhY2VbY3AuSXRlbTFdIF4gYm9hcmQuX3RyYWNlW2NwLkl0ZW0yXSkuUG9wdWxhdGlvbkNvdW50KCkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Db2xvclBhaXJPdXRjb21lPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxpbnQsIGludD4sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQ29sb3JQYWlyT3V0Y29tZT4pKGNwID0+IG5ldyBDb2xvclBhaXJPdXRjb21lKCkgeyBDb2xvcnMgPSBjcCwgRml4ZXJPdXRjb21lcyA9IEFuYWx5emVDb2xvclBhaXIoY3AsIGJvYXJkKSB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBJRW51bWVyYWJsZTxGaXhlck91dGNvbWU+IEFuYWx5emVDb2xvclBhaXIoVHVwbGU8aW50LCBpbnQ+IGNvbG9ycywgU3VwZXJTbGltQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaSA9IGNvbG9ycy5JdGVtMTtcclxuICAgICAgICAgICAgdmFyIGogPSBjb2xvcnMuSXRlbTI7XHJcblxyXG4gICAgICAgICAgICB2YXIgeCA9IGJvYXJkLl90cmFjZVtpXTtcclxuICAgICAgICAgICAgdmFyIHkgPSBib2FyZC5fdHJhY2Vbal07XHJcbiAgICAgICAgICAgIHZhciBzd2FwcGFibGUgPSB4IF4geTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBicmVha2VyQ2hvaWNlIGluIEdldEJyZWFrZXJDaG9pY2VzKHN3YXBwYWJsZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEdldEZpeGVyUmVzcG9uc2VzKGJyZWFrZXJDaG9pY2UpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMSwgX2ZpeGVyUmVzcG9uc2VDb3VudCAtIDEpLlNlbGVjdDx1bG9uZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCB1bG9uZz4pKGsgPT4gX2ZpeGVyUmVzcG9uc2VzW2tdKSkuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8dWxvbmcsIGJvb2w+KShmciA9PiBmci5Qb3B1bGF0aW9uQ291bnQoKSA8PSAxKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIG5ldyBGaXhlck91dGNvbWUoKSB7IEJyZWFrZXJDaG9pY2UgPSBicmVha2VyQ2hvaWNlLCBFeGl0cyA9IHJlc3BvbnNlcy5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8dWxvbmcsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KShyZXNwb25zZSA9PiBuZXcgU3VwZXJTbGltQm9hcmQoYm9hcmQuX3RyYWNlLCBpLCBqLCByZXNwb25zZSwgYm9hcmQuX3N0YWNrQ291bnQpKSkuVG9MaXN0KCkgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBndXRzXHJcbiAgICAgICAgdWxvbmdbXSBfZml4ZXJSZXNwb25zZXMgPSBuZXcgdWxvbmdbODE5Ml07XHJcbiAgICAgICAgaW50IF9maXhlclJlc3BvbnNlQ291bnQ7XHJcbiAgICAgICAgRGljdGlvbmFyeTx1bG9uZywgTGlzdDxMaXN0PHVsb25nPj4+IF9icmVha2VyQ2hvaWNlc0NhY2hlID0gbmV3IERpY3Rpb25hcnk8dWxvbmcsIExpc3Q8TGlzdDx1bG9uZz4+PigpO1xyXG4gICAgICAgIHZvaWQgR2V0Rml4ZXJSZXNwb25zZXMoTGlzdDx1bG9uZz4gcG9zc2libGVNb3ZlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9maXhlclJlc3BvbnNlQ291bnQgPSAxIDw8IHBvc3NpYmxlTW92ZXMuQ291bnQ7XHJcbiAgICAgICAgICAgIHZhciB0YWJsZUxlbmd0aCA9IF9maXhlclJlc3BvbnNlcy5MZW5ndGg7XHJcbiAgICAgICAgICAgIHdoaWxlICh0YWJsZUxlbmd0aCA8PSBfZml4ZXJSZXNwb25zZUNvdW50KVxyXG4gICAgICAgICAgICAgICAgdGFibGVMZW5ndGggKj0gMjtcclxuICAgICAgICAgICAgaWYgKHRhYmxlTGVuZ3RoID4gX2ZpeGVyUmVzcG9uc2VzLkxlbmd0aClcclxuICAgICAgICAgICAgICAgIF9maXhlclJlc3BvbnNlcyA9IG5ldyB1bG9uZ1t0YWJsZUxlbmd0aF07XHJcblxyXG4gICAgICAgICAgICB2YXIgc3Vic2V0ID0gMTtcclxuICAgICAgICAgICAgd2hpbGUgKHN1YnNldCA8IF9maXhlclJlc3BvbnNlQ291bnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IDBVTDtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gc3Vic2V0O1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlICh4ICE9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgfD0gcG9zc2libGVNb3Zlc1tJbnQzMlVzYWdlLkdldEFuZENsZWFyTGVhc3RTaWduaWZpY2FudEJpdChyZWYgeCldO1xyXG5cclxuICAgICAgICAgICAgICAgIF9maXhlclJlc3BvbnNlc1tzdWJzZXRdID0gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICBzdWJzZXQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxMaXN0PHVsb25nPj4gR2V0QnJlYWtlckNob2ljZXModWxvbmcgc3dhcHBhYmxlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGlzdDxMaXN0PHVsb25nPj4gY2hvaWNlcztcclxuICAgICAgICAgICAgaWYgKCFfYnJlYWtlckNob2ljZXNDYWNoZS5UcnlHZXRWYWx1ZShzd2FwcGFibGUsIG91dCBjaG9pY2VzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpdHMgPSBzd2FwcGFibGUuR2V0Qml0cygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRpdGlvbnMgPSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5DaHJvbmljbGUuQnJhbmNoR2VuZXJhdG9yLkdldFBhcnRpdGlvbnMoYml0cy5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICBjaG9pY2VzID0gbmV3IExpc3Q8TGlzdDx1bG9uZz4+KHBhcnRpdGlvbnMuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBwYXJ0aXRpb24gaW4gcGFydGl0aW9ucylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hvaWNlID0gbmV3IExpc3Q8dWxvbmc+KHBhcnRpdGlvbi5Db3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hvaWNlcy5BZGQoY2hvaWNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHBhcnQgaW4gcGFydGl0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSAwVUw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIHBhcnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4IHw9IGJpdHNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2UuQWRkKHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfYnJlYWtlckNob2ljZXNDYWNoZVtzd2FwcGFibGVdID0gY2hvaWNlcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNob2ljZXM7XHJcbiAgICAgICAgfSBcclxuICAgICAgICAjZW5kcmVnaW9uXHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBTdXBlclNsaW1NaW5kIDogSU1pbmRcclxuICAgIHtcclxuICAgICAgICBMaXN0PFN1cGVyU2xpbUJvYXJkPiBfcmVtYWluaW5nQm9hcmRzO1xyXG4gICAgICAgIEhhc2hTZXQ8U3VwZXJTbGltQm9hcmQ+IF93b25Cb2FyZHM7XHJcbiAgICAgICAgU3VwZXJTbGltU3dhcEFuYWx5emVyIF9zd2FwQW5hbHl6ZXI7XHJcbiAgICAgICAgU3VwZXJTbGltQ29sb3JpbmdBbmFseXplciBfY29sb3JpbmdBbmFseXplcjtcclxuICAgICAgICBHcmFwaCBfZ3JhcGg7XHJcbiAgICAgICAgR3JhcGggX2xpbmVHcmFwaDtcclxuICAgICAgICBwdWJsaWMgTGlzdDxUdXBsZTxpbnQsIGludD4+IF9lZGdlcztcclxuICAgICAgICBpbnQgX3RvdGFsUG9zaXRpb25zO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW50IE1pblBvdCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGludCBNYXhQb3QgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEZpeGVyV29uQWxsTmVhcmx5Q29sb3JhYmxlQm9hcmRzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEhhc05vblN1cGVyYWJ1bmRhbnRCb2FyZFRoYXRJc05lYXJseUNvbG9yYWJsZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IFRvdGFsUG9zaXRpb25zIHsgZ2V0IHsgcmV0dXJuIF90b3RhbFBvc2l0aW9uczsgfSB9XHJcbiAgICAgICAgcHVibGljIFN1cGVyU2xpbUJvYXJkIEJyZWFrZXJXb25Cb2FyZCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxpbnQ+IEJvYXJkQ291bnRzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PExpc3Q8aW50Pj4gQm9hcmRDb3VudHNMaXN0IHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIE9ubHlDb25zaWRlck5lYXJseUNvbG9yYWJsZUJvYXJkcyB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgRXhjbHVkZU5vbk5lYXJseUNvbG9yYWJsZU5vblN1cGVyYWJ1bmRhbnRCb2FyZHMgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgTWlzc2luZ0VkZ2VJbmRleCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgU3VwZXJhYnVuZGFudE9ubHkgeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIFRoaW5rSGFyZGVyIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBQZXJmb3JtQ29tcGxldGVBbmFseXNpcyB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTdXBlclNsaW1Db2xvcmluZ0FuYWx5emVyIENvbG9yaW5nQW5hbHl6ZXIgeyBnZXQgeyByZXR1cm4gX2NvbG9yaW5nQW5hbHl6ZXI7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFN1cGVyU2xpbUJvYXJkPiBOb25Db2xvcmFibGVCb2FyZHMgeyBnZXQ7IHByaXZhdGUgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIExpc3Q8U3VwZXJTbGltQm9hcmQ+IENvbG9yYWJsZUJvYXJkcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgTGlzdDxTdXBlclNsaW1Cb2FyZD4gQnJlYWtlcldvbkJvYXJkcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgSGFzaFNldDxTdXBlclNsaW1Cb2FyZD4gRml4ZXJXb25Cb2FyZHMgeyBnZXQgeyByZXR1cm4gX3dvbkJvYXJkczsgfSB9XHJcbiAgICAgICAgcHVibGljIERpY3Rpb25hcnk8aW50LCBMaXN0PFN1cGVyU2xpbUJvYXJkPj4gQm9hcmRzT2ZEZXB0aCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuICAgICAgICBwdWJsaWMgaW50IEV4dHJhUHNpIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICBJV2luRmlsdGVyIFdpbkZpbHRlciB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBTdXBlclNsaW1NaW5kKEdyYXBoIGcsIGJvb2wgcHJvb2ZGaW5kaW5nTW9kZSA9IGZhbHNlLCBib29sIHdlYWtseUZpeGFibGUgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9ncmFwaCA9IGc7XHJcbiAgICAgICAgICAgIEJ1aWxkTGluZUdyYXBoKCk7XHJcblxyXG4gICAgICAgICAgICBfY29sb3JpbmdBbmFseXplciA9IG5ldyBTdXBlclNsaW1Db2xvcmluZ0FuYWx5emVyKF9saW5lR3JhcGgsIEdldEVkZ2VDb2xvckxpc3QpO1xyXG4gICAgICAgICAgICBfc3dhcEFuYWx5emVyID0gbmV3IFN1cGVyU2xpbVN3YXBBbmFseXplcihnLk4sIHByb29mRmluZGluZ01vZGUsIHByb29mRmluZGluZ01vZGUgfHwgd2Vha2x5Rml4YWJsZSk7XHJcbiAgICAgICAgICAgIF93b25Cb2FyZHMgPSBuZXcgSGFzaFNldDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuICAgICAgICAgICAgX3JlbWFpbmluZ0JvYXJkcyA9IG5ldyBMaXN0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG5cclxuICAgICAgICAgICAgTWlzc2luZ0VkZ2VJbmRleCA9IC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgQW5hbHl6ZShUZW1wbGF0ZSB0ZW1wbGF0ZSwgQWN0aW9uPFR1cGxlPHN0cmluZywgaW50Pj4gcHJvZ3Jlc3MgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3dvbkJvYXJkcy5DbGVhcigpO1xyXG4gICAgICAgICAgICBfcmVtYWluaW5nQm9hcmRzLkNsZWFyKCk7XHJcbiAgICAgICAgICAgIEJvYXJkQ291bnRzTGlzdCA9IG5ldyBMaXN0PExpc3Q8aW50Pj4oKTtcclxuICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkID0gbnVsbDtcclxuICAgICAgICAgICAgTm9uQ29sb3JhYmxlQm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcbiAgICAgICAgICAgIENvbG9yYWJsZUJvYXJkcyA9IG5ldyBMaXN0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG4gICAgICAgICAgICBCcmVha2VyV29uQm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoV2luRmlsdGVyID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICBXaW5GaWx0ZXIgPSBuZXcgR3JlZWR5V2luRmlsdGVyKF9zd2FwQW5hbHl6ZXIpO1xyXG5cclxuICAgICAgICAgICAgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1pbmltdW1Db2xvckNvdW50ID0gTWF0aC5NYXgoTWluUG90LCB0ZW1wbGF0ZS5TaXplcy5NYXgoKSk7XHJcbiAgICAgICAgICAgIHZhciBtYXhpbXVtQ29sb3JDb3VudCA9IE1hdGguTWluKE1heFBvdCwgdGVtcGxhdGUuU2l6ZXMuU3VtKCkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZvdW5kQXRMZWFzdE9uZUJvYXJkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBmaXhlcldpbiA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGNvbG9yQ291bnQgPSBtaW5pbXVtQ29sb3JDb3VudDsgY29sb3JDb3VudCA8PSBtYXhpbXVtQ29sb3JDb3VudDsgY29sb3JDb3VudCsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBHZW5lcmF0ZUFsbEJvYXJkcyh0ZW1wbGF0ZSwgY29sb3JDb3VudCwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5UdXBsZTxzdHJpbmcsIGludD4+KXByb2dyZXNzKTtcclxuICAgICAgICAgICAgICAgIGlmIChPbmx5Q29uc2lkZXJOZWFybHlDb2xvcmFibGVCb2FyZHMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1pc3NpbmdFZGdlSW5kZXggPj0gMClcclxuQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5SZW1vdmVBbGw8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oICAgICAgICAgICAgICAgICAgICAgICAgX3JlbWFpbmluZ0JvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBib29sPikoYiA9PiAhTmVhcmx5Q29sb3JhYmxlRm9yRWRnZShiLCBNaXNzaW5nRWRnZUluZGV4KSksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4pKCh4KSA9PiB7IH0pKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbkFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KCAgICAgICAgICAgICAgICAgICAgICAgIF9yZW1haW5pbmdCb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgYm9vbD4pKGIgPT4gIU5lYXJseUNvbG9yYWJsZUZvclNvbWVFZGdlKGIpKSwgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPikoKHgpID0+IHsgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChmb3VuZEF0TGVhc3RPbmVCb2FyZCAmJiBfcmVtYWluaW5nQm9hcmRzLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgX3RvdGFsUG9zaXRpb25zID0gX3JlbWFpbmluZ0JvYXJkcy5Db3VudCArIF93b25Cb2FyZHMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3VuZEF0TGVhc3RPbmVCb2FyZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgZml4ZXJXaW4gJj0gQW5hbHl6ZSgoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPGdsb2JhbDo6U3lzdGVtLlR1cGxlPHN0cmluZywgaW50Pj4pcHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZml4ZXJXaW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIEFuYWx5emUoQWN0aW9uPFR1cGxlPHN0cmluZywgaW50Pj4gcHJvZ3Jlc3MgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IHdpbkxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbEJvYXJkcyA9IF9yZW1haW5pbmdCb2FyZHMuQ291bnQ7XHJcbiAgICAgICAgICAgIHZhciBsYXN0UCA9IC0xO1xyXG5cclxuICAgICAgICAgICAgQm9hcmRzT2ZEZXB0aCA9IG5ldyBEaWN0aW9uYXJ5PGludCwgTGlzdDxTdXBlclNsaW1Cb2FyZD4+KCk7XHJcbiAgICAgICAgICAgIEJvYXJkQ291bnRzID0gbmV3IExpc3Q8aW50PigpO1xyXG4gICAgICAgICAgICBCb2FyZENvdW50c0xpc3QuQWRkKEJvYXJkQ291bnRzKTtcclxuICAgICAgICAgICAgQm9hcmRDb3VudHMuQWRkKF9yZW1haW5pbmdCb2FyZHMuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IF9yZW1haW5pbmdCb2FyZHMuQ291bnQgLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBfcmVtYWluaW5nQm9hcmRzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKF9jb2xvcmluZ0FuYWx5emVyLkFuYWx5emUoYikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3JlbWFpbmluZ0JvYXJkcy5SZW1vdmVBdChpKTtcclxuICAgICAgICAgICAgICAgICAgICBfd29uQm9hcmRzLkFkZChiKTtcclxuICAgICAgICAgICAgICAgICAgICBDb2xvcmFibGVCb2FyZHMuQWRkKGIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gMTAwICogKHRvdGFsQm9hcmRzIC0gX3JlbWFpbmluZ0JvYXJkcy5Db3VudCkgLyB0b3RhbEJvYXJkcztcclxuICAgICAgICAgICAgICAgICAgICBpZiAocCA+IGxhc3RQKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFR1cGxlPHN0cmluZywgaW50PihcIkZpbmRpbmcgYWxsIGNvbG9yYWJsZSBwb3NpdGlvbnMuLi5cIiwgcCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UCA9IHA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBCb2FyZHNPZkRlcHRoW3dpbkxlbmd0aF0gPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihfd29uQm9hcmRzKTtcclxuICAgICAgICAgICAgQm9hcmRDb3VudHMuQWRkKF9yZW1haW5pbmdCb2FyZHMuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG5vblN1cGVyYWJ1bmRhbnRCb2FyZHMgPSBuZXcgTGlzdDxTdXBlclNsaW1Cb2FyZD4oKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSBfcmVtYWluaW5nQm9hcmRzLkNvdW50IC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gX3JlbWFpbmluZ0JvYXJkc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmICghSXNTdXBlcmFidW5kYW50KGIpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPbmx5Q29uc2lkZXJOZWFybHlDb2xvcmFibGVCb2FyZHMgJiYgTWlzc2luZ0VkZ2VJbmRleCA+PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgSGFzTm9uU3VwZXJhYnVuZGFudEJvYXJkVGhhdElzTmVhcmx5Q29sb3JhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkID0gYjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghUGVyZm9ybUNvbXBsZXRlQW5hbHlzaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBfcmVtYWluaW5nQm9hcmRzLlJlbW92ZUF0KGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5vblN1cGVyYWJ1bmRhbnRCb2FyZHMuQWRkKGIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gMTAwICogKHRvdGFsQm9hcmRzIC0gX3JlbWFpbmluZ0JvYXJkcy5Db3VudCkgLyB0b3RhbEJvYXJkcztcclxuICAgICAgICAgICAgICAgICAgICBpZiAocCA+IGxhc3RQKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MobmV3IFR1cGxlPHN0cmluZywgaW50PihcIkZpbmRpbmcgYWxsIG5vbi1zdXBlcmFidW5kYW50IHBvc2l0aW9ucy4uLlwiLCBwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQID0gcDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChub25TdXBlcmFidW5kYW50Qm9hcmRzLkNvdW50ID4gMCAmJiAhU3VwZXJhYnVuZGFudE9ubHkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICghT25seUNvbnNpZGVyTmVhcmx5Q29sb3JhYmxlQm9hcmRzICYmICFFeGNsdWRlTm9uTmVhcmx5Q29sb3JhYmxlTm9uU3VwZXJhYnVuZGFudEJvYXJkcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZCA9IG5vblN1cGVyYWJ1bmRhbnRCb2FyZHNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkcy5BZGRSYW5nZShub25TdXBlcmFidW5kYW50Qm9hcmRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFQZXJmb3JtQ29tcGxldGVBbmFseXNpcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoRXhpc3RzTmVhcmx5Q29sb3JhYmxlQm9hcmRGb3JFYWNoRWRnZShub25TdXBlcmFidW5kYW50Qm9hcmRzKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBGaXhlcldvbkFsbE5lYXJseUNvbG9yYWJsZUJvYXJkcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIEhhc05vblN1cGVyYWJ1bmRhbnRCb2FyZFRoYXRJc05lYXJseUNvbG9yYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkID0gbm9uU3VwZXJhYnVuZGFudEJvYXJkc1swXTtcclxuICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmRzLkFkZFJhbmdlKG5vblN1cGVyYWJ1bmRhbnRCb2FyZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghUGVyZm9ybUNvbXBsZXRlQW5hbHlzaXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQm9hcmRDb3VudHMuQWRkKF9yZW1haW5pbmdCb2FyZHMuQ291bnQpO1xyXG4gICAgICAgICAgICBOb25Db2xvcmFibGVCb2FyZHMuQWRkUmFuZ2UoX3JlbWFpbmluZ0JvYXJkcyk7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoX3JlbWFpbmluZ0JvYXJkcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IF9yZW1haW5pbmdCb2FyZHMuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICB3aW5MZW5ndGgrKztcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYm9hcmRJbmRpY2VzVG9BZGQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnlEZXNjZW5kaW5nPGludCxpbnQ+KFdpbkZpbHRlci5GaWx0ZXIoX3JlbWFpbmluZ0JvYXJkcywgX3dvbkJvYXJkcyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh4ID0+IHgpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIHZhciB3b25Cb2FyZHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KF9yZW1haW5pbmdCb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgaW50LCBib29sPikoKGIsIGkpID0+IGJvYXJkSW5kaWNlc1RvQWRkLkNvbnRhaW5zKGkpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYiBpbiB3b25Cb2FyZHMpXHJcbiAgICAgICAgICAgICAgICAgICAgX3dvbkJvYXJkcy5BZGQoYik7XHJcbiAgICAgICAgICAgICAgICBCb2FyZHNPZkRlcHRoW3dpbkxlbmd0aF0gPSB3b25Cb2FyZHM7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGkgaW4gYm9hcmRJbmRpY2VzVG9BZGQpXHJcbiAgICAgICAgICAgICAgICAgICAgX3JlbWFpbmluZ0JvYXJkcy5SZW1vdmVBdChpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IDEwMCAqICh0b3RhbEJvYXJkcyAtIF9yZW1haW5pbmdCb2FyZHMuQ291bnQpIC8gdG90YWxCb2FyZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHAgPiBsYXN0UClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzKG5ldyBUdXBsZTxzdHJpbmcsIGludD4oc3RyaW5nLkZvcm1hdChcIkZpbmRpbmcgYWxsIHswfSBtb3ZlIHdpbnMuLi5cIiwgd2luTGVuZ3RoKSwgcCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UCA9IHA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIEJvYXJkQ291bnRzLkFkZChfcmVtYWluaW5nQm9hcmRzLkNvdW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoX3JlbWFpbmluZ0JvYXJkcy5Db3VudCA9PSBjb3VudClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBCcmVha2VyV29uQm9hcmRzLkFkZFJhbmdlKF9yZW1haW5pbmdCb2FyZHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoQnJlYWtlcldvbkJvYXJkID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZCA9IF9yZW1haW5pbmdCb2FyZHNbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPbmx5Q29uc2lkZXJOZWFybHlDb2xvcmFibGVCb2FyZHMgJiYgTWlzc2luZ0VkZ2VJbmRleCA+PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRml4ZXJXb25BbGxOZWFybHlDb2xvcmFibGVCb2FyZHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoRXhpc3RzTmVhcmx5Q29sb3JhYmxlQm9hcmRGb3JFYWNoRWRnZShfcmVtYWluaW5nQm9hcmRzKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEZpeGVyV29uQWxsTmVhcmx5Q29sb3JhYmxlQm9hcmRzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJyZWFrZXJXb25Cb2FyZCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3RPckRlZmF1bHQ8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oX3JlbWFpbmluZ0JvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBib29sPikoYiA9PiBfY29sb3JpbmdBbmFseXplci5Db2xvcmFibGVXaXRob3V0RWRnZShiLCAwKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEJyZWFrZXJXb25Cb2FyZCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQnJlYWtlcldvbkJvYXJkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihfcmVtYWluaW5nQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGJvb2w+KShiID0+IF9jb2xvcmluZ0FuYWx5emVyLkNvbG9yYWJsZVdpdGhvdXRFZGdlKGIsIDApKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBOZWFybHlDb2xvcmFibGVGb3JFZGdlKFN1cGVyU2xpbUJvYXJkIGJvYXJkLCBpbnQgZWRnZUluZGV4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9jb2xvcmluZ0FuYWx5emVyLkNvbG9yYWJsZVdpdGhvdXRFZGdlKGJvYXJkLCBlZGdlSW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBFeGlzdHNOZWFybHlDb2xvcmFibGVCb2FyZEZvckVhY2hFZGdlKExpc3Q8U3VwZXJTbGltQm9hcmQ+IGJvYXJkcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBFbnVtZXJhYmxlLlJhbmdlKDAsIF9saW5lR3JhcGguTikuQWxsKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGUgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Bbnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGJvb2w+KShiID0+IE5lYXJseUNvbG9yYWJsZUZvckVkZ2UoYiwgZSkpKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgTmVhcmx5Q29sb3JhYmxlRm9yU29tZUVkZ2UoU3VwZXJTbGltQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gRW51bWVyYWJsZS5SYW5nZSgwLCBfbGluZUdyYXBoLk4pLkFueSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShlID0+IE5lYXJseUNvbG9yYWJsZUZvckVkZ2UoYm9hcmQsIGUpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIExvb2tBdFN1cGVyYWJ1bmRhbmNlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwYWNrcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgX2xpbmVHcmFwaC5OKS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPj4pKGUgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihfcmVtYWluaW5nQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGJvb2w+KShiID0+IF9jb2xvcmluZ0FuYWx5emVyLkNvbG9yYWJsZVdpdGhvdXRFZGdlKGIsIGUpKSkuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgdmFyIGdvb2RQYWNrcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+PihwYWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sIGJvb2w+KShwYWNrID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KHBhY2ssKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgYm9vbD4pKHNzYiA9PiBJc1N1cGVyYWJ1bmRhbnQoc3NiKSkpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc1N1cGVyYWJ1bmRhbnQoU3VwZXJTbGltQm9hcmQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVsb25nIHN1YnNldCA9IDA7XHJcblxyXG4gICAgICAgICAgICBpbnQgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAoc3Vic2V0IDwgKDFVTCA8PCBiLl9zdGFja0NvdW50KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBiLl9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbCArPSAoc3Vic2V0ICYgYi5fdHJhY2VbaV0pLlBvcHVsYXRpb25Db3VudCgpIC8gMjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IF9ncmFwaC5FZGdlc09uKHN1YnNldC5Ub1NldCgpKTtcclxuICAgICAgICAgICAgICAgIGlmICh0b3RhbCA8IGUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIHN1YnNldCsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoRXh0cmFQc2kgPiAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvdGFsID49IF9ncmFwaC5FICsgRXh0cmFQc2k7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgQ29tcHV0ZUFidW5kYW5jZVN1cnBsdXMoU3VwZXJTbGltQm9hcmQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGludCB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYi5fbGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBiLl90cmFjZVtpXS5Qb3B1bGF0aW9uQ291bnQoKSAvIDI7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWwgLSBfZ3JhcGguRTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExpc3Q8aW50PiBDb21wdXRlTWF0Y2hpbmdBYnVuZGFuY2VTaGFkb3coU3VwZXJTbGltQm9hcmQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaGFkb3cgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICB1bG9uZyBzdWJzZXQgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAoc3Vic2V0IDwgKDFVTCA8PCBiLl9zdGFja0NvdW50KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW50IGU7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUlzTWF0Y2hpbmdBYnVuZGFudChiLCBzdWJzZXQsIG91dCBlKSlcclxuICAgICAgICAgICAgICAgICAgICBzaGFkb3cuQWRkKGUpO1xyXG4gICAgICAgICAgICAgICAgc3Vic2V0Kys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNoYWRvdy5Tb3J0KCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2hhZG93O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBJc01hdGNoaW5nQWJ1bmRhbnQoU3VwZXJTbGltQm9hcmQgYiwgdWxvbmcgc3Vic2V0LCBvdXQgaW50IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBlID0gX2dyYXBoLkVkZ2VzT24oc3Vic2V0LlRvU2V0KCkpO1xyXG5cclxuICAgICAgICAgICAgaW50IHRvdGFsID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBiLl9sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZjID0gKHN1YnNldCAmIGIuX3RyYWNlW2ldKS5Ub1NldCgpO1xyXG4gICAgICAgICAgICAgICAgdG90YWwgKz0gX2xpbmVHcmFwaC5JbmRlcGVuZGVuY2VOdW1iZXIoX2dyYXBoLkVkZ2VJbmRpY2VzT24odmMpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsID49IGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEdlbmVyYXRlQWxsQm9hcmRzKFRlbXBsYXRlIHRlbXBsYXRlLCBpbnQgY29sb3JDb3VudCwgQWN0aW9uPFR1cGxlPHN0cmluZywgaW50Pj4gcHJvZ3Jlc3MgPSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHByb2dyZXNzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzcyhuZXcgVHVwbGU8c3RyaW5nLCBpbnQ+KFwiRmluZGluZyBhbGwgcG9zaXRpb25zLi4uXCIsIDApKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB0IGluIEJpdExldmVsR2VuZXJhdGlvbi5Bc3NpZ25tZW50c191bG9uZy5HZW5lcmF0ZSh0ZW1wbGF0ZS5TaXplcywgY29sb3JDb3VudCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiID0gbmV3IFN1cGVyU2xpbUJvYXJkKHQsIHRlbXBsYXRlLlNpemVzLkNvdW50KTtcclxuICAgICAgICAgICAgICAgIF9yZW1haW5pbmdCb2FyZHMuQWRkKGIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEJ1aWxkTGluZUdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhZGphY2VudCA9IF9ncmFwaC5BZGphY2VudDtcclxuICAgICAgICAgICAgaW50IG4gPSBhZGphY2VudC5HZXRVcHBlckJvdW5kKDApICsgMTtcclxuXHJcbiAgICAgICAgICAgIF9lZGdlcyA9IG5ldyBMaXN0PFR1cGxlPGludCwgaW50Pj4oKTtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBuOyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFkamFjZW50W2ksIGpdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZWRnZXMuQWRkKG5ldyBUdXBsZTxpbnQsIGludD4oaSwgaikpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1lZXRzID0gbmV3IGJvb2xbX2VkZ2VzLkNvdW50LCBfZWRnZXMuQ291bnRdO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9lZGdlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgX2VkZ2VzLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9lZGdlc1tpXS5JdGVtMSA9PSBfZWRnZXNbal0uSXRlbTEgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2VkZ2VzW2ldLkl0ZW0xID09IF9lZGdlc1tqXS5JdGVtMiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZWRnZXNbaV0uSXRlbTIgPT0gX2VkZ2VzW2pdLkl0ZW0xIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lZGdlc1tpXS5JdGVtMiA9PSBfZWRnZXNbal0uSXRlbTIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lZXRzW2ksIGpdID0gbWVldHNbaiwgaV0gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgX2xpbmVHcmFwaCA9IG5ldyBHcmFwaChtZWV0cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb25nIEdldEVkZ2VDb2xvckxpc3QoU3VwZXJTbGltQm9hcmQgYiwgaW50IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdjEgPSBfZWRnZXNbZV0uSXRlbTE7XHJcbiAgICAgICAgICAgIHZhciB2MiA9IF9lZGdlc1tlXS5JdGVtMjtcclxuICAgICAgICAgICAgdmFyIHN0YWNrcyA9IGIuU3RhY2tzLlZhbHVlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN0YWNrc1t2MV0gJiBzdGFja3NbdjJdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdhbWVUcmVlSW5mbyBHZXRXaW5UcmVlSW5mbyhTdXBlclNsaW1Cb2FyZCBib2FyZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfc3dhcEFuYWx5emVyLldpblRyZWVJbmZvW2JvYXJkXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludCBfZ2FtZVRyZWVJbmRleDtcclxuICAgICAgICBwdWJsaWMgR2FtZVRyZWUgQnVpbGRHYW1lVHJlZShTdXBlclNsaW1Cb2FyZCBib2FyZCwgYm9vbCB3aW4gPSB0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNlZW5Cb2FyZHMgPSAgbmV3IERpY3Rpb25hcnk8U3VwZXJTbGltQm9hcmQsIGludD4oKTtcclxuICAgICAgICAgICAgX2dhbWVUcmVlSW5kZXggPSAxO1xyXG4gICAgICAgICAgICByZXR1cm4gQnVpbGRHYW1lVHJlZShib2FyZCwgc2VlbkJvYXJkcywgd2luKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdhbWVUcmVlIEJ1aWxkR2FtZVRyZWUoU3VwZXJTbGltQm9hcmQgYm9hcmQsIERpY3Rpb25hcnk8U3VwZXJTbGltQm9hcmQsIGludD4gc2VlbkJvYXJkcywgYm9vbCB3aW4gPSB0cnVlLCBpbnQgZGVwdGggPSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc2VlbkJvYXJkc1tib2FyZF0gPSBfZ2FtZVRyZWVJbmRleDtcclxuICAgICAgICAgICAgdmFyIHRyZWUgPSBuZXcgR2FtZVRyZWUoKSB7IEJvYXJkID0gYm9hcmQsIElzRml4ZXJXaW4gPSB3aW4gfTtcclxuICAgICAgICAgICAgdHJlZS5Jc0NvbG9yYWJsZSA9IF9jb2xvcmluZ0FuYWx5emVyLkFuYWx5emUoYm9hcmQpO1xyXG4gICAgICAgICAgICB0cmVlLklzU3VwZXJhYnVuZGFudCA9IHdpbiB8fCBJc1N1cGVyYWJ1bmRhbnQoYm9hcmQpO1xyXG4gICAgICAgICAgICB0cmVlLkdhbWVUcmVlSW5kZXggPSBfZ2FtZVRyZWVJbmRleDtcclxuICAgICAgICAgICAgX2dhbWVUcmVlSW5kZXgrKztcclxuXHJcbiAgICAgICAgICAgIGlmICh0cmVlLklzQ29sb3JhYmxlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyZWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRyZWUuSXNTdXBlcmFidW5kYW50KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyZWU7XHJcblxyXG4gICAgICAgICAgICBHYW1lVHJlZUluZm8gdHJlZUluZm87XHJcbiAgICAgICAgICAgIGlmICh3aW4pXHJcbiAgICAgICAgICAgICAgICBfc3dhcEFuYWx5emVyLldpblRyZWVJbmZvLlRyeUdldFZhbHVlKGJvYXJkLCBvdXQgdHJlZUluZm8pO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBfc3dhcEFuYWx5emVyLkxvc3NUcmVlSW5mby5UcnlHZXRWYWx1ZShib2FyZCwgb3V0IHRyZWVJbmZvKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0cmVlSW5mbyAhPSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jYWxTZWVuQm9hcmRzID0gbmV3IEhhc2hTZXQ8U3VwZXJTbGltQm9hcmQ+KCk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYmMgaW4gdHJlZUluZm8pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkQm9hcmQgPSBuZXcgU3VwZXJTbGltQm9hcmQoYm9hcmQuX3RyYWNlLCBiYy5BbHBoYSwgYmMuQmV0YSwgYmMuUmVzcG9uc2UsIGJvYXJkLl9zdGFja0NvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxTZWVuQm9hcmRzLkNvbnRhaW5zKGNoaWxkQm9hcmQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFNlZW5Cb2FyZHMuQWRkKGNoaWxkQm9hcmQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbiAmJiBzZWVuQm9hcmRzLkNvbnRhaW5zS2V5KGNoaWxkQm9hcmQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkVHJlZSA9IEJ1aWxkR2FtZVRyZWUoY2hpbGRCb2FyZCwgc2VlbkJvYXJkcywgd2luLCBkZXB0aCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWUuQWRkQ2hpbGQoY2hpbGRUcmVlLCBiYyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cmVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIFN1YlRlbXBsYXRlQW5hbHl6ZXIgOiBJQm9hcmRBbmFseXplclxyXG4gICAge1xyXG4gICAgICAgIExpc3Q8VGVtcGxhdGU+IFN1YlRlbXBsYXRlcyB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgUmVhc29uIHsgZ2V0IHsgcmV0dXJuIFwic3ViIHRlbXBsYXRlXCI7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0tub3dsZWRnZURlcGVuZGVudFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3ViVGVtcGxhdGVBbmFseXplcihwYXJhbXMgVGVtcGxhdGVbXSBzdWJUZW1wbGF0ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBTdWJUZW1wbGF0ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5UZW1wbGF0ZT4oc3ViVGVtcGxhdGVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEFuYWx5emUoS25vd2xlZGdlIGtub3dsZWRnZSwgQm9hcmQgYm9hcmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdGVtcGxhdGUgaW4gU3ViVGVtcGxhdGVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnQgY29sb3I7XHJcbiAgICAgICAgICAgICAgICBpbnQgeDtcclxuICAgICAgICAgICAgICAgIGlmIChDb250YWluc1N1YmVyYWJ1bmRhbnRTdWJTdGFja3NBYm92ZVRlbXBsYXRlKGtub3dsZWRnZSwgYm9hcmQsIHRlbXBsYXRlLCBvdXQgY29sb3IsIG91dCB4KSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBrbm93bGVkZ2VbYm9hcmQuVGVtcGxhdGUuVmFsdWVdW2JvYXJkLkNvbG9yQ291bnRdLkFkZFdpbihib2FyZCwgc3RyaW5nLkZvcm1hdChcInNldCBMKHswfSkgPSBMKHswfSkgLSB7MX1cIiwgeCArIDEsIGNvbG9yKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJvb2wgQ29udGFpbnNTdWJlcmFidW5kYW50U3ViU3RhY2tzQWJvdmVUZW1wbGF0ZShLbm93bGVkZ2Uga25vd2xlZGdlLCBCb2FyZCBib2FyZCwgVGVtcGxhdGUgdGVtcGxhdGUsIG91dCBpbnQgY29sb3IsIG91dCBpbnQgeClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbG9yID0gLTE7XHJcbiAgICAgICAgICAgIHggPSAtMTtcclxuICAgICAgICAgICAgdmFyIGcgPSBrbm93bGVkZ2UuR3JhcGhLbm93bGVkZ2UuR3JhcGg7XHJcbiAgICAgICAgICAgIHZhciBzdGFja1NldHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pihib2FyZC5TdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShzID0+IHMuVG9TZXQoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgYmlncyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgc3RhY2tTZXRzLkNvdW50KS5Db3VudCgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShpID0+IHN0YWNrU2V0c1tpXS5Db3VudCA+IHRlbXBsYXRlLlNpemVzW2ldKSk7XHJcbiAgICAgICAgICAgIGlmIChiaWdzIDw9IDAgfHwgYmlncyA+IDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2hyaW5rYWJsZSA9IEVudW1lcmFibGUuUmFuZ2UoMCwgc3RhY2tTZXRzLkNvdW50KS5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShpID0+IHN0YWNrU2V0c1tpXS5Db3VudCA9PSB0ZW1wbGF0ZS5TaXplc1tpXSArIDEpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgaWYgKHNocmlua2FibGUuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHggPSBzaHJpbmthYmxlWzBdO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYyBpbiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KHN0YWNrU2V0c1t4XSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0YWNrU2V0c1t4XS5SZW1vdmUoYyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGcuRGVncmVlQ29uZGl0aW9uKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LGxvbmc+KHN0YWNrU2V0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgbG9uZz4pKHMgPT4gcy5Ub0ludDY0KCkpKS5Ub0xpc3QoKSwgYm9hcmQuUG90KSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvciA9IGM7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc3RhY2tTZXRzW3hdLkFkZChjKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcbnVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZFxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgRmFzdFRhcnBpdEVudW1lcmF0b3IgOiBUYXJwaXRFbnVtZXJhdG9yXHJcbiAgICB7XHJcbiAgICAgICAgTGlzdDxGYXN0V29yZD4gX3dvcmRzO1xyXG4gICAgICAgIEZhc3RBY2Nlc3NpYmlsaXR5Q2hlY2tlciBfYWNjZXNzaWJpbGl0eUNoZWNrZXI7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IExpc3Q8RmFzdFdvcmQ+IEVtcHR5TGlzdCA9IG5ldyBMaXN0PEZhc3RXb3JkPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgRmFzdFRhcnBpdEVudW1lcmF0b3IoaW50IG4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfd29yZHMgPSBuZXcgRmFzdFdvcmRHZW5lcmF0b3IoKS5HZW5lcmF0ZVdvcmRzKG4pO1xyXG4gICAgICAgICAgICBfYWNjZXNzaWJpbGl0eUNoZWNrZXIgPSBuZXcgRmFzdEFjY2Vzc2liaWxpdHlDaGVja2VyKG4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHZvaWQgR2VuZXJhdGVNaW5pbWFsVGFycGl0cyhBY3Rpb248TGlzdDxzdHJpbmc+PiBmb3VuZFRhcnBpdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdlbmVyYXRlTWluaW1hbFRhcnBpdHNGYXN0KChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+PikobCA9PiBmb3VuZFRhcnBpdChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkLHN0cmluZz4obCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkLCBzdHJpbmc+KShzID0+IFdvcmRpZnkocykpKS5Ub0xpc3QoKSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEdlbmVyYXRlTWluaW1hbFRhcnBpdHNGYXN0KEFjdGlvbjxMaXN0PEZhc3RXb3JkPj4gZm91bmRUYXJwaXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHZW5lcmF0ZU1pbmltYWxUYXJwaXRzRmFzdEluKF93b3JkcywgbmV3IExpc3Q8RmFzdFdvcmQ+KCksIChnbG9iYWw6OlN5c3RlbS5BY3Rpb248Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+Pilmb3VuZFRhcnBpdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEdlbmVyYXRlTWluaW1hbFRhcnBpdHNGYXN0SW4oTGlzdDxGYXN0V29yZD4gUywgTGlzdDxGYXN0V29yZD4gbXVzdEhhdmVzLCBBY3Rpb248TGlzdDxGYXN0V29yZD4+IGZvdW5kVGFycGl0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGV4Y2x1ZGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB2YXIgZXh0ZW5kZWRNdXN0SGF2ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihtdXN0SGF2ZXMpO1xyXG4gICAgICAgICAgICB2YXIgVCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KFMsbXVzdEhhdmVzKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB3IGluIFQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBXID0gUnVuRXNjYXBlKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KFMsbmV3W10geyB3IH0pLCBleHRlbmRlZE11c3RIYXZlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFcgIT0gbnVsbCAmJiBXLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBleGNsdWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgR2VuZXJhdGVNaW5pbWFsVGFycGl0c0Zhc3RJbihXLCBleHRlbmRlZE11c3RIYXZlcywgKGdsb2JhbDo6U3lzdGVtLkFjdGlvbjxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4+KWZvdW5kVGFycGl0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBleHRlbmRlZE11c3RIYXZlcy5BZGQodyk7ICAgIFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIWV4Y2x1ZGVkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdyBpbiBtdXN0SGF2ZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIFcgPSBSdW5Fc2NhcGUoU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4oUyxuZXdbXSB7IHcgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChXLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZXhjbHVkZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRUYXJwaXQoUyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExpc3Q8RmFzdFdvcmQ+IFJ1bkVzY2FwZShJRW51bWVyYWJsZTxGYXN0V29yZD4gUywgTGlzdDxGYXN0V29yZD4gbXVzdEhhdmVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIFQgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihTKTtcclxuICAgICAgICAgICAgdmFyIFIgPSBuZXcgSGFzaFNldDxGYXN0V29yZD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5FeGNlcHQ8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4oX3dvcmRzLFQpKTtcclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihtdXN0SGF2ZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZCwgYm9vbD4pKHcgPT4gX2FjY2Vzc2liaWxpdHlDaGVja2VyLklzQWNjZXNzaWJsZSh3LCBSKSkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBlc2NhcGVycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KFQsbXVzdEhhdmVzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5XaGVyZSgoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkLCBib29sPikodyA9PiBfYWNjZXNzaWJpbGl0eUNoZWNrZXIuSXNBY2Nlc3NpYmxlKHcsIFIpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHcgaW4gZXNjYXBlcnMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgVC5SZW1vdmUodyk7XHJcbiAgICAgICAgICAgICAgICAgICAgUi5BZGQodyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVzY2FwZXJzLkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBUO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTGlzdDxGYXN0V29yZD4gUnVuRXNjYXBlKElFbnVtZXJhYmxlPEZhc3RXb3JkPiBTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJ1bkVzY2FwZShTLCBFbXB0eUxpc3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RyaW5nIFdvcmRpZnkoRmFzdFdvcmQgYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzdCA9IG5ldyBsb25nW2IuX3N0YWNrQ291bnRdO1xyXG4gICAgICAgICAgICB2YXIgdHJhY2VCaXRzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8dWxvbmcsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGIuX3RyYWNlLChnbG9iYWw6OlN5c3RlbS5GdW5jPHVsb25nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHQgPT4gdC5Ub1NldCgpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGMgPSAwOyBjIDwgdHJhY2VCaXRzLkNvdW50OyBjKyspXHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgaSBpbiB0cmFjZUJpdHNbY10pXHJcbiAgICAgICAgICAgICAgICAgICAgc3RbaV0gfD0gMUwgPDwgYztcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbjxjaGFyPihcIlwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLGNoYXI+KHN0LChnbG9iYWw6OlN5c3RlbS5GdW5jPGxvbmcsIGNoYXI+KShzID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAocylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiAneCc7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gJ3knO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuICd6JztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gJz8nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBlbnVubWVyYWJsZSB3YXlcclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgSUVudW1lcmFibGU8TGlzdDxzdHJpbmc+PiBFbnVtZXJhdGVNaW5pbWFsVGFycGl0cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxzdHJpbmc+PihFbnVtZXJhdGVNaW5pbWFsVGFycGl0c0Zhc3QoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxzdHJpbmc+PikobGlzdCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkLHN0cmluZz4obGlzdCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkLCBzdHJpbmc+KVdvcmRpZnkpLlRvTGlzdCgpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8TGlzdDxGYXN0V29yZD4+IEVudW1lcmF0ZU1pbmltYWxUYXJwaXRzRmFzdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZXhwbG9yZWQgPSBuZXcgSGFzaFNldDxMaXN0PEZhc3RXb3JkPj4obmV3IFNvcnRlZExpc3RDb21wYXJlcigpKTtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZU1pbmltYWxUYXJwaXRzRmFzdEluKF93b3JkcywgZXhwbG9yZWQsIG5ldyBMaXN0PEZhc3RXb3JkPigpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIElFbnVtZXJhYmxlPExpc3Q8RmFzdFdvcmQ+PiBFbnVtZXJhdGVNaW5pbWFsVGFycGl0c0Zhc3RJbihMaXN0PEZhc3RXb3JkPiBTLCBIYXNoU2V0PExpc3Q8RmFzdFdvcmQ+PiBleHBsb3JlZCwgTGlzdDxGYXN0V29yZD4gbXVzdEhhdmVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGV4Y2x1ZGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdyBpbiBTKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgVyA9IFJ1bkVzY2FwZShTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkV4Y2VwdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihTLG5ld1tdIHsgdyB9KSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoVy5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGV4Y2x1ZGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoQWxnb3JpdGhtcy5VdGlsaXR5Lkxpc3RVdGlsaXR5LlN1YnNldEVxdWFsPGdsb2JhbDo6QWxnb3JpdGhtcy5Xb3JkR2FtZS5PcHRpbWl6ZWQuRmFzdFdvcmQ+KG11c3RIYXZlcyxXKSAmJiAhZXhwbG9yZWQuQ29udGFpbnMoVykpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIFRQIGluIEVudW1lcmF0ZU1pbmltYWxUYXJwaXRzRmFzdEluKFcsIGV4cGxvcmVkLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuV29yZEdhbWUuT3B0aW1pemVkLkZhc3RXb3JkPihtdXN0SGF2ZXMpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgcmV0dXJuIFRQO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGV4cGxvcmVkLkFkZChXKTtcclxuICAgICAgICAgICAgICAgIG11c3RIYXZlcy5BZGQodyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghZXhjbHVkZWQpXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4oUyk7XHJcbiAgICAgICAgfSBcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgIGNsYXNzIFNvcnRlZExpc3RDb21wYXJlciA6IElFcXVhbGl0eUNvbXBhcmVyPExpc3Q8RmFzdFdvcmQ+PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcHVibGljIGJvb2wgRXF1YWxzKExpc3Q8RmFzdFdvcmQ+IHgsIExpc3Q8RmFzdFdvcmQ+IHkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlcXVlbmNlRXF1YWw8Z2xvYmFsOjpBbGdvcml0aG1zLldvcmRHYW1lLk9wdGltaXplZC5GYXN0V29yZD4oeCx5KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHVibGljIGludCBHZXRIYXNoQ29kZShMaXN0PEZhc3RXb3JkPiBsaXN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1bmNoZWNrZWRcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnQgaGFzaCA9IDE5O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB4IGluIGxpc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc2ggPSBoYXNoICogMzEgKyB4LkdldEhhc2hDb2RlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoYXNoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxuXHJcbnVzaW5nIEFsZ29yaXRobXMuVXRpbGl0eTtcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLldvcmRHYW1lXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBSZWZlcmVuY2VUYXJwaXRFbnVtZXJhdG9yIDogVGFycGl0RW51bWVyYXRvclxyXG4gICAge1xyXG4gICAgICAgIExpc3Q8c3RyaW5nPiBfd29yZHM7XHJcbiAgICAgICAgQWNjZXNzaWJpbGl0eUNoZWNrZXIgX2FjY2Vzc2liaWxpdHlDaGVja2VyO1xyXG5cclxuICAgICAgICBwdWJsaWMgUmVmZXJlbmNlVGFycGl0RW51bWVyYXRvcihpbnQgbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF93b3JkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PHN0cmluZz4obmV3IFdvcmRFbnVtZXJhdG9yKEFscGhhYmV0KS5FbnVtZXJhdGVXb3JkcyhuKSk7XHJcbiAgICAgICAgICAgIF9hY2Nlc3NpYmlsaXR5Q2hlY2tlciA9IG5ldyBBY2Nlc3NpYmlsaXR5Q2hlY2tlcihBbHBoYWJldCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgSUVudW1lcmFibGU8TGlzdDxzdHJpbmc+PiBFbnVtZXJhdGVNaW5pbWFsVGFycGl0cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2VlbiA9IG5ldyBIYXNoU2V0PHN0cmluZz4oKTtcclxuICAgICAgICAgICAgcmV0dXJuIEVudW1lcmF0ZU1pbmltYWxUYXJwaXRzSW4oX3dvcmRzLCBzZWVuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIElFbnVtZXJhYmxlPExpc3Q8c3RyaW5nPj4gRW51bWVyYXRlTWluaW1hbFRhcnBpdHNJbihMaXN0PHN0cmluZz4gUywgSGFzaFNldDxzdHJpbmc+IHNlZW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZXhjbHVkZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIFQgaW4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8c3RyaW5nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxzdHJpbmc+PihTLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PHN0cmluZz4+KSh3ID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRXhjZXB0PHN0cmluZz4oUyxuZXdbXSB7IHcgfSkuVG9MaXN0KCkpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIFcgPSBSdW5Fc2NhcGUoVCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoVy5Db3VudCA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGV4Y2x1ZGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gR2VuZXJhdGVTaW1wbGVLZXkoVyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2Vlbi5Db250YWlucyhrZXkpKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHNlZW4uQWRkKGtleSk7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgVFAgaW4gRW51bWVyYXRlTWluaW1hbFRhcnBpdHNJbihXLCBzZWVuKSlcclxuICAgICAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gVFA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghZXhjbHVkZWQpXHJcbiAgICAgICAgICAgICAgICB5aWVsZCByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PHN0cmluZyxzdHJpbmc+KFMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBzdHJpbmc+KShzID0+IHMpKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExpc3Q8c3RyaW5nPiBSdW5Fc2NhcGUoTGlzdDxzdHJpbmc+IFMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgVCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PHN0cmluZz4oUyk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgUiA9IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5EaWZmZXJlbmNlPHN0cmluZz4oX3dvcmRzLFQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKEFsZ29yaXRobXMuR2VuZXJpY0V4dGVuc2lvbnMuUmVtb3ZlQWxsPHN0cmluZz4oVCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIGJvb2w+KSh3ID0+IF9hY2Nlc3NpYmlsaXR5Q2hlY2tlci5Jc0FjY2Vzc2libGUodywgUikpLCAoZ2xvYmFsOjpTeXN0ZW0uQWN0aW9uPHN0cmluZz4pKCh4KSA9PiB7IH0pKSA8PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gVDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0cmluZyBHZW5lcmF0ZVNpbXBsZUtleShMaXN0PHN0cmluZz4gUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcuSm9pbihcIixcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PHN0cmluZyxzdHJpbmc+KFMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBzdHJpbmc+KShzID0+IHMpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIlxyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uTGlucTtcclxudXNpbmcgU3lzdGVtLlRleHQ7XHJcblxyXG5cclxubmFtZXNwYWNlIEJpdExldmVsR2VuZXJhdGlvblxyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQml0R3JhcGhfbG9uZyA6IElHcmFwaF9sb25nXHJcbiAgICB7XHJcbiAgICAgICAgaW50W10gX3ZlcnRpY2VzO1xyXG4gICAgICAgIGxvbmdbXSBfbmVpZ2hib3Job29kO1xyXG5cclxuICAgICAgICBwdWJsaWMgQml0R3JhcGhfbG9uZyhMaXN0PGludD4gZWRnZVdlaWdodHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbiA9IChpbnQpKCgxICsgTWF0aC5TcXJ0KDEgKyA4ICogZWRnZVdlaWdodHMuQ291bnQpKSAvIDIpO1xyXG4gICAgICAgICAgICBfdmVydGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIG4pLlRvQXJyYXkoKTtcclxuXHJcbiAgICAgICAgICAgIF9uZWlnaGJvcmhvb2QgPSBuZXcgbG9uZ1tuXTtcclxuXHJcbiAgICAgICAgICAgIGludCBrID0gMDtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBpQml0ID0gMUwgPDwgaTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IG47IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgakJpdCA9IDFMIDw8IGo7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlZGdlV2VpZ2h0c1trXSAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX25laWdoYm9yaG9vZFtpXSB8PSBqQml0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbmVpZ2hib3Job29kW2pdIHw9IGlCaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cdFx0cHVibGljIEJpdEdyYXBoX2xvbmcoaW50IG4sIGxvbmdbXSBuZWlnaGJvcmhvb2QpXHJcbiAgICAgICAge1xyXG5cdFx0XHRfdmVydGljZXMgPSBFbnVtZXJhYmxlLlJhbmdlKDAsIG4pLlRvQXJyYXkoKTtcclxuXHRcdFx0X25laWdoYm9yaG9vZCA9IG5laWdoYm9yaG9vZDtcclxuXHRcdH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBOIHsgZ2V0IHsgcmV0dXJuIF92ZXJ0aWNlcy5MZW5ndGg7IH0gfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTxpbnQ+IFZlcnRpY2VzIHsgZ2V0IHsgcmV0dXJuIF92ZXJ0aWNlczsgfSB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzSW5kZXBlbmRlbnQobG9uZyBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gc2V0LlRydWVGb3JBbGxCaXRJbmRpY2VzKChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgYm9vbD4pKGkgPT4gKF9uZWlnaGJvcmhvb2RbaV0gJiBzZXQpID09IDApKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgRGVncmVlKGludCB2KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9uZWlnaGJvcmhvb2Rbdl0uUG9wdWxhdGlvbkNvdW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBpbnQgRGVncmVlSW5TZXQoaW50IHYsIGxvbmcgc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIChfbmVpZ2hib3Job29kW3ZdICYgc2V0KS5Qb3B1bGF0aW9uQ291bnQoKTtcclxuICAgICAgICB9XHJcblx0XHRwdWJsaWMgbG9uZyBOZWlnaGJvcnNJblNldChpbnQgdiwgbG9uZyBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX25laWdoYm9yaG9vZFt2XSAmIHNldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIElFbnVtZXJhYmxlPGxvbmc+IE1heGltYWxJbmRlcGVuZGVudFN1YnNldHMobG9uZyBzZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGlzdCA9IG5ldyBMaXN0PGxvbmc+KDgpO1xyXG4gICAgICAgICAgICBCcm9uS2VyYm9zY2goc2V0LCAwTCwgMEwsIGxpc3QpO1xyXG4gICAgICAgICAgICByZXR1cm4gbGlzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgQnJvbktlcmJvc2NoKGxvbmcgUCwgbG9uZyBSLCBsb25nIFgsIExpc3Q8bG9uZz4gbGlzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChQID09IDAgJiYgWCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgbGlzdC5BZGQoUik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHUgPSBUb21pdGFQaXZvdChQLCBYKTtcclxuICAgICAgICAgICAgICAgIHZhciBxID0gUCAmICgoMUwgPDwgdSkgfCBfbmVpZ2hib3Job29kW3VdKTtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocSAhPSAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSBxICYgLXE7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBiaXQuRXh0cmFjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBub24gPSB+KGJpdCB8IF9uZWlnaGJvcmhvb2Rbdl0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBCcm9uS2VyYm9zY2goUCAmIG5vbiwgUiB8IGJpdCwgWCAmIG5vbiwgbGlzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHEgXj0gYml0O1xyXG4gICAgICAgICAgICAgICAgICAgIFAgXj0gYml0O1xyXG4gICAgICAgICAgICAgICAgICAgIFggfD0gYml0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgVG9taXRhUGl2b3QobG9uZyBQLCBsb25nIFgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWluID0gaW50Lk1heFZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgYmVzdCA9IC0xO1xyXG4gICAgICAgICAgICB2YXIgcSA9IFAgfCBYO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHEgIT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpdCA9IHEgJiAtcTtcclxuICAgICAgICAgICAgICAgIHZhciB1ID0gYml0LkV4dHJhY3QoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgbiA9ICgoYml0IHwgX25laWdoYm9yaG9vZFt1XSkgJiBQKS5Qb3B1bGF0aW9uQ291bnQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChuIDwgbWluKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IG47XHJcbiAgICAgICAgICAgICAgICAgICAgYmVzdCA9IHU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcSBePSBiaXQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBiZXN0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbm5hbWVzcGFjZSBCaXRMZXZlbEdlbmVyYXRpb25cclxue1xyXG4gICAgcHVibGljIGNsYXNzIEJpdEdyYXBoX3VpbnQgOiBJR3JhcGhfdWludFxyXG4gICAge1xyXG4gICAgICAgIGludFtdIF92ZXJ0aWNlcztcclxuICAgICAgICB1aW50W10gX25laWdoYm9yaG9vZDtcclxuXHJcbiAgICAgICAgcHVibGljIEJpdEdyYXBoX3VpbnQoTGlzdDxpbnQ+IGVkZ2VXZWlnaHRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG4gPSAoaW50KSgoMSArIE1hdGguU3FydCgxICsgOCAqIGVkZ2VXZWlnaHRzLkNvdW50KSkgLyAyKTtcclxuICAgICAgICAgICAgX3ZlcnRpY2VzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBuKS5Ub0FycmF5KCk7XHJcblxyXG4gICAgICAgICAgICBfbmVpZ2hib3Job29kID0gbmV3IHVpbnRbbl07XHJcblxyXG4gICAgICAgICAgICBpbnQgayA9IDA7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaUJpdCA9IDFVIDw8IGk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBuOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGpCaXQgPSAxVSA8PCBqO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWRnZVdlaWdodHNba10gIT0gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9uZWlnaGJvcmhvb2RbaV0gfD0gakJpdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX25laWdoYm9yaG9vZFtqXSB8PSBpQml0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdHB1YmxpYyBCaXRHcmFwaF91aW50KGludCBuLCB1aW50W10gbmVpZ2hib3Job29kKVxyXG4gICAgICAgIHtcclxuXHRcdFx0X3ZlcnRpY2VzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBuKS5Ub0FycmF5KCk7XHJcblx0XHRcdF9uZWlnaGJvcmhvb2QgPSBuZWlnaGJvcmhvb2Q7XHJcblx0XHR9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgTiB7IGdldCB7IHJldHVybiBfdmVydGljZXMuTGVuZ3RoOyB9IH1cclxuICAgICAgICBwdWJsaWMgSUVudW1lcmFibGU8aW50PiBWZXJ0aWNlcyB7IGdldCB7IHJldHVybiBfdmVydGljZXM7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0luZGVwZW5kZW50KHVpbnQgc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNldC5UcnVlRm9yQWxsQml0SW5kaWNlcygoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGJvb2w+KShpID0+IChfbmVpZ2hib3Job29kW2ldICYgc2V0KSA9PSAwKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW50IERlZ3JlZShpbnQgdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBfbmVpZ2hib3Job29kW3ZdLlBvcHVsYXRpb25Db3VudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgaW50IERlZ3JlZUluU2V0KGludCB2LCB1aW50IHNldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiAoX25laWdoYm9yaG9vZFt2XSAmIHNldCkuUG9wdWxhdGlvbkNvdW50KCk7XHJcbiAgICAgICAgfVxyXG5cdFx0cHVibGljIHVpbnQgTmVpZ2hib3JzSW5TZXQoaW50IHYsIHVpbnQgc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9uZWlnaGJvcmhvb2Rbdl0gJiBzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBJRW51bWVyYWJsZTx1aW50PiBNYXhpbWFsSW5kZXBlbmRlbnRTdWJzZXRzKHVpbnQgc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxpc3QgPSBuZXcgTGlzdDx1aW50Pig4KTtcclxuICAgICAgICAgICAgQnJvbktlcmJvc2NoKHNldCwgMFUsIDBVLCBsaXN0KTtcclxuICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEJyb25LZXJib3NjaCh1aW50IFAsIHVpbnQgUiwgdWludCBYLCBMaXN0PHVpbnQ+IGxpc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoUCA9PSAwICYmIFggPT0gMClcclxuICAgICAgICAgICAgICAgIGxpc3QuQWRkKFIpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciB1ID0gVG9taXRhUGl2b3QoUCwgWCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcSA9IFAgJiAoKDFVIDw8IHUpIHwgX25laWdoYm9yaG9vZFt1XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHEgIT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gcSAmICh+cSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gYml0LkV4dHJhY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbm9uID0gfihiaXQgfCBfbmVpZ2hib3Job29kW3ZdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgQnJvbktlcmJvc2NoKFAgJiBub24sIFIgfCBiaXQsIFggJiBub24sIGxpc3QpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBxIF49IGJpdDtcclxuICAgICAgICAgICAgICAgICAgICBQIF49IGJpdDtcclxuICAgICAgICAgICAgICAgICAgICBYIHw9IGJpdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50IFRvbWl0YVBpdm90KHVpbnQgUCwgdWludCBYKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1pbiA9IGludC5NYXhWYWx1ZTtcclxuICAgICAgICAgICAgdmFyIGJlc3QgPSAtMTtcclxuICAgICAgICAgICAgdmFyIHEgPSBQIHwgWDtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChxICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBiaXQgPSBxICYgKH5xICsgMSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdSA9IGJpdC5FeHRyYWN0KCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIG4gPSAoKGJpdCB8IF9uZWlnaGJvcmhvb2RbdV0pICYgUCkuUG9wdWxhdGlvbkNvdW50KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobiA8IG1pbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBuO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlc3QgPSB1O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHEgXj0gYml0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYmVzdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iLCJ1c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcblxyXG51c2luZyBTeXN0ZW0uQ29tcG9uZW50TW9kZWw7XHJcbnVzaW5nIFN5c3RlbS5SdW50aW1lLlNlcmlhbGl6YXRpb247XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBFZGdlIDogR3JhcGhpY3NMYXllci5JUGFpbnRhYmxlLCBJSGl0dGFibGVcclxuICAgIHtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5Gb250IExhYmVsRm9udCA9IG5ldyBHcmFwaGljc0xheWVyLkZvbnQoXCJUaW1lcyBOZXcgUm9tYW5cIiwgMTgpO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkFSR0IgTGFiZWxCcnVzaENvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigxMjAsIDAsIDAsIDI1NSk7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuRm9udCBJbmRleEZvbnQgPSBuZXcgR3JhcGhpY3NMYXllci5Gb250KFwiU3lzdGVtXCIsIDgpO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkFSR0IgSW5kZXhCcnVzaENvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigyMDAsIDIwMCwgMCwgMCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnQgUGFyZW50SW5kZXggeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgSW5kZXhBbmdsZSB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBlbnVtIE9yaWVudGF0aW9uc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTm9uZSxcclxuICAgICAgICAgICAgRm9yd2FyZCxcclxuICAgICAgICAgICAgQmFja3dhcmRcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEVkZ2UoVmVydGV4IHYxLCBWZXJ0ZXggdjIpXHJcbiAgICAgICAgICAgIDogdGhpcyh2MSwgdjIsIE9yaWVudGF0aW9ucy5Ob25lKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBFZGdlKFZlcnRleCB2MSwgVmVydGV4IHYyLCBPcmllbnRhdGlvbnMgb3JpZW50YXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfVjEgPSB2MTtcclxuICAgICAgICAgICAgX1YyID0gdjI7XHJcbiAgICAgICAgICAgIF9PcmllbnRhdGlvbiA9IG9yaWVudGF0aW9uO1xyXG4gICAgICAgICAgICBfTXVsdGlwbGljaXR5ID0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBFZGdlKFNlcmlhbGl6YXRpb25FZGdlIGUsIExpc3Q8VmVydGV4PiB2ZXJ0aWNlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFYxID0gdmVydGljZXNbZS5JbmRleFYxXTtcclxuICAgICAgICAgICAgVjIgPSB2ZXJ0aWNlc1tlLkluZGV4VjJdO1xyXG4gICAgICAgICAgICBPcmllbnRhdGlvbiA9IGUuT3JpZW50YXRpb247XHJcbiAgICAgICAgICAgIFRoaWNrbmVzcyA9IGUuVGhpY2tuZXNzO1xyXG4gICAgICAgICAgICBNdWx0aXBsaWNpdHkgPSBlLk11bHRpcGxpY2l0eTtcclxuICAgICAgICAgICAgU3R5bGUgPSBlLlN0eWxlO1xyXG4gICAgICAgICAgICBMYWJlbCA9IGUuTGFiZWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBQYWludChHcmFwaGljc0xheWVyLklHcmFwaGljcyBnLCBpbnQgd2lkdGgsIGludCBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX1YxID09IF9WMilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gRHJhdyBzZWxmIGxvb3AuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF4UmFkaXVzMSA9IE1hdGguTWF4KF9WMS5Mb2NhbEJvdW5kcy5XaWR0aCwgX1YxLkxvY2FsQm91bmRzLkhlaWdodCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1heFJhZGl1czIgPSBNYXRoLk1heChfVjIuTG9jYWxCb3VuZHMuV2lkdGgsIF9WMi5Mb2NhbEJvdW5kcy5IZWlnaHQpIC8gMjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY29zID0gKF9WMi5YIC0gX1YxLlgpIC8gTWF0aC5TcXJ0KChfVjIuWCAtIF9WMS5YKSAqIChfVjIuWCAtIF9WMS5YKSArIChfVjIuWSAtIF9WMS5ZKSAqIChfVjIuWSAtIF9WMS5ZKSk7XHJcbiAgICAgICAgICAgICAgICBjb3MgPSBNYXRoLk1pbihNYXRoLk1heChjb3MsIC0xKSwgMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHNpbiA9IChfVjIuWSAtIF9WMS5ZKSAvIE1hdGguU3FydCgoX1YyLlggLSBfVjEuWCkgKiAoX1YyLlggLSBfVjEuWCkgKyAoX1YyLlkgLSBfVjEuWSkgKiAoX1YyLlkgLSBfVjEuWSkpO1xyXG4gICAgICAgICAgICAgICAgc2luID0gTWF0aC5NaW4oTWF0aC5NYXgoc2luLCAtMSksIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9IE1hdGguQWNvcyhjb3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF9WMS5ZID4gX1YyLlkpXHJcbiAgICAgICAgICAgICAgICAgICAgYW5nbGUgPSAtYW5nbGU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRvdWJsZS5Jc05hTihhbmdsZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhbmdsZVN0ZXAgPSBNYXRoLlBJIC8gMi4wIC8gX011bHRpcGxpY2l0eTtcclxuICAgICAgICAgICAgICAgIHZhciBldmVuTW9kaWZpZXIgPSAoX011bHRpcGxpY2l0eSAlIDIgPT0gMCkgPyAwLjUgOiAwO1xyXG5cclxuICAgICAgICAgICAgICAgIEdyYXBoaWNzTGF5ZXIuQm94IHRvcFN0YXJ0ID0gbmV3IEdyYXBoaWNzTGF5ZXIuQm94KDAsIDApO1xyXG4gICAgICAgICAgICAgICAgR3JhcGhpY3NMYXllci5Cb3ggdG9wRmluaXNoID0gbmV3IEdyYXBoaWNzTGF5ZXIuQm94KDAsIDApO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAtKF9NdWx0aXBsaWNpdHkgLSAxKSAvIDI7IGkgPCBNYXRoLkNlaWxpbmcoKF9NdWx0aXBsaWNpdHkgKyAxKSAvIDIuMCk7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnRBbmdsZSA9IGFuZ2xlICsgYW5nbGVTdGVwICogKGkgLSBldmVuTW9kaWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmaW5pc2hBbmdsZSA9IGFuZ2xlIC0gYW5nbGVTdGVwICogKGkgLSBldmVuTW9kaWZpZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBMb2NhbFRvR2xvYmFsKF9WMS5Mb2NhdGlvbiArIFV0aWxpdHkuUG9sYXJUb1JlY3Rhbmd1bGFyKG1heFJhZGl1czEgKyAwLjAxLCBzdGFydEFuZ2xlKSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmlzaCA9IExvY2FsVG9HbG9iYWwoX1YyLkxvY2F0aW9uIC0gVXRpbGl0eS5Qb2xhclRvUmVjdGFuZ3VsYXIobWF4UmFkaXVzMiArIDAuMDEsIGZpbmlzaEFuZ2xlKSwgd2lkdGgsIGhlaWdodCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3QpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3BTdGFydCA9IHN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3BGaW5pc2ggPSBmaW5pc2g7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBnLkRyYXdMaW5lKF9wZW5Db2xvciwgc3RhcnQsIGZpbmlzaCwgX3RoaWNrbmVzcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKF9PcmllbnRhdGlvbiAhPSBPcmllbnRhdGlvbnMuTm9uZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnRzID0gbmV3IEdyYXBoaWNzTGF5ZXIuQm94WzNdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfT3JpZW50YXRpb24gPT0gT3JpZW50YXRpb25zLkZvcndhcmQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3dlZXAgPSBfVjIuTG9jYXRpb24gLSBVdGlsaXR5LlBvbGFyVG9SZWN0YW5ndWxhcihtYXhSYWRpdXMyICsgMC4wMjVmLCBhbmdsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNbMF0gPSBMb2NhbFRvR2xvYmFsKFV0aWxpdHkuUm90YXRlQXJvdW5kUG9pbnQoc3dlZXAsIF9WMi5Mb2NhdGlvbiwgTWF0aC5QSSAvIDE4MC4wICogMTAuMCksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNbMV0gPSBMb2NhbFRvR2xvYmFsKF9WMi5Mb2NhdGlvbiAtIFV0aWxpdHkuUG9sYXJUb1JlY3Rhbmd1bGFyKG1heFJhZGl1czIgKyAwLjAwNWYsIGFuZ2xlKSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c1syXSA9IExvY2FsVG9HbG9iYWwoVXRpbGl0eS5Sb3RhdGVBcm91bmRQb2ludChzd2VlcCwgX1YyLkxvY2F0aW9uLCAtTWF0aC5QSSAvIDE4MC4wICogMTAuMCksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChfT3JpZW50YXRpb24gPT0gT3JpZW50YXRpb25zLkJhY2t3YXJkKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN3ZWVwID0gX1YxLkxvY2F0aW9uICsgVXRpbGl0eS5Qb2xhclRvUmVjdGFuZ3VsYXIobWF4UmFkaXVzMSArIDAuMDI1ZiwgYW5nbGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzWzBdID0gTG9jYWxUb0dsb2JhbChVdGlsaXR5LlJvdGF0ZUFyb3VuZFBvaW50KHN3ZWVwLCBfVjEuTG9jYXRpb24sIE1hdGguUEkgLyAxODAuMCAqIDEwLjApLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzWzFdID0gTG9jYWxUb0dsb2JhbChfVjEuTG9jYXRpb24gKyBVdGlsaXR5LlBvbGFyVG9SZWN0YW5ndWxhcihtYXhSYWRpdXMxICsgMC4wMDVmLCBhbmdsZSksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNbMl0gPSBMb2NhbFRvR2xvYmFsKFV0aWxpdHkuUm90YXRlQXJvdW5kUG9pbnQoc3dlZXAsIF9WMS5Mb2NhdGlvbiwgLU1hdGguUEkgLyAxODAuMCAqIDEwLjApLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGcuRmlsbFBvbHlnb24obmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigwLCAwLCAwKSwgcG9pbnRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBMYWJlbDtcclxuICAgICAgICAgICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkobGFiZWwpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBib3ggPSBnLk1lYXN1cmVTdHJpbmcobGFiZWwsIExhYmVsRm9udCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG5ldyBHcmFwaGljc0xheWVyLkJveCh0b3BTdGFydC5YICsgKHRvcEZpbmlzaC5YIC0gdG9wU3RhcnQuWCkgLyAyIC0gYm94LldpZHRoIC8gMiAtIDAuNzUgKiBib3guV2lkdGggKiBzaW4sIHRvcFN0YXJ0LlkgKyAodG9wRmluaXNoLlkgLSB0b3BTdGFydC5ZKSAvIDIgLSBib3guSGVpZ2h0IC8gMiArIDAuNzUgKiBib3guSGVpZ2h0ICogY29zLCBib3guV2lkdGgsIGJveC5IZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGcuRHJhd1N0cmluZyhsYWJlbCwgTGFiZWxGb250LCBMYWJlbEJydXNoQ29sb3IsIGJvdW5kcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKF9zaG93SW5kZXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG5ldyBHcmFwaGljc0xheWVyLkJveCh0b3BTdGFydC5YICsgKHRvcEZpbmlzaC5YIC0gdG9wU3RhcnQuWCkgLyAyLCB0b3BTdGFydC5ZICsgKHRvcEZpbmlzaC5ZIC0gdG9wU3RhcnQuWSkgLyAyLCAxMCwgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjeCA9IChib3VuZHMuTGVmdCArIGJvdW5kcy5SaWdodCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjeSA9IChib3VuZHMuQm90dG9tICsgYm91bmRzLlRvcCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5NYXgoYm91bmRzLldpZHRoLCBib3VuZHMuSGVpZ2h0KSAvIDIgKyA1O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYiA9IG5ldyBHcmFwaGljc0xheWVyLkJveChjeCArIHIgKiBNYXRoLkNvcyhJbmRleEFuZ2xlKSAtIDUsIGN5ICsgciAqIE1hdGguU2luKEluZGV4QW5nbGUpIC0gNSwgMTAsIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICBnLkRyYXdTdHJpbmcoUGFyZW50SW5kZXguVG9TdHJpbmcoKSwgSW5kZXhGb250LCBJbmRleEJydXNoQ29sb3IsIGJiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR3JhcGhpY3NMYXllci5Cb3ggTG9jYWxUb0dsb2JhbChWZWN0b3IgbG9jYWwsIGludCB3aWR0aCwgaW50IGhlaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGhpY3NMYXllci5Cb3god2lkdGggKiBsb2NhbC5YLCBoZWlnaHQgKiBsb2NhbC5ZKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIEhpdChkb3VibGUgeCwgZG91YmxlIHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBNZWV0cyhFZGdlIG90aGVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9WMSA9PSBvdGhlci5WMSB8fFxyXG4gICAgICAgICAgICAgICAgICAgX1YyID09IG90aGVyLlYxIHx8XHJcbiAgICAgICAgICAgICAgICAgICBfVjEgPT0gb3RoZXIuVjIgfHxcclxuICAgICAgICAgICAgICAgICAgIF9WMiA9PSBvdGhlci5WMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBWZXJ0ZXggVjFcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX1YxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfVjEgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIFZlcnRleCBWMlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfVjI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9WMiA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgT3JpZW50YXRpb25zIE9yaWVudGF0aW9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9PcmllbnRhdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX09yaWVudGF0aW9uID0gdmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgVXBkYXRlU3R5bGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBVcGRhdGVTdHlsZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoU3R5bGUgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIFN0eWxlID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgIHZhciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XHJcbiAgICAgICAgICAgIFN0eWxlID0gc2IuVG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBmbG9hdCBUaGlja25lc3NcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaWNrbmVzcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3RoaWNrbmVzcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgR3JhcGhpY3NMYXllci5BUkdCIENvbG9yXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9Db2xvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX0NvbG9yID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBfcGVuQ29sb3IgPSBfQ29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBib29sIElzU2VsZWN0ZWRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX0lzU2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBfSXNTZWxlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgX0lzU2VsZWN0ZWQgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBDb2xvciA9IF9Jc1NlbGVjdGVkID8gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQig1MCwgMjA1LCA1MCkgOiBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDAsIDAsIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgaW50IE11bHRpcGxpY2l0eVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfTXVsdGlwbGljaXR5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfTXVsdGlwbGljaXR5ID0gTWF0aC5NYXgoMSwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgc3RyaW5nIFN0eWxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9zdHlsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlLkNvbnRhaW5zKFwifn58fnx+flwiKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSBzdHlsZS5TcGxpdChuZXcgc3RyaW5nW10geyBcIn5+fH58fn5cIiB9LCBTdHJpbmdTcGxpdE9wdGlvbnMuTm9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLkxlbmd0aCA+PSAyKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUgPSBwYXJ0c1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTGFiZWwgPSBwYXJ0c1sxXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlLlN0YXJ0c1dpdGgoXCIrXCIpICYmICFzdHJpbmcuSXNOdWxsT3JFbXB0eShfc3R5bGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIF9zdHlsZSArPSBcIiwgXCIgKyBzdHlsZS5UcmltU3RhcnQoJysnKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBfc3R5bGUgPSBzdHlsZS5UcmltU3RhcnQoJysnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBMYWJlbCB7IGdldDsgc2V0OyB9XHJcbiAgIFxyXG4gICAgICAgIFZlcnRleCBfVjE7XHJcbiAgICAgICAgVmVydGV4IF9WMjtcclxuICAgICAgICBPcmllbnRhdGlvbnMgX09yaWVudGF0aW9uO1xyXG4gICAgICAgIGZsb2F0IF90aGlja25lc3MgPSA0O1xyXG4gICAgICAgIEdyYXBoaWNzTGF5ZXIuQVJHQiBfQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDAsIDAsIDApO1xyXG4gICAgICAgIEdyYXBoaWNzTGF5ZXIuQVJHQiBfcGVuQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDAsIDAsIDApO1xyXG4gICAgICAgIGJvb2wgX0lzU2VsZWN0ZWQ7XHJcbiAgICAgICAgaW50IF9NdWx0aXBsaWNpdHk7XHJcbiAgICAgICAgc3RyaW5nIF9zdHlsZTtcclxuICAgICAgICBib29sIF9zaG93SW5kZXggPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBUb2dnbGVJbmRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfc2hvd0luZGV4ID0gIV9zaG93SW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFJvdGF0ZUluZGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEluZGV4QW5nbGUgKz0gTWF0aC5QSSAvIDE2O1xyXG4gICAgICAgICAgICBpZiAoSW5kZXhBbmdsZSA+PSAyICogTWF0aC5QSSlcclxuICAgICAgICAgICAgICAgIEluZGV4QW5nbGUgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcblxyXG5uYW1lc3BhY2UgR3JhcGhzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBHcmFwaCA6IEdyYXBoaWNzTGF5ZXIuSVBhaW50YWJsZVxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBjb25zdCBzdHJpbmcgR3JhcGhFeHRlbnNpb24gPSBcIi5ncmFwaFwiO1xyXG4gICAgICAgIHB1YmxpYyBjb25zdCBzdHJpbmcgRWRnZVdlaWdodEV4dGVuc2lvbiA9IFwiLmVkZ2Ugd2VpZ2h0XCI7XHJcblxyXG4gICAgICAgIExpc3Q8VmVydGV4PiBfdmVydGljZXMgPSBuZXcgTGlzdDxWZXJ0ZXg+KCk7XHJcbiAgICAgICAgTGlzdDxFZGdlPiBfZWRnZXMgPSBuZXcgTGlzdDxFZGdlPigpO1xyXG4gICAgICAgIG9iamVjdCBfTW9kaWZ5TGlzdHNUb2tlbiA9IG5ldyBvYmplY3QoKTtcclxuXHJcbiAgICAgICAgc3RyaW5nIF9GaWxlTmFtZSA9IG51bGw7XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzRGlyZWN0ZWRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldCB7IHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkFueTxnbG9iYWw6OkdyYXBocy5FZGdlPihfZWRnZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuRWRnZSwgYm9vbD4pKGUgPT4gZS5PcmllbnRhdGlvbiAhPSBFZGdlLk9yaWVudGF0aW9ucy5Ob25lKSk7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PElIaXR0YWJsZT4gU2VsZWN0ZWRJdGVtc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZEl0ZW1zID0gbmV3IExpc3Q8SUhpdHRhYmxlPigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIFNlbGVjdGVkVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbXMuQWRkKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBpIGluIFNlbGVjdGVkRWRnZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbXMuQWRkKGkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRJdGVtcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8VmVydGV4PiBTZWxlY3RlZFZlcnRpY2VzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpHcmFwaHMuVmVydGV4PihfdmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuVmVydGV4LCBib29sPikodiA9PiB2LklzU2VsZWN0ZWQpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8RWRnZT4gU2VsZWN0ZWRFZGdlc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6R3JhcGhzLkVkZ2U+KF9lZGdlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5FZGdlLCBib29sPikoZSA9PiBlLklzU2VsZWN0ZWQpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoaWNzTGF5ZXIuQm94IEJvdW5kaW5nUmVjdGFuZ2xlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBkb3VibGUuTWF4VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gZG91YmxlLk1pblZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSBkb3VibGUuTWF4VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvdHRvbSA9IGRvdWJsZS5NaW5WYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IE1hdGguTWluKGxlZnQsIHYuTG9jYWxCb3VuZHMuTGVmdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gTWF0aC5NYXgocmlnaHQsIHYuTG9jYWxCb3VuZHMuUmlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3AgPSBNYXRoLk1pbih0b3AsIHYuTG9jYWxCb3VuZHMuVG9wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0gTWF0aC5NYXgoYm90dG9tLCB2LkxvY2FsQm91bmRzLkJvdHRvbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEdyYXBoaWNzTGF5ZXIuQm94KGxlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0LCBib3R0b20gLSB0b3ApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGhpY3NMYXllci5Cb3ggU2VsZWN0ZWRCb3VuZGluZ1JlY3RhbmdsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzdiA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6R3JhcGhzLlZlcnRleD4oU2VsZWN0ZWRWZXJ0aWNlcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3YuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQm91bmRpbmdSZWN0YW5nbGU7XHJcblxyXG4gICAgICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBkb3VibGUuTWF4VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gZG91YmxlLk1pblZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSBkb3VibGUuTWF4VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvdHRvbSA9IGRvdWJsZS5NaW5WYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gc3YpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gTWF0aC5NaW4obGVmdCwgdi5Mb2NhbEJvdW5kcy5MZWZ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQgPSBNYXRoLk1heChyaWdodCwgdi5Mb2NhbEJvdW5kcy5SaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IE1hdGguTWluKHRvcCwgdi5Mb2NhbEJvdW5kcy5Ub3ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3R0b20gPSBNYXRoLk1heChib3R0b20sIHYuTG9jYWxCb3VuZHMuQm90dG9tKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgR3JhcGhpY3NMYXllci5Cb3gobGVmdCwgdG9wLCByaWdodCAtIGxlZnQsIGJvdHRvbSAtIHRvcCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIE5hbWVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX0ZpbGVOYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfRmlsZU5hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIExpc3Q8VmVydGV4PiBWZXJ0aWNlc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdmVydGljZXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PEVkZ2U+IEVkZ2VzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9lZGdlcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgUGFyYW1ldGVyc0RpcnR5IHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFBhcmFtZXRlcnNEaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGgoU2VyaWFsaXphdGlvbkdyYXBoIGcpXHJcbiAgICAgICAgICAgIDogdGhpcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfdmVydGljZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkdyYXBocy5TZXJpYWxpemF0aW9uVmVydGV4LGdsb2JhbDo6R3JhcGhzLlZlcnRleD4oZy5WZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5TZXJpYWxpemF0aW9uVmVydGV4LCBnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KSh2ID0+IG5ldyBWZXJ0ZXgodikpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgX2VkZ2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpHcmFwaHMuU2VyaWFsaXphdGlvbkVkZ2UsZ2xvYmFsOjpHcmFwaHMuRWRnZT4oZy5FZGdlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5TZXJpYWxpemF0aW9uRWRnZSwgZ2xvYmFsOjpHcmFwaHMuRWRnZT4pKGUgPT4gbmV3IEVkZ2UoZSwgX3ZlcnRpY2VzKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBOYW1lID0gZy5OYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoKElFbnVtZXJhYmxlPFZlcnRleD4gdmVydGljZXMsIElFbnVtZXJhYmxlPEVkZ2U+IGVkZ2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3ZlcnRpY2VzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpHcmFwaHMuVmVydGV4Pih2ZXJ0aWNlcyk7XHJcbiAgICAgICAgICAgIF9lZGdlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6R3JhcGhzLkVkZ2U+KGVkZ2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaChBbGdvcml0aG1zLkdyYXBoIGcsIExpc3Q8VmVjdG9yPiBwb3NpdGlvbiwgYm9vbCBkaXJlY3RlZCA9IHRydWUpXHJcbiAgICAgICAgICAgIDogdGhpcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZy5WZXJ0ZXhXZWlnaHQgIT0gbnVsbCAmJiBnLlZlcnRleFdlaWdodC5Db3VudCA9PSBnLk4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF92ZXJ0aWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KGcuVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KSh2ID0+IG5ldyBWZXJ0ZXgocG9zaXRpb25bdl0uWCwgcG9zaXRpb25bdl0uWSwgZy5WZXJ0ZXhXZWlnaHRbdl0uVG9TdHJpbmcoKSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF92ZXJ0aWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGludCxnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KGcuVmVydGljZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KSh2ID0+IG5ldyBWZXJ0ZXgocG9zaXRpb25bdl0uWCwgcG9zaXRpb25bdl0uWSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfZWRnZXMgPSBuZXcgTGlzdDxFZGdlPigpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBnLk47IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IGkgKyAxOyBqIDwgZy5OOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGcuRGlyZWN0ZWRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZWRnZXMuQWRkKG5ldyBFZGdlKF92ZXJ0aWNlc1tpXSwgX3ZlcnRpY2VzW2pdLCBFZGdlLk9yaWVudGF0aW9ucy5Gb3J3YXJkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGcuQWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZWRnZXMuQWRkKG5ldyBFZGdlKF92ZXJ0aWNlc1tqXSwgX3ZlcnRpY2VzW2ldLCBFZGdlLk9yaWVudGF0aW9ucy5Gb3J3YXJkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGcuQWRqYWNlbnRbaSwgal0pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZWRnZXMuQWRkKG5ldyBFZGdlKF92ZXJ0aWNlc1tpXSwgX3ZlcnRpY2VzW2pdLCBFZGdlLk9yaWVudGF0aW9ucy5Ob25lKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBQYWludChHcmFwaGljc0xheWVyLklHcmFwaGljcyBnLCBpbnQgd2lkdGgsIGludCBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKFBhcmFtZXRlcnNEaXJ0eSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JhcGggPSBuZXcgQWxnb3JpdGhtcy5HcmFwaChHZXRFZGdlV2VpZ2h0cygpKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IFZlcnRpY2VzLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IFZlcnRpY2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFZlcnRpY2VzW2ldLklzVW5pdmVyc2FsID0gZ3JhcGguRGVncmVlKGkpID09IG4gLSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQYXJhbWV0ZXJzRGlydHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgamogPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX3ZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHYuUGFyZW50SW5kZXggPSBqaisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHYuUGFpbnQoZywgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgamogPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gX2VkZ2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGUuUGFyZW50SW5kZXggPSBqaisrO1xyXG4gICAgICAgICAgICAgICAgICAgIGUuUGFpbnQoZywgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PGludD4gR2V0RWRnZVdlaWdodHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHdlaWdodHMgPSBuZXcgTGlzdDxpbnQ+KCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF92ZXJ0aWNlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBfdmVydGljZXMuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBFZGdlIGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEVkZ2VFeGlzdHMoX3ZlcnRpY2VzW2ldLCBfdmVydGljZXNbal0sIG91dCBlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0cy5BZGQoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoRWRnZUV4aXN0cyhfdmVydGljZXNbal0sIF92ZXJ0aWNlc1tpXSwgb3V0IGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuT3JpZW50YXRpb24gPT0gRWRnZS5PcmllbnRhdGlvbnMuTm9uZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHMuQWRkKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzLkFkZCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0cy5BZGQoMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB3ZWlnaHRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgTW9kaWZ5T3JpZW50YXRpb24oTGlzdDxpbnQ+IGVkZ2VXZWlnaHRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW50IGsgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF92ZXJ0aWNlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBfdmVydGljZXMuQ291bnQ7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IGVkZ2VXZWlnaHRzW2tdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodyAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBHZXRFZGdlKF92ZXJ0aWNlc1tpXSwgX3ZlcnRpY2VzW2pdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLlYxID09IF92ZXJ0aWNlc1tpXSAmJiBlLlYyID09IF92ZXJ0aWNlc1tqXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHcgPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuT3JpZW50YXRpb24gPSBFZGdlLk9yaWVudGF0aW9ucy5CYWNrd2FyZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLk9yaWVudGF0aW9uID0gRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3IDwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLk9yaWVudGF0aW9uID0gRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLk9yaWVudGF0aW9uID0gRWRnZS5PcmllbnRhdGlvbnMuQmFja3dhcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgUGFyYW1ldGVyc0RpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIEdyYXBoIENsb25lKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzID0gR3JhcGhzQ29yZS5Db21wYWN0U2VyaWFsaXplci5TZXJpYWxpemUodGhpcyk7XHJcbiAgICAgICAgICAgIHZhciBnID0gR3JhcGhzQ29yZS5Db21wYWN0U2VyaWFsaXplci5EZXNlcmlhbGl6ZShzKTtcclxuICAgICAgICAgICAgaWYgKGcgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIGcuUGFyYW1ldGVyc0RpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoXCJjbG9uZSBpcyBudWxsXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBJSGl0dGFibGUgSGl0VGVzdChkb3VibGUgeCwgZG91YmxlIHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfdmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2LkhpdCh4LCB5KSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gX2VkZ2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5IaXQoeCwgeSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVW5zZWxlY3RBbGwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVW5zZWxlY3RBbGxWZXJ0aWNlcygpO1xyXG4gICAgICAgICAgICBVbnNlbGVjdEFsbEVkZ2VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBVbnNlbGVjdEFsbFZlcnRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIHYuSXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVW5zZWxlY3RBbGxFZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBfZWRnZXMpXHJcbiAgICAgICAgICAgICAgICBlLklzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNlbGVjdEVkZ2VzKElFbnVtZXJhYmxlPEVkZ2U+IGVkZ2VzLCBib29sIHN5bW1ldHJpY0RpZmZlcmVuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBVbnNlbGVjdEFsbFZlcnRpY2VzKCk7XHJcbiAgICAgICAgICAgIGlmICghc3ltbWV0cmljRGlmZmVyZW5jZSlcclxuICAgICAgICAgICAgICAgIFVuc2VsZWN0QWxsRWRnZXMoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIGVkZ2VzKVxyXG4gICAgICAgICAgICAgICAgZS5Jc1NlbGVjdGVkID0gc3ltbWV0cmljRGlmZmVyZW5jZSA/ICFlLklzU2VsZWN0ZWQgOiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2VsZWN0VmVydGljZXMoSUVudW1lcmFibGU8VmVydGV4PiB2ZXJ0aWNlcywgYm9vbCBzeW1tZXRyaWNEaWZmZXJlbmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVW5zZWxlY3RBbGxFZGdlcygpO1xyXG4gICAgICAgICAgICBpZiAoIXN5bW1ldHJpY0RpZmZlcmVuY2UpXHJcbiAgICAgICAgICAgICAgICBVbnNlbGVjdEFsbFZlcnRpY2VzKCk7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiB2ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIHYuSXNTZWxlY3RlZCA9IHN5bW1ldHJpY0RpZmZlcmVuY2UgPyAhdi5Jc1NlbGVjdGVkIDogdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgU2VsZWN0T2JqZWN0cyhMaXN0PEdyYXBoaWNzTGF5ZXIuQm94PiBzZWxlY3Rpb25Qb2ludHMsIGJvb2wgc3ltbWV0cmljRGlmZmVyZW5jZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gbmV3IFBvbHlnb25Db250YWluZXIoc2VsZWN0aW9uUG9pbnRzLlRvQXJyYXkoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHZlcnRpY2VzSW5Qb2x5Z29uID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KF92ZXJ0aWNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZXJ0ZXgsIGJvb2w+KSh2ID0+IGJvdW5kcy5Db250YWlucyhuZXcgR3JhcGhpY3NMYXllci5Cb3godi5YLCB2LlkpKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh2ZXJ0aWNlc0luUG9seWdvbi5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgU2VsZWN0VmVydGljZXModmVydGljZXNJblBvbHlnb24sIHN5bW1ldHJpY0RpZmZlcmVuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlZGdlc0hpdHRpbmdQb2x5Z29uID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkdyYXBocy5FZGdlPihfZWRnZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuRWRnZSwgYm9vbD4pKGUgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2VsZWN0aW9uUG9pbnRzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IHNlbGVjdGlvblBvaW50c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbmQgPSBzZWxlY3Rpb25Qb2ludHNbKGkgKyAxKSAlIHNlbGVjdGlvblBvaW50cy5Db3VudF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFV0aWxpdHkuSGF2ZUludGVyc2VjdGlvbihzdGFydCwgZW5kLCBlLlYxLkxvY2F0aW9uLCBlLlYyLkxvY2F0aW9uKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgU2VsZWN0RWRnZXMoZWRnZXNIaXR0aW5nUG9seWdvbiwgc3ltbWV0cmljRGlmZmVyZW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggeyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEFkZFZlcnRleChWZXJ0ZXggdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfc2hvd1ZlcnRleEluZGljZXMpXHJcbiAgICAgICAgICAgICAgICB2LlRvZ2dsZUluZGV4KCk7XHJcbiAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICAgICAgX3ZlcnRpY2VzLkFkZCh2KTtcclxuXHJcbiAgICAgICAgICAgIFBhcmFtZXRlcnNEaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBSZW1vdmVWZXJ0ZXgoVmVydGV4IHYpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3JzID0gRmluZE5laWdoYm9ycyh2KTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHggaW4gbmVpZ2hib3JzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBSZW1vdmVFZGdlKHYsIHgpO1xyXG4gICAgICAgICAgICAgICAgUmVtb3ZlRWRnZSh4LCB2KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgICAgICBfdmVydGljZXMuUmVtb3ZlKHYpO1xyXG5cclxuICAgICAgICAgICAgUGFyYW1ldGVyc0RpcnR5ID0gbmVpZ2hib3JzLkNvdW50ID4gMDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZWlnaGJvcnMuQ291bnQgPiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBBZGRFZGdlKFZlcnRleCB2MSwgVmVydGV4IHYyLCBpbnQgbXVsdGlwbGljaXR5ID0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBBZGRFZGdlKHYxLCB2MiwgRWRnZS5PcmllbnRhdGlvbnMuTm9uZSwgbXVsdGlwbGljaXR5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgQWRkRWRnZShWZXJ0ZXggdjEsIFZlcnRleCB2MiwgRWRnZS5PcmllbnRhdGlvbnMgb3JpZW50YXRpb24sIGludCBtdWx0aXBsaWNpdHkgPSAxLCBmbG9hdCB0aGlja25lc3MgPSAzLCBzdHJpbmcgc3R5bGUgPSBcIlwiLCBzdHJpbmcgbGFiZWwgPSBcIlwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHYxID09IHYyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvLyBOb3QgYWxsb3dpbmcgc2VsZi1sb29wcyBmb3Igbm93LlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIUVkZ2VFeGlzdHModjEsIHYyKSAmJiAhRWRnZUV4aXN0cyh2MiwgdjEpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWRnZSA9IG5ldyBFZGdlKHYxLCB2Miwgb3JpZW50YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGVkZ2UuTXVsdGlwbGljaXR5ID0gbXVsdGlwbGljaXR5O1xyXG4gICAgICAgICAgICAgICAgICAgIGVkZ2UuVGhpY2tuZXNzID0gdGhpY2tuZXNzO1xyXG4gICAgICAgICAgICAgICAgICAgIGVkZ2UuU3R5bGUgPSBzdHlsZTtcclxuICAgICAgICAgICAgICAgICAgICBlZGdlLkxhYmVsID0gbGFiZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9zaG93RWRnZUluZGljZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2UuVG9nZ2xlSW5kZXgoKTtcclxuICAgICAgICAgICAgICAgICAgICBfZWRnZXMuQWRkKGVkZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBhcmFtZXRlcnNEaXJ0eSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBSZW1vdmVFZGdlKFZlcnRleCB2MSwgVmVydGV4IHYyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTGlzdDxFZGdlPiB0b1JlbW92ZTtcclxuXHJcbiAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0b1JlbW92ZSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpHcmFwaHMuRWRnZT4oX2VkZ2VzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLkVkZ2UsIGJvb2w+KShlID0+IGUuVjEgPT0gdjEgJiYgZS5WMiA9PSB2MikpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiB0b1JlbW92ZSlcclxuICAgICAgICAgICAgICAgIF9lZGdlcy5SZW1vdmUoZSk7XHJcblxyXG4gICAgICAgICAgICBQYXJhbWV0ZXJzRGlydHkgPSB0b1JlbW92ZS5Db3VudCA+IDA7XHJcbiAgICAgICAgICAgIHJldHVybiB0b1JlbW92ZS5Db3VudCA+IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIEVkZ2VFeGlzdHMoVmVydGV4IHYxLCBWZXJ0ZXggdjIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBFZGdlIGVkZ2U7XHJcbiAgICAgICAgICAgIHJldHVybiBFZGdlRXhpc3RzKHYxLCB2Miwgb3V0IGVkZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgYm9vbCBFZGdlRXhpc3RzKFZlcnRleCB2MSwgVmVydGV4IHYyLCBvdXQgRWRnZSBlZGdlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZWRnZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gX2VkZ2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGVkZ2UgPSBlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLlYxID09IHYxICYmIGUuVjIgPT0gdjIgJiYgKGUuT3JpZW50YXRpb24gPT0gRWRnZS5PcmllbnRhdGlvbnMuTm9uZSB8fCBlLk9yaWVudGF0aW9uID09IEVkZ2UuT3JpZW50YXRpb25zLkZvcndhcmQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuVjEgPT0gdjIgJiYgZS5WMiA9PSB2MSAmJiBlLk9yaWVudGF0aW9uID09IEVkZ2UuT3JpZW50YXRpb25zLkJhY2t3YXJkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEVkZ2UgR2V0RWRnZShWZXJ0ZXggdjEsIFZlcnRleCB2MilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvY2sgKF9Nb2RpZnlMaXN0c1Rva2VuKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBfZWRnZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuVjEgPT0gdjEgJiYgZS5WMiA9PSB2MiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLlYxID09IHYyICYmIGUuVjIgPT0gdjEpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoIEluZHVjZWRTdWJncmFwaChMaXN0PFZlcnRleD4gdmVydGljZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgaW5kdWNlZCA9IG5ldyBHcmFwaCgpO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiB2ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIGluZHVjZWQuQWRkVmVydGV4KHYpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYxIGluIGluZHVjZWQuVmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2MiBpbiBpbmR1Y2VkLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEVkZ2UgZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoRWRnZUV4aXN0cyh2MSwgdjIsIG91dCBlKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kdWNlZC5BZGRFZGdlKHYxLCB2MiwgZS5PcmllbnRhdGlvbiAhPSBFZGdlLk9yaWVudGF0aW9ucy5Ob25lID8gRWRnZS5PcmllbnRhdGlvbnMuRm9yd2FyZCA6IEVkZ2UuT3JpZW50YXRpb25zLk5vbmUsIGUuTXVsdGlwbGljaXR5LCBlLlRoaWNrbmVzcywgZS5TdHlsZSwgZS5MYWJlbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBpbmR1Y2VkLkNsb25lKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEaXNqb2ludFVuaW9uKEdyYXBoIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBnLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgQWRkVmVydGV4KHYpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gZy5FZGdlcylcclxuICAgICAgICAgICAgICAgIEFkZEVkZ2UoZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEFkZEVkZ2UoRWRnZSBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQWRkRWRnZShlLlYxLCBlLlYyLCBlLk9yaWVudGF0aW9uLCBNYXRoLk1heCgxLCBlLk11bHRpcGxpY2l0eSksIGUuVGhpY2tuZXNzLCBlLlN0eWxlLCBlLkxhYmVsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBMaXN0PFZlcnRleD4gRmluZE5laWdoYm9ycyhWZXJ0ZXggdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvcnMgPSBuZXcgTGlzdDxWZXJ0ZXg+KCk7XHJcblxyXG4gICAgICAgICAgICBsb2NrIChfTW9kaWZ5TGlzdHNUb2tlbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGUgaW4gX2VkZ2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLlYxID09IHYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoYm9ycy5BZGQoZS5WMik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuVjIgPT0gdilcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JzLkFkZChlLlYxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5laWdoYm9ycztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFRyYW5zbGF0ZShWZWN0b3Igb2Zmc2V0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbG9jayAoX01vZGlmeUxpc3RzVG9rZW4pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF92ZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2LlggKz0gb2Zmc2V0Llg7XHJcbiAgICAgICAgICAgICAgICAgICAgdi5ZICs9IG9mZnNldC5ZO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIF9zaG93VmVydGV4SW5kaWNlcztcclxuICAgICAgICBib29sIF9zaG93RWRnZUluZGljZXM7XHJcbiAgICAgICAgcHVibGljIHZvaWQgVG9nZ2xlRWRnZUluZGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3Nob3dFZGdlSW5kaWNlcyA9ICFfc2hvd0VkZ2VJbmRpY2VzO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYSBpbiBFZGdlcylcclxuICAgICAgICAgICAgICAgIGEuVG9nZ2xlSW5kZXgoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFRvZ2dsZVZlcnRleEluZGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3Nob3dWZXJ0ZXhJbmRpY2VzID0gIV9zaG93VmVydGV4SW5kaWNlcztcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGEgaW4gVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICBhLlRvZ2dsZUluZGV4KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIEdyYXBoaWNzTGF5ZXI7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5JTztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBHcmFwaHNDb3JlO1xyXG5cclxubmFtZXNwYWNlIEdyYXBoc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgR3JhcGhDYW52YXMgOiBHcmFwaGljc0xheWVyLklQYWludGFibGVcclxuICAgIHtcclxuICAgICAgICBwdWJsaWMgZXZlbnQgQWN0aW9uPEdyYXBoPiBHcmFwaE1vZGlmaWVkO1xyXG4gICAgICAgIHB1YmxpYyBldmVudCBBY3Rpb248c3RyaW5nPiBOYW1lTW9kaWZpZWQ7XHJcblxyXG4gICAgICAgIGNvbnN0IGludCBEZWZhdWx0QmFzZVZpZXdTY2FsZSA9IDgwMDtcclxuICAgICAgICBwdWJsaWMgaW50IEJhc2VWaWV3U2NhbGUgPSBEZWZhdWx0QmFzZVZpZXdTY2FsZTtcclxuICAgICAgICBjb25zdCBpbnQgTWF4Wm9vbVNjYWxlID0gNjAwMDtcclxuICAgICAgICBkb3VibGUgWm9vbURlbHRhID0gMC4xNTtcclxuICAgICAgICBkb3VibGUgTWluWm9vbSA9IDAuMTU7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNldFpvb21EZWx0YShkb3VibGUgZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFpvb21EZWx0YSA9IGQ7XHJcbiAgICAgICAgICAgIE1pblpvb20gPSBkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBfem9vbUZpdE5leHRQYWludDtcclxuICAgICAgICBib29sIF9zbmFwVG9HcmlkID0gdHJ1ZTtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGRvdWJsZSBfZ3JpZFN0ZXAgPSAwLjA0O1xyXG4gICAgICAgIGJvb2wgX2RyYXdHcmlkID0gdHJ1ZTtcclxuICAgICAgICBwdWJsaWMgYm9vbCBTbmFwVG9HcmlkIHsgZ2V0IHsgcmV0dXJuIF9zbmFwVG9HcmlkOyB9IHNldCB7IHZhciBuZWVkUmVkcmF3ID0gdmFsdWUgJiYgIV9zbmFwVG9HcmlkOyBfc25hcFRvR3JpZCA9IHZhbHVlOyBpZiAobmVlZFJlZHJhdykgSW52YWxpZGF0ZSgpOyB9IH1cclxuICAgICAgICBwdWJsaWMgZG91YmxlIEdyaWRTdGVwIHsgZ2V0IHsgcmV0dXJuIF9ncmlkU3RlcDsgfSBzZXQgeyB2YXIgbmVlZFJlZHJhdyA9IFNuYXBUb0dyaWQgJiYgdmFsdWUgIT0gX2dyaWRTdGVwOyBfZ3JpZFN0ZXAgPSB2YWx1ZTsgaWYgKG5lZWRSZWRyYXcpIEludmFsaWRhdGUoKTsgfSB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgRHJhd0dyaWQgeyBnZXQgeyByZXR1cm4gX2RyYXdHcmlkOyB9IHNldCB7IHZhciBuZWVkUmVkcmF3ID0gX2RyYXdHcmlkICE9IHZhbHVlOyBfZHJhd0dyaWQgPSB2YWx1ZTsgaWYgKG5lZWRSZWRyYXcpIEludmFsaWRhdGUoKTsgfSB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSGFzUGFpbnRlZCB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgR3JhcGggX2dyYXBoO1xyXG5cclxuICAgICAgICBpbnQgV2lkdGggeyBnZXQ7IHNldDsgfVxyXG4gICAgICAgIGludCBIZWlnaHQgeyBnZXQ7IHNldDsgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIGRyYWdnaW5nIHZlcnRleCB2YXJpYWJsZXNcclxuICAgICAgICBWZXJ0ZXggX0RyYWdnZWRWZXJ0ZXggPSBudWxsO1xyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgI3JlZ2lvbiBkcmFnZ2luZyBzZWxlY3Rpb24gdmFyaWFibGVzXHJcbiAgICAgICAgTGlzdDxCb3g+IF9zZWxlY3Rpb25Qb2ludHMgPSBuZXcgTGlzdDxCb3g+KCk7XHJcbiAgICAgICAgb2JqZWN0IF9TZWxlY3Rpb25Qb2ludHNUb2tlbiA9IG5ldyBvYmplY3QoKTtcclxuICAgICAgICBib29sIF9jb250cm9sV2FzRG93bjtcclxuICAgICAgICAjZW5kcmVnaW9uXHJcblxyXG4gICAgICAgICNyZWdpb24gY2hpbGRyZW4gaXRlbXNcclxuICAgICAgICBwdWJsaWMgR3JhcGggR3JhcGggeyBnZXQgeyByZXR1cm4gX2dyYXBoOyB9IH1cclxuICAgICAgICBJQ2FudmFzIF9jYW52YXM7XHJcbiAgICAgICAgcHVibGljIElDYW52YXMgQ2FudmFzIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF9jYW52YXM7IH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9jYW52YXMgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBfY2FudmFzLk1vdXNlTW92ZWQgKz0gT25Nb3VzZU1vdmU7XHJcbiAgICAgICAgICAgICAgICBfY2FudmFzLk1vdXNlQnV0dG9uRG93biArPSBPbk1vdXNlRG93bjtcclxuICAgICAgICAgICAgICAgIF9jYW52YXMuTW91c2VCdXR0b25VcCArPSBPbk1vdXNlVXA7XHJcbiAgICAgICAgICAgICAgICBfY2FudmFzLk1vdXNlQnV0dG9uRG91YmxlQ2xpY2tlZCArPSBPbk1vdXNlRG91YmxlQ2xpY2s7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICBkb3VibGUgWm9vbVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBfWm9vbSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgX1pvb20gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IChpbnQpKF9ab29tICogQmFzZVZpZXdTY2FsZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2NhbGUgPiBNYXhab29tU2NhbGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NhbGUgPSBNYXhab29tU2NhbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgX1pvb20gPSBzY2FsZSAvIEJhc2VWaWV3U2NhbGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgVmlld1NjYWxlID0gc2NhbGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGludCBWaWV3U2NhbGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3ZpZXdTY2FsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwcm90ZWN0ZWQgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBfdmlld1NjYWxlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBfdmlld1NjYWxlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNFbXB0eSB7IGdldCB7IHJldHVybiBfZ3JhcGguVmVydGljZXMuQ291bnQgPD0gMDsgfSB9XHJcblxyXG4gICAgICAgIFN0YXRlcyBfc3RhdGUgPSBTdGF0ZXMuSWRsZTtcclxuICAgICAgICBpbnQgX3ZpZXdTY2FsZSA9IERlZmF1bHRCYXNlVmlld1NjYWxlO1xyXG4gICAgICAgIGRvdWJsZSBfWm9vbSA9IDEuMDtcclxuICAgICAgICBGdW5jPHN0cmluZywgR3JhcGg+IF9zZWNvbmRhcnlDb252ZXJ0ZXI7XHJcblxyXG4gICAgICAgIExpc3Q8SGlzdG9yaWNhbEdyYXBoPiBfaGlzdG9yeSA9IG5ldyBMaXN0PEhpc3RvcmljYWxHcmFwaD4oKTtcclxuICAgICAgICBpbnQgX2hpc3RvcnlJbmRleCA9IDA7XHJcblxyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBBUkdCIFNlbGVjdGlvblBlbkNvbG9yID0gbmV3IEFSR0IoMCwgMCwgMjU1KTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgQVJHQiBHcmlkUGVuQ29sb3IgPSBuZXcgQVJHQig3NSwgMCwgMTAsIDApO1xyXG5cclxuICAgICAgICBlbnVtIFN0YXRlc1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSWRsZSxcclxuICAgICAgICAgICAgRHJhZ2dpbmdWZXJ0ZXgsXHJcbiAgICAgICAgICAgIERyYWdnaW5nU2VsZWN0aW9uUmVnaW9uLFxyXG4gICAgICAgICAgICBEcmFnZ2luZ1NlbGVjdGVkVmVydGljZXNcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBBUkdCIEJhY2tncm91bmRDb2xvciA9IG5ldyBBUkdCKDB4ZjcsIDB4ZjcsIDB4ZjcpO1xyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGhDYW52YXMoR3JhcGggZ3JhcGgsICBGdW5jPHN0cmluZywgR3JhcGg+IHNlY29uZGFyeUNvbnZlcnRlciA9IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZ3JhcGggPSBncmFwaCAhPSBudWxsID8gZ3JhcGggOiBuZXcgR3JhcGgoKTtcclxuICAgICAgICAgICAgX3NlY29uZGFyeUNvbnZlcnRlciA9IHNlY29uZGFyeUNvbnZlcnRlcjtcclxuICAgICAgICAgICAgX2hpc3RvcnkuQWRkKG5ldyBIaXN0b3JpY2FsR3JhcGgoKSB7IEdyYXBoID0gX2dyYXBoLkNsb25lKCksIFpvb20gPSBfWm9vbSwgVmlld1NjYWxlID0gX3ZpZXdTY2FsZSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEludmFsaWRhdGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKENhbnZhcyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgQ2FudmFzLkludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEdyYXBoQ2hhbmdlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX2hpc3RvcnkuQ291bnQgLSBfaGlzdG9yeUluZGV4IC0gMSA+IDApXHJcbiAgICAgICAgICAgICAgICBfaGlzdG9yeS5SZW1vdmVSYW5nZShfaGlzdG9yeUluZGV4ICsgMSwgX2hpc3RvcnkuQ291bnQgLSBfaGlzdG9yeUluZGV4IC0gMSk7XHJcblxyXG4gICAgICAgICAgICBfaGlzdG9yeS5BZGQobmV3IEhpc3RvcmljYWxHcmFwaCgpIHsgR3JhcGggPSBfZ3JhcGguQ2xvbmUoKSwgWm9vbSA9IF9ab29tLCBWaWV3U2NhbGUgPSBfdmlld1NjYWxlIH0pO1xyXG4gICAgICAgICAgICBfaGlzdG9yeUluZGV4ID0gX2hpc3RvcnkuQ291bnQgLSAxO1xyXG5cclxuICAgICAgICAgICAgaWYgKEdyYXBoTW9kaWZpZWQgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIEdyYXBoTW9kaWZpZWQoR3JhcGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgRG9VbmRvKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfaGlzdG9yeUluZGV4IDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBfaGlzdG9yeUluZGV4LS07XHJcbiAgICAgICAgICAgIE9iZXlIaXN0b3J5KCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gX2hpc3RvcnlJbmRleCA+IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBib29sIERvUmVkbygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX2hpc3RvcnlJbmRleCA+PSBfaGlzdG9yeS5Db3VudCAtIDEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBfaGlzdG9yeUluZGV4Kys7XHJcbiAgICAgICAgICAgIE9iZXlIaXN0b3J5KCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gX2hpc3RvcnlJbmRleCA8IF9oaXN0b3J5LkNvdW50IC0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgT2JleUhpc3RvcnkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2dyYXBoID0gX2hpc3RvcnlbX2hpc3RvcnlJbmRleF0uR3JhcGguQ2xvbmUoKTtcclxuICAgICAgICAgICAgVmlld1NjYWxlID0gX2hpc3RvcnlbX2hpc3RvcnlJbmRleF0uVmlld1NjYWxlO1xyXG4gICAgICAgICAgICBab29tID0gX2hpc3RvcnlbX2hpc3RvcnlJbmRleF0uWm9vbTtcclxuICAgICAgICAgICAgX2dyYXBoLlBhcmFtZXRlcnNEaXJ0eSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoR3JhcGhNb2RpZmllZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgR3JhcGhNb2RpZmllZChHcmFwaCk7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIGFjdGlvbnNcclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBTYXZlKHN0cmluZyBuYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2dyYXBoLk5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjsvLyBfZ3JhcGguU2VyaWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG4gICAgIFxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvWm9vbShpbnQgYW1vdW50LCBCb3ggbG9jYXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnQgd2lkdGggPSBXaWR0aDtcclxuICAgICAgICAgICAgaW50IGhlaWdodCA9IEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgIHZhciBvbGRDZW50ZXIgPSBuZXcgVmVjdG9yKChkb3VibGUpd2lkdGggLyAoZG91YmxlKV92aWV3U2NhbGUgKiBsb2NhdGlvbi5YLCAoZG91YmxlKWhlaWdodCAvIChkb3VibGUpX3ZpZXdTY2FsZSAqIGxvY2F0aW9uLlkpO1xyXG5cclxuICAgICAgICAgICAgWm9vbSA9IE1hdGguTWF4KE1pblpvb20sIF9ab29tICsgWm9vbURlbHRhICogYW1vdW50KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjZW50ZXIgPSBuZXcgVmVjdG9yKChkb3VibGUpd2lkdGggLyAoZG91YmxlKV92aWV3U2NhbGUgKiBsb2NhdGlvbi5YLCAoZG91YmxlKWhlaWdodCAvIChkb3VibGUpX3ZpZXdTY2FsZSAqIGxvY2F0aW9uLlkpO1xyXG5cclxuICAgICAgICAgICAgX2dyYXBoLlRyYW5zbGF0ZShjZW50ZXIgLSBvbGRDZW50ZXIpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9ab29tRml0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfZ3JhcGguVmVydGljZXMuQ291bnQgPD0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgWm9vbSA9IDE7XHJcbiAgICAgICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGludCB3aWR0aCA9IFdpZHRoO1xyXG4gICAgICAgICAgICBpbnQgaGVpZ2h0ID0gSGVpZ2h0O1xyXG4gICAgICAgICAgICB2YXIgYm91bmRzID0gX2dyYXBoLlNlbGVjdGVkQm91bmRpbmdSZWN0YW5nbGU7XHJcbiAgICAgICAgICAgIHZhciBjID0gbmV3IFZlY3Rvcihib3VuZHMuTGVmdCArIGJvdW5kcy5XaWR0aCAvIDIsIGJvdW5kcy5Ub3AgKyBib3VuZHMuSGVpZ2h0IC8gMik7XHJcblxyXG4gICAgICAgICAgICB2YXIgYWN0dWFsID0gTWF0aC5NaW4od2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgIFpvb20gPSAwLjkgKiBhY3R1YWwgLyBNYXRoLk1heChib3VuZHMuV2lkdGgsIGJvdW5kcy5IZWlnaHQpIC8gQmFzZVZpZXdTY2FsZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjZW50ZXIgPSBuZXcgVmVjdG9yKChkb3VibGUpd2lkdGggLyAoZG91YmxlKV92aWV3U2NhbGUgKiAwLjUsIChkb3VibGUpaGVpZ2h0IC8gKGRvdWJsZSlfdmlld1NjYWxlICogMC41KTtcclxuICAgICAgICAgICAgX2dyYXBoLlRyYW5zbGF0ZShjZW50ZXIgLSBjKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvRGVsZXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfZ3JhcGguU2VsZWN0ZWRWZXJ0aWNlcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIF9ncmFwaC5SZW1vdmVWZXJ0ZXgodik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChfZ3JhcGguU2VsZWN0ZWRFZGdlcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIF9ncmFwaC5TZWxlY3RlZEVkZ2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIF9ncmFwaC5SZW1vdmVFZGdlKGUuVjEsIGUuVjIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9SZXZlcnNlU2VsZWN0ZWRFZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoX2dyYXBoLlNlbGVjdGVkRWRnZXMuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZSBpbiBfZ3JhcGguU2VsZWN0ZWRFZGdlcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb28gPSBlLk9yaWVudGF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbyA9PSBFZGdlLk9yaWVudGF0aW9ucy5Gb3J3YXJkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbyA9IEVkZ2UuT3JpZW50YXRpb25zLkJhY2t3YXJkO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9vID09IEVkZ2UuT3JpZW50YXRpb25zLkJhY2t3YXJkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbyA9IEVkZ2UuT3JpZW50YXRpb25zLkZvcndhcmQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGUuT3JpZW50YXRpb24gPSBvbztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9Sb3RhdGVTZWxlY3RlZEVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfZ3JhcGguU2VsZWN0ZWRFZGdlcy5Db3VudCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIF9ncmFwaC5TZWxlY3RlZEVkZ2VzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvbyA9IGUuT3JpZW50YXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9vID09IEVkZ2UuT3JpZW50YXRpb25zLkZvcndhcmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9vID0gRWRnZS5PcmllbnRhdGlvbnMuQmFja3dhcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob28gPT0gRWRnZS5PcmllbnRhdGlvbnMuQmFja3dhcmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9vID0gRWRnZS5PcmllbnRhdGlvbnMuTm9uZTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvbyA9PSBFZGdlLk9yaWVudGF0aW9ucy5Ob25lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbyA9IEVkZ2UuT3JpZW50YXRpb25zLkZvcndhcmQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGUuT3JpZW50YXRpb24gPSBvbztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9DdXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRG9Db3B5KCk7XHJcbiAgICAgICAgICAgIERvRGVsZXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIERvQ29weShib29sIHZlcmJvc2UgPSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBoID0gIF9ncmFwaC5JbmR1Y2VkU3ViZ3JhcGgoX2dyYXBoLlNlbGVjdGVkVmVydGljZXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gQ29tcGFjdFNlcmlhbGl6ZXIuU2VyaWFsaXplKGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9QYXN0ZShzdHJpbmcgcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdyYXBoIGcgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAocy5Db250YWlucyhcInRpa3pwaWN0dXJlXCIpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL2cgPSBUZVhDb252ZXJ0ZXIuRnJvbVRpa3oocyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoQ29tcGFjdFNlcmlhbGl6ZXIuTG9va3NMaWtlQVNlcmlhbGl6ZWRHcmFwaChzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZyA9IENvbXBhY3RTZXJpYWxpemVyLkRlc2VyaWFsaXplKHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy9nID0gR3JhcGguRGVzZXJpYWxpemUocyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChnICE9IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIF9ncmFwaC5EaXNqb2ludFVuaW9uKGcpO1xyXG5cclxuICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQWxsPHN0cmluZz4ocy5UcmltKCkuU3BsaXQoJyAnKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIGJvb2w+KSh4ID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50IGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHguU3RhcnRzV2l0aChcIltcIikgfHwgaW50LlRyeVBhcnNlKHgsIG91dCBkKTtcclxuICAgICAgICAgICAgICAgIH0pKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9nID0gR3JhcGhJTy5HcmFwaEZyb21FZGdlV2VpZ2h0U3RyaW5nKHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZ3JhcGguRGlzam9pbnRVbmlvbihnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9nID0gR3JhcGhJTy5HcmFwaEZyb21HcmFwaDYocy5UcmltKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZyAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVtcHR5ID0gX2dyYXBoLlZlcnRpY2VzLkNvdW50IDw9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5EaXNqb2ludFVuaW9uKGcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVtcHR5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTmFtZU1vZGlmaWVkKGcuTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIHsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb0NvbXBsZW1lbnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZ3JhcGguU2VsZWN0ZWRWZXJ0aWNlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBfZ3JhcGguU2VsZWN0ZWRWZXJ0aWNlcy5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2MSA9IF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2MiA9IF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzW2pdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWRnZUV4aXN0cyA9IF9ncmFwaC5FZGdlRXhpc3RzKHYxLCB2MikgfHwgX2dyYXBoLkVkZ2VFeGlzdHModjIsIHYxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVkZ2VFeGlzdHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZ3JhcGguUmVtb3ZlRWRnZSh2MSwgdjIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZ3JhcGguUmVtb3ZlRWRnZSh2MiwgdjEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZ3JhcGguQWRkRWRnZSh2MSwgdjIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGggRG9TcXVhcmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGcgPSBuZXcgR3JhcGgoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB2ZXJ0ZXhNYXAgPSBuZXcgRGljdGlvbmFyeTxWZXJ0ZXgsIFZlcnRleD4oKTtcclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gX2dyYXBoLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgdmFyIHcgPSBuZXcgVmVydGV4KHYuWCwgdi5ZLCB2LkxhYmVsKTtcclxuICAgICAgICAgICAgICAgICBnLkFkZFZlcnRleCh3KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhNYXBbdl0gPSB3O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfZ3JhcGguVmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBxID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5VbmlvbjxnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KF9ncmFwaC5GaW5kTmVpZ2hib3JzKHYpLG5ld1tdIHsgdiB9KS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHEuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBqID0gaSArIDE7IGogPCBxLkNvdW50OyBqKyspXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnLkFkZEVkZ2UodmVydGV4TWFwW3FbaV1dLCB2ZXJ0ZXhNYXBbcVtqXV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGggRG9MaW5lR3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGcgPSBuZXcgR3JhcGgoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBlZGdlVG9DbGlxdWVNYXAgPSBuZXcgRGljdGlvbmFyeTxFZGdlLCBMaXN0PFZlcnRleD4+KCk7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIF9ncmFwaC5FZGdlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNsaXF1ZSA9IG5ldyBMaXN0PFZlcnRleD4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGUuTXVsdGlwbGljaXR5OyBpKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBuZXcgVmVydGV4KChlLlYxLlggKyBlLlYyLlgpIC8gMiwgKGUuVjEuWSArIGUuVjIuWSkgLyAyKTtcclxuICAgICAgICAgICAgICAgICAgICBnLkFkZFZlcnRleCh2KTtcclxuICAgICAgICAgICAgICAgICAgICB2LkxhYmVsID0gZS5MYWJlbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIG90aGVyIGluIGNsaXF1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZy5BZGRFZGdlKG90aGVyLCB2KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpcXVlLkFkZCh2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlZGdlVG9DbGlxdWVNYXBbZV0gPSBjbGlxdWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2dyYXBoLkVkZ2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSBpICsgMTsgaiA8IF9ncmFwaC5FZGdlcy5Db3VudDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfZ3JhcGguRWRnZXNbaV0uTWVldHMoX2dyYXBoLkVkZ2VzW2pdKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2MSBpbiBlZGdlVG9DbGlxdWVNYXBbX2dyYXBoLkVkZ2VzW2ldXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYyIGluIGVkZ2VUb0NsaXF1ZU1hcFtfZ3JhcGguRWRnZXNbal1dKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcuQWRkRWRnZSh2MSwgdjIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvQ29udHJhY3RTZWxlY3RlZFN1YmdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzO1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWQuQ291bnQgPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHZhciB4ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BdmVyYWdlPGdsb2JhbDo6R3JhcGhzLlZlcnRleD4oc2VsZWN0ZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuVmVydGV4LCBkb3VibGU+KSh6ID0+IHouWCkpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQXZlcmFnZTxnbG9iYWw6OkdyYXBocy5WZXJ0ZXg+KHNlbGVjdGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlZlcnRleCwgZG91YmxlPikoeiA9PiB6LlkpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb250cmFjdGVkVmVydGV4ID0gbmV3IFZlcnRleCh4LCB5KTtcclxuICAgICAgICAgICAgX2dyYXBoLkFkZFZlcnRleChjb250cmFjdGVkVmVydGV4KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvcnMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpHcmFwaHMuVmVydGV4LGdsb2JhbDo6R3JhcGhzLlZlcnRleD4oc2VsZWN0ZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuVmVydGV4LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6R3JhcGhzLlZlcnRleD4+KSh2ID0+IF9ncmFwaC5GaW5kTmVpZ2hib3JzKHYpKSkuRGlzdGluY3QoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBuZWlnaGJvciBpbiBuZWlnaGJvcnMpXHJcbiAgICAgICAgICAgICAgICBfZ3JhcGguQWRkRWRnZShjb250cmFjdGVkVmVydGV4LCBuZWlnaGJvcik7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBzZWxlY3RlZClcclxuICAgICAgICAgICAgICAgIF9ncmFwaC5SZW1vdmVWZXJ0ZXgodik7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcblxyXG4gICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvSW5kZXhMYWJlbGluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IG5ldyBBbGdvcml0aG1zLkdyYXBoKF9ncmFwaC5HZXRFZGdlV2VpZ2h0cygpKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2dyYXBoLlZlcnRpY2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBfZ3JhcGguVmVydGljZXNbaV0uTGFiZWwgPSBpLlRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb0RlZ3JlZUxhYmVsaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnID0gbmV3IEFsZ29yaXRobXMuR3JhcGgoX2dyYXBoLkdldEVkZ2VXZWlnaHRzKCkpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZ3JhcGguVmVydGljZXMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAgICAgIF9ncmFwaC5WZXJ0aWNlc1tpXS5MYWJlbCA9IGcuRGVncmVlKGkpLlRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIEdyYXBoQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgdm9pZCBEb0luRGVncmVlTGFiZWxpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGcgPSBuZXcgQWxnb3JpdGhtcy5HcmFwaChfZ3JhcGguR2V0RWRnZVdlaWdodHMoKSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9ncmFwaC5WZXJ0aWNlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgX2dyYXBoLlZlcnRpY2VzW2ldLkxhYmVsID0gZy5JbkRlZ3JlZShpKS5Ub1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9PdXREZWdyZWVMYWJlbGluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZyA9IG5ldyBBbGdvcml0aG1zLkdyYXBoKF9ncmFwaC5HZXRFZGdlV2VpZ2h0cygpKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2dyYXBoLlZlcnRpY2VzLkNvdW50OyBpKyspXHJcbiAgICAgICAgICAgICAgICBfZ3JhcGguVmVydGljZXNbaV0uTGFiZWwgPSBnLk91dERlZ3JlZShpKS5Ub1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRG9PdXREZWdyZWVQbHVzT25lTGFiZWxpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGcgPSBuZXcgQWxnb3JpdGhtcy5HcmFwaChfZ3JhcGguR2V0RWRnZVdlaWdodHMoKSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9ncmFwaC5WZXJ0aWNlcy5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgX2dyYXBoLlZlcnRpY2VzW2ldLkxhYmVsID0gKGcuT3V0RGVncmVlKGkpICsgMSkuVG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgR3JhcGhDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvQ2xlYXJMYWJlbHMoc3RyaW5nIHMgPSBcIlwiLCBJRW51bWVyYWJsZTxpbnQ+IHZlcnRpY2VzID0gbnVsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh2ZXJ0aWNlcyA9PSBudWxsIHx8IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8aW50Pih2ZXJ0aWNlcykgPD0gMClcclxuICAgICAgICAgICAgICAgIHZlcnRpY2VzID0gRW51bWVyYWJsZS5SYW5nZSgwLCBfZ3JhcGguVmVydGljZXMuQ291bnQpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gdmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICBfZ3JhcGguVmVydGljZXNbdl0uTGFiZWwgPSBzO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERvU25hcFRvR3JpZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoR3JpZFN0ZXAgPD0gMClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIF9ncmFwaC5WZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdi5YID0gKGZsb2F0KShfZ3JpZFN0ZXAgKiBNYXRoLlJvdW5kKHYuWCAvIF9ncmlkU3RlcCkpO1xyXG4gICAgICAgICAgICAgICAgdi5ZID0gKGZsb2F0KShfZ3JpZFN0ZXAgKiBNYXRoLlJvdW5kKHYuWSAvIF9ncmlkU3RlcCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgdm9pZCBQYWludEdyaWQoSUdyYXBoaWNzIGcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIURyYXdHcmlkIHx8IEdyaWRTdGVwIDw9IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2YXIgeCA9IDAuMDtcclxuICAgICAgICAgICAgd2hpbGUgKHggPD0gV2lkdGgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGcuRHJhd0xpbmUoR3JpZFBlbkNvbG9yLCB4LCAwLCB4LCBIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgeCArPSBHcmlkU3RlcCAqIF92aWV3U2NhbGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciB5ID0gMC4wO1xyXG4gICAgICAgICAgICB3aGlsZSAoeSA8PSBIZWlnaHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGcuRHJhd0xpbmUoR3JpZFBlbkNvbG9yLCAwLCB5LCBXaWR0aCwgeSk7XHJcbiAgICAgICAgICAgICAgICB5ICs9IEdyaWRTdGVwICogX3ZpZXdTY2FsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSUhpdHRhYmxlIEdldEhpdChkb3VibGUgeCwgZG91YmxlIHkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gX2dyYXBoLkhpdFRlc3QoeCwgeSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjbGFzcyBIaXN0b3JpY2FsR3JhcGhcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHB1YmxpYyBHcmFwaCBHcmFwaCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgICAgIHB1YmxpYyBpbnQgVmlld1NjYWxlIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICAgICAgcHVibGljIGRvdWJsZSBab29tIHsgZ2V0OyBzZXQ7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFBhaW50KEdyYXBoaWNzTGF5ZXIuSUdyYXBoaWNzIGcsIGludCB3aWR0aCwgaW50IGhlaWdodClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh3aWR0aCA9PSAwIHx8IGhlaWdodCA9PSAwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFdpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgICBIZWlnaHQgPSBoZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFNuYXBUb0dyaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgRG9TbmFwVG9HcmlkKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZy5DbGVhcihCYWNrZ3JvdW5kQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgUGFpbnRHcmlkKGcpO1xyXG5cclxuICAgICAgICAgICAgICAgIF9ncmFwaC5QYWludChnLCBfdmlld1NjYWxlLCBfdmlld1NjYWxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9zdGF0ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5JZGxlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5EcmFnZ2luZ1ZlcnRleDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuRHJhZ2dpbmdTZWxlY3Rpb25SZWdpb246XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIExpc3Q8Qm94PiBzZWxlY3Rpb25Qb2ludHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NrIChfU2VsZWN0aW9uUG9pbnRzVG9rZW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uUG9pbnRzID0gbmV3IExpc3Q8Qm94Pihfc2VsZWN0aW9uUG9pbnRzLkNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgcCBpbiBfc2VsZWN0aW9uUG9pbnRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Qb2ludHMuQWRkKG5ldyBCb3gocC5YICogX3ZpZXdTY2FsZSwgcC5ZICogX3ZpZXdTY2FsZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb25Qb2ludHMuQ291bnQgPiAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcuRHJhd0xpbmVzKFNlbGVjdGlvblBlbkNvbG9yLCBzZWxlY3Rpb25Qb2ludHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggeyB9XHJcblxyXG4gICAgICAgICAgICBIYXNQYWludGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfem9vbUZpdE5leHRQYWludClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3pvb21GaXROZXh0UGFpbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIERvWm9vbUZpdCgpO1xyXG4gICAgICAgICAgICAgICAgRG9ab29tKDQsIG5ldyBHcmFwaGljc0xheWVyLkJveCgwLjUsIDAuNSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBPbk1vdXNlTW92ZShkb3VibGUgWCwgZG91YmxlIFkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IFggLyBfdmlld1NjYWxlO1xyXG4gICAgICAgICAgICB2YXIgeSA9IFkgLyBfdmlld1NjYWxlO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChfc3RhdGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLklkbGU6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5EcmFnZ2luZ1ZlcnRleDpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9EcmFnZ2VkVmVydGV4LlggPSBfRHJhZ2dlZFZlcnRleC5EcmFnT2Zmc2V0LlggKyB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfRHJhZ2dlZFZlcnRleC5ZID0gX0RyYWdnZWRWZXJ0ZXguRHJhZ09mZnNldC5ZICsgeTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuRHJhZ2dpbmdTZWxlY3Rpb25SZWdpb246XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NrIChfU2VsZWN0aW9uUG9pbnRzVG9rZW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxlY3Rpb25Qb2ludHMuQWRkKG5ldyBCb3goeCwgeSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5EcmFnZ2luZ1NlbGVjdGVkVmVydGljZXM6XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfZ3JhcGguU2VsZWN0ZWRWZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5YID0gdi5EcmFnT2Zmc2V0LlggKyB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5ZID0gdi5EcmFnT2Zmc2V0LlkgKyB5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgVG9nZ2xlRWRnZUluZGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2dyYXBoLlRvZ2dsZUVkZ2VJbmRpY2VzKCk7XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBSb3RhdGVWZXJ0ZXhJbmRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gX2dyYXBoLlNlbGVjdGVkVmVydGljZXM7XHJcbiAgICAgICAgICAgIGlmICh4LkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICB4ID0gX2dyYXBoLlZlcnRpY2VzO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGEgaW4geClcclxuICAgICAgICAgICAgICAgIGEuUm90YXRlSW5kZXgoKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFJvdGF0ZUVkZ2VJbmRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gX2dyYXBoLlNlbGVjdGVkRWRnZXM7XHJcbiAgICAgICAgICAgIGlmICh4LkNvdW50IDw9IDApXHJcbiAgICAgICAgICAgICAgICB4ID0gX2dyYXBoLkVkZ2VzO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIGEgaW4geClcclxuICAgICAgICAgICAgICAgIGEuUm90YXRlSW5kZXgoKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFNldEluZGV4KGludCBuKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBfZ3JhcGguU2VsZWN0ZWRWZXJ0aWNlcztcclxuICAgICAgICAgICAgaWYgKHguQ291bnQgPT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHYgPSB4WzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGkgPSBfZ3JhcGguVmVydGljZXMuSW5kZXhPZih2KTtcclxuICAgICAgICAgICAgICAgIGlmIChpICE9IG4pXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2dyYXBoLlZlcnRpY2VzLlJlbW92ZSh2KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobiA+PSBfZ3JhcGguVmVydGljZXMuQ291bnQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZ3JhcGguVmVydGljZXMuQWRkKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChuIDwgaSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5WZXJ0aWNlcy5JbnNlcnQobiwgdik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5WZXJ0aWNlcy5JbnNlcnQobiwgdik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSBfZ3JhcGguU2VsZWN0ZWRFZGdlcztcclxuICAgICAgICAgICAgICAgIGlmICh5LkNvdW50ID09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSB5WzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0gX2dyYXBoLkVkZ2VzLkluZGV4T2Yodik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT0gbilcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5FZGdlcy5SZW1vdmUodik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID49IF9ncmFwaC5FZGdlcy5Db3VudClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLkVkZ2VzLkFkZCh2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChuIDwgaSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2dyYXBoLkVkZ2VzLkluc2VydChuLCB2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5FZGdlcy5JbnNlcnQobiwgdik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFRvZ2dsZVZlcnRleEluZGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2dyYXBoLlRvZ2dsZVZlcnRleEluZGljZXMoKTtcclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE9uTW91c2VEb3duKGRvdWJsZSBYLCBkb3VibGUgWSwgR3JhcGhpY3NMYXllci5Nb3VzZUJ1dHRvbiBidXR0b24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY29udHJvbFdhc0Rvd24gPSBDYW52YXMuSXNDb250cm9sS2V5RG93bjtcclxuXHJcbiAgICAgICAgICAgIHZhciB4ID0gWCAvIF92aWV3U2NhbGU7XHJcbiAgICAgICAgICAgIHZhciB5ID0gWSAvIF92aWV3U2NhbGU7XHJcblxyXG4gICAgICAgICAgICB2YXIgbyA9IEdldEhpdCh4LCB5KTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoX3N0YXRlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5JZGxlOlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbiA9PSBNb3VzZUJ1dHRvbi5MZWZ0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxlY3Rpb25Qb2ludHMuQ2xlYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2VsZWN0aW9uUG9pbnRzLkFkZChuZXcgQm94KHgsIHkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3RhdGUgPSBTdGF0ZXMuRHJhZ2dpbmdTZWxlY3Rpb25SZWdpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvIGlzIFZlcnRleClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChWZXJ0ZXgpbykuSXNTZWxlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKFZlcnRleCB2IGluIF9ncmFwaC5TZWxlY3RlZFZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkRyYWdPZmZzZXQgPSBuZXcgQm94KHYuWCAtIHgsIHYuWSAtIHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3RhdGUgPSBTdGF0ZXMuRHJhZ2dpbmdTZWxlY3RlZFZlcnRpY2VzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfRHJhZ2dlZFZlcnRleCA9IChWZXJ0ZXgpbztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX0RyYWdnZWRWZXJ0ZXguRHJhZ09mZnNldCA9IG5ldyBCb3goX0RyYWdnZWRWZXJ0ZXguWCAtIHgsIF9EcmFnZ2VkVmVydGV4LlkgLSB5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N0YXRlID0gU3RhdGVzLkRyYWdnaW5nVmVydGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG8gaXMgRWRnZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChidXR0b24gPT0gTW91c2VCdXR0b24uUmlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvIGlzIFZlcnRleClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG8gaXMgRWRnZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuRHJhZ2dpbmdWZXJ0ZXg6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5EcmFnZ2luZ1NlbGVjdGlvblJlZ2lvbjpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgT25Nb3VzZVVwKGRvdWJsZSBYLCBkb3VibGUgWSwgR3JhcGhpY3NMYXllci5Nb3VzZUJ1dHRvbiBidXR0b24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgeCA9IFggLyBfdmlld1NjYWxlO1xyXG4gICAgICAgICAgICB2YXIgeSA9IFkgLyBfdmlld1NjYWxlO1xyXG5cclxuICAgICAgICAgICAgdmFyIG8gPSBHZXRIaXQoeCwgeSk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKF9zdGF0ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBTdGF0ZXMuSWRsZTpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLkRyYWdnaW5nVmVydGV4OlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbiA9PSBNb3VzZUJ1dHRvbi5MZWZ0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3RhdGUgPSBTdGF0ZXMuSWRsZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU25hcFRvR3JpZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb1NuYXBUb0dyaWQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0YXRlcy5EcmFnZ2luZ1NlbGVjdGlvblJlZ2lvbjpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXR0b24gPT0gTW91c2VCdXR0b24uTGVmdClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N0YXRlID0gU3RhdGVzLklkbGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTGlzdDxCb3g+IHNlbGVjdGlvblBvaW50cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2sgKF9TZWxlY3Rpb25Qb2ludHNUb2tlbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Qb2ludHMgPSBuZXcgTGlzdDxCb3g+KF9zZWxlY3Rpb25Qb2ludHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uUG9pbnRzLkNvdW50ID4gMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9ncmFwaC5TZWxlY3RPYmplY3RzKHNlbGVjdGlvblBvaW50cywgX2NvbnRyb2xXYXNEb3duKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhbnZhcy5TZWxlY3RlZE9iamVjdHMgPSBfZ3JhcGguU2VsZWN0ZWRJdGVtcy5DYXN0PG9iamVjdD4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgU3RhdGVzLkRyYWdnaW5nU2VsZWN0ZWRWZXJ0aWNlczpcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXR0b24gPT0gTW91c2VCdXR0b24uTGVmdClcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N0YXRlID0gU3RhdGVzLklkbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE9uTW91c2VEb3VibGVDbGljayhkb3VibGUgWCwgZG91YmxlIFksIEdyYXBoaWNzTGF5ZXIuTW91c2VCdXR0b24gYnV0dG9uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBYIC8gX3ZpZXdTY2FsZTtcclxuICAgICAgICAgICAgdmFyIHkgPSBZIC8gX3ZpZXdTY2FsZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvID0gR2V0SGl0KHgsIHkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGdyYXBoQ2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoX3N0YXRlID09IFN0YXRlcy5JZGxlICYmICFDYW52YXMuSXNDb250cm9sS2V5RG93bilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ1dHRvbiA9PSBNb3VzZUJ1dHRvbi5MZWZ0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IG5ldyBWZXJ0ZXgoeCwgeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfZ3JhcGguQWRkVmVydGV4KHYpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JhcGhDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobyBpcyBWZXJ0ZXgpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kVmVydGV4ID0gKFZlcnRleClvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBfZ3JhcGguU2VsZWN0ZWRWZXJ0aWNlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9ncmFwaC5BZGRFZGdlKHYsIGVuZFZlcnRleCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JhcGhDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJ1dHRvbiA9PSBNb3VzZUJ1dHRvbi5SaWdodClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobyBpcyBWZXJ0ZXgpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2dyYXBoLlJlbW92ZVZlcnRleCgoVmVydGV4KW8pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JhcGhDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEludmFsaWRhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChncmFwaENoYW5nZWQpXHJcbiAgICAgICAgICAgICAgICBHcmFwaENoYW5nZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIFpvb21GaXROZXh0UGFpbnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX3pvb21GaXROZXh0UGFpbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxudXNpbmcgU3lzdGVtLkNvbXBvbmVudE1vZGVsO1xyXG51c2luZyBTeXN0ZW0uUnVudGltZS5TZXJpYWxpemF0aW9uO1xyXG5cclxubmFtZXNwYWNlIEdyYXBoc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgVmVydGV4IDogR3JhcGhpY3NMYXllci5JUGFpbnRhYmxlLCBJSGl0dGFibGVcclxuICAgIHtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5Gb250IExhYmVsRm9udCA9IG5ldyBHcmFwaGljc0xheWVyLkZvbnQoXCJUaW1lcyBOZXcgUm9tYW5cIiwgMTIpO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkZvbnQgSW5kZXhGb250ID0gbmV3IEdyYXBoaWNzTGF5ZXIuRm9udChcIlN5c3RlbVwiLCA4KTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5BUkdCIExhYmVsQnJ1c2hDb2xvciA9IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMCwgMCwgMCk7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuQVJHQiBJbmRleEJydXNoQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDIwMCwgMjAwLCAwLCAwKTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5BUkdCIEJvdW5kYXJ5UGVuQ29sb3IgPSBuZXcgR3JhcGhpY3NMYXllci5BUkdCKDAsIDAsIDApO1xyXG4gICAgICAgIHN0YXRpYyByZWFkb25seSBHcmFwaGljc0xheWVyLkFSR0IgQm91bmRhcnlTZWxlY3RlZFBlbkNvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigyNTUsIDAsIDI1NSwgMCk7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IGludCBCb3VuZGFyeVNlbGVjdGVkUGVuV2lkdGggPSAyO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5BUkdCIERlZmF1bHRGaWxsQnJ1c2hDb2xvciA9IG5ldyBHcmFwaGljc0xheWVyLkFSR0IoMTIwLCAwLCAwLCAwKTtcclxuICAgICAgICBzdGF0aWMgcmVhZG9ubHkgR3JhcGhpY3NMYXllci5BUkdCIFVuaXZlcnNhbFZlcnRleEZpbGxCcnVzaENvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigxMjAsIDAsIDAsIDI1NSk7XHJcbiAgICAgICAgc3RhdGljIHJlYWRvbmx5IEdyYXBoaWNzTGF5ZXIuQVJHQiBTZWxlY3RlZEZpbGxCcnVzaENvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigyNTUsIDAsIDI1NSwgMTI3KTtcclxuXHJcbiAgICAgICAgcHVibGljIGludCBQYXJlbnRJbmRleCB7IGdldDsgc2V0OyB9XHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBJbmRleEFuZ2xlIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIFZlcnRleChkb3VibGUgeCwgZG91YmxlIHkpXHJcbiAgICAgICAgICAgIDogdGhpcyh4LCB5LCBcIlwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBWZXJ0ZXgoVmVjdG9yIHYpXHJcbiAgICAgICAgICAgIDogdGhpcyh2LCBcIlwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBWZXJ0ZXgoVmVjdG9yIHYsIHN0cmluZyBsYWJlbClcclxuICAgICAgICAgICAgOiB0aGlzKHYuWCwgdi5ZLCBsYWJlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVmVydGV4KGRvdWJsZSB4LCBkb3VibGUgeSwgc3RyaW5nIGxhYmVsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX0xvY2F0aW9uID0gbmV3IFZlY3Rvcih4LCB5KTtcclxuICAgICAgICAgICAgX2xhYmVsID0gbGFiZWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVmVydGV4KFNlcmlhbGl6YXRpb25WZXJ0ZXggdilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIExvY2F0aW9uID0gbmV3IFZlY3Rvcih2LkxvY2F0aW9uLlgsIHYuTG9jYXRpb24uWSk7XHJcbiAgICAgICAgICAgIExhYmVsID0gdi5MYWJlbDtcclxuICAgICAgICAgICAgUGFkZGluZyA9IHYuUGFkZGluZztcclxuICAgICAgICAgICAgU3R5bGUgPSB2LlN0eWxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZpcnR1YWwgdm9pZCBQYWludChHcmFwaGljc0xheWVyLklHcmFwaGljcyBnLCBpbnQgd2lkdGgsIGludCBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYm91bmRzID0gQ29tcHV0ZUJvdW5kcyhnLCB3aWR0aCwgaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghc3RyaW5nLklzTnVsbE9yRW1wdHkoX2xhYmVsKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKENvbG9yLkVxdWFscyhkZWZhdWx0KEdyYXBoaWNzTGF5ZXIuQVJHQikpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChJc1VuaXZlcnNhbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZy5GaWxsRWxsaXBzZShVbml2ZXJzYWxWZXJ0ZXhGaWxsQnJ1c2hDb2xvciwgYm91bmRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBnLkZpbGxFbGxpcHNlKENvbG9yLCBib3VuZHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGcuRHJhd0VsbGlwc2UoX0lzU2VsZWN0ZWQgPyBCb3VuZGFyeVNlbGVjdGVkUGVuQ29sb3IgOiBCb3VuZGFyeVBlbkNvbG9yLCBib3VuZHMsIF9Jc1NlbGVjdGVkID8gQm91bmRhcnlTZWxlY3RlZFBlbldpZHRoIDogMSk7XHJcbiAgICAgICAgICAgICAgICBnLkRyYXdTdHJpbmcoX2xhYmVsLCBMYWJlbEZvbnQsIExhYmVsQnJ1c2hDb2xvciwgYm91bmRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChDb2xvci5FcXVhbHMoZGVmYXVsdChHcmFwaGljc0xheWVyLkFSR0IpKSlcclxuICAgICAgICAgICAgICAgICAgICBnLkZpbGxFbGxpcHNlKElzVW5pdmVyc2FsID8gVW5pdmVyc2FsVmVydGV4RmlsbEJydXNoQ29sb3IgOiBEZWZhdWx0RmlsbEJydXNoQ29sb3IsIGJvdW5kcyk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgZy5GaWxsRWxsaXBzZShDb2xvciwgYm91bmRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGcuRHJhd0VsbGlwc2UoX0lzU2VsZWN0ZWQgPyBCb3VuZGFyeVNlbGVjdGVkUGVuQ29sb3IgOiBCb3VuZGFyeVBlbkNvbG9yLCBib3VuZHMsIF9Jc1NlbGVjdGVkID8gQm91bmRhcnlTZWxlY3RlZFBlbldpZHRoIDogMSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChfc2hvd0luZGV4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3ggPSAoYm91bmRzLkxlZnQgKyBib3VuZHMuUmlnaHQpIC8gMjtcclxuICAgICAgICAgICAgICAgIHZhciBjeSA9IChib3VuZHMuQm90dG9tICsgYm91bmRzLlRvcCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSBNYXRoLk1heChib3VuZHMuV2lkdGgsIGJvdW5kcy5IZWlnaHQpIC8gMiArIDU7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmIgPSBuZXcgR3JhcGhpY3NMYXllci5Cb3goY3ggKyByICogTWF0aC5Db3MoSW5kZXhBbmdsZSkgLSA1LCBjeSArIHIgKiBNYXRoLlNpbihJbmRleEFuZ2xlKSAtIDUsIDEwLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBnLkRyYXdTdHJpbmcoUGFyZW50SW5kZXguVG9TdHJpbmcoKSwgSW5kZXhGb250LCBJbmRleEJydXNoQ29sb3IsIGJiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSGl0KGRvdWJsZSB4LCBkb3VibGUgeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBoaXQgPSBfTG9jYWxCb3VuZHMuQ29udGFpbnMoeCwgeSk7XHJcbiAgICAgICAgICAgIHJldHVybiBoaXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGhpY3NMYXllci5Cb3ggQ29tcHV0ZUJvdW5kcyhHcmFwaGljc0xheWVyLklHcmFwaGljcyBnLCBpbnQgd2lkdGgsIGludCBoZWlnaHQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHcmFwaGljc0xheWVyLkJveCBib3VuZHM7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KF9sYWJlbCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzaXplID0gZy5NZWFzdXJlU3RyaW5nKF9sYWJlbCwgTGFiZWxGb250KTtcclxuXHJcbiAgICAgICAgICAgICAgICBib3VuZHMgPSBuZXcgR3JhcGhpY3NMYXllci5Cb3goWCAqIHdpZHRoIC0gc2l6ZS5XaWR0aCAvIDIsIFkgKiBoZWlnaHQgLSBzaXplLkhlaWdodCAvIDIsIHNpemUuV2lkdGgsIHNpemUuSGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJvdW5kcyA9IG5ldyBHcmFwaGljc0xheWVyLkJveChYICogd2lkdGgsIFkgKiBoZWlnaHQsIDAsIDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBib3VuZHMuSW5mbGF0ZShfcGFkZGluZyAqIHdpZHRoLCBfcGFkZGluZyAqIGhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICBfTG9jYWxCb3VuZHMgPSBuZXcgR3JhcGhpY3NMYXllci5Cb3goYm91bmRzLlggLyB3aWR0aCwgYm91bmRzLlkgLyBoZWlnaHQsIGJvdW5kcy5XaWR0aCAvIHdpZHRoLCBib3VuZHMuSGVpZ2h0IC8gaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBib3VuZHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGhpY3NMYXllci5BUkdCIENvbG9yIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgcHVibGljIGludCBNb2RpZmllciB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkb3VibGUgWFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfTG9jYXRpb24uWDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX0xvY2F0aW9uLlggPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRvdWJsZSBZXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9Mb2NhdGlvbi5ZO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfTG9jYXRpb24uWSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgVmVjdG9yIExvY2F0aW9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9Mb2NhdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX0xvY2F0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdHJpbmcgTGFiZWxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2xhYmVsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gX2xhYmVsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBfbGFiZWwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGZsb2F0IFBhZGRpbmdcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3BhZGRpbmc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBfcGFkZGluZylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgX3BhZGRpbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIEdyYXBoaWNzTGF5ZXIuQm94IExvY2FsQm91bmRzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9Mb2NhbEJvdW5kcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJvb2wgSXNTZWxlY3RlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfSXNTZWxlY3RlZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IF9Jc1NlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBfSXNTZWxlY3RlZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgR3JhcGhpY3NMYXllci5Cb3ggRHJhZ09mZnNldFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfRHJhZ09mZnNldDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX0RyYWdPZmZzZXQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBTdHlsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfU3R5bGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5TdGFydHNXaXRoKFwiK1wiKSAmJiAhc3RyaW5nLklzTnVsbE9yRW1wdHkoX1N0eWxlKSlcclxuICAgICAgICAgICAgICAgICAgICBfU3R5bGUgKz0gXCIsIFwiICsgdmFsdWUuVHJpbVN0YXJ0KCcrJyk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgX1N0eWxlID0gdmFsdWUuVHJpbVN0YXJ0KCcrJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBib29sIElzVW5pdmVyc2FsIHsgZ2V0OyBzZXQ7IH1cclxuXHJcbiAgICAgICAgVmVjdG9yIF9Mb2NhdGlvbjtcclxuICAgICAgICBHcmFwaGljc0xheWVyLkJveCBfRHJhZ09mZnNldCA9IEdyYXBoaWNzTGF5ZXIuQm94LkVtcHR5O1xyXG4gICAgICAgIHN0cmluZyBfbGFiZWw7XHJcbiAgICAgICAgc3RyaW5nIF9TdHlsZTtcclxuICAgICAgICBib29sIF9Jc1NlbGVjdGVkO1xyXG5cclxuICAgICAgICBmbG9hdCBfcGFkZGluZyA9IDIuMGYgLyAxMDAuMGY7XHJcbiAgICAgICAgR3JhcGhpY3NMYXllci5Cb3ggX0xvY2FsQm91bmRzID0gR3JhcGhpY3NMYXllci5Cb3guRW1wdHk7XHJcbiAgICAgICAgYm9vbCBfc2hvd0luZGV4ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgUm90YXRlSW5kZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSW5kZXhBbmdsZSArPSBNYXRoLlBJIC8gMTY7XHJcbiAgICAgICAgICAgIGlmIChJbmRleEFuZ2xlID49IDIgKiBNYXRoLlBJKVxyXG4gICAgICAgICAgICAgICAgSW5kZXhBbmdsZSA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFRvZ2dsZUluZGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9zaG93SW5kZXggPSAhX3Nob3dJbmRleDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBHcmFwaGljc0xheWVyO1xyXG51c2luZyBTeXN0ZW07XHJcbnVzaW5nIFN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljO1xyXG51c2luZyBTeXN0ZW0uRHJhd2luZztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG51c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzO1xyXG5cclxubmFtZXNwYWNlIFRlc3Rcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdyYXBoaWNzIDogSUdyYXBoaWNzXHJcbiAgICB7XHJcbiAgICAgICAgSFRNTENhbnZhc0VsZW1lbnQgX2NhbnZhcztcclxuICAgICAgICBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgX2NvbnRleHQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBHcmFwaGljcyhIVE1MQ2FudmFzRWxlbWVudCBjYW52YXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY2FudmFzID0gY2FudmFzO1xyXG4gICAgICAgICAgICBfY29udGV4dCA9IGNhbnZhcy5HZXRDb250ZXh0KFwiMmRcIikuQXM8Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEPigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgQ2xlYXIoQVJHQiBhcmdiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2NvbnRleHQuRmlsbFN0eWxlID0gYXJnYi5Ub0NvbG9yKCk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0Lkdsb2JhbEFscGhhID0gYXJnYi5BIC8gMjU1LjBmO1xyXG4gICAgICAgICAgICBfY29udGV4dC5DbGVhclJlY3QoMCwgMCwgX2NhbnZhcy5XaWR0aCwgX2NhbnZhcy5IZWlnaHQpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5GaWxsUmVjdCgwLCAwLCBfY2FudmFzLldpZHRoLCBfY2FudmFzLkhlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdm9pZCBEcmF3TGluZShBUkdCIGFyZ2IsIEJveCBwMSwgQm94IHAyLCBkb3VibGUgd2lkdGggPSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2NvbnRleHQuU3Ryb2tlU3R5bGUgPSBhcmdiLlRvQ29sb3IoKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuTGluZVdpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIF9jb250ZXh0Lkdsb2JhbEFscGhhID0gTWF0aC5NaW4oMS4wZiwgTWF0aC5NYXgoMC4wZiwgYXJnYi5BIC8gMjU1LjBmKSk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5Nb3ZlVG8ocDEuWCwgcDEuWSk7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkxpbmVUbyhwMi5YLCBwMi5ZKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuU3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXdMaW5lKEFSR0IgYXJnYiwgZG91YmxlIHgxLCBkb3VibGUgeTEsIGRvdWJsZSB4MiwgZG91YmxlIHkyLCBkb3VibGUgd2lkdGggPSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgRHJhd0xpbmUoYXJnYiwgbmV3IEJveCh4MSwgeTEpLCBuZXcgQm94KHgyLCB5MiksIHdpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRHJhd0xpbmVzKEFSR0IgYXJnYiwgSUVudW1lcmFibGU8Qm94PiBwb2ludHMsIGRvdWJsZSB3aWR0aCA9IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2VTdHlsZSA9IGFyZ2IuVG9Db2xvcigpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5HbG9iYWxBbHBoYSA9IGFyZ2IuQSAvIDI1NS4wZjtcclxuICAgICAgICAgICAgX2NvbnRleHQuTGluZVdpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICB2YXIgZmlyc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgYiBpbiBwb2ludHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5Nb3ZlVG8oYi5YLCBiLlkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQuTGluZVRvKGIuWCwgYi5ZKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRmlsbFBvbHlnb24oQVJHQiBhcmdiLCBJRW51bWVyYWJsZTxCb3g+IHBvaW50cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkZpbGxTdHlsZSA9IGFyZ2IuVG9Db2xvcigpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5HbG9iYWxBbHBoYSA9IGFyZ2IuQSAvIDI1NS4wZjtcclxuICAgICAgICAgICAgX2NvbnRleHQuQmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIHZhciBmaXJzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIHBvaW50cylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lk1vdmVUbyhiLlgsIGIuWSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5MaW5lVG8oYi5YLCBiLlkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkZpbGwoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIHZvaWQgRHJhd0VsbGlwc2UoQVJHQiBhcmdiLCBCb3ggYm91bmRzLCBkb3VibGUgd2lkdGggPSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2NvbnRleHQuU3Ryb2tlU3R5bGUgPSBhcmdiLlRvQ29sb3IoKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuR2xvYmFsQWxwaGEgPSBhcmdiLkEgLyAyNTUuMGY7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5BcmMoYm91bmRzLkxlZnQgKyBib3VuZHMuV2lkdGggLyAyLCBib3VuZHMuVG9wICsgYm91bmRzLkhlaWdodCAvIDIsIGJvdW5kcy5XaWR0aCAvIDIsIDAsIDIgKiBNYXRoLlBJKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuU3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEZpbGxFbGxpcHNlKEFSR0IgYXJnYiwgQm94IGJvdW5kcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5GaWxsU3R5bGUgPSBhcmdiLlRvQ29sb3IoKTtcclxuICAgICAgICAgICAgX2NvbnRleHQuR2xvYmFsQWxwaGEgPSBhcmdiLkEgLyAyNTUuMGY7XHJcbiAgICAgICAgICAgIF9jb250ZXh0LkFyYyhib3VuZHMuTGVmdCArIGJvdW5kcy5XaWR0aCAvIDIsIGJvdW5kcy5Ub3AgKyBib3VuZHMuSGVpZ2h0IC8gMiwgYm91bmRzLldpZHRoIC8gMiwgMCwgMiAqIE1hdGguUEkpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5GaWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyB2b2lkIERyYXdTdHJpbmcoc3RyaW5nIHMsIEZvbnQgZm9udCwgQVJHQiBhcmdiLCBCb3ggYm91bmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2NvbnRleHQuRm9udCA9IGZvbnQuTmFtZSArIFwiIFwiICsgZm9udC5TaXplICsgXCJweFwiO1xyXG4gICAgICAgICAgICBfY29udGV4dC5TdHJva2VTdHlsZSA9IGFyZ2IuVG9Db2xvcigpO1xyXG4gICAgICAgICAgICBfY29udGV4dC5HbG9iYWxBbHBoYSA9IGFyZ2IuQSAvIDI1NS4wZjtcclxuICAgICAgICAgICAgX2NvbnRleHQuU3Ryb2tlVGV4dChzLCAoaW50KWJvdW5kcy5YLCAoaW50KWJvdW5kcy5ZKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHVibGljIEJveCBNZWFzdXJlU3RyaW5nKHN0cmluZyBzLCBGb250IGZvbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY29udGV4dC5Gb250ID0gZm9udC5OYW1lICsgXCIgXCIgKyBmb250LlNpemUgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIHZhciBtZXRyaWNzID0gX2NvbnRleHQuTWVhc3VyZVRleHQocyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJveCgwLCAwLCBtZXRyaWNzLldpZHRoLCBtZXRyaWNzLkVtSGVpZ2h0QXNjZW50ICsgbWV0cmljcy5FbUhlaWdodERlc2NlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJ1c2luZyBBbGdvcml0aG1zLlV0aWxpdHk7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxuXHJcbm5hbWVzcGFjZSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmVcclxue1xyXG4gICAgcHVibGljIGNsYXNzIEdvb2RuZXNzQW5hbHl6ZXIgOiBTd2FwQW5hbHl6ZXJcclxuICAgIHtcclxuICAgICAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgc3RyaW5nIENoaWxkUmVhc29uIHsgZ2V0IHsgcmV0dXJuIFwiZ29vZG5lc3MgaW5jcmVhc2VkXCI7IH0gfVxyXG5cclxuICAgICAgICBwdWJsaWMgR29vZG5lc3NBbmFseXplcihib29sIGZpbmRDbGVhbmVzdFdpbiA9IHRydWUpXHJcbiAgICAgICAgICAgIDogYmFzZShmaW5kQ2xlYW5lc3RXaW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG92ZXJyaWRlIGJvb2wgSXNDaGlsZEJvYXJkQmV0dGVyKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBCb2FyZCBjaGlsZEJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KE1ldGFLbm93bGVkZ2UuR2V0Q29sb3JHcmFwaHMoY2hpbGRCb2FyZC5TdGFja3MsIGNoaWxkQm9hcmQuUG90KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikoYyA9PiBjLkNvdW50KSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciB5ID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4saW50PihNZXRhS25vd2xlZGdlLkdldENvbG9yR3JhcGhzKGJvYXJkLlN0YWNrcywgYm9hcmQuUG90KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikoYyA9PiBjLkNvdW50KSkuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gU3RhbmRhcmREZXZpYXRpb24oeCkgPCBTdGFuZGFyZERldmlhdGlvbih5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRvdWJsZSBNZWFuKExpc3Q8aW50PiB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHguU3VtKCkgLyB4LkNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZG91YmxlIE1lZGlhbihMaXN0PGludD4geClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8aW50LGludD4oeCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGEgPT4gYSkpLkVsZW1lbnRBdCh4LkNvdW50IC8gMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb3VibGUgU3RhbmRhcmREZXZpYXRpb24oTGlzdDxpbnQ+IHgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbXUgPSBNZWFuKHgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguU3FydChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlN1bTxpbnQ+KHgsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBkb3VibGU+KShhID0+IChhIC0gbXUpICogKGEgLSBtdSkpKSAvIHguQ291bnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZG91YmxlIEFic29sdXRlRGV2aWF0aW9uKExpc3Q8aW50PiB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG11ID0gTWVkaWFuKHgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU3VtPGludD4oeCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGRvdWJsZT4pKGEgPT4gTWF0aC5BYnMobXUgLSBhKSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYm9vbCBQdXNoTGVmdE9yZGVyaW5nKEtub3dsZWRnZSBrbm93bGVkZ2UsIEJvYXJkIGJvYXJkLCBCb2FyZCBjaGlsZEJvYXJkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHggPSBHZXRWZWN0b3JzKGNoaWxkQm9hcmQpO1xyXG4gICAgICAgICAgICB2YXIgeSA9IEdldFZlY3RvcnMoYm9hcmQpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBNYXRoLk1pbih4LkNvdW50LCB5LkNvdW50KTsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IENvbXBhcmVWZWN0b3JzKHhbaV0sIHlbaV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjID4gMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChjIDwgMClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB4LkNvdW50IDwgeS5Db3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExpc3Q8TGlzdDxpbnQ+PiBHZXRWZWN0b3JzKEJvYXJkIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5RGVzY2VuZGluZzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KE1ldGFLbm93bGVkZ2UuR2V0Q29sb3JHcmFwaHMoYi5TdGFja3MsIGIuUG90KSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikoYyA9PiBjLkNvdW50KSkuVG9MaXN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnQgQ29tcGFyZVZlY3RvcnMoTGlzdDxpbnQ+IHgsIExpc3Q8aW50PiB5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHguQ291bnQgPiB5LkNvdW50KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICBpZiAoeC5Db3VudCA8IHkuQ291bnQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgeC5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeFtpXSA8IHlbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICBpZiAoeFtpXSA+IHlbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgU3lzdGVtO1xyXG51c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYztcclxudXNpbmcgU3lzdGVtLkxpbnE7XHJcbnVzaW5nIFN5c3RlbS5UZXh0O1xyXG5cclxudXNpbmcgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkFyYml0cmFyeU1heERlZ3JlZTtcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG5cclxubmFtZXNwYWNlIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mc1xyXG57XHJcbiAgICBwdWJsaWMgY2xhc3MgQXJiaXRyYXJ5RGVncmVlUHJvb2ZCdWlsZGVyIDogUGVybXV0YXRpb25Bd2FyZVByb29mQnVpbGRlclxyXG4gICAge1xyXG4gICAgICAgIHB1YmxpYyBib29sIFVzZVdpbGRDYXJkcyB7IGdldDsgc2V0OyB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHN0cmluZyBfZmlndXJlVGlrejtcclxuICAgICAgICBpbnQgX21heFBvdDtcclxuICAgICAgICBMaXN0PGludD4gX2FjdGl2ZUluZGljZXM7XHJcbiAgICAgICAgTGlzdDxpbnQ+IF9hY3RpdmVMaXN0U2l6ZXM7XHJcbiAgICAgICAgTGlzdDxpbnQ+IF9wb3NzaWJsZUxpc3RJbmRpY2VzO1xyXG4gICAgICAgIExpc3Q8TGlzdDxpbnQ+PiBfcG9zc2libGVMaXN0cztcclxuICAgICAgICBMaXN0PFN1cGVyU2xpbUJvYXJkPiBfYWxsQm9hcmRzO1xyXG4gICAgICAgIFNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5WZWN0b3JDb21wYXJlciBfc2VxdWVuY2VDb21wYXJlcjtcclxuICAgICAgICBTZXF1ZW5jZUdlbmVyYWxpemVyPGludD4gX3NlcXVlbmNlR2VuZXJhbGl6ZXI7XHJcbiAgICAgICAgRGljdGlvbmFyeTxzdHJpbmcsIHN0cmluZz4gX29yZGVyRmlsdGVyID0gbmV3IERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+KCk7XHJcbiAgICAgICAgYm9vbCBfaXNXaW47XHJcblxyXG4gICAgICAgIHB1YmxpYyBBcmJpdHJhcnlEZWdyZWVQcm9vZkJ1aWxkZXIoU3VwZXJTbGltTWluZCBtaW5kLCBzdHJpbmcgZmlndXJlVGlreiA9IFwiXCIsIGJvb2wgdXNlUGVybXV0YXRpb25zID0gZmFsc2UpXHJcbiAgICAgICAgICAgIDogYmFzZShtaW5kLCB1c2VQZXJtdXRhdGlvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfZmlndXJlVGlreiA9IGZpZ3VyZVRpa3o7XHJcbiAgICAgICAgICAgIF9tYXhQb3QgPSBtaW5kLk1heFBvdDtcclxuICAgICAgICAgICAgVXNlV2lsZENhcmRzID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgV3JpdGVQcm9vZigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xyXG5cclxuICAgICAgICAgICAgX2lzV2luID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5BbGw8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuUHJvb2ZDYXNlPihDYXNlcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5Qcm9vZkNhc2UsIGJvb2w+KShjID0+ICFjLkJyZWFrZXJXaW4pKTtcclxuICAgICAgIFxyXG4gICAgICAgICAgICBBZGRGaWd1cmUoc2IpO1xyXG4gICAgICAgICAgICBCZWdpblByb29mKHNiKTtcclxuICAgICAgICAgICAgR2VuZXJhdGVQb3NzaWJsZUxpc3RzKCk7XHJcbiAgICAgICAgICAgIEdlbmVyYWxpemVBbGxCb2FyZHMoc2IpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHdvbkJvYXJkcyA9IG5ldyBMaXN0PFN1cGVyU2xpbUJvYXJkPigpO1xyXG4gICAgICAgICAgICBmb3IgKGludCBjYXNlTnVtYmVyID0gMTsgY2FzZU51bWJlciA8PSBDYXNlcy5Db3VudDsgY2FzZU51bWJlcisrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IENhc2VzW2Nhc2VOdW1iZXIgLSAxXTtcclxuICAgICAgICAgICAgICAgIHZhciBib2FyZHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCxzdHJpbmc+KGMuQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIHN0cmluZz4pKGIgPT4gYi5Ub0xpc3RTdHJpbmdJbkxleE9yZGVyKF9tYXhQb3QpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIExpc3Q8U3VwZXJTbGltQm9hcmQ+IHRoaXNDbGFpbUJvYXJkcztcclxuICAgICAgICAgICAgICAgIGlmIChjYXNlTnVtYmVyID4gMSAmJiAhYy5CcmVha2VyV2luKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNDbGFpbUJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0TWFueTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KGJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+PikoYiA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlVuaW9uPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KG5ld1tdIHsgYiB9LFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPixnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihfcGVybXV0YXRpb25MaW5rZWRbYl0sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPikodHVwID0+IHR1cC5JdGVtMikpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNDbGFpbUJvYXJkcyA9IGJvYXJkcztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWMuQnJlYWtlcldpbilcclxuICAgICAgICAgICAgICAgICAgICB3b25Cb2FyZHMuQWRkUmFuZ2UodGhpc0NsYWltQm9hcmRzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpc0NsYWltQm9hcmRzVGV4ID0gR2VuZXJhbGl6ZUJvYXJkcyh0aGlzQ2xhaW1Cb2FyZHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmlnc2tpcFwiKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoc3RyaW5nLkZvcm1hdChcIlxcXFxjYXNle3t7MH19fXt7JEIkIGlzIG9uZSBvZiB0aGUgezF9IGZvbGxvd2luZyBib2FyZHM6XFxuIFwiICsgdGhpc0NsYWltQm9hcmRzVGV4ICsgXCIufX1cIixjYXNlTnVtYmVyLCB0aGlzQ2xhaW1Cb2FyZHMuQ291bnQpKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmlnc2tpcFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYy5CcmVha2VyV2luKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMuU3VwZXJhYnVuZGFudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIk5vIHNpbmdsZSBLZW1wZSBleGNoYW5nZSBnZXRzIGZyb20gdGhlc2UgYm9hcmRzIHRvIGEgcHJldmlvdXMgY2FzZS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiVGhlc2UgYm9hcmRzIGFyZSBub3Qgc3VwZXJhYnVuZGFudC5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjYXNlTnVtYmVyID09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJJbiBhbGwgdGhlc2UgY2FzZXMsICRIJCBpcyBpbW1lZGlhdGVseSBjb2xvcmFibGUgZnJvbSB0aGUgbGlzdHMuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN3YXBDb3VudEdyb3VwcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuR3JvdXBCeTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGludD4oYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGludD4pKGIgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5NYXg8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oTWluZC5HZXRXaW5UcmVlSW5mbyhiKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KSh0aSA9PiB0aS5Td2FwVmVydGljZXMuQ291bnQpKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzd2FwQ291bnRHcm91cCBpbiBzd2FwQ291bnRHcm91cHMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3dhcENvdW50R3JvdXAuS2V5ID09IDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJFYWNoIG9mIHRoZSBmb2xsb3dpbmcgYm9hcmRzIGNhbiBiZSBoYW5kbGVkIGJ5IGEgc2luZ2xlIEtlbXBlIGNoYW5nZSB0aGF0IGhhcyBhbiBlbmRwb2ludCBhdCBpbmZpbml0eS5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGIgaW4gc3dhcENvdW50R3JvdXApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGVybXV0YXRpb24gcHA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RTdHJpbmcgPSBiLlRvTGlzdFN0cmluZ0luTGV4T3JkZXIob3V0IHBwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWVJbmZvID0gTWluZC5HZXRXaW5UcmVlSW5mbyhiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxwaGEgPSBNYXRoLk1pbihwcFtTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KHRyZWVJbmZvKS5BbHBoYV0sIHBwW1N5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkJldGFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmV0YSA9IE1hdGguTWF4KHBwW1N5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkFscGhhXSwgcHBbU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbykuQmV0YV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncm91cHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkdyb3VwQnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KHRyZWVJbmZvLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKHNzID0+IHNzLlN3YXBWZXJ0aWNlc1swXSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUNoZWNrUGVybXV0YXRpb25Hb29kTmVzcyhhbHBoYSwgYmV0YSwgbGlzdFN0cmluZywgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KHRyZWVJbmZvLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKHNzID0+IHNzLlN3YXBWZXJ0aWNlc1swXSkpLkRpc3RpbmN0KCkuVG9MaXN0KCkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwidGhlcmUgaXMgYmFkbmVzcyBoZXJlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmQoXCIkXFxcXEtfe1wiICsgYWxwaGEgKyBcIlwiICsgYmV0YSArIFwiLFxcXFxpbmZ0eX0oXCIgKyBsaXN0U3RyaW5nICsgXCIsXCIgKyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PGludD4oZ3JvdXBzLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5MaW5xLkdyb3VwaW5nPGludCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4sIGludD4pKGdnID0+IGdnLktleSkpLlNlbGVjdDxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkxpbnEuR3JvdXBpbmc8aW50LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPiwgaW50PikoZ2cgPT4gZ2cuS2V5LkdldEFjdGl2ZUxpc3RJbmRleChiLCBfbWF4UG90KSArIDEpKSxudWxsKSArIFwiKVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXFJpZ2h0YXJyb3cgJCBcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihncm91cHMuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkxpbnEuR3JvdXBpbmc8aW50LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPiwgaW50PikoZ2cgPT4gZ2cuS2V5KSkuU2VsZWN0PHN0cmluZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uTGlucS5Hcm91cGluZzxpbnQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+LCBzdHJpbmc+KShnZyA9PiBcIiRcIiArIEdldENoaWxkQm9hcmROYW1lKGIsIGdnLkZpcnN0KCkpICsgXCIkIChDYXNlIFwiICsgR2V0SGFuZGxlZENhc2VOdW1iZXIoYiwgZ2cuRmlyc3QoKSkgKyBcIilcIikpLG51bGwpICsgXCIuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9wZXJtdXRhdGlvbkxpbmtlZFtiXS5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIkZyZWUgYnkgdmVydGV4IHBlcm11dGF0aW9uOiBcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sc3RyaW5nPihfcGVybXV0YXRpb25MaW5rZWRbYl0sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LCBzdHJpbmc+KShwcHAgPT4gXCIkXCIgKyBwcHAuSXRlbTEgKyBcIlxcXFxSaWdodGFycm93IFwiICsgcHBwLkl0ZW0yLlRvTGlzdFN0cmluZ0luTGV4T3JkZXIoX21heFBvdCkgKyBcIiRcIikpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiaWdza2lwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzd2FwQ291bnRHcm91cC5LZXkgPT0gMilcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiaWdza2lwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIkVhY2ggb2YgdGhlIGZvbGxvd2luZyBib2FyZHMgY2FuIGJlIGhhbmRsZWQgYnkgYSBzaW5nbGUgS2VtcGUgY2hhbmdlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIHN3YXBDb3VudEdyb3VwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBlcm11dGF0aW9uIHBwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0U3RyaW5nID0gYi5Ub0xpc3RTdHJpbmdJbkxleE9yZGVyKG91dCBwcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmVlSW5mbyA9IE1pbmQuR2V0V2luVHJlZUluZm8oYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhID0gTWF0aC5NaW4ocHBbU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbykuQWxwaGFdLCBwcFtTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KHRyZWVJbmZvKS5CZXRhXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJldGEgPSBNYXRoLk1heChwcFtTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KHRyZWVJbmZvKS5BbHBoYV0sIHBwW1N5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkJldGFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdG92ZXIgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPih0cmVlSW5mbyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQ2hlY2tQZXJtdXRhdGlvbkdvb2ROZXNzKGFscGhhLCBiZXRhLCBsaXN0U3RyaW5nLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KHRyZWVJbmZvLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50Pj4pKHNzID0+IHNzLlN3YXBWZXJ0aWNlcykpLkRpc3RpbmN0KCkuVG9MaXN0KCkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwidGhlcmUgaXMgYmFkbmVzcyBoZXJlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAobGVmdG92ZXIuQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1vbmVzdFN3YXBwZXIgPSBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5NYXhJbmRleDxpbnQ+KEVudW1lcmFibGUuUmFuZ2UoMCwgYi5fc3RhY2tDb3VudCksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh2ID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuQ291bnQ8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4obGVmdG92ZXIsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgYm9vbD4pKGJjID0+IGJjLlN3YXBWZXJ0aWNlcy5Db250YWlucyh2KSkpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGVkQWxsID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5XaGVyZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihsZWZ0b3ZlciwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvbnRhaW5zKGNvbW1vbmVzdFN3YXBwZXIpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGVkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuRGlzdGluY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KGhhbmRsZWRBbGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID09IDEgPyAtMSA6IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5FeGNlcHQ8aW50PihiYy5Td2FwVmVydGljZXMsY29tbW9uZXN0U3dhcHBlcikpKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kKFwiJFxcXFxLX3tcIiArIGFscGhhICsgXCJcIiArIGJldGEgKyBcIixcIiArIChjb21tb25lc3RTd2FwcGVyLkdldEFjdGl2ZUxpc3RJbmRleChiLCBfbWF4UG90KSArIDEpICsgXCJ9KFwiICsgbGlzdFN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2luZ2xlID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdE9yRGVmYXVsdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihoYW5kbGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGJvb2w+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ291bnQgPT0gMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2luZ2xlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmQoXCIsXFxcXGluZnR5XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oaGFuZGxlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID4gMSkpLkNvdW50KCkgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kKFwiLFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxpbnQ+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oaGFuZGxlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID4gMSkpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuRXhjZXB0PGludD4oYmMuU3dhcFZlcnRpY2VzLGNvbW1vbmVzdFN3YXBwZXIpKSkpLlNlbGVjdDxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKGJjID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5FeGNlcHQ8aW50PihiYy5Td2FwVmVydGljZXMsY29tbW9uZXN0U3dhcHBlcikpLkdldEFjdGl2ZUxpc3RJbmRleChiLCBfbWF4UG90KSArIDEpKSxudWxsKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZChcIilcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXFJpZ2h0YXJyb3cgJCBcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk9yZGVyQnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KGhhbmRsZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID09IDEgPyAtMSA6IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5FeGNlcHQ8aW50PihiYy5Td2FwVmVydGljZXMsY29tbW9uZXN0U3dhcHBlcikpKSkuU2VsZWN0PHN0cmluZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgc3RyaW5nPikoYmMgPT4gXCIkXCIgKyBHZXRDaGlsZEJvYXJkTmFtZShiLCBiYykgKyBcIiQgKENhc2UgXCIgKyBHZXRIYW5kbGVkQ2FzZU51bWJlcihiLCBiYykgKyBcIilcIikpLG51bGwpICsgXCIuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYmMgaW4gaGFuZGxlZEFsbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRvdmVyLlJlbW92ZShiYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3Blcm11dGF0aW9uTGlua2VkW2JdLkNvdW50ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiRnJlZSBieSB2ZXJ0ZXggcGVybXV0YXRpb246IFwiICsgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPixzdHJpbmc+KF9wZXJtdXRhdGlvbkxpbmtlZFtiXSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sIHN0cmluZz4pKHBwcCA9PiBcIiRcIiArIHBwcC5JdGVtMSArIFwiXFxcXFJpZ2h0YXJyb3cgXCIgKyBwcHAuSXRlbTIuVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihfbWF4UG90KSArIFwiJFwiKSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiaWdza2lwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRW5kUHJvb2Yoc2IpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNiLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBib29sIENoZWNrUGVybXV0YXRpb25Hb29kTmVzcyhpbnQgYWxwaGEsIGludCBiZXRhLCBzdHJpbmcgc3RhY2tzU3RyaW5nLCBMaXN0PGludD4gc3dhcFZlcnRpY2VzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHN0YWNrcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oc3RhY2tzU3RyaW5nLlNwbGl0KCd8JyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKHMgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Y2hhcixpbnQ+KHMuVG9DaGFyQXJyYXkoKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxjaGFyLCBpbnQ+KShjID0+IGludC5QYXJzZShjLlRvU3RyaW5nKCkpKSkuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb2xvcnMgPSBCcmlkZ2UuU2NyaXB0LkNhbGxGb3IobmV3IExpc3Q8aW50PigpLChfbzYpPT57X282LkFkZChhbHBoYSk7X282LkFkZChiZXRhKTtyZXR1cm4gX282O30pO1xyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBzd2FwVmVydGljZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuSW50ZXJzZWN0aW9uQ291bnQ8aW50Pihjb2xvcnMsc3RhY2tzW3ZdKSAhPSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5EaWFnbm9zdGljcy5EZWJ1Z2dlci5CcmVhaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdHJpbmcgR2V0Q2hpbGRCb2FyZE5hbWUoU3VwZXJTbGltQm9hcmQgYiwgQnJlYWtlckNob2ljZUluZm8gYmMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRCb2FyZCA9IG5ldyBTdXBlclNsaW1Cb2FyZChiLl90cmFjZSwgYmMuQWxwaGEsIGJjLkJldGEsIGJjLlJlc3BvbnNlLCBiLl9zdGFja0NvdW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkQm9hcmQuVG9MaXN0U3RyaW5nSW5MZXhPcmRlcihfbWF4UG90KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgR2VuZXJhbGl6ZUFsbEJvYXJkcyhTdHJpbmdCdWlsZGVyIHNiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2FsbEJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihBbGdvcml0aG1zLlV0aWxpdHkuTGlzdFV0aWxpdHkuVW5pb248Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oTWluZC5Db2xvcmFibGVCb2FyZHMsTWluZC5Ob25Db2xvcmFibGVCb2FyZHMpLE1pbmQuQnJlYWtlcldvbkJvYXJkcykpO1xyXG4gICAgICAgICAgICBfc2VxdWVuY2VDb21wYXJlciA9IG5ldyBTZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uVmVjdG9yQ29tcGFyZXIoKTtcclxuICAgICAgICAgICAgX3NlcXVlbmNlR2VuZXJhbGl6ZXIgPSBuZXcgU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+KF9hY3RpdmVJbmRpY2VzLkNvdW50LCBfcG9zc2libGVMaXN0SW5kaWNlcyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYWxsQm9hcmRzVGV4ID0gR2VuZXJhbGl6ZUJvYXJkcyhfYWxsQm9hcmRzKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChNaW5kLk9ubHlDb25zaWRlck5lYXJseUNvbG9yYWJsZUJvYXJkcylcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJXZSBuZWVkIHRvIGhhbmRsZSBhbGwgYm9hcmRzIHRoYXQgYXJlIG5lYXJseSBjb2xvcmFibGUgZm9yIGVkZ2UgJGUkIHVwIHRvIHBlcm11dGF0aW9uIG9mIGNvbG9ycywgc28gaXQgd2lsbCBzdWZmaWNlIHRvIGhhbmRsZSB0aGUgZm9sbG93aW5nIFwiICsgX2FsbEJvYXJkcy5Db3VudCArIFwiIGJvYXJkczogXCIgKyBhbGxCb2FyZHNUZXggKyBcIi5cIik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJXZSBuZWVkIHRvIGhhbmRsZSBhbGwgYm9hcmRzIHVwIHRvIHBlcm11dGF0aW9uIG9mIGNvbG9ycywgc28gaXQgd2lsbCBzdWZmaWNlIHRvIGhhbmRsZSB0aGUgZm9sbG93aW5nIFwiICsgX2FsbEJvYXJkcy5Db3VudCArIFwiIGJvYXJkczogXCIgKyBhbGxCb2FyZHNUZXggKyBcIi5cIik7XHJcblxyXG4gICAgICAgICAgICBpZiAoTWluZC5CcmVha2VyV29uQm9hcmRzLkNvdW50ID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlVuZm9ydHVuYXRlbHksIHRoZSBmb2xsb3dpbmcgXCIgKyBNaW5kLkJyZWFrZXJXb25Cb2FyZHMuQ291bnQgKyAgXCIgYm9hcmRzIGNhbm5vdCBiZSBoYW5kbGVkOiBcIiArIEdlbmVyYWxpemVCb2FyZHMoTWluZC5CcmVha2VyV29uQm9hcmRzKSArIFwiLlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RyaW5nIEdlbmVyYWxpemVCb2FyZHMoTGlzdDxTdXBlclNsaW1Cb2FyZD4gYm9hcmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKFVzZVdpbGRDYXJkcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGV4YW1wbGVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikoYiA9PiBUb0xpc3RJbmRpY2VzKGIpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9uRXhhbXBsZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGludD4oRW51bWVyYWJsZS5SZXBlYXQ8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KF9wb3NzaWJsZUxpc3RJbmRpY2VzLCBfYWN0aXZlSW5kaWNlcy5Db3VudCkpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShsbCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KGxsKSkpLkV4Y2VwdChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkRpc3RpbmN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihleGFtcGxlcyxfc2VxdWVuY2VDb21wYXJlciksIF9zZXF1ZW5jZUNvbXBhcmVyKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZ2VuZXJhbGl6ZWQgPSBfc2VxdWVuY2VHZW5lcmFsaXplci5HZW5lcmFsaXplKGV4YW1wbGVzLCBub25FeGFtcGxlcywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXI+LHN0cmluZz4oZ2VuZXJhbGl6ZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyPiwgc3RyaW5nPikoZ2cgPT4gXCIkXCIgKyBzdHJpbmcuSm9pbihcInxcIiwgU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXIsc3RyaW5nPihnZywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlciwgaW50LCBzdHJpbmc+KSgoXywgaSkgPT4gXy5Ub1RleChfcG9zc2libGVMaXN0cywgX2FjdGl2ZUxpc3RTaXplc1tpXSkpKSkgKyBcIiRcIikpLFwiYW5kXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsc3RyaW5nPihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgc3RyaW5nPikoYiA9PiBiLlRvTGlzdFN0cmluZ0luTGV4T3JkZXIoX21heFBvdCkpKS5PcmRlckJ5PHN0cmluZz4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBzdHJpbmc+KSh4ID0+IHgpKS5TZWxlY3Q8c3RyaW5nPigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIHN0cmluZz4pKHMgPT4gXCIkXCIgKyBzICsgXCIkXCIpKSxcImFuZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExpc3Q8aW50PiBUb0xpc3RJbmRpY2VzKFN1cGVyU2xpbUJvYXJkIGIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgc3RhY2tzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8bG9uZyxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYi5TdGFja3MuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShsID0+IGwuVG9TZXQoKSkpLldoZXJlKChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikocyA9PiBzLkNvdW50IDwgX21heFBvdCkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4saW50PihzdGFja3MsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4sIGludD4pKHMgPT4gQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5GaXJzdEluZGV4PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihfcG9zc2libGVMaXN0cywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHNzID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VxdWVuY2VFcXVhbDxpbnQ+KHNzLHMpKSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgR2VuZXJhdGVQb3NzaWJsZUxpc3RzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzdGFja3MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxsb25nLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihNaW5kLkNvbG9yYWJsZUJvYXJkc1swXS5TdGFja3MuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShsID0+IGwuVG9TZXQoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBfYWN0aXZlSW5kaWNlcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4oQWxnb3JpdGhtcy5HZW5lcmljRXh0ZW5zaW9ucy5JbmRpY2VzV2hlcmU8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgYm9vbD4pKHMgPT4gcy5Db3VudCA8IF9tYXhQb3QpKSk7XHJcbiAgICAgICAgICAgIF9hY3RpdmVMaXN0U2l6ZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PixpbnQ+KHN0YWNrcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50PiwgaW50PikocyA9PiBzLkNvdW50KSkuV2hlcmUoKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBib29sPikoYyA9PiBjIDwgX21heFBvdCkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBvdCA9IEVudW1lcmFibGUuUmFuZ2UoMCwgX21heFBvdCkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgIF9wb3NzaWJsZUxpc3RzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3RNYW55PGludCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5EaXN0aW5jdDxpbnQ+KF9hY3RpdmVMaXN0U2l6ZXMpLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxpbnQsIGludD4pKGMgPT4gYykpLlRvTGlzdCgpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4+KShjID0+IEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5FbnVtZXJhdGVTdWJsaXN0czxpbnQ+KHBvdCxjKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICBfcG9zc2libGVMaXN0SW5kaWNlcyA9IEVudW1lcmFibGUuUmFuZ2UoMCwgX3Bvc3NpYmxlTGlzdHMuQ291bnQpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHN0YXRpYyB2b2lkIEJlZ2luUHJvb2YoU3RyaW5nQnVpbGRlciBzYilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmVnaW57cHJvb2Z9XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHN0YXRpYyB2b2lkIEVuZFByb29mKFN0cmluZ0J1aWxkZXIgc2IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGVuZHtwcm9vZn1cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIEFkZEZpZ3VyZShTdHJpbmdCdWlsZGVyIHNiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGZpZ3VyZUlEID0gXCJmaWc6XCIgKyBHdWlkLk5ld0d1aWQoKS5Ub1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxiZWdpbntmaWd1cmV9XCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGNlbnRlcmluZ1wiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShfZmlndXJlVGlreik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcY2FwdGlvbntWZXJ0aWNlcyBhcmUgb3JkZXJlZCBhcyBsYWJlbGVkLn1cXFxcbGFiZWx7XCIgKyBmaWd1cmVJRCArIFwifVwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxlbmR7ZmlndXJlfVwiKTtcclxuXHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmVnaW57bGVtfVwiKTtcclxuICAgICAgICAgICAgaWYgKF9pc1dpbilcclxuICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJUaGUgZ3JhcGggaW4gRmlndXJlIFxcXFxyZWZ7XCIgKyBmaWd1cmVJRCArIFwifSBpcyByZWR1Y2libGUuXCIpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiVGhlIGdyYXBoIGluIEZpZ3VyZSBcXFxccmVme1wiICsgZmlndXJlSUQgKyBcIn0gaXMgbm90IHJlZHVjaWJsZS5cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcZW5ke2xlbX1cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsInVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgQWxnb3JpdGhtcy5VdGlsaXR5O1xyXG51c2luZyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuTWF4RGVncmVlVGhyZWU7XHJcblxyXG5uYW1lc3BhY2UgQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzXHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBNYXhpbXVtRGVncmVlVGhyZWVQcm9vZkJ1aWxkZXIgOiBQZXJtdXRhdGlvbkF3YXJlUHJvb2ZCdWlsZGVyXHJcbiAgICB7XHJcbiAgICAgICAgc3RyaW5nIF9maWd1cmVUaWt6O1xyXG4gICAgICAgIHB1YmxpYyBNYXhpbXVtRGVncmVlVGhyZWVQcm9vZkJ1aWxkZXIoU3VwZXJTbGltTWluZCBtaW5kLCBzdHJpbmcgZmlndXJlVGlreiA9IFwiXCIpXHJcbiAgICAgICAgICAgIDogYmFzZShtaW5kKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2ZpZ3VyZVRpa3ogPSBmaWd1cmVUaWt6O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBXcml0ZVByb29mKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBNaW5kLkNvbG9yYWJsZUJvYXJkc1swXS5Ub1hZWigpLkxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGFsbEJvYXJkcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+KEFsZ29yaXRobXMuVXRpbGl0eS5MaXN0VXRpbGl0eS5VbmlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihNaW5kLkNvbG9yYWJsZUJvYXJkcyxNaW5kLk5vbkNvbG9yYWJsZUJvYXJkcykpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbXBhcmVyID0gbmV3IFNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5WZWN0b3JDb21wYXJlcigpO1xyXG4gICAgICAgICAgICB2YXIgc2cgPSBuZXcgU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+KGxlbmd0aCwgQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PGludD4oKSwoX283KT0+e19vNy5BZGQoMCk7X283LkFkZCgxKTtfbzcuQWRkKDIpO3JldHVybiBfbzc7fSkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHpvdDIgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihhbGxCb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShiID0+IGIuVG8wMTIoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICB2YXIgZXhhbXBsZXMyID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4oYWxsQm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PikoYiA9PiBiLlRvMDEyKCkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBub25FeGFtcGxlczIgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLklFbnVtZXJhYmxlPGludD4sZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KEFsZ29yaXRobXMuVXRpbGl0eS5MaW5xRXh0ZW5zaW9ucy5DYXJ0ZXNpYW5Qcm9kdWN0PGludD4oRW51bWVyYWJsZS5SZXBlYXQ8Z2xvYmFsOjpTeXN0ZW0uTGlucS5FbnVtZXJhYmxlSW5zdGFuY2U8aW50Pj4oRW51bWVyYWJsZS5SYW5nZSgwLCAzKSwgbGVuZ3RoKSksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+LCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGxsID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGludD4obGwpKSkuRXhjZXB0KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRGlzdGluY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHpvdDIsY29tcGFyZXIpLCBjb21wYXJlcikuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZ2VuZXJhbGl6ZWQyID0gc2cuR2VuZXJhbGl6ZShleGFtcGxlczIsIG5vbkV4YW1wbGVzMiwgZmFsc2UpO1xyXG4gICAgICAgICAgICB2YXIgYWxsQm9hcmRzWFlaID0gQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlcj4sc3RyaW5nPihnZW5lcmFsaXplZDIsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyPiwgc3RyaW5nPikoZ2cgPT4gXCIkXCIgKyBzdHJpbmcuSm9pbihcIlwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlcixzdHJpbmc+KGdnLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyLCBzdHJpbmc+KShfID0+IF8uVG9UZXgoKSkpKSArIFwiJFwiKSksXCJvclwiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XHJcbiAgICAgICAgICAgIHZhciBmaWd1cmVJRCA9IFwiZmlnOlwiICsgR3VpZC5OZXdHdWlkKCkuVG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmVnaW57ZmlndXJlfVwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxjZW50ZXJpbmdcIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoX2ZpZ3VyZVRpa3opO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGNhcHRpb257U29saWQgdmVydGljZXMgaGF2ZSBsaXN0cyBvZiBzaXplIDMgYW5kIHRoZSBsYWJlbGVkIHZlcnRpY2VzIGhhdmUgbGlzdHMgb2Ygc2l6ZSAyLn1cXFxcbGFiZWx7XCIgKyBmaWd1cmVJRCArIFwifVwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlxcXFxlbmR7ZmlndXJlfVwiKTtcclxuXHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcYmVnaW57bGVtfVwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlRoZSBncmFwaCBpbiBGaWd1cmUgXFxcXHJlZntcIiArIGZpZ3VyZUlEICsgXCJ9IGlzIHJlZHVjaWJsZS5cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcZW5ke2xlbX1cIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGV0dGVycyA9IEJyaWRnZS5TY3JpcHQuQ2FsbEZvcihuZXcgTGlzdDxzdHJpbmc+KCksKF9vOCk9PntfbzguQWRkKFwiWFwiKTtfbzguQWRkKFwiWVwiKTtfbzguQWRkKFwiWlwiKTtyZXR1cm4gX284O30pO1xyXG4gICAgICAgICAgICB2YXIgc3RyaW5nTGVuZ3RoID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Db3VudDxsb25nPihNaW5kLkNvbG9yYWJsZUJvYXJkc1swXS5TdGFja3MuVmFsdWUsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8bG9uZywgYm9vbD4pKHNzID0+IHNzLlBvcHVsYXRpb25Db3VudCgpID09IDIpKTtcclxuICAgICAgICAgICAgdmFyIHJuZyA9IG5ldyBSYW5kb20oRGF0ZVRpbWUuTm93Lk1pbGxpc2Vjb25kKTtcclxuICAgICAgICAgICAgdmFyIHJhbmRvbVN0cmluZyA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3RyaW5nTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICByYW5kb21TdHJpbmcgKz0gbGV0dGVyc1tybmcuTmV4dCgzKV07XHJcblxyXG4gICAgICAgICAgICB2YXIgcmFuZG9tU3RyaW5nMiA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3RyaW5nTGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICByYW5kb21TdHJpbmcyICs9IGxldHRlcnNbcm5nLk5leHQoMyldO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJhbmRvbVN0cmluZzMgPSBcIlwiO1xyXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN0cmluZ0xlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgcmFuZG9tU3RyaW5nMyArPSBsZXR0ZXJzW3JuZy5OZXh0KDMpXTtcclxuXHJcbiAgICAgICAgICAgIHNiLkFwcGVuZChcIlxcXFxiZWdpbntwcm9vZn1cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJMZXQgJFggPSBcXFxcezAsMVxcXFx9JCwgJFkgPSBcXFxcezAsMlxcXFx9JCBhbmQgJFogPSBcXFxcezEsMlxcXFx9JC4gVGhlbiB3aXRoIHRoZSB2ZXJ0ZXggb3JkZXJpbmcgaW4gRmlndXJlIFxcXFxyZWZ7XCIgKyBmaWd1cmVJRCArIFwifSwgYSBzdHJpbmcgc3VjaCBhcyBcIiArIHJhbmRvbVN0cmluZyArIFwiLCBcIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJyZXByZXNlbnRzIGEgcG9zc2libGUgbGlzdCBhc3NpZ25tZW50IG9uICRWKEgpJCBhcmlzaW5nIGZyb20gYSAkMyQtZWRnZS1jb2xvcmluZyBvZiAkRy1FKEgpJC5cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJCeSBhbiAkWCQtS2VtcGUgY2hhbmdlLCB3ZSBtZWFuIGZsaXBwaW5nIGNvbG9ycyAkMCQgYW5kICQxJCBvbiBhIHR3by1jb2xvcmVkIHBhdGggaW4gJEctRShIKSQuICBXZSBjYWxsIHN1Y2ggYSBwYXRoIGFuICRYJC1wYXRoLiBcIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJBbnkgZW5kcG9pbnQgb2YgYW4gJFgkLXBhdGggaW4gJEgkIG11c3QgZW5kIGF0IGEgJFkkIG9yICRaJCB2ZXJ0ZXguICBUaGUgbWVhbmluZ3Mgb2YgJFkkLUtlbXBlIGNoYW5nZSwgJFokLUtlbXBlIGNoYW5nZSwgJFkkLXBhdGggYW5kICRaJC1wYXRoIGFyZSBhbmFsb2dvdXMuXCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiTm90ZSB0aGF0IGlmIHRoZXJlIGFyZSBhbiBvZGQgbnVtYmVyIG9mICRZJCdzIGFuZCAkWiQncywgdGhlbiBhdCBsZWFzdCBvbmUgJFgkLXBhdGggaGFzIG9ubHkgb25lIGVuZHBvaW50IGluICRIJC5cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJXZSB1c2Ugc2hvcnRoYW5kIG5vdGF0aW9uIGxpa2UgJFxcXFxLX3tYLCAyfShcIiArIHJhbmRvbVN0cmluZyArIFwiLDUsNikgXFxcXFJpZ2h0YXJyb3cgXCIgKyByYW5kb21TdHJpbmcyICsgXCIsXCIgKyByYW5kb21TdHJpbmczICsgXCIkIChDYXNlIDEpLlwiKTtcclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIlRoaXMgbWVhbnMgdGhlICRYJC1LZW1wZSBjaGFuZ2Ugb24gXCIgKyByYW5kb21TdHJpbmcgKyBcIiBzdGFydGluZyBhdCB0aGUgc2Vjb25kIHZlcnRleCBhbmQgZW5kaW5nIGF0IHRoZSBmaWZ0aCBhbmQgc2l4dGggcmVzdWx0IGluIGJvYXJkcyBcIiArIHJhbmRvbVN0cmluZzIgKyBcIiBhbmQgXCIgKyByYW5kb21TdHJpbmczICsgXCIgcmVzcGVjdGl2ZWx5IGFuZCB0aGVzZSBhcmUgaGFuZGxlZCBieSBDYXNlIDEuXCIpO1xyXG4gICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiVGhlICRcXFxcaW5mdHkkIHN5bWJvbCBtZWFucyBzdGFydGluZyAob3IgZW5kaW5nKSBvdXRzaWRlICRIJC5cIik7XHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChNaW5kLk9ubHlDb25zaWRlck5lYXJseUNvbG9yYWJsZUJvYXJkcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2IuQXBwZW5kTGluZShcIldlIG5lZWQgdG8gaGFuZGxlIGFsbCBib2FyZHMgdGhhdCBhcmUgbmVhcmx5IGNvbG9yYWJsZSBmb3IgZWRnZSAkZSQgdXAgdG8gcGVybXV0YXRpb25zIG9mICRcXFxce1gsWSxaXFxcXH0kLCBzbyBpdCB3aWxsIHN1ZmZpY2UgdG8gaGFuZGxlIGFsbCBib2FyZHMgb2YgdGhlIGZvcm0gXCIgKyBhbGxCb2FyZHNYWVogKyBcIi5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiV2UgbmVlZCB0byBoYW5kbGUgYWxsIGJvYXJkcyB1cCB0byBwZXJtdXRhdGlvbnMgb2YgJFxcXFx7WCxZLFpcXFxcfSQsIHNvIGl0IHdpbGwgc3VmZmljZSB0byBoYW5kbGUgYWxsIGJvYXJkcyBvZiB0aGUgZm9ybSBcIiArIGFsbEJvYXJkc1hZWiArIFwiLlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2IuQXBwZW5kTGluZSgpO1xyXG4gICAgICAgICAgICB2YXIgd29uQm9hcmRzID0gbmV3IExpc3Q8U3VwZXJTbGltQm9hcmQ+KCk7XHJcbiAgICAgICAgICAgIGZvciAoaW50IGNhc2VOdW1iZXIgPSAxOyBjYXNlTnVtYmVyIDw9IENhc2VzLkNvdW50OyBjYXNlTnVtYmVyKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gQ2FzZXNbY2FzZU51bWJlciAtIDFdO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBib2FyZHMgPSBjLkJvYXJkcztcclxuICAgICAgICAgICAgICAgIExpc3Q8U3VwZXJTbGltQm9hcmQ+IHRoaXNDbGFpbUJvYXJkcztcclxuICAgICAgICAgICAgICAgIGlmIChjYXNlTnVtYmVyID4gMSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQ2xhaW1Cb2FyZHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdE1hbnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihib2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPj4pKGIgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5VbmlvbjxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPihuZXdbXSB7IGIgfSxTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4oX3Blcm11dGF0aW9uTGlua2VkW2JdLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4pKHR1cCA9PiB0dXAuSXRlbTIpKSkpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB0aGlzQ2xhaW1Cb2FyZHMgPSBib2FyZHM7XHJcblxyXG4gICAgICAgICAgICAgICAgd29uQm9hcmRzLkFkZFJhbmdlKHRoaXNDbGFpbUJvYXJkcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHpvdCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KHRoaXNDbGFpbUJvYXJkcywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLCBnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8aW50Pj4pKGIgPT4gYi5UbzAxMigpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXhhbXBsZXMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pih0aGlzQ2xhaW1Cb2FyZHMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShiID0+IGIuVG8wMTIoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vbkV4YW1wbGVzID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5JRW51bWVyYWJsZTxpbnQ+LGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+PihBbGdvcml0aG1zLlV0aWxpdHkuTGlucUV4dGVuc2lvbnMuQ2FydGVzaWFuUHJvZHVjdDxpbnQ+KEVudW1lcmFibGUuUmVwZWF0PGdsb2JhbDo6U3lzdGVtLkxpbnEuRW51bWVyYWJsZUluc3RhbmNlPGludD4+KEVudW1lcmFibGUuUmFuZ2UoMCwgMyksIGxlbmd0aCkpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8aW50PiwgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShsbCA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlRvTGlzdDxpbnQ+KGxsKSkpLkV4Y2VwdChTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkRpc3RpbmN0PGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+Pih6b3QsY29tcGFyZXIpLCBjb21wYXJlcikuVG9MaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGdlbmVyYWxpemVkID0gc2cuR2VuZXJhbGl6ZShleGFtcGxlcywgbm9uRXhhbXBsZXMpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvYXJkc1hZWiA9IEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuU2VxdWVuY2VHZW5lcmFsaXplcjxpbnQ+Lk1hdGNoZXI+LHN0cmluZz4oZ2VuZXJhbGl6ZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyPiwgc3RyaW5nPikoZ2cgPT4gXCIkXCIgKyBzdHJpbmcuSm9pbihcIlwiLCBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5TZXF1ZW5jZUdlbmVyYWxpemVyPGludD4uTWF0Y2hlcixzdHJpbmc+KGdnLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlNlcXVlbmNlR2VuZXJhbGl6ZXI8aW50Pi5NYXRjaGVyLCBzdHJpbmc+KShfID0+IF8uVG9UZXgoKSkpKSArIFwiJFwiKSksXCJvclwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGJpZ3NraXBcIik7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKHN0cmluZy5Gb3JtYXQoXCJcXFxcY2FzZXt7ezB9fX17eyRCJCBpcyBvbmUgb2YgXCIgKyBib2FyZHNYWVogKyBcIi59fVwiLCBjYXNlTnVtYmVyKSk7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiXFxcXGJpZ3NraXBcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FzZU51bWJlciA9PSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiSW4gYWxsIHRoZXNlIGNhc2VzLCAkSCQgaXMgaW1tZWRpYXRlbHkgY29sb3JhYmxlIGZyb20gdGhlIGxpc3RzLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpeEdyb3VwcyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuR3JvdXBCeTxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkLHN0cmluZz4oYm9hcmRzLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQsIHN0cmluZz4pKGIgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmVlSW5mbyA9IE1pbmQuR2V0V2luVHJlZUluZm8oYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaXhMZXR0ZXIgPSAoKGxvbmcpKCgxIDw8IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkFscGhhKSB8ICgxIDw8IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4odHJlZUluZm8pLkJldGEpKSkuVG9YWVooKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaXhMZXR0ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgZml4R3JvdXAgaW4gZml4R3JvdXBzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG90aGVycyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PHN0cmluZz4obGV0dGVycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG90aGVycy5SZW1vdmUoZml4R3JvdXAuS2V5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzd2FwQ291bnRHcm91cHMgPSBmaXhHcm91cC5Hcm91cEJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZCwgaW50PikoYiA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1heDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPihNaW5kLkdldFdpblRyZWVJbmZvKGIpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKHRpID0+IHRpLlN3YXBWZXJ0aWNlcy5Db3VudCkpKSkuVG9MaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBzd2FwQ291bnRHcm91cCBpbiBzd2FwQ291bnRHcm91cHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzd2FwQ291bnRHcm91cC5LZXkgPT0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYiBpbiBzd2FwQ291bnRHcm91cClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmVlSW5mbyA9IE1pbmQuR2V0V2luVHJlZUluZm8oYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncm91cHMgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkdyb3VwQnk8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KHRyZWVJbmZvLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKHNzID0+IHNzLlN3YXBWZXJ0aWNlc1swXSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kKFwiJFxcXFxLX3tcIiArIGZpeEdyb3VwLktleSArIFwiLFxcXFxpbmZ0eX0oXCIgKyBiLlRvWFlaKCkgKyBcIixcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8aW50Pihncm91cHMuT3JkZXJCeTxpbnQ+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkxpbnEuR3JvdXBpbmc8aW50LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPiwgaW50PikoZ2cgPT4gZ2cuS2V5KSkuU2VsZWN0PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uTGlucS5Hcm91cGluZzxpbnQsIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+LCBpbnQ+KShnZyA9PiBnZy5LZXkuR2V0WFlaSW5kZXgoYikgKyAxKSksbnVsbCkgKyBcIilcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcUmlnaHRhcnJvdyAkXCIgKyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PHN0cmluZz4oZ3JvdXBzLk9yZGVyQnk8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5MaW5xLkdyb3VwaW5nPGludCwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4sIGludD4pKGdnID0+IGdnLktleSkpLlNlbGVjdDxzdHJpbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkxpbnEuR3JvdXBpbmc8aW50LCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvPiwgc3RyaW5nPikoZ2cgPT4gXCIkXCIgKyBHZXRDaGlsZEJvYXJkTmFtZShiLCBnZy5GaXJzdCgpKSArIFwiJFwiKSksbnVsbCkgKyBcIiggQ2FzZSBcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8aW50PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLGludD4odHJlZUluZm8sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gR2V0SGFuZGxlZENhc2VOdW1iZXIoYiwgYmMpKSkuRGlzdGluY3QoKS5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh4eCA9PiB4eCkpKSArIFwiKS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfcGVybXV0YXRpb25MaW5rZWRbYl0uQ291bnQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8c3RyaW5nPihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sc3RyaW5nPihfcGVybXV0YXRpb25MaW5rZWRbYl0sKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpTeXN0ZW0uVHVwbGU8Z2xvYmFsOjpBbGdvcml0aG1zLlV0aWxpdHkuUGVybXV0YXRpb24sIGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuU3VwZXJTbGltQm9hcmQ+LCBzdHJpbmc+KShwcHAgPT4gXCIkXCIgKyBwcHAuSXRlbTEgKyBcIlxcXFxSaWdodGFycm93IFwiICsgcHBwLkl0ZW0yLlRvWFlaKCkgKyBcIiRcIikpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzd2FwQ291bnRHcm91cC5LZXkgPT0gMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICh2YXIgYiBpbiBzd2FwQ291bnRHcm91cClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmVlSW5mbyA9IE1pbmQuR2V0V2luVHJlZUluZm8oYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0b3ZlciA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuVG9MaXN0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KHRyZWVJbmZvKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChsZWZ0b3Zlci5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb21tb25lc3RTd2FwcGVyID0gQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTWF4SW5kZXg8aW50PihFbnVtZXJhYmxlLlJhbmdlKDAsIGIuX3N0YWNrQ291bnQpLChnbG9iYWw6OlN5c3RlbS5GdW5jPGludCwgaW50PikodiA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkNvdW50PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KGxlZnRvdmVyLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGJvb2w+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ29udGFpbnModikpKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZWRBbGwgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KGxlZnRvdmVyLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGJvb2w+KShiYyA9PiBiYy5Td2FwVmVydGljZXMuQ29udGFpbnMoY29tbW9uZXN0U3dhcHBlcikpKS5Ub0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGVkID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuRGlzdGluY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KGhhbmRsZWRBbGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID09IDEgPyAtMSA6IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuRmlyc3Q8aW50PihBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5FeGNlcHQ8aW50PihiYy5Td2FwVmVydGljZXMsY29tbW9uZXN0U3dhcHBlcikpKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZChcIiRcXFxcS197XCIgKyBmaXhHcm91cC5LZXkgKyBcIixcIiArIChjb21tb25lc3RTd2FwcGVyLkdldFhZWkluZGV4KGIpICsgMSkgKyBcIn0oXCIgKyBiLlRvWFlaKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaW5nbGUgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0T3JEZWZhdWx0PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KGhhbmRsZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgYm9vbD4pKGJjID0+IGJjLlN3YXBWZXJ0aWNlcy5Db3VudCA9PSAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2luZ2xlICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuQXBwZW5kKFwiLFxcXFxpbmZ0eVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFN5c3RlbS5MaW5xLkVudW1lcmFibGUuV2hlcmU8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbz4oaGFuZGxlZCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBib29sPikoYmMgPT4gYmMuU3dhcFZlcnRpY2VzLkNvdW50ID4gMSkpLkNvdW50KCkgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZChcIixcIiArIEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkxpc3RpZnk8aW50PihTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLldoZXJlPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8+KGhhbmRsZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgYm9vbD4pKGJjID0+IGJjLlN3YXBWZXJ0aWNlcy5Db3VudCA+IDEpKS5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5GaXJzdDxpbnQ+KEFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlByb29mcy5FeHRlbnNpb25zLkV4Y2VwdDxpbnQ+KGJjLlN3YXBWZXJ0aWNlcyxjb21tb25lc3RTd2FwcGVyKSkpKS5TZWxlY3Q8aW50PigoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLkJyZWFrZXJDaG9pY2VJbmZvLCBpbnQ+KShiYyA9PiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuRXhjZXB0PGludD4oYmMuU3dhcFZlcnRpY2VzLGNvbW1vbmVzdFN3YXBwZXIpKS5HZXRYWVpJbmRleChiKSArIDEpKSxudWxsKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmQoXCIpXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcUmlnaHRhcnJvdyAkXCIgKyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PHN0cmluZz4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5PcmRlckJ5PGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8saW50PihoYW5kbGVkLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIGludD4pKGJjID0+IGJjLlN3YXBWZXJ0aWNlcy5Db3VudCA9PSAxID8gLTEgOiBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGludD4oQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuRXhjZXB0PGludD4oYmMuU3dhcFZlcnRpY2VzLGNvbW1vbmVzdFN3YXBwZXIpKSkpLlNlbGVjdDxzdHJpbmc+KChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6QWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuQnJlYWtlckNob2ljZUluZm8sIHN0cmluZz4pKGJjID0+IFwiJFwiICsgR2V0Q2hpbGRCb2FyZE5hbWUoYiwgYmMpICsgXCIkXCIpKSxudWxsKSArIFwiKENhc2UgXCIgKyBBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5Qcm9vZnMuRXh0ZW5zaW9ucy5MaXN0aWZ5PGludD4oU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5TZWxlY3Q8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbyxpbnQ+KGhhbmRsZWQsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5CcmVha2VyQ2hvaWNlSW5mbywgaW50PikoYmMgPT4gR2V0SGFuZGxlZENhc2VOdW1iZXIoYiwgYmMpKSkuRGlzdGluY3QoKS5PcmRlckJ5PGludD4oKGdsb2JhbDo6U3lzdGVtLkZ1bmM8aW50LCBpbnQ+KSh4eCA9PiB4eCkpKSArIFwiKS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIGJjIGluIGhhbmRsZWRBbGwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdG92ZXIuUmVtb3ZlKGJjKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9wZXJtdXRhdGlvbkxpbmtlZFtiXS5Db3VudCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoQWxnb3JpdGhtcy5GaXhlckJyZWFrZXIuS25vd2xlZGdlRW5naW5lLlNsaW0uU3VwZXIuUHJvb2ZzLkV4dGVuc2lvbnMuTGlzdGlmeTxzdHJpbmc+KFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6U3lzdGVtLlR1cGxlPGdsb2JhbDo6QWxnb3JpdGhtcy5VdGlsaXR5LlBlcm11dGF0aW9uLCBnbG9iYWw6OkFsZ29yaXRobXMuRml4ZXJCcmVha2VyLktub3dsZWRnZUVuZ2luZS5TbGltLlN1cGVyLlN1cGVyU2xpbUJvYXJkPixzdHJpbmc+KF9wZXJtdXRhdGlvbkxpbmtlZFtiXSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OlN5c3RlbS5UdXBsZTxnbG9iYWw6OkFsZ29yaXRobXMuVXRpbGl0eS5QZXJtdXRhdGlvbiwgZ2xvYmFsOjpBbGdvcml0aG1zLkZpeGVyQnJlYWtlci5Lbm93bGVkZ2VFbmdpbmUuU2xpbS5TdXBlci5TdXBlclNsaW1Cb2FyZD4sIHN0cmluZz4pKHBwcCA9PiBcIiRcIiArIHBwcC5JdGVtMSArIFwiXFxcXFJpZ2h0YXJyb3cgXCIgKyBwcHAuSXRlbTIuVG9YWVooKSArIFwiJFwiKSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNiLkFwcGVuZExpbmUoXCJcXFxcZW5ke3Byb29mfVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNiLlRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdHJpbmcgR2V0Q2hpbGRCb2FyZE5hbWUoU3VwZXJTbGltQm9hcmQgYiwgQnJlYWtlckNob2ljZUluZm8gYmMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRCb2FyZCA9IG5ldyBTdXBlclNsaW1Cb2FyZChiLl90cmFjZSwgYmMuQWxwaGEsIGJjLkJldGEsIGJjLlJlc3BvbnNlLCBiLl9zdGFja0NvdW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkQm9hcmQuVG9YWVooKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwidXNpbmcgQnJpZGdlLkh0bWw1O1xyXG51c2luZyBHcmFwaGljc0xheWVyO1xyXG51c2luZyBHcmFwaHM7XHJcbnVzaW5nIFN5c3RlbTtcclxudXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7XHJcbnVzaW5nIFN5c3RlbS5MaW5xO1xyXG51c2luZyBTeXN0ZW0uVGV4dDtcclxudXNpbmcgU3lzdGVtLlRocmVhZGluZy5UYXNrcztcclxudXNpbmcgR3JhcGhzQ29yZTtcclxudXNpbmcgQWxnb3JpdGhtcztcclxuXHJcbm5hbWVzcGFjZSBUZXN0XHJcbntcclxuICAgIHB1YmxpYyBjbGFzcyBUYWJDYW52YXMgOiBJQ2FudmFzXHJcbiAgICB7XHJcbiAgICAgICAgYm9vbCBfY3RybERvd247XHJcbiAgICAgICAgc3RyaW5nIF90aXRsZTtcclxuICAgICAgICBwdWJsaWMgSFRNTENhbnZhc0VsZW1lbnQgQ2FudmFzIHsgZ2V0OyBwcml2YXRlIHNldDsgfVxyXG4gICAgICAgIHB1YmxpYyBHcmFwaENhbnZhcyBHcmFwaENhbnZhcyB7IGdldDsgcHJpdmF0ZSBzZXQ7IH1cclxuXHJcbiAgICAgICAgc3RhdGljIExpc3Q8QVJHQj4gQ29sb3JzID0gQnJpZGdlLlNjcmlwdC5DYWxsRm9yKG5ldyBMaXN0PEFSR0I+KCksKF9vMjQpPT57X28yNC5BZGQobmV3IEFSR0IoMjU1LCAwLCAwKSk7X28yNC5BZGQobmV3IEFSR0IoMCwgMCwgMjU1KSk7X28yNC5BZGQobmV3IEFSR0IoMCwgMjU1LCAwKSk7X28yNC5BZGQobmV3IEFSR0IoMjU1LCAyNTUsIDApKTtfbzI0LkFkZChuZXcgQVJHQig5NSwgMTU4LCAxNjApKTtfbzI0LkFkZChuZXcgQVJHQigxMzksIDY5LCAxOSkpO19vMjQuQWRkKG5ldyBBUkdCKDMwLCAxNDQsIDI1NSkpO19vMjQuQWRkKG5ldyBBUkdCKDY0LCAyMjQsIDIwOCkpO19vMjQuQWRkKG5ldyBBUkdCKDIxOCwgMTEyLCAyMTQpKTtyZXR1cm4gX28yNDt9KTtcclxuXHJcbiAgICAgICAgcHVibGljIFRhYkNhbnZhcyhIVE1MQ2FudmFzRWxlbWVudCBjYW52YXMsIEdyYXBoQ2FudmFzIGdyYXBoQ2FudmFzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgR3JhcGhDYW52YXMgPSBncmFwaENhbnZhcztcclxuICAgICAgICAgICAgQ2FudmFzID0gY2FudmFzO1xyXG4gICAgICAgICAgICBHcmFwaENhbnZhcy5DYW52YXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgQ2FudmFzLk9uRGJsQ2xpY2sgKz0gT25Nb3VzZURvdWJsZUNsaWNrO1xyXG4gICAgICAgICAgICBDYW52YXMuT25Nb3VzZURvd24gKz0gT25Nb3VzZUJ1dHRvbkRvd247XHJcbiAgICAgICAgICAgIENhbnZhcy5Pbk1vdXNlVXAgKz0gT25Nb3VzZUJ1dHRvblVwO1xyXG4gICAgICAgICAgICBDYW52YXMuT25Nb3VzZU1vdmUgKz0gT25Nb3VzZU1vdmU7XHJcblxyXG4gICAgICAgICAgICBDYW52YXMuT25Ub3VjaENhbmNlbCArPSBPblRvdWNoQ2FuY2VsO1xyXG4gICAgICAgICAgICBDYW52YXMuT25Ub3VjaEVuZCArPSBPblRvdWNoRW5kO1xyXG4gICAgICAgICAgICBDYW52YXMuT25Ub3VjaEVudGVyICs9IE9uVG91Y2hFbnRlcjtcclxuICAgICAgICAgICAgQ2FudmFzLk9uVG91Y2hMZWF2ZSArPSBPblRvdWNoTGVhdmU7XHJcbiAgICAgICAgICAgIENhbnZhcy5PblRvdWNoTW92ZSArPSBPblRvdWNoTW92ZTtcclxuICAgICAgICAgICAgQ2FudmFzLk9uVG91Y2hTdGFydCArPSBPblRvdWNoU3RhcnQ7XHJcblxyXG4gICAgICAgICAgICBDYW52YXMuT25Mb2FkID0gT25Mb2FkO1xyXG5cclxuICAgICAgICAgICAgR3JhcGhDYW52YXMuR3JhcGhNb2RpZmllZCArPSBPbkdyYXBoTW9kaWZpZWQ7XHJcbiAgICAgICAgICAgIEdyYXBoQ2FudmFzLk5hbWVNb2RpZmllZCArPSBPbk5hbWVNb2RpZmllZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIE9uTGF5b3V0Q2hhbmdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIENhbnZhcy5XaWR0aCA9IFdpbmRvdy5Jbm5lcldpZHRoO1xyXG4gICAgICAgICAgICBDYW52YXMuSGVpZ2h0ID0gV2luZG93LklubmVySGVpZ2h0O1xyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uTmFtZU1vZGlmaWVkKHN0cmluZyBuYW1lKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGl0bGUgPSBuYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3JlZ2lvbiB0b3VjaFxyXG4gICAgICAgIHZvaWQgT25Ub3VjaENhbmNlbChUb3VjaEV2ZW50PEhUTUxDYW52YXNFbGVtZW50PiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICAgICAgdm9pZCBPblRvdWNoRW5kKFRvdWNoRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoTW91c2VCdXR0b25VcCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgTW91c2VCdXR0b25VcChlLkxheWVyWCwgZS5MYXllclksIE1vdXNlQnV0dG9uLkxlZnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2b2lkIE9uVG91Y2hFbnRlcihUb3VjaEV2ZW50PEhUTUxDYW52YXNFbGVtZW50PiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICAgICAgdm9pZCBPblRvdWNoTGVhdmUoVG91Y2hFdmVudDxIVE1MQ2FudmFzRWxlbWVudD4gZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZvaWQgT25Ub3VjaE1vdmUoVG91Y2hFdmVudDxIVE1MQ2FudmFzRWxlbWVudD4gZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChNb3VzZU1vdmVkICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBNb3VzZU1vdmVkKGUuTGF5ZXJYLCBlLkxheWVyWSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZvaWQgT25Ub3VjaFN0YXJ0KFRvdWNoRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoTW91c2VCdXR0b25Eb3duICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBNb3VzZUJ1dHRvbkRvd24oZS5MYXllclgsIGUuTGF5ZXJZLCBNb3VzZUJ1dHRvbi5MZWZ0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICAjcmVnaW9uIFNhZ2VcclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNYW51YWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2UoXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNocm9tYXRpY1BvbHlub21pYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2hyb21hdGljX3BvbHlub21pYWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR3JhcGg2KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdyYXBoNl9zdHJpbmcoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3BhcnNlNigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zcGFyc2U2X3N0cmluZygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDaHJvbWF0aWNOdW1iZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2hyb21hdGljX251bWJlcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDaHJvbWF0aWNRdWFzaXN5bW1ldHJpY0Z1bmN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNocm9tYXRpY19xdWFzaXN5bW1ldHJpY19mdW5jdGlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDaHJvbWF0aWNTeW1tZXRyaWNGdW5jdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jaHJvbWF0aWNfc3ltbWV0cmljX2Z1bmN0aW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUNvbG9yaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb2xvcmluZyA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5jb2xvcmluZygpXCIpO1xyXG4gICAgICAgICAgICB2YXIgY2MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxzdHJpbmcsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGNvbG9yaW5nLlNwbGl0KG5ld1tdIHsgXCJdLFwiIH0sIFN0cmluZ1NwbGl0T3B0aW9ucy5SZW1vdmVFbXB0eUVudHJpZXMpLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShzID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxpbnQ+KHMuUmVwbGFjZShcIltcIiwgXCJcIikuUmVwbGFjZShcIl1cIiwgXCJcIikuUmVwbGFjZShcIiBcIiwgXCJcIikuUmVwbGFjZShFbnZpcm9ubWVudC5OZXdMaW5lLCBcIlwiKS5SZXBsYWNlKFwiXFxcXG5cIiwgXCJcIikuU3BsaXQoJywnKSwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxzdHJpbmcsIGludD4pKHggPT4gaW50LlBhcnNlKHgpKSkuVG9MaXN0KCkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIGludCBpID0gMDtcclxuICAgICAgICAgICAgZm9yZWFjaCh2YXIgdiBpbiBHcmFwaENhbnZhcy5HcmFwaC5WZXJ0aWNlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBBbGdvcml0aG1zLkdlbmVyaWNFeHRlbnNpb25zLkZpcnN0SW5kZXg8Z2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGNjLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6U3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdDxpbnQ+LCBib29sPikobCA9PiBsLkNvbnRhaW5zKGkpKSk7XHJcbiAgICAgICAgICAgICAgICB2LkNvbG9yID0gQ29sb3JzW2MgJSBDb2xvcnMuQ291bnRdO1xyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNvbnZleGl0eVByb3BlcnRpZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY29udmV4aXR5X3Byb3BlcnRpZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSGFzSG9tb21vcnBoaXNtVG8oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaGFzX2hvbW9tb3JwaGlzbV90bygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCBhc3luYyB2b2lkIFNhZ2VJbmRlcGVuZGVudFNldCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY29sb3JpbmcgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcuaW5kZXBlbmRlbnRfc2V0KClcIik7XHJcbiAgICAgICAgICAgIHZhciBjYyA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxpbnQ+KGNvbG9yaW5nLlJlcGxhY2UoXCJbXCIsIFwiXCIpLlJlcGxhY2UoXCJdXCIsIFwiXCIpLlJlcGxhY2UoXCIgXCIsIFwiXCIpLlJlcGxhY2UoRW52aXJvbm1lbnQuTmV3TGluZSwgXCJcIikuUmVwbGFjZShcIlxcXFxuXCIsIFwiXCIpLlNwbGl0KCcsJyksKGdsb2JhbDo6U3lzdGVtLkZ1bmM8c3RyaW5nLCBpbnQ+KSh4ID0+IGludC5QYXJzZSh4KSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB2LkNvbG9yID0gVmVydGV4LkRlZmF1bHRGaWxsQnJ1c2hDb2xvcjtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIGNjKVxyXG4gICAgICAgICAgICAgICAgR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXNbdl0uQ29sb3IgPSBDb2xvcnNbMV07XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUluZGVwZW5kZW50U2V0T2ZSZXByZXNlbnRhdGl2ZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaW5kZXBlbmRlbnRfc2V0X29mX3JlcHJlc2VudGF0aXZlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1BlcmZlY3QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfcGVyZmVjdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNYXRjaGluZ1BvbHlub21pYWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubWF0Y2hpbmdfcG9seW5vbWlhbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNaW5vcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5taW5vcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VQYXRod2lkdGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucGF0aHdpZHRoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVJhbmtEZWNvbXBvc2l0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnJhbmtfZGVjb21wb3NpdGlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUb3BvbG9naWNhbE1pbm9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnRvcG9sb2dpY2FsX21pbm9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRyZWV3aWR0aCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy50cmVld2lkdGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVHV0dGVQb2x5bm9taWFsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnR1dHRlX3BvbHlub21pYWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgYXN5bmMgdm9pZCBTYWdlVmVydGV4Q292ZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9yaW5nID0gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhHcmFwaENhbnZhcy5HcmFwaCwgXCJHLnZlcnRleF9jb3ZlcigpXCIpO1xyXG4gICAgICAgICAgICB2YXIgY2MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxzdHJpbmcsaW50Pihjb2xvcmluZy5SZXBsYWNlKFwiW1wiLCBcIlwiKS5SZXBsYWNlKFwiXVwiLCBcIlwiKS5SZXBsYWNlKFwiIFwiLCBcIlwiKS5SZXBsYWNlKEVudmlyb25tZW50Lk5ld0xpbmUsIFwiXCIpLlJlcGxhY2UoXCJcXFxcblwiLCBcIlwiKS5TcGxpdCgnLCcpLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgaW50PikoeCA9PiBpbnQuUGFyc2UoeCkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIEdyYXBoQ2FudmFzLkdyYXBoLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgdi5Db2xvciA9IFZlcnRleC5EZWZhdWx0RmlsbEJydXNoQ29sb3I7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBjYylcclxuICAgICAgICAgICAgICAgIEdyYXBoQ2FudmFzLkdyYXBoLlZlcnRpY2VzW3ZdLkNvbG9yID0gQ29sb3JzWzFdO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VCaXBhcnRpdGVDb2xvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5iaXBhcnRpdGVfY29sb3IoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQmlwYXJ0aXRlU2V0cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5iaXBhcnRpdGVfc2V0cygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VHcmFwaDZTdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ3JhcGg2X3N0cmluZygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0RpcmVjdGVkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2RpcmVjdGVkKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUpvaW4oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuam9pbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTcGFyc2U2U3RyaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNwYXJzZTZfc3RyaW5nKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVRvRGlyZWN0ZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudG9fZGlyZWN0ZWQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVG9VbmRpcmVjdGVkKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnRvX3VuZGlyZWN0ZWQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlV3JpdGVUb0VwcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy53cml0ZV90b19lcHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2xpcXVlQ29tcGxleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbGlxdWVfY29tcGxleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCBhc3luYyB2b2lkIFNhZ2VDbGlxdWVNYXhpbXVtKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb2xvcmluZyA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5jbGlxdWVfbWF4aW11bSgpXCIpO1xyXG4gICAgICAgICAgICB2YXIgY2MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxzdHJpbmcsaW50Pihjb2xvcmluZy5SZXBsYWNlKFwiW1wiLCBcIlwiKS5SZXBsYWNlKFwiXVwiLCBcIlwiKS5SZXBsYWNlKFwiIFwiLCBcIlwiKS5SZXBsYWNlKEVudmlyb25tZW50Lk5ld0xpbmUsIFwiXCIpLlJlcGxhY2UoXCJcXFxcblwiLCBcIlwiKS5TcGxpdCgnLCcpLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgaW50PikoeCA9PiBpbnQuUGFyc2UoeCkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIEdyYXBoQ2FudmFzLkdyYXBoLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgdi5Db2xvciA9IFZlcnRleC5EZWZhdWx0RmlsbEJydXNoQ29sb3I7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBjYylcclxuICAgICAgICAgICAgICAgIEdyYXBoQ2FudmFzLkdyYXBoLlZlcnRpY2VzW3ZdLkNvbG9yID0gQ29sb3JzWzFdO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbGlxdWVOdW1iZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2xpcXVlX251bWJlcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbGlxdWVQb2x5bm9taWFsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZV9wb2x5bm9taWFsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsaXF1ZXNDb250YWluaW5nVmVydGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZXNfY29udGFpbmluZ192ZXJ0ZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2xpcXVlc0dldENsaXF1ZUJpcGFydGl0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbGlxdWVzX2dldF9jbGlxdWVfYmlwYXJ0aXRlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsaXF1ZXNHZXRNYXhDbGlxdWVHcmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbGlxdWVzX2dldF9tYXhfY2xpcXVlX2dyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsaXF1ZXNNYXhpbWFsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZXNfbWF4aW1hbCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbGlxdWVzTWF4aW11bSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbGlxdWVzX21heGltdW0oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2xpcXVlc051bWJlck9mKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsaXF1ZXNfbnVtYmVyX29mKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNsaXF1ZXNWZXJ0ZXhDbGlxdWVOdW1iZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2xpcXVlc192ZXJ0ZXhfY2xpcXVlX251bWJlcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VCb3VuZGVkT3V0ZGVncmVlT3JpZW50YXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYm91bmRlZF9vdXRkZWdyZWVfb3JpZW50YXRpb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQnJpZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5icmlkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlZ3JlZUNvbnN0cmFpbmVkU3ViZ3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVncmVlX2NvbnN0cmFpbmVkX3N1YmdyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUdvbW9yeUh1VHJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5nb21vcnlfaHVfdHJlZSgpLnBsb3QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTWluaW11bU91dGRlZ3JlZU9yaWVudGF0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm1pbmltdW1fb3V0ZGVncmVlX29yaWVudGF0aW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU9yaWVudGF0aW9ucygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5vcmllbnRhdGlvbnMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgYXN5bmMgdm9pZCBTYWdlUmFuZG9tU3Bhbm5pbmdUcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBlZGdlcyA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5yYW5kb21fc3Bhbm5pbmdfdHJlZSgpXCIpO1xyXG4gICAgICAgICAgICB2YXIgZWUgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxzdHJpbmcsZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KGVkZ2VzLlNwbGl0KG5ld1tdIHsgXCIpLFwiIH0sIFN0cmluZ1NwbGl0T3B0aW9ucy5SZW1vdmVFbXB0eUVudHJpZXMpLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgZ2xvYmFsOjpTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0PGludD4+KShzID0+IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PHN0cmluZyxpbnQ+KHMuUmVwbGFjZShcIltcIiwgXCJcIikuUmVwbGFjZShcIl1cIiwgXCJcIikuUmVwbGFjZShcIihcIixcIlwiKS5SZXBsYWNlKFwiKVwiLCBcIlwiKS5SZXBsYWNlKFwiIFwiLCBcIlwiKS5SZXBsYWNlKEVudmlyb25tZW50Lk5ld0xpbmUsIFwiXCIpLlJlcGxhY2UoXCJcXFxcblwiLCBcIlwiKS5SZXBsYWNlKFwiXFxcXG5cIixcIlwiKS5TcGxpdCgnLCcpLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgaW50PikoeCA9PiBpbnQuUGFyc2UoeCkpKS5Ub0xpc3QoKSkpLlRvTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gR3JhcGhDYW52YXMuR3JhcGguVmVydGljZXMpXHJcbiAgICAgICAgICAgICAgICB2LkNvbG9yID0gVmVydGV4LkRlZmF1bHRGaWxsQnJ1c2hDb2xvcjtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2godmFyIGUgaW4gR3JhcGhDYW52YXMuR3JhcGguRWRnZXMpXHJcbiAgICAgICAgICAgICAgICBlLkNvbG9yID0gbmV3IEdyYXBoaWNzTGF5ZXIuQVJHQigwLCAwLCAwKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBlIGluIGVlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdjEgPSBHcmFwaENhbnZhcy5HcmFwaC5WZXJ0aWNlc1tlWzBdXTtcclxuICAgICAgICAgICAgICAgIHZhciB2MiA9IEdyYXBoQ2FudmFzLkdyYXBoLlZlcnRpY2VzW2VbMV1dO1xyXG5TeXN0ZW0uTGlucS5FbnVtZXJhYmxlLkZpcnN0PGdsb2JhbDo6R3JhcGhzLkVkZ2U+KFxyXG4gICAgICAgICAgICAgICAgR3JhcGhDYW52YXMuR3JhcGguRWRnZXMsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuRWRnZSwgYm9vbD4pKHggPT4geC5WMSA9PSB2MSAmJiB4LlYyID09IHYyIHx8IHguVjEgPT0gdjIgJiYgeC5WMiA9PSB2MSkpLkNvbG9yID0gQ29sb3JzWzFdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNwYW5uaW5nVHJlZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3Bhbm5pbmdfdHJlZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3Ryb25nT3JpZW50YXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3Ryb25nX29yaWVudGF0aW9uKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUFwZXhWZXJ0aWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY29sb3JpbmcgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcuYXBleF92ZXJ0aWNlcygpXCIpO1xyXG4gICAgICAgICAgICB2YXIgY2MgPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLlNlbGVjdDxzdHJpbmcsaW50Pihjb2xvcmluZy5SZXBsYWNlKFwiW1wiLCBcIlwiKS5SZXBsYWNlKFwiXVwiLCBcIlwiKS5SZXBsYWNlKFwiIFwiLCBcIlwiKS5SZXBsYWNlKEVudmlyb25tZW50Lk5ld0xpbmUsIFwiXCIpLlJlcGxhY2UoXCJcXFxcblwiLCBcIlwiKS5TcGxpdCgnLCcpLChnbG9iYWw6OlN5c3RlbS5GdW5jPHN0cmluZywgaW50PikoeCA9PiBpbnQuUGFyc2UoeCkpKS5Ub0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciB2IGluIEdyYXBoQ2FudmFzLkdyYXBoLlZlcnRpY2VzKVxyXG4gICAgICAgICAgICAgICAgdi5Db2xvciA9IFZlcnRleC5EZWZhdWx0RmlsbEJydXNoQ29sb3I7XHJcblxyXG4gICAgICAgICAgICBmb3JlYWNoICh2YXIgdiBpbiBjYylcclxuICAgICAgICAgICAgICAgIEdyYXBoQ2FudmFzLkdyYXBoLlZlcnRpY2VzW3ZdLkNvbG9yID0gQ29sb3JzWzFdO1xyXG5cclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNBcGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2FwZXgoKVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQXJjVHJhbnNpdGl2ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19hcmNfdHJhbnNpdGl2ZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0FzdGVyb2lkYWxUcmlwbGVGcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2FzdGVyb2lkYWxfdHJpcGxlX2ZyZWUoKVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICBcclxuXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNCaWNvbm5lY3RlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19iaWNvbm5lY3RlZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0JpcGFydGl0ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19iaXBhcnRpdGUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNCbG9ja0dyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2Jsb2NrX2dyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQ2FydGVzaWFuUHJvZHVjdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19jYXJ0ZXNpYW5fcHJvZHVjdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0Rpc3RhbmNlUmVndWxhcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19kaXN0YW5jZV9yZWd1bGFyKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzRWRnZVRyYW5zaXRpdmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfZWRnZV90cmFuc2l0aXZlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzRXZlbkhvbGVGcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2V2ZW5faG9sZV9mcmVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzRm9yZXN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2ZvcmVzdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0hhbGZUcmFuc2l0aXZlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2hhbGZfdHJhbnNpdGl2ZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0xpbmVHcmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19saW5lX2dyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzTG9uZ0FudGlob2xlRnJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19sb25nX2FudGlob2xlX2ZyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNMb25nSG9sZUZyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfbG9uZ19ob2xlX2ZyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNPZGRIb2xlRnJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19vZGRfaG9sZV9mcmVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzT3ZlcmZ1bGwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfb3ZlcmZ1bGwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNQYXJ0aWFsQ3ViZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19wYXJ0aWFsX2N1YmUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNQcmltZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19wcmltZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1NlbWlTeW1tZXRyaWMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfc2VtaV9zeW1tZXRyaWMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNTcGxpdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19zcGxpdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1N0cm9uZ2x5UmVndWxhcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19zdHJvbmdseV9yZWd1bGFyKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzVHJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc190cmVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzVHJpYW5nbGVGcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3RyaWFuZ2xlX2ZyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNXZWFrbHlDaG9yZGFsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3dlYWtseV9jaG9yZGFsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU9kZEdpcnRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm9kZF9naXJ0aCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb3JlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jb3JlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VGcmFjdGlvbmFsQ2hyb21hdGljSW5kZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZnJhY3Rpb25hbF9jaHJvbWF0aWNfaW5kZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSGFzUGVyZmVjdE1hdGNoaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmhhc19wZXJmZWN0X21hdGNoaW5nKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUloYXJhWmV0YUZ1bmN0aW9uSW52ZXJzZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5paGFyYV96ZXRhX2Z1bmN0aW9uX2ludmVyc2UoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlS2lyY2hob2ZmU3ltYW56aWtQb2x5bm9taWFsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmtpcmNoaG9mZl9zeW1hbnppa19wb2x5bm9taWFsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUxvdmFzelRoZXRhKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmxvdmFzel90aGV0YSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNYWduaXR1ZGVGdW5jdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tYWduaXR1ZGVfZnVuY3Rpb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTWF0Y2hpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubWF0Y2hpbmcoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTWF4aW11bUF2ZXJhZ2VEZWdyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubWF4aW11bV9hdmVyYWdlX2RlZ3JlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNb2R1bGFyRGVjb21wb3NpdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tb2R1bGFyX2RlY29tcG9zaXRpb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlUGVyZmVjdE1hdGNoaW5ncygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5wZXJmZWN0X21hdGNoaW5ncygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTZWlkZWxBZGphY2VuY3lNYXRyaXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2VpZGVsX2FkamFjZW5jeV9tYXRyaXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTmV0d29ya3hHcmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5uZXR3b3JreF9ncmFwaCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJZ3JhcGhHcmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pZ3JhcGhfZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVG9EaWN0aW9uYXJ5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnRvX2RpY3Rpb25hcnkoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ29weSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jb3B5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUV4cG9ydFRvRmlsZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5leHBvcnRfdG9fZmlsZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBZGphY2VuY3lNYXRyaXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWRqYWNlbmN5X21hdHJpeCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJbmNpZGVuY2VNYXRyaXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaW5jaWRlbmNlX21hdHJpeCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEaXN0YW5jZU1hdHJpeCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kaXN0YW5jZV9tYXRyaXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlV2VpZ2h0ZWRBZGphY2VuY3lNYXRyaXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcud2VpZ2h0ZWRfYWRqYWNlbmN5X21hdHJpeCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VLaXJjaGhvZmZNYXRyaXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcua2lyY2hob2ZmX21hdHJpeCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VIYXNMb29wcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5oYXNfbG9vcHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWxsb3dzTG9vcHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWxsb3dzX2xvb3BzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFsbG93TG9vcHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWxsb3dfbG9vcHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTG9vcHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubG9vcHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTG9vcEVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmxvb3BfZWRnZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTnVtYmVyT2ZMb29wcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5udW1iZXJfb2ZfbG9vcHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTG9vcFZlcnRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmxvb3BfdmVydGljZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlUmVtb3ZlTG9vcHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmVtb3ZlX2xvb3BzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUhhc011bHRpcGxlRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaGFzX211bHRpcGxlX2VkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFsbG93c011bHRpcGxlRWRnZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWxsb3dzX211bHRpcGxlX2VkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFsbG93TXVsdGlwbGVFZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hbGxvd19tdWx0aXBsZV9lZGdlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNdWx0aXBsZUVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm11bHRpcGxlX2VkZ2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU5hbWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubmFtZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0ltbXV0YWJsZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19pbW11dGFibGUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlV2VpZ2h0ZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcud2VpZ2h0ZWQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQW50aXN5bW1ldHJpYygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hbnRpc3ltbWV0cmljKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlbnNpdHkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVuc2l0eSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VPcmRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5vcmRlcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTaXplKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNpemUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWRkVmVydGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFkZF92ZXJ0ZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQWRkVmVydGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWRkX3ZlcnRpY2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlbGV0ZVZlcnRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZWxldGVfdmVydGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlbGV0ZVZlcnRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRlbGV0ZV92ZXJ0aWNlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VIYXNWZXJ0ZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaGFzX3ZlcnRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VSYW5kb21WZXJ0ZXgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmFuZG9tX3ZlcnRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VSYW5kb21WZXJ0ZXhJdGVyYXRvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5yYW5kb21fdmVydGV4X2l0ZXJhdG9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVJhbmRvbUVkZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmFuZG9tX2VkZ2UoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlUmFuZG9tRWRnZUl0ZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnJhbmRvbV9lZGdlX2l0ZXJhdG9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVZlcnRleEJvdW5kYXJ5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnZlcnRleF9ib3VuZGFyeSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTZXRWZXJ0aWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zZXRfdmVydGljZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2V0VmVydGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNldF92ZXJ0ZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR2V0VmVydGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdldF92ZXJ0ZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR2V0VmVydGljZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ2V0X3ZlcnRpY2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVZlcnRleEl0ZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnZlcnRleF9pdGVyYXRvcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VOZWlnaGJvckl0ZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLm5laWdoYm9yX2l0ZXJhdG9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVZlcnRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnZlcnRpY2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU5laWdoYm9ycygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5uZWlnaGJvcnMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTWVyZ2VWZXJ0aWNlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tZXJnZV92ZXJ0aWNlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBZGRFZGdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFkZF9lZGdlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFkZEVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFkZF9lZGdlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTdWJkaXZpZGVFZGdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnN1YmRpdmlkZV9lZGdlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVN1YmRpdmlkZUVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnN1YmRpdmlkZV9lZGdlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEZWxldGVFZGdlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRlbGV0ZV9lZGdlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlbGV0ZUVkZ2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRlbGV0ZV9lZGdlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEZWxldGVNdWx0aWVkZ2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVsZXRlX211bHRpZWRnZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTZXRFZGdlTGFiZWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2V0X2VkZ2VfbGFiZWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSGFzRWRnZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5oYXNfZWRnZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5lZGdlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFZGdlQm91bmRhcnkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZWRnZV9ib3VuZGFyeSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFZGdlSXRlcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZWRnZV9pdGVyYXRvcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VFZGdlc0luY2lkZW50KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVkZ2VzX2luY2lkZW50KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVkZ2VMYWJlbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5lZGdlX2xhYmVsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVkZ2VMYWJlbHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZWRnZV9sYWJlbHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlUmVtb3ZlTXVsdGlwbGVFZGdlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5yZW1vdmVfbXVsdGlwbGVfZWRnZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2xlYXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2xlYXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVncmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRlZ3JlZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBdmVyYWdlRGVncmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmF2ZXJhZ2VfZGVncmVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlZ3JlZUhpc3RvZ3JhbSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZWdyZWVfaGlzdG9ncmFtKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlZ3JlZUl0ZXJhdG9yKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRlZ3JlZV9pdGVyYXRvcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VEZWdyZWVTZXF1ZW5jZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kZWdyZWVfc2VxdWVuY2UoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlUmFuZG9tU3ViZ3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmFuZG9tX3N1YmdyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFkZENsaXF1ZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hZGRfY2xpcXVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUFkZEN5Y2xlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFkZF9jeWNsZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBZGRQYXRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmFkZF9wYXRoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNvbXBsZW1lbnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY29tcGxlbWVudCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VMaW5lR3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubGluZV9ncmFwaCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUb1NpbXBsZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy50b19zaW1wbGUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlzam9pbnRVbmlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kaXNqb2ludF91bmlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VVbmlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy51bmlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VSZWxhYmVsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnJlbGFiZWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGVncmVlVG9DZWxsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRlZ3JlZV90b19jZWxsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVN1YmdyYXBoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnN1YmdyYXBoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzU3ViZ3JhcGgoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfc3ViZ3JhcGgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2FydGVzaWFuUHJvZHVjdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jYXJ0ZXNpYW5fcHJvZHVjdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUZW5zb3JQcm9kdWN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnRlbnNvcl9wcm9kdWN0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUxleGljb2dyYXBoaWNQcm9kdWN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmxleGljb2dyYXBoaWNfcHJvZHVjdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTdHJvbmdQcm9kdWN0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnN0cm9uZ19wcm9kdWN0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURpc2p1bmN0aXZlUHJvZHVjdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kaXNqdW5jdGl2ZV9wcm9kdWN0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUV1bGVyaWFuT3JpZW50YXRpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZXVsZXJpYW5fb3JpZW50YXRpb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRXVsZXJpYW5DaXJjdWl0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmV1bGVyaWFuX2NpcmN1aXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ3ljbGVCYXNpcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jeWNsZV9iYXNpcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBbGxQYXRocygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5hbGxfcGF0aHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVHJpYW5nbGVzQ291bnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudHJpYW5nbGVzX2NvdW50KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNwZWN0cnVtKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNwZWN0cnVtKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVpZ2VudmVjdG9ycygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5laWdlbnZlY3RvcnMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWlnZW5zcGFjZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZWlnZW5zcGFjZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2x1c3RlclRyaWFuZ2xlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbHVzdGVyX3RyaWFuZ2xlcygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDbHVzdGVyaW5nQXZlcmFnZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbHVzdGVyaW5nX2F2ZXJhZ2UoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2x1c3RlcmluZ0NvZWZmKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNsdXN0ZXJpbmdfY29lZmYoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2x1c3RlclRyYW5zaXRpdml0eSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jbHVzdGVyX3RyYW5zaXRpdml0eSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTemVnZWRJbmRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zemVnZWRfaW5kZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ29hcnNlc3RFcXVpdGFibGVSZWZpbmVtZW50KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvYXJzZXN0X2VxdWl0YWJsZV9yZWZpbmVtZW50KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUF1dG9tb3JwaGlzbUdyb3VwKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmF1dG9tb3JwaGlzbV9ncm91cCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1ZlcnRleFRyYW5zaXRpdmUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfdmVydGV4X3RyYW5zaXRpdmUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNJc29tb3JwaGljKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2lzb21vcnBoaWMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ2Fub25pY2FsTGFiZWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2Fub25pY2FsX2xhYmVsKCkucGxvdCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0NheWxleSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19jYXlsZXkoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNFdWxlcmlhbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19ldWxlcmlhbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc1BsYW5hcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19wbGFuYXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNDaXJjdWxhclBsYW5hcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19jaXJjdWxhcl9wbGFuYXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNSZWd1bGFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX3JlZ3VsYXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNDaG9yZGFsKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2Nob3JkYWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNDaXJjdWxhbnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfY2lyY3VsYW50KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzSW50ZXJ2YWwoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfaW50ZXJ2YWwoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNHYWxsYWlUcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2dhbGxhaV90cmVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQ2xpcXVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2NsaXF1ZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0N5Y2xlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmlzX2N5Y2xlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzSW5kZXBlbmRlbnRTZXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfaW5kZXBlbmRlbnRfc2V0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzVHJhbnNpdGl2ZWx5UmVkdWNlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc190cmFuc2l0aXZlbHlfcmVkdWNlZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0VxdWl0YWJsZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19lcXVpdGFibGUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQnJlYWR0aEZpcnN0U2VhcmNoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmJyZWFkdGhfZmlyc3Rfc2VhcmNoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURlcHRoRmlyc3RTZWFyY2goKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGVwdGhfZmlyc3Rfc2VhcmNoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUxleEJGUygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5sZXhfQkZTKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNlbnRyYWxpdHlCZXR3ZWVubmVzcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jZW50cmFsaXR5X2JldHdlZW5uZXNzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNlbnRyYWxpdHlDbG9zZW5lc3MoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuY2VudHJhbGl0eV9jbG9zZW5lc3MoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlzdGFuY2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGlzdGFuY2UoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlzdGFuY2VBbGxQYWlycygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kaXN0YW5jZV9hbGxfcGFpcnMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlzdGFuY2VzRGlzdHJpYnV0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmRpc3RhbmNlc19kaXN0cmlidXRpb24oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWNjZW50cmljaXR5KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVjY2VudHJpY2l0eSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VSYWRpdXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucmFkaXVzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNlbnRlcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jZW50ZXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlhbWV0ZXIoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGlhbWV0ZXIoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRGlzdGFuY2VHcmFwaCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5kaXN0YW5jZV9ncmFwaCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VHaXJ0aCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5naXJ0aCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VQZXJpcGhlcnkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucGVyaXBoZXJ5KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNob3J0ZXN0UGF0aCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zaG9ydGVzdF9wYXRoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNob3J0ZXN0UGF0aExlbmd0aCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zaG9ydGVzdF9wYXRoX2xlbmd0aCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTaG9ydGVzdFBhdGhzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNob3J0ZXN0X3BhdGhzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNob3J0ZXN0UGF0aExlbmd0aHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2hvcnRlc3RfcGF0aF9sZW5ndGhzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNob3J0ZXN0UGF0aEFsbFBhaXJzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNob3J0ZXN0X3BhdGhfYWxsX3BhaXJzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVdpZW5lckluZGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLndpZW5lcl9pbmRleCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VBdmVyYWdlRGlzdGFuY2UoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYXZlcmFnZV9kaXN0YW5jZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0Nvbm5lY3RlZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19jb25uZWN0ZWQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ29ubmVjdGVkQ29tcG9uZW50cygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jb25uZWN0ZWRfY29tcG9uZW50cygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb25uZWN0ZWRDb21wb25lbnRzTnVtYmVyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvbm5lY3RlZF9jb21wb25lbnRzX251bWJlcigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb25uZWN0ZWRDb21wb25lbnRzU3ViZ3JhcGhzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvbm5lY3RlZF9jb21wb25lbnRzX3N1YmdyYXBocygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VDb25uZWN0ZWRDb21wb25lbnRDb250YWluaW5nVmVydGV4KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvbm5lY3RlZF9jb21wb25lbnRfY29udGFpbmluZ192ZXJ0ZXgoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlQ29ubmVjdGVkQ29tcG9uZW50c1NpemVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmNvbm5lY3RlZF9jb21wb25lbnRzX3NpemVzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUJsb2Nrc0FuZEN1dFZlcnRpY2VzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmJsb2Nrc19hbmRfY3V0X3ZlcnRpY2VzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUJsb2Nrc0FuZEN1dHNUcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmJsb2Nrc19hbmRfY3V0c190cmVlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUlzQ3V0RWRnZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19jdXRfZWRnZSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VJc0N1dFZlcnRleCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19jdXRfdmVydGV4KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVkZ2VDdXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZWRnZV9jdXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVmVydGV4Q3V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnZlcnRleF9jdXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRmxvdygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5mbG93KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUVkZ2VEaXNqb2ludFBhdGhzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmVkZ2VfZGlzam9pbnRfcGF0aHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVmVydGV4RGlzam9pbnRQYXRocygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy52ZXJ0ZXhfZGlzam9pbnRfcGF0aHMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZUNvbm5lY3Rpdml0eSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5lZGdlX2Nvbm5lY3Rpdml0eSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VWZXJ0ZXhDb25uZWN0aXZpdHkoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudmVydGV4X2Nvbm5lY3Rpdml0eSgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUcmFuc2l0aXZlQ2xvc3VyZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy50cmFuc2l0aXZlX2Nsb3N1cmUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlVHJhbnNpdGl2ZVJlZHVjdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy50cmFuc2l0aXZlX3JlZHVjdGlvbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VNaW5TcGFubmluZ1RyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubWluX3NwYW5uaW5nX3RyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3Bhbm5pbmdUcmVlc0NvdW50KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNwYW5uaW5nX3RyZWVzX2NvdW50KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURvbWluYXRvclRyZWUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZG9taW5hdG9yX3RyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2V0RW1iZWRkaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNldF9lbWJlZGRpbmcoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR2V0RW1iZWRkaW5nKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdldF9lbWJlZGRpbmcoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRmFjZXMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZmFjZXMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR2V0UG9zKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdldF9wb3MoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2V0UG9zKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNldF9wb3MoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU2V0UGxhbmFyUG9zaXRpb25zKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLnNldF9wbGFuYXJfcG9zaXRpb25zKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgXHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNEcmF3bkZyZWVPZkVkZ2VDcm9zc2luZ3MoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuaXNfZHJhd25fZnJlZV9vZl9lZGdlX2Nyb3NzaW5ncygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VMYXRleE9wdGlvbnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubGF0ZXhfb3B0aW9ucygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTZXRMYXRleE9wdGlvbnMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2V0X2xhdGV4X29wdGlvbnMoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTGF5b3V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmxheW91dCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgIFxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUdyYXBocGxvdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5ncmFwaHBsb3QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlUGxvdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5wbG90KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNob3coKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc2hvdygpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VQbG90M2QoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcucGxvdDNkKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVNob3czZCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zaG93M2QoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlR3JhcGh2aXpTdHJpbmcoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ3JhcGh2aXpfc3RyaW5nKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUdyYXBodml6VG9GaWxlTmFtZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZ3JhcGh2aXpfdG9fZmlsZV9uYW1lZCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VTdGVpbmVyVHJlZSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5zdGVpbmVyX3RyZWUoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlRWRnZURpc2pvaW50U3Bhbm5pbmdUcmVlcygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5lZGdlX2Rpc2pvaW50X3NwYW5uaW5nX3RyZWVzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUZlZWRiYWNrVmVydGV4U2V0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmZlZWRiYWNrX3ZlcnRleF9zZXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlTXVsdGl3YXlDdXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcubXVsdGl3YXlfY3V0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU1heEN1dCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tYXhfY3V0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUxvbmdlc3RQYXRoKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmxvbmdlc3RfcGF0aCgpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VUcmF2ZWxpbmdTYWxlc21hblByb2JsZW0oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcudHJhdmVsaW5nX3NhbGVzbWFuX3Byb2JsZW0oKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlSXNIYW1pbHRvbmlhbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5pc19oYW1pbHRvbmlhbigpXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCB2b2lkIFNhZ2VIYW1pbHRvbmlhbkN5Y2xlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmhhbWlsdG9uaWFuX2N5Y2xlKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUhhbWlsdG9uaWFuUGF0aCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5oYW1pbHRvbmlhbl9wYXRoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZU11bHRpY29tbW9kaXR5RmxvdygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5tdWx0aWNvbW1vZGl0eV9mbG93KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURpc2pvaW50Um91dGVkUGF0aHMoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZGlzam9pbnRfcm91dGVkX3BhdGhzKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZURvbWluYXRpbmdTZXQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuZG9taW5hdGluZ19zZXQoKVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW50ZXJuYWwgdm9pZCBTYWdlU3ViZ3JhcGhTZWFyY2goKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3ViZ3JhcGhfc2VhcmNoKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVN1YmdyYXBoU2VhcmNoQ291bnQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3ViZ3JhcGhfc2VhcmNoX2NvdW50KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZVN1YmdyYXBoU2VhcmNoSXRlcmF0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgQXBwLkFza1NhZ2VBdXRvKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuc3ViZ3JhcGhfc2VhcmNoX2l0ZXJhdG9yKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUNoYXJhY3RlcmlzdGljUG9seW5vbWlhbCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBBcHAuQXNrU2FnZUF1dG8oXCJHID0gR3JhcGgoJ1wiICsgR3JhcGhDYW52YXMuR3JhcGguR2V0RWRnZVdlaWdodHMoKS5Ub0dyYXBoNigpICsgXCInKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5jaGFyYWN0ZXJpc3RpY19wb2x5bm9taWFsKClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIHZvaWQgU2FnZUdlbnVzKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEFwcC5Bc2tTYWdlQXV0byhcIkcgPSBHcmFwaCgnXCIgKyBHcmFwaENhbnZhcy5HcmFwaC5HZXRFZGdlV2VpZ2h0cygpLlRvR3JhcGg2KCkgKyBcIicpXCIgKyBFbnZpcm9ubWVudC5OZXdMaW5lICsgXCJHLmdlbnVzKClcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjcmVnaW9uIExheW91dFxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUxheW91dFNwcmluZygpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGF5b3V0ID0gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhHcmFwaENhbnZhcy5HcmFwaCwgXCJHLmxheW91dF9zcHJpbmcoKVwiKTtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFNjYWxlKEV4dHJhY3RQb2ludHMobGF5b3V0KSk7XHJcbiAgICAgICAgICAgIGF3YWl0IExheW91dEdyYXBoKHBvc2l0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcm5hbCBhc3luYyB2b2lkIFNhZ2VMYXlvdXRSYW5rZWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxheW91dCA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoR3JhcGhDYW52YXMuR3JhcGgsIFwiRy5sYXlvdXRfcmFua2VkKClcIik7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbnMgPSBTY2FsZShFeHRyYWN0UG9pbnRzKGxheW91dCkpO1xyXG4gICAgICAgICAgICBhd2FpdCBMYXlvdXRHcmFwaChwb3NpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCBhc3luYyB2b2lkIFNhZ2VMYXlvdXRFeHRlbmRSYW5kb21seSgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbGF5b3V0ID0gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhHcmFwaENhbnZhcy5HcmFwaCwgXCJHLmxheW91dF9leHRlbmRfcmFuZG9tbHkoKVwiKTtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFNjYWxlKEV4dHJhY3RQb2ludHMobGF5b3V0KSk7XHJcbiAgICAgICAgICAgIGF3YWl0IExheW91dEdyYXBoKHBvc2l0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUxheW91dENpcmN1bGFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsYXlvdXQgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcubGF5b3V0X2NpcmN1bGFyKClcIik7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbnMgPSBTY2FsZShFeHRyYWN0UG9pbnRzKGxheW91dCkpO1xyXG4gICAgICAgICAgICBhd2FpdCBMYXlvdXRHcmFwaChwb3NpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnRlcm5hbCBhc3luYyB2b2lkIFNhZ2VMYXlvdXRUcmVlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsYXlvdXQgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcubGF5b3V0X3RyZWUoKVwiKTtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFNjYWxlKEV4dHJhY3RQb2ludHMobGF5b3V0KSk7XHJcbiAgICAgICAgICAgIGF3YWl0IExheW91dEdyYXBoKHBvc2l0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGludGVybmFsIGFzeW5jIHZvaWQgU2FnZUxheW91dEdyYXBodml6KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsYXlvdXQgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcubGF5b3V0X2dyYXBodml6KClcIik7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbnMgPSBTY2FsZShFeHRyYWN0UG9pbnRzKGxheW91dCkpO1xyXG4gICAgICAgICAgICBhd2FpdCBMYXlvdXRHcmFwaChwb3NpdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJuYWwgYXN5bmMgdm9pZCBTYWdlTGF5b3V0UGxhbmFyKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsYXlvdXQgPSBhd2FpdCBBcHAuQXNrU2FnZUFzeW5jKEdyYXBoQ2FudmFzLkdyYXBoLCBcIkcubGF5b3V0X3BsYW5hcigpXCIpO1xyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb25zID0gU2NhbGUoRXh0cmFjdFBvaW50cyhsYXlvdXQpKTtcclxuICAgICAgICAgICAgYXdhaXQgTGF5b3V0R3JhcGgocG9zaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgI2VuZHJlZ2lvblxyXG5cclxuICAgICAgICBzdGF0aWMgaW50ZXJuYWwgYXN5bmMgdm9pZCBTYWdlTG9hZE5hbWVkR3JhcGgoc3RyaW5nIG5hbWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYSA9IGF3YWl0IEFwcC5Bc2tTYWdlQXN5bmMoXCJHID0gZ3JhcGhzLlwiICsgbmFtZSArIFwiKClcIiArIEVudmlyb25tZW50Lk5ld0xpbmUgKyBcIkcuYWRqYWNlbmN5X21hdHJpeCgpLnN0cigpXCIpO1xyXG4gICAgICAgICAgICB2YXIgbGF5b3V0ID0gYXdhaXQgQXBwLkFza1NhZ2VBc3luYyhcIkcgPSBncmFwaHMuXCIgKyBuYW1lICsgXCIoKVwiICsgRW52aXJvbm1lbnQuTmV3TGluZSArIFwiRy5sYXlvdXQoKVwiKTtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFNjYWxlKEV4dHJhY3RQb2ludHMobGF5b3V0KSk7XHJcbiAgICAgICAgICAgIHZhciBhZGogPSBQYXJzZUFkamFjZW5jeU1hdHJpeChhKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBnID0gbmV3IEFsZ29yaXRobXMuR3JhcGgoYWRqKTtcclxuXHJcbiAgICAgICAgICAgIEFwcC5OZXdUYWIobmFtZSwgbmV3IEdyYXBocy5HcmFwaChnLCBwb3NpdGlvbnMsIGZhbHNlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgc3RhdGljIExpc3Q8VmVjdG9yPiBTY2FsZShJRW51bWVyYWJsZTxWZWN0b3I+IHBvc2l0aW9ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBsID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5Ub0xpc3Q8Z2xvYmFsOjpHcmFwaHMuVmVjdG9yPihwb3NpdGlvbnMpO1xyXG4gICAgICAgICAgICB2YXIgbWluWCA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTWluPGdsb2JhbDo6R3JhcGhzLlZlY3Rvcj4obCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZWN0b3IsIGRvdWJsZT4pKHAgPT4gcC5YKSk7XHJcbiAgICAgICAgICAgIHZhciBtaW5ZID0gU3lzdGVtLkxpbnEuRW51bWVyYWJsZS5NaW48Z2xvYmFsOjpHcmFwaHMuVmVjdG9yPihsLChnbG9iYWw6OlN5c3RlbS5GdW5jPGdsb2JhbDo6R3JhcGhzLlZlY3RvciwgZG91YmxlPikocCA9PiBwLlkpKTtcclxuICAgICAgICAgICAgdmFyIG1heFggPSBTeXN0ZW0uTGlucS5FbnVtZXJhYmxlLk1heDxnbG9iYWw6OkdyYXBocy5WZWN0b3I+KGwsKGdsb2JhbDo6U3lzdGVtLkZ1bmM8Z2xvYmFsOjpHcmFwaHMuVmVjdG9yLCBkb3VibGU+KShwID0+IHAuWCkpO1xyXG4gICAgICAgICAgICB2YXIgbWF4WSA9IFN5c3RlbS5MaW5xLkVudW1lcmFibGUuTWF4PGdsb2JhbDo6R3JhcGhzLlZlY3Rvcj4obCwoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZWN0b3IsIGRvdWJsZT4pKHAgPT4gcC5ZKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdyA9IG1heFggLSBtaW5YO1xyXG4gICAgICAgICAgICB2YXIgaCA9IG1heFkgLSBtaW5ZO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFN5c3RlbS5MaW5xLkVudW1lcmFibGUuU2VsZWN0PGdsb2JhbDo6R3JhcGhzLlZlY3RvcixnbG9iYWw6OkdyYXBocy5WZWN0b3I+KHBvc2l0aW9ucywoZ2xvYmFsOjpTeXN0ZW0uRnVuYzxnbG9iYWw6OkdyYXBocy5WZWN0b3IsIGdsb2JhbDo6R3JhcGhzLlZlY3Rvcj4pKHAgPT4gbmV3IFZlY3RvcigwLjEgKyAwLjggKiAocC5YIC0gbWluWCkgLyB3LCAwLjEgKyAwLjggKiAocC5ZIC0gbWluWSkgLyBoKSkpLlRvTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXN5bmMgVGFzayBMYXlvdXRHcmFwaChMaXN0PFZlY3Rvcj4gcG9zaXRpb25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgU25hcFBvc2l0aW9uc1RvR3JpZChwb3NpdGlvbnMpO1xyXG4gICAgICAgICAgICB2YXIgYSA9IG5ldyBMYXlvdXRBbmltYXRpb24oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgR3JhcGhDYW52YXMuSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0sICgpID0+IEdyYXBoQ2FudmFzLkludmFsaWRhdGUoKSwgcG9zaXRpb25zLCBHcmFwaENhbnZhcy5HcmFwaCk7XHJcblxyXG4gICAgICAgICAgICBHcmFwaENhbnZhcy5TbmFwVG9HcmlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGF3YWl0IGEuQW5pbWF0ZSgpO1xyXG4gICAgICAgICAgICBHcmFwaENhbnZhcy5TbmFwVG9HcmlkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgU25hcFBvc2l0aW9uc1RvR3JpZChMaXN0PFZlY3Rvcj4gcG9zaXRpb25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwb3NpdGlvbnMuQ291bnQ7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb25zW2ldLlggPSAoZmxvYXQpKEdyYXBoQ2FudmFzLl9ncmlkU3RlcCAqIE1hdGguUm91bmQocG9zaXRpb25zW2ldLlggLyBHcmFwaENhbnZhcy5fZ3JpZFN0ZXApKTtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uc1tpXS5ZID0gKGZsb2F0KShHcmFwaENhbnZhcy5fZ3JpZFN0ZXAgKiBNYXRoLlJvdW5kKHBvc2l0aW9uc1tpXS5ZIC8gR3JhcGhDYW52YXMuX2dyaWRTdGVwKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgT25HcmFwaE1vZGlmaWVkKEdyYXBocy5HcmFwaCBnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgSW52YWxpZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBPbkxvYWQoRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uTW91c2VNb3ZlKE1vdXNlRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY3RybERvd24gPSBlLkN0cmxLZXk7XHJcbiAgICAgICAgICAgIGlmIChNb3VzZU1vdmVkICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICBNb3VzZU1vdmVkKGUuTGF5ZXJYLCBlLkxheWVyWSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uTW91c2VCdXR0b25Eb3duKE1vdXNlRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBfY3RybERvd24gPSBlLkN0cmxLZXk7XHJcbiAgICAgICAgICAgLy8gQ2FudmFzLlNldENhcHR1cmUodHJ1ZSk7ICAvLyBjaHJvbWUgZG9lcyBub3Qgc2VlbSB0byBzdXBwb3J0IHRoaXMsIHdoYXQ/XHJcblxyXG4gICAgICAgICAgICBpZiAoZS5TaGlmdEtleSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKE1vdXNlQnV0dG9uRG91YmxlQ2xpY2tlZCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE1vdXNlQnV0dG9uRG91YmxlQ2xpY2tlZChlLkxheWVyWCwgZS5MYXllclksIGUuQnV0dG9uID09IDAgPyBNb3VzZUJ1dHRvbi5MZWZ0IDogTW91c2VCdXR0b24uUmlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKE1vdXNlQnV0dG9uRG93biAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIE1vdXNlQnV0dG9uRG93bihlLkxheWVyWCwgZS5MYXllclksIGUuQnV0dG9uID09IDAgPyBNb3VzZUJ1dHRvbi5MZWZ0IDogTW91c2VCdXR0b24uUmlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2b2lkIE9uTW91c2VCdXR0b25VcChNb3VzZUV2ZW50PEhUTUxDYW52YXNFbGVtZW50PiBlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2N0cmxEb3duID0gZS5DdHJsS2V5O1xyXG4gICAgICAgICAgIC8vIENhbnZhcy5TZXRDYXB0dXJlKGZhbHNlKTtcclxuICAgICAgICAgICAgaWYgKGUuU2hpZnRLZXkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKE1vdXNlQnV0dG9uVXAgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIE1vdXNlQnV0dG9uVXAoZS5MYXllclgsIGUuTGF5ZXJZLCBlLkJ1dHRvbiA9PSAwID8gTW91c2VCdXR0b24uTGVmdCA6IE1vdXNlQnV0dG9uLlJpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlLkN0cmxLZXkgJiYgZS5BbHRLZXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEFwcC5Bc2tTYWdlKFwiRyA9IEdyYXBoKCdcIiArIEdyYXBoQ2FudmFzLkdyYXBoLkdldEVkZ2VXZWlnaHRzKCkuVG9HcmFwaDYoKSArIFwiJylcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZvaWQgT25Nb3VzZURvdWJsZUNsaWNrKE1vdXNlRXZlbnQ8SFRNTENhbnZhc0VsZW1lbnQ+IGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHZvaWQgU2V0Q2xpcGJvYXJkVGV4dChzdHJpbmcgdGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RyaW5nIEdldENsaXBib2FyZFRleHQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYm9vbCBJc0NvbnRyb2xLZXlEb3duXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBnZXQgeyByZXR1cm4gX2N0cmxEb3duOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuSUVudW1lcmFibGU8b2JqZWN0PiBTZWxlY3RlZE9iamVjdHNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHNldFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB2b2lkIEludmFsaWRhdGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGdyYXBoaWNzID0gbmV3IEdyYXBoaWNzKENhbnZhcyk7XHJcbiAgICAgICAgICAgIEdyYXBoQ2FudmFzLlBhaW50KGdyYXBoaWNzLCBDYW52YXMuV2lkdGgsIENhbnZhcy5IZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0cmluZyBUaXRsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIF90aXRsZTsgfVxyXG4gICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgX3RpdGxlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBJbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBldmVudCBBY3Rpb248ZG91YmxlLCBkb3VibGU+IE1vdXNlTW92ZWQ7XHJcbiAgICAgICAgcHVibGljIGV2ZW50IEFjdGlvbjxkb3VibGUsIGRvdWJsZSwgTW91c2VCdXR0b24+IE1vdXNlQnV0dG9uVXA7XHJcbiAgICAgICAgcHVibGljIGV2ZW50IEFjdGlvbjxkb3VibGUsIGRvdWJsZSwgTW91c2VCdXR0b24+IE1vdXNlQnV0dG9uRG93bjtcclxuICAgICAgICBwdWJsaWMgZXZlbnQgQWN0aW9uPGRvdWJsZSwgZG91YmxlLCBNb3VzZUJ1dHRvbj4gTW91c2VCdXR0b25Eb3VibGVDbGlja2VkO1xyXG5cclxuICAgICAgICBzdGF0aWMgSUVudW1lcmFibGU8VmVjdG9yPiBFeHRyYWN0UG9pbnRzKHN0cmluZyB4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGogPSB4LkluZGV4T2YoXCJbXCIsIGkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGogPCAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGogPSB4LkluZGV4T2YoXCIoXCIsIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqIDwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpID0gajtcclxuXHJcbiAgICAgICAgICAgICAgICBqID0geC5JbmRleE9mKFwiXVwiLCBpKTtcclxuICAgICAgICAgICAgICAgIGlmIChqIDwgMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBqID0geC5JbmRleE9mKFwiKVwiLCBpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaiA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSB4LlN1YnN0cmluZyhpLCBqIC0gaSkuU3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHJldHVybiBuZXcgVmVjdG9yKGRvdWJsZS5QYXJzZShwWzBdLlRyaW0oJ1snLCAnXScsICcoJywgJyknKSksIGRvdWJsZS5QYXJzZShwWzFdLlRyaW0oJ1snLCAnXScsICcoJywgJyknKSkpO1xyXG4gICAgICAgICAgICAgICAgaSA9IGo7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBib29sWyxdIFBhcnNlQWRqYWNlbmN5TWF0cml4KHN0cmluZyBhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGJpdHMgPSBhLlJlcGxhY2UoXCInXCIsIFwiXCIpLlNwbGl0KG5ld1tdIHsgXCIsXCIsIFwiXFxcXFxcXFxuXCIsIFwiW1wiLCBcIl1cIiwgXCIgXCIgfSwgU3RyaW5nU3BsaXRPcHRpb25zLlJlbW92ZUVtcHR5RW50cmllcyk7XHJcbiAgICAgICAgICAgIHZhciBuID0gKGludClNYXRoLlNxcnQoYml0cy5MZW5ndGgpO1xyXG4gICAgICAgICAgICB2YXIgYWRqID0gbmV3IGJvb2xbbiwgbl07XHJcblxyXG4gICAgICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgICAgIGZvcmVhY2ggKHZhciBiIGluIGJpdHMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGFkaltpIC8gbiwgaSAlIG5dID0gYiA9PSBcIjFcIjtcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFkajtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl0KfQo=
